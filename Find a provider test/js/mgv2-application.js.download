(function(global){global.maxMobileScreenWidth=992;global.getUrlParams=function(){var hashes=(window.location.href.split("?")[1]||"").split("&");var params={};for(var i=0;i<hashes.length;i++){var hash=hashes[i].split("=");params[hash[0]]=hash[1];}return params;};global.getAndroidVersion=function(ua){var match=(ua||navigator.userAgent).match(/android\s([0-9\.]*)/i);if(match){return parseFloat(match[1]);}};global.isTouchDevice=(function(){try{document.createEvent("TouchEvent");return true;}catch(e){return false;}})();global.oneUseEvent=function(element,event,fn){function handler(e){fn.call(this,e);this.removeEventListener(event,handler);}element.addEventListener(event,handler);};$(function(){global.isMobileDevice=$(window).width()<=global.maxMobileScreenWidth&&global.isTouchDevice;});})(window.global=window.global||{});$(document).ready(function(){var $menuHitbox=$(".menu-hitbox");$menuHitbox.on("click",function(e){var $this=$(this);if(!$this.hasClass("open")){$this.addClass("open");$this.siblings(".global-menu").slideDown(function(){$this.addClass("open-on-mobile");$(this).removeAttr("style");});$this.find(".text").text("Close");}else{$this.removeClass("open");$this.siblings(".global-menu").slideUp(function(){$this.removeClass("open-on-mobile");$(this).removeAttr("style");});$this.find(".text").text("Menu");}});$menuHitbox.on("keyup",function(e){if(e.which==13){$menuHitbox.trigger("click");}});});$(document).ready(function(){$(".button-main").on("mousedown",function(event){if(event.button&&event.button!==0){return;}$("form input:visible:enabled").each(function(){if($(this).attr("data-new-password")!==null||$(this).attr("data-reenter-password")!==null){$(this).trigger("blur");}else{$(this).val($(this).val().trim());$(this).trigger("blur");}});if($("form").find(".hasError").length!=0){$("form").find(".hasError:first > input").focus();event.preventDefault?event.preventDefault():(event.returnValue=false);}$(this).trigger("click");});$("form input").on("keypress",function(event){var charCode=event.charCode||event.keyCode||event.which;if(charCode==13){event.preventDefault?event.preventDefault():(event.returnValue=false);$(".button-main").trigger("mousedown");}});$(".button-main").on("click",function(event){$("[dont-validate]").removeAttr("dont-validate");$("form input:visible:enabled").each(function(){var type=$(this).attr("type");console.log("input text "+type);if($(this).attr("data-new-password")!==null||$(this).attr("data-reenter-password")!==null){$(this).trigger("blur");}else{$(this).val($(this).val().trim());$(this).trigger("blur");}});if($("form").find(".hasError").length!=0){$("form").find(".hasError:first > input").focus();event.preventDefault?event.preventDefault():(event.returnValue=false);}});$("[data-mandatory--input]").on("blur",function(){if((formHelper.isNotEmpty($(this).val()))){formHelper.clearError($(this));}else{formHelper.setError($(this),"Require a value");}});$("form").preventDoubleSubmission();setErrorParent();});$.fn.preventDoubleSubmission=function(){$(this).on("submit",function(event){var $form=$(this);if($form.data("submitted")){event.preventDefault?event.preventDefault():(event.returnValue=false);}else{$form.data("submitted",true);}});return this;};var setErrorParent=function(){$("form span.hasError").each(function(){var $elem=$(this);var $parent=$elem.closest($("label"));if($elem.closest("fieldset")[0]!==undefined){$parent=$elem.closest($("fieldset"));}else{if($elem.closest(".poro-field-group")[0]!==undefined){$parent=$elem.closest($(".poro-field-group"));}else{if($elem.closest(".selectRadio")[0]!==undefined){$parent=$elem.closest($(".selectRadio"));}else{if($elem.closest(".raet-line")[0]!==undefined){$parent=$elem.closest(".raet-line");}else{if($elem.closest(".input-group")[0]!==undefined){$parent=$elem.closest(".input-group");}}}}}$parent.addClass("hasError");});};var formHelper={resetDefaultValue:function($elem){$elem.val($elem.prop("defaultValue"));},setButtonGroupValue:function($elem,value){$elem.children().each(function(){$(this).removeClass("active");});$elem.children().each(function(){if($(this).text()==value){$(this).addClass("active");return false;}});},getButtonGroupValue:function($elem,cb){var value=null;$elem.children().each(function(){if($(this).hasClass("active")){value=$(this).text();return false;}});return value;},setSuccess:function($elem,text){formHelper.clearError($elem);var $parent=$elem.closest($("label")),successText=$parent.find('span[role="alert"]'),$msgContainer;if(successText[0]===undefined){successText="<span role='alert' aria-live='assertive' class='success'></span>";}if($elem.closest("fieldset")[0]!==undefined){$parent=$elem.closest($("fieldset"));}else{if($elem.closest(".input-group")[0]!==undefined){$parent=$elem.closest(".input-group");}}$parent.append(successText).addClass("success");$msgContainer=$parent.find('span[role="alert"]');$msgContainer.html(text);},clearError:function($elem){var $parent=$elem.closest($("label")),$msgContainer;if($elem.closest("fieldset")[0]!==undefined){$parent=$elem.closest($("fieldset"));}else{if($elem.closest(".poro-field-group")[0]!==undefined){$parent=$elem.closest($(".poro-field-group"));}else{if($elem.closest(".selectRadio")[0]!==undefined){$parent=$elem.closest($(".selectRadio"));}else{if($elem.closest(".raet-line")[0]!==undefined){$parent=$elem.closest(".raet-line");}else{if($elem.closest(".input-group")[0]!==undefined){$parent=$elem.closest(".input-group");}}}}}$msgContainer=$parent.find('span[role="alert"]');$parent.removeClass("hasError");$msgContainer.remove();},clearInfo:function($elem){var $parent=$elem.closest($("label")),$msgContainer;if($elem.closest("fieldset")[0]!==undefined){$parent=$elem.closest($("fieldset"));}else{if($elem.closest(".poro-field-group")[0]!==undefined){$parent=$elem.closest($(".poro-field-group"));}else{if($elem.closest(".selectRadio")[0]!==undefined){$parent=$elem.closest($(".selectRadio"));}else{if($elem.closest(".raet-line")[0]!==undefined){$parent=$elem.closest(".raet-line");}else{if($elem.closest(".input-group")[0]!==undefined){$parent=$elem.closest(".input-group");}}}}}$msgContainer=$parent.find('span[role="alert"]');$parent.removeClass("hasInfo");$msgContainer.remove();},clearSuccess:function($elem){var $parent=$elem.closest($("label")),$msgContainer;if($elem.closest("fieldset")[0]!==undefined){$parent=$elem.closest($("fieldset"));}else{if($elem.closest(".input-group")[0]!==undefined){$parent=$elem.closest(".input-group");}}$msgContainer=$parent.find('span[role="alert"]');$parent.removeClass("success");$msgContainer.remove();},setError:function($elem,text){formHelper.clearSuccess($elem);var $parent=$elem.closest($("label")),errText,$msgContainer;if($elem.closest("fieldset")[0]!==undefined){$parent=$elem.closest($("fieldset"));}else{if($elem.closest(".poro-field-group")[0]!==undefined){$parent=$elem.closest($(".poro-field-group"));}else{if($elem.closest(".selectRadio")[0]!==undefined){$parent=$elem.closest($(".selectRadio"));}else{if($elem.closest(".raet-line")[0]!==undefined){$parent=$elem.closest(".raet-line");}else{if($elem.closest(".input-group")[0]!==undefined){$parent=$elem.closest(".input-group");}}}}}errText=$parent.find('span[role="alert"]');if(errText[0]===undefined){errText="<span role='alert' aria-live='assertive' class='hasError'></span>";}$parent.append(errText).addClass("hasError");$msgContainer=$parent.find('span[role="alert"]');$msgContainer.html(text);},setInfo:function($elem,text){formHelper.clearInfo($elem);var $parent=$elem.closest($("label")),infoText,$msgContainer;if($elem.closest("fieldset")[0]!==undefined){$parent=$elem.closest($("fieldset"));}else{if($elem.closest(".poro-field-group")[0]!==undefined){$parent=$elem.closest($(".poro-field-group"));}else{if($elem.closest(".selectRadio")[0]!==undefined){$parent=$elem.closest($(".selectRadio"));}else{if($elem.closest(".raet-line")[0]!==undefined){$parent=$elem.closest(".raet-line");}else{if($elem.closest(".input-group")[0]!==undefined){$parent=$elem.closest(".input-group");}}}}}errText=$parent.find('span[role="alert"]');if(errText[0]===undefined){errText="<span role='alert' aria-live='assertive' class='hasInfo'></span>";}$parent.append(errText).addClass("hasInfo");$msgContainer=$parent.find('span[role="alert"]');$msgContainer.html(text);},setErrorSelect:function($elem,text){formHelper.clearSuccess($elem);var $parent=$elem.closest($("label")),errText,$msgContainer;if($elem.closest("fieldset")[0]!==undefined){$parent=$elem.closest($("fieldset"));}else{if($elem.closest(".poro-field-group")[0]!==undefined){$parent=$elem.closest($(".poro-field-group"));}else{if($elem.closest(".selectRadio")[0]!==undefined){$parent=$elem.closest($(".selectRadio"));}else{if($elem.closest(".raet-line")[0]!==undefined){$parent=$elem.closest(".raet-line");}else{if($elem.closest(".input-group")[0]!==undefined){$parent=$elem.closest(".input-group");}}}}}errText=$parent.find("#errorSelect");if(errText[0]===undefined){errText="<span id='errorSelect' class='hasError'></span>";}$parent.append(errText).addClass("hasError");$msgContainer=$parent.find("#errorSelect");$msgContainer.html(text);},clearErrorSelect:function($elem){var $parent=$elem.closest($("label")),$msgContainer;if($elem.closest("fieldset")[0]!==undefined){$parent=$elem.closest($("fieldset"));}else{if($elem.closest(".poro-field-group")[0]!==undefined){$parent=$elem.closest($(".poro-field-group"));}else{if($elem.closest(".selectRadio")[0]!==undefined){$parent=$elem.closest($(".selectRadio"));}else{if($elem.closest(".raet-line")[0]!==undefined){$parent=$elem.closest(".raet-line");}else{if($elem.closest(".input-group")[0]!==undefined){$parent=$elem.closest(".input-group");}}}}}$msgContainer=$parent.find('span[id="errorSelect"]');$parent.removeClass("hasError");$msgContainer.remove();},isUserIdValid:function(userId){var unameRegex="^[ \t]*[a-zA-Z]{2}[0-9]{6}[ \t]*$";var unameRule=new RegExp(unameRegex);return unameRule.test(userId);},isEmailValid:function(emailAddress){var emailAddress=emailAddress.trim();var valid=emailAddress.search(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);return(valid===0);},isHomeNumberValid:function(number){var number=formHelper.spaceRemoved(number);var isNumber=formHelper.isNumber(number);if(isNumber){if(number.length===9&&number.substring(0,5)==="67232"){return true;}if(number.length===10&&number.substring(0,2).match("02|03|07|08")){return true;}}return false;},isWorkNumberValid:function(number){var number=formHelper.spaceRemoved(number);return(formHelper.isMobileValid(number)||formHelper.isHomeNumberValid(number));},isNumber:function(input){return(/^\d+$/).test(input);},isMobileValid:function(number){var number=formHelper.spaceRemoved(number);var isNumber=formHelper.isNumber(number);if(isNumber){if(number.length===10&&number.substring(0,2)==="04"){return true;}if(number.length===9&&number.substring(0,5)==="67235"){return true;}}return false;},isNotEmpty:function(val){return(val!=="");},isEmpty:function(val){return(val==="");},isTypingSame:function($this,$compareWith){var compareWithVal=$compareWith.val(),thisVal=$this.val(),curpos=thisVal.length-1,compareWithChar=compareWithVal.charAt(curpos),thisChar=thisVal.charAt(curpos),thisPortion=thisVal.substring(0,curpos),compareWithPotion=compareWithVal.substring(0,curpos),errMsg="",successMsg="";if(compareWithVal===thisVal){return true;}if(thisChar!==compareWithChar){return false;}if(thisPortion===compareWithPotion){formHelper.clearError($this);}},chkFieldIsEmpty:function($this){if(formHelper.isEmpty($this.val())){return true;}else{return false;}},chkTooManyCharacters:function($this,max){if($this.val().length>max){return true;}else{return false;}},chkNumberOnly:function($this){return(/^\d+$/g).test($this.val());},chkValidCode:function($this){return(/^(([0-9]){6})$/).test($this.val());},enableDate:function(){if($(".date-fields").length>0){$(".date-fields input").each(function(){$(".date-fields input").prop("disabled",false).attr("aria-disabled",false);});}},disableDate:function(){if($(".date-fields").length>0){$(".date-fields input").each(function(){$(".date-fields input").prop("disabled",true).attr("aria-disabled",true);formHelper.clearError($(".date-fields input"));$(".date-fields input").val("");});}},spaceRemoved:function(thisval){return thisval.replace(/ /g,"");}};(function($){$(".poro-date-fields-optional input").on("blur",function(){var testFuture=false,optional=true;updateDateField($(this),testFuture,optional);validateDate($(this));});$(".poro-date-fields-mandatory input").on("blur",function(){var testFuture=false,optional=false;updateDateField($(this),testFuture,optional);validateDate($(this));});$(".date-fields input").on("blur",function(){var testFuture=true,optional=false;updateDateField($(this),testFuture,optional);validateDate($(this),optional);});if($(".date-fields").length>0){var today=new Date();var dd=today.getDate().toString().length===1?"0"+today.getDate():today.getDate();var mm=(today.getMonth()+1).toString().length===1?"0"+(today.getMonth()+1):(today.getMonth()+1);var yyyy=today.getFullYear();if(dd!==undefined&&mm!==undefined&&yyyy!==undefined){$(".exampleDate").text("For example: "+dd+" "+mm+" "+yyyy);}}var validateDate=function($this,optional){var $parent=$this.closest($("fieldset")),date=$parent.find("[data-date]").val(),isDay=$this.attr("data-date-day")!==undefined,isMonth=$this.attr("data-date-month")!==undefined,isYear=$this.attr("data-date-year")!==undefined,thisval=$this.val(),isDateFilledIn=chkDateFilledIn($this);if(date===("NaN")||date===("future")){if(isDay){updateDayError($this,isDateFilledIn);}if(isMonth){updateMonthError($this,isDateFilledIn);}if(isYear){updateYearError($this,isDateFilledIn);}if((date==="NaN")&&isDateFilledIn){formHelper.setError($this,"Date is not valid");}if((date==="future")&&isDateFilledIn){formHelper.setError($this,"Date cannot be in the future");}}else{formHelper.clearError($this);}};var isValidDay=function(number){return(formHelper.isNumber(number)&&(number<32)&&(number>0));};var isValidMonth=function(number){return(formHelper.isNumber(number)&&(number<13)&&(number>0));};var isValidYear=function(number){var year=new Date().getFullYear();return(formHelper.isNumber(number)&&(number>year-150)&&(number.trim().length===4));};var chkDateFilledIn=function($elem){var $parent=$elem.closest($("fieldset"));if($parent!==undefined){day=$parent.find("[data-date-day]").val();month=$parent.find("[data-date-month]").val();year=$parent.find("[data-date-year]").val();if(formHelper.isNotEmpty(year)&&formHelper.isNotEmpty(month)&&formHelper.isNotEmpty(day)){return true;}}return false;};var updateDayError=function($day,isDateFilledIn){if(!isValidDay($day.val())){formHelper.setError($day,"Date is not valid");}else{if(isDateFilledIn){formHelper.clearError($(this));}}};var updateMonthError=function($month,isDateFilledIn){if(!isValidMonth($month.val())){formHelper.setError($month,"Date is not valid");}else{if(isDateFilledIn){formHelper.clearError($(this));}}};var updateYearError=function($year,isDateFilledIn){if(!isValidYear($year.val())){formHelper.setError($year,"Date is not valid");}else{if(isDateFilledIn){formHelper.clearError($(this));}}};var updateDateField=function($this,testFuture,optional){var $parent=$this.closest($("fieldset")),now=moment(new Date(),"DD/MM/YYYY"),$year=$parent.find("[data-date-year]"),$day=$parent.find("[data-date-day]"),year=$parent.find("[data-date-year]").val(),month=$parent.find("[data-date-month]").val(),day=$parent.find("[data-date-day]").val(),isPartial=!($day.length>0),isDateFilledIn=chkDateFilledIn($year),$doc="";if(isPartial){if(month!==""||year!==""){$doc=month+"/"+year;validDate=isValidMonth(month)&&isValidYear(year);$("[data-date]").val("");}else{$("[data-date]").val("optional");}}else{if(optional){if(day!==""||month!==""||year!==""){$doc=day+"/"+month+"/"+year;validDate=isValidDay(day)&&isValidMonth(month)&&isValidYear(year);$("[data-date]").val("");}else{$("[data-date]").val("optional");}}else{$doc=day+"/"+month+"/"+year;validDate=isValidDay(day)&&isValidMonth(month)&&isValidYear(year);}}var dateOfChange=moment($doc,"DD/MM/YYYY"),duration=moment.duration(now.diff(dateOfChange)),days=duration.asDays(),inFuture=!(days>=0)&&(testFuture);if($("[data-date]").val()==="optional"){return;}else{if(!isDateFilledIn||!validDate){$("[data-date]").val("NaN");return;}else{if(!inFuture&&validDate&&isDateFilledIn){$("[data-date]").val($doc);}else{if(inFuture){$("[data-date]").val("future");}}}}};})(jQuery);(function($){$(document).ready(function(){var initToggle=function(){$(".showPassword").on("click",function(){var $this=$(this),$inputType,$passwordInput=$this.siblings("input"),relatedInputStr="";if($passwordInput.attr("data-new-password")!==undefined){relatedInputStr="data-reenter-password";}else{if($passwordInput.attr("data-new-pin")!==undefined){relatedInputStr="data-reenter-pin";}}if($passwordInput.attr("data-reenter-password")!==undefined){relatedInputStr="data-new-password";}else{if($passwordInput.attr("data-reenter-pin")!==undefined){relatedInputStr="data-new-pin";}}if(relatedInputStr!==""){$relatedElementInput=$("["+relatedInputStr+"]");$relatedElementInputButton=$relatedElementInput.siblings("button");}$inputType=$passwordInput.attr("type");if($inputType.toLowerCase()==="password"){setPwdHide($this);if(relatedInputStr!==""){setPwdHide($relatedElementInputButton);}}else{setPwdShow($this);if(relatedInputStr!==""){setPwdShow($relatedElementInputButton);}}});};var setPwdShow=function($this){var $passwordInput=$this.siblings("input");$passwordInput.attr("type","password");$this.attr("aria-pressed","false").attr("aria-label","Show password as plain text. Note: this will visually expose your password on the screen.").html('Show<span class="is-visuallyhidden"> password</span>');};var setPwdHide=function($this){var $passwordInput=$this.siblings("input");$passwordInput.attr("type","text");$this.attr("aria-pressed","true").attr("aria-label","Hide password").html('Hide<span class="is-visuallyhidden"> password</span>');};$('input[type="password"]').each(function(){var $this=$(this),showhide="";showhide='<button class="showPassword anchor" type="button" aria-pressed="false" aria-label="Show password as plain text. Note: this will visually expose your password on the screen.">Show<span class="is-visuallyhidden"> password</span></button>';$this.attr("aria-live","polite").attr("aria-atomic","true");$this.after(showhide);});$("[data-current-password]").on("blur",function(){validateCurrentPwd($(this));});$("[data-new-password]").on("blur",function(){$relatedElementInput=$("[data-reenter-password]");validateNewPwd($(this));if(formHelper.isEmpty($(this).val())){formHelper.setError($(this),"Enter your password");}if($relatedElementInput.val()!=""){$relatedElementInput.trigger("keyup");}});$("[data-new-password]").on("keyup",function(){var errmsg="",password=$(this).val(),rule0=(/\s/g).test(password),rule1=formHelper.chkTooManyCharacters($(this),20);if(rule0){errmsg="Password must not contain spaces";}else{if(rule1){errmsg="Password cannot be longer than 20 characters";}}if(errmsg!==""){formHelper.setError($(this),errmsg);}else{formHelper.clearError($(this));}});$("[data-reenter-password]").on("blur",function(){var $compareWith=$("[data-new-password]"),isSame=($(this).val()===$compareWith.val());if(formHelper.isEmpty($(this).val())){formHelper.setError($(this),"Enter your password");}else{if(isSame){formHelper.setSuccess($(this),"The passwords match");}else{formHelper.setError($(this),"Your 2 passwords are not the same");}}});$("[data-reenter-password]").on("keyup",function(){var $compareWith=$("[data-new-password]"),isSame=formHelper.isTypingSame($(this),$compareWith),errMsg="",successMsg="";if(isSame!==undefined){if(isSame){errMsg="";successMsg="The passwords match";}else{errMsg="Your 2 passwords are not the same";successMsg="";}if(formHelper.isNotEmpty($(this).val())){(errMsg!=="")?formHelper.setError($(this),errMsg):formHelper.setSuccess($(this),successMsg);}}});initToggle();});var validateCurrentPwd=function($elem){if(formHelper.chkFieldIsEmpty($elem)){formHelper.setError($elem,"Enter your password");}else{formHelper.clearError($elem);}};var isthreeSequential=function(char1,char2,char3){var next=String.fromCharCode(char1.charCodeAt()+1);if(char2===next){var afternext=String.fromCharCode(char2.charCodeAt()+1);return char3===afternext;}return false;};var isthreeRepeated=function(char1,char2,char3){if(char1===char2){return(char2===char3);}};var chkSeqRep=function(str){var count=0;for(var x=0;x<str.length;x++){var c=str.charAt(x);var d=str.charAt(x+1);var e=str.charAt(x+2);if(isthreeSequential(c,d,e)||isthreeRepeated(c,d,e)){var x=x+2;count++;}}return(count>1);};var validateNewPwd=function($elem){var password=$elem.val(),relatedInputStr,errStatus,curPwd=$("[data-current-password]").val(),rule0=(/\s/g).test(password);rule1=!(/^(?=.*[0-9])(?=.*[a-zA-Z])(([a-zA-Z0-9\!\@\#\$\%\^\&\*]){7,})$/).test(password),rule1b=!(/[a-zA-Z0-9\!\@\#\$\%\^\&\*]+/).test(password),rule2=(/(.)\1{3,}/).test(password),rule3=(/(abcd|bcde|cdef|defg|efgh|fghi|ghij|hijk|ijkl|jklm|klmn|lmno|mnop|nopq|opqr|pqrs|qrst|rstu|stuv|tuvw|uvwx|vwxy|wxyz|0123|1234|2345|3456|4567|5678|6789|7890)+/i).test(password.toLowerCase()),rule4=chkSeqRep(password),rule5=(password===curPwd),rule6=formHelper.chkTooManyCharacters($elem,20);errmsg="";if(rule0){errmsg="Password must not contain spaces";}else{if((rule1)||(rule1b)){errmsg="Password must have at least 7 characters and include 1 number. Your password can have any of these characters !@#$%^&*";}else{if(rule2){errmsg="Do not use more than 3 of the same or consecutive numbers or letters in a row";}else{if(rule3){errmsg="Do not use more than 3 of the same or consecutive numbers or letters in a row";}else{if(rule4){errmsg="Do not use more than one sequential or identical string of 3 letters or numbers";}else{if(rule5){errmsg="New password cannot be the same as current password";}else{if(rule6){errmsg="Password cannot be longer than 20 characters";}}}}}}}if(formHelper.isNotEmpty(password)){if(errmsg!=""){formHelper.setError($elem,errmsg);}else{formHelper.clearError($elem);}}};})(jQuery);(function($){$(document).ready(function(){$("[data-email-address]").on("blur",function(){if($(this).val().trim()!==""){if(formHelper.isEmailValid($(this).val().trim())){formHelper.clearError($(this));}else{formHelper.setError($(this),"Enter a valid email address");}}else{formHelper.clearError($(this));}});var contactNumber=function(){var $mobile=$("[data-mobile-number]"),$home=$("[data-home-number]"),$work=$("[data-work-number]");$("[data-mobile-number]").on("keyup",function(){if($(this).val()!=""){formHelper.enableDate();}else{if(($home.val()||$work.val())===""){formHelper.disableDate();}}});$("[data-home-number]").on("keyup",function(){if($(this).val()!=""){formHelper.enableDate();}else{if(($work.val()||$mobile.val())===""){formHelper.disableDate();}}});$("[data-work-number]").on("keyup",function(){if($(this).val()!=""){formHelper.enableDate();}else{if(($home.val()||$mobile.val())===""){formHelper.disableDate();}}});$("[data-mobile-number]").on("blur",function(){if($(this).val()!=""){formHelper.enableDate();if(formHelper.isMobileValid($(this).val())){formHelper.clearError($(this));}else{formHelper.setError($(this),"Australian mobile numbers contain 10 digits and begin with 04. Norfolk Island mobile numbers contain 9 digits and begin with 67235");}}else{formHelper.clearError($(this));if(($home.val()||$work.val())===""){formHelper.disableDate();}}});$("[data-home-number]").on("blur",function(){if($(this).val()!=""){formHelper.enableDate();if(formHelper.isHomeNumberValid($(this).val())){formHelper.clearError($(this));}else{formHelper.setError($(this),"Australian landline numbers contain 10 digits and begin with 02, 03, 07 or 08. Norfolk Island landline numbers contain 9 digits and begin with 67232");}}else{formHelper.clearError($(this));if(($work.val()||$mobile.val())===""){formHelper.disableDate();}}});$("[data-work-number]").on("blur",function(){if($(this).val()!=""){formHelper.enableDate();if(formHelper.isWorkNumberValid($(this).val())){formHelper.clearError($(this));}else{formHelper.setError($(this),"Australian numbers contain 10 digits and begin with 02, 03, 07, 08 or 04 for mobile numbers. Norfolk Island landline numbers contain 9 digits and begin with 67232 or 67235 for mobile numbers");}}else{formHelper.clearError($(this));if(($home.val()||$mobile.val())===""){formHelper.disableDate();}}});$("[data-home-number], [data-work-number]").on("keyup blur",function(e){if(this.value.length>0){$(this).parent().next('[type="checkbox"]').prop("disabled",false).attr("aria-disabled",false);}else{$(this).parent().next('[type="checkbox"]').prop("disabled",true).attr("aria-disabled",true);if(e.type==="blur"){$(this).parent().next('[type="checkbox"]').prop("checked",false);}}});$("[data-home-number], [data-work-number]").trigger("keyup");};contactNumber();$("[data-showmore-hideself]").on("click",function(){$(".moreUpdates[hidden]").slice(0,10).removeAttr("hidden aria-hidden");if($(".moreUpdates[hidden]").length===0){$(this).parent().hide();}});});})(jQuery);$(document).ready(function(){$("[data-email-addr]").on("blur",function(){if(formHelper.isEmailValid($(this).val())){formHelper.clearError($(this));}else{formHelper.setError($(this),"Enter a valid email address");}});$("[data-number--input]").on("blur",function(){if((formHelper.isNotEmpty($(this).val()))&&(formHelper.chkValidCode($(this)))){formHelper.clearError($(this));}else{formHelper.setError($(this),"Enter the code we sent to you");}});$("[data-number-totp--input]").on("blur",function(){if((formHelper.isNotEmpty($(this).val()))&&(formHelper.chkValidCode($(this)))){formHelper.clearError($(this));}else{formHelper.setError($(this),"Enter the code from myGov Access");}});});$("[data-mobile-num]").on("blur",function(){if(formHelper.isMobileValid($(this).val())){formHelper.clearError($(this));}else{formHelper.setError($(this),"Australian mobile numbers contain 10 digits and begin with 04. Norfolk Island mobile numbers contain 9 digits and begin with 67235");}});$("[data-infotext-toggle]").on("click",function(){var attr=$(this).attr("aria-expanded");attr=attr==="false"?"true":"false";$(this).attr("aria-expanded",attr);$(this).attr("tabindex",tabindex);var $ariaControl=$("#"+$(this).attr("aria-controls"));var tabindex=$ariaControl.attr("tabindex");$ariaControl.attr("tabindex",tabindex);$ariaControl.toggle();});$(":radio[data-inbox-pref]").on("change",function(){var selected=this.value;switch(selected){case"mobile":formHelper.clearError($("[data-email-addr]"));formHelper.resetDefaultValue($("[data-email-addr]"));$("[data-email-addr]").closest($("label")).attr({"hidden":true,"aria-hidden":true});$("[data-mobile-num]").closest($("label")).removeAttr("hidden aria-hidden");break;case"email":formHelper.clearError($("[data-mobile-num]"));formHelper.resetDefaultValue($("[data-mobile-num]"));$("[data-mobile-num]").closest($("label")).attr({"hidden":true,"aria-hidden":true});$("[data-email-addr]").closest($("label")).removeAttr("hidden aria-hidden");break;default:}});(function($){var initSQA=function(){var $form=$(".sqa-form"),$question=$("[data-secretquestion]"),$answer=$("[data-secretanswer]");$(".selectRadio input:radio").on("blur change",function(){var selectedRadioName=$(".selectRadio input:radio:checked").val();if((selectedRadioName)===undefined){formHelper.setErrorSelect($(".selectRadio"),"Make a selection");}else{formHelper.clearErrorSelect($(".selectRadio"));}});$question.on("blur",function(){var errMsg="",rule1=formHelper.chkFieldIsEmpty($(this)),rule2=chkQuestionAnswerSame(),rule3=formHelper.chkTooManyCharacters($(this),100);if(rule1){errMsg="Enter a question";}else{if(rule2){errMsg="The question and answer must be different";}else{if(rule3){errMsg="The question must not be more than 100 characters";}}}if(errMsg!==""){formHelper.setError($(this),errMsg);}else{formHelper.clearError($question);}chkQuestionAnswerSame();});$answer.on("blur",function(){var errMsg="",rule1=formHelper.chkFieldIsEmpty($(this)),rule2=chkQuestionAnswerSame(),rule3=formHelper.chkTooManyCharacters($(this),40);if(rule1){errMsg="Enter an answer";}else{if(rule2){errMsg="The question and answer must be different";}else{if(rule3){errMsg="The answer must not be more than 40 characters";}}}if(errMsg!==""){formHelper.setError($(this),errMsg);}else{formHelper.clearError($answer);}});$question.on("keyup",function(){var errMsg="",rule1=formHelper.chkTooManyCharacters($(this),100);if(rule1){errMsg="The question must not be more than 100 characters";}if(errMsg!==""){formHelper.setError($(this),errMsg);}});$answer.on("keyup",function(){var errMsg="",rule1=formHelper.chkTooManyCharacters($(this),40);if(rule1){errMsg="The answer must not be more than 40 characters";}if(errMsg!==""){formHelper.setError($(this),errMsg);}});var chkQuestionAnswerSame=function(){var errMsg="The question and answer must be different";$questionValue=$question.length>0?$question.val().trim().toLowerCase():"";$answerValue=$answer.val().trim().toLowerCase();if(!$questionValue||!$answerValue||(!$questionValue&&!$answerValue)){return;}if($questionValue===$answerValue){return true;}else{return false;}};};var toggleOwnQuestion=function(){var $question=$("[data-secretquestion]"),$answer=$("[data-secretanswer]");$("[data-prefillquestion]").prev("input").on("change",function(){$question.val($(this).next().text());$question.parent().hide();});$("input[name=radioQuestion]").on("change",function(){var $selectedQuestion=$("input[name=radioQuestion]:checked"),$lastQuestion=$("input[name=radioQuestion]").last();if($selectedQuestion.val()!==$answer.val()){formHelper.clearError($answer);}else{formHelper.setError($answer,"The question and answer must be different");}if($lastQuestion.is(":checked")){formHelper.clearError($selectedQuestion);formHelper.clearError($answer);$question.val("");$question.parent().show().css("display","block");}else{formHelper.clearError($question);$question.parent().hide();}});};toggleOwnQuestion();initSQA();})(jQuery);(function($){$(document).ready(function(){if($("[data-date]").length>0){if($("[data-date]").val()!==""){var date=$("[data-date]").val().split("/");var $parent=$(".date-fields");day=$parent.find("[data-date-day]").val(date[0]);month=$parent.find("[data-date-month]").val(date[1]);year=$parent.find("[data-date-year]").val(date[2]);formHelper.enableDate();}}$("#raetDiv-home").on("change","input",function(){if($("#same-as-residential").is(":checked")){mapHomePostal();}});$("#same-as-residential").on("change",function(){if($("#same-as-residential").is(":checked")){mapHomePostal();}else{$("#postal-section input").val("");}});$("#same-as-residential").on("click",function(){$("#postal-section").toggle();});$("#raetDiv-home, #raetDiv-postal").on("blur keyup","input",function(){resetDate();});var homeSectionBlank=function(){var blank=true;$("#raetDiv-home input").each(function(){if(!blank){return blank;}var input=$.trim($(this).val());blank=!input;});return blank;};var postalSectionBlank=function(){var blank=true;$("#raetDiv-postal input").each(function(){if(!blank){return blank;}var input=$.trim($(this).val());blank=!input;});return blank;};var resetDate=function(){var homeBlank=homeSectionBlank();var postalBlank=postalSectionBlank();var blank=homeBlank&&postalBlank;blank?formHelper.disableDate():formHelper.enableDate();};var mapHomePostal=function(){$("#delivery-address-line-1-singleLine").val($("#residential-address-line-1-singleLine").val());$("#postal-address").val($("#home-address").val());$("#postal-suburb").val($("#home-suburb").val());$("#postal-postcode").val($("#home-postcode").val());$("#postal-state").val($("#home-state").val());};function raetToggleText(element,name){if($("#raetDiv-"+name).attr("data-view")==="multi"){element.text("Find my "+name+" address");}if($("#raetDiv-"+name).attr("data-view")==="single"){element.text("I can't find my "+name+" address");}}function raetToggleView(name){$(".raet-"+name+"-anchor").on("click",function(){$("#raetDiv-"+name).attr("data-view",function(index,attr){return attr=="multi"?"single":"multi";});raetToggleText($(this),name);if($("#raetDiv-"+name).attr("data-view")==="multi"){raetAddress("multi",name);}if($("#raetDiv-"+name).attr("data-view")==="single"){raetAddress("single",name);}$(this).attr("aria-pressed","true").attr("aria-live","polite").attr("aria-atomic","true");$("#raetDiv-"+name).find("input")[0].focus();resetDate();});}raetToggleView("home");raetToggleView("postal");function removeContainers(root){if(root){$("> .raet-container",$(root)).remove();}}function raetAddress(view,name){var rootContainer=$("#raetDiv-"+name);if(rootContainer){removeContainers(rootContainer);var config={webService:"prod_secure",destination:document.getElementById("raetDiv-"+name),fields:{streetAddress:document.getElementById(name+"-address"),suburb:document.getElementById(name+"-suburb"),postcode:document.getElementById(name+"-postcode"),state:document.getElementById(name+"-state")},labels:{singleLine:"Find address"}};if(view==="single"){config.type="singleLine";}if(view==="multi"){config.integration=true;}Raet(config);}}function raetInit(name){$("#"+name+"-output").each(function(){var allEmpty=true;$(this).find('input[type="text"]').each(function(){if(this.value.trim().length>0){allEmpty=false;$("#raetDiv-"+name).attr("data-view","multi");raetAddress("multi",name);raetToggleText($(".raet-"+name+"-anchor"),name);return false;}});if(allEmpty===true){$("#raetDiv-"+name).attr("data-view","single");raetAddress("single",name);raetToggleText($(".raet-"+name+"-anchor"),name);}});}raetInit("home");raetInit("postal");});})(jQuery);$(document).ready(function(){$("[data-login-username]").on("blur",function(){if($(this).val().trim()!==""){var message="Enter a valid username";if(formHelper.isEmailValid($(this).val())||(/^[A-z]{2}[0-9]{6}$/g).test($(this).val())||formHelper.isMobileValid($(this).val())){formHelper.clearError($(this));}else{formHelper.setError($(this),message);}}else{formHelper.setError($(this),"Enter a username or email address");}});});window.addEventListener("hashchange",function(event){var element=document.getElementById(location.hash.substring(1));if(element){if(!/^(?:a|select|input|button|textarea)$/i.test(element.tagName)){element.tabIndex=-1;}element.focus();}},false);$("[data-poro-input]").on("blur",function(){if($(this).val()!==""){var pattern=new RegExp($(this).attr("data-pattern"));var validPattern=pattern.test($(this).val());if(!validPattern){var patternMsg=$(this).attr("data-pattern-msg");var msg="Enter a valid value";msg=patternMsg!==undefined?patternMsg:msg;formHelper.setError($(this),msg);}else{formHelper.clearError($(this));}}});$("[data-poro-input-mandatory]").on("blur",function(){if(formHelper.isNotEmpty($(this).val())){if($(this).attr("data-poro-input")===undefined){formHelper.clearError($(this));}}else{formHelper.setError($(this),"Require a value");}});$("[data-poro-checkbox-mandatory]").on("blur",function(){if($(this).is(":checked")){formHelper.clearError($(this));}else{formHelper.setError($(this),"Must be selected");}});$("[data-helptext-toggle]").on("click",function(){var attr=$(this).attr("aria-expanded");attr=attr==="false"?"true":"false";$(this).attr("aria-expanded",attr);$(this).attr("tabindex",tabindex);var $ariaControl=$("#"+$(this).attr("aria-controls"));var tabindex=$ariaControl.attr("tabindex");tabindex=tabindex==="-1"?"0":"-1";$ariaControl.attr("tabindex",tabindex);$ariaControl.toggle();});$("[button-poro-cancel]").on("click",function(e){e.preventDefault();});$("[data-helptext-toggle]").on("keypress",function(e){if(e.which===32){$(this).trigger("click");}if(e.which===9){e.preventDefault();}});$("[data-number--only]").on("blur",function(e){if(formHelper.isNotEmpty($(this).val())&&formHelper.chkNumberOnly($(this))){formHelper.clearError($(this));}else{formHelper.setError($(this),"Enter a valid number");}});$("[data-number--optional]").on("blur",function(e){if(formHelper.chkNumberOnly($(this))){formHelper.clearError($(this));}else{if(formHelper.isNotEmpty($(this).val())){formHelper.setError($(this),"Enter a valid number");}}});$("[data-medicare--input]").on("blur",function(e){if(formHelper.chkNumberOnly($(this))&&$(this).val().length===10){formHelper.clearError($(this));}else{formHelper.setError($(this),"Enter a valid medicare number");}});$(document).ready(function(){var keyup_checker=function(evt){var stroke,_ref;stroke=(_ref=evt.which)!=null?_ref:evt.keyCode;this.search_field_scale();switch(stroke){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0){return this.keydown_backstroke();}else{if(!this.pending_backstroke){this.result_clear_highlight();return this.results_search();}}break;case 13:evt.preventDefault();evt.stopPropagation();if(this.results_showing){return this.result_select(evt);}else{this.results_search();}break;case 27:if(this.results_showing){this.results_hide();}return true;case 9:case 38:case 40:case 16:case 91:case 17:case 18:break;default:return this.results_search();}};$(".chosen-select-man, .chosen-select").each(function(i,select){var $select=$(select);var container=$select.chosen($select.hasClass(".chosen-select")?{allow_single_deselect:true}:{});var data=container.data("chosen");if(data){data.keyup_checker=keyup_checker;data.container.on("keydown",function(e){if(e.key==="Enter"||e.keyCode===13){e.preventDefault();e.stopPropagation();}});var showing=false;data.container.focusin(function(e){if(!showing){data.dropdown.css({left:"0",bottom:"0",overflow:"hidden","z-index":"0"});}});$select.on("chosen:showing_dropdown",function(){showing=true;data.dropdown.css({left:"",bottom:"",overflow:"","z-index":"1"});});$select.on("chosen:hiding_dropdown",function(){showing=false;data.dropdown.css({left:"0",bottom:"0",overflow:"hidden","z-index":"0"});});}});});$(document).ready(function(){var uPIN={init:function(){uPIN.cacheDom();uPIN.onBlur(uPIN.$newPin);uPIN.onBlur(uPIN.$reenterPin);uPIN.onKeyup(uPIN.$newPin);uPIN.onKeyup(uPIN.$reenterPin);$(uPIN.$currentPin).on("blur",function(){if(!uPIN.isEmpty(this)){return;}});$(uPIN.$newPin).on("blur",function(){if(uPIN.$reenterPin.val()!=""){uPIN.$reenterPin.trigger("keyup");}});},cacheDom:function(){uPIN.$currentPin=$("[data-current-pin]");uPIN.$newPin=$("[data-new-pin]");uPIN.$reenterPin=$("[data-reenter-pin]");},isEmpty:function(element){if(formHelper.isEmpty(element.value)){formHelper.setError($(element),"Enter a PIN");return false;}else{formHelper.clearError($(element));return true;}},onBlur:function(element){$(element).on("blur",function(){uPIN.validate(this);});},onKeyup:function(element){$(element).on("keyup",function(e){if(e.which===9){return;}if(e.which===16){return;}uPIN.match(this);});},match:function(element){var successMsg,errorMsg,isSame;if(element.attributes.hasOwnProperty("data-reenter-pin")){isSame=formHelper.isTypingSame(uPIN.$reenterPin,uPIN.$newPin);}if(isSame!==undefined){if(isSame){successMsg="The PINs match";errorMsg="";}else{errorMsg="The PINs do not match";successMsg="";}if(formHelper.isNotEmpty(uPIN.$reenterPin.val())){(errorMsg!=="")?formHelper.setError(uPIN.$reenterPin,errorMsg):formHelper.setSuccess(uPIN.$reenterPin,successMsg);}}},maxChars:function(element){if(element.value.length!==4){formHelper.setError($(element),"Enter a valid PIN");return false;}else{formHelper.clearError($(element));return true;}},notAscending:function(element){if(element.value.length===4&&"0123456789".indexOf(element.value)!=-1){formHelper.setError($(element),"PIN cannot contain 4 consecutive digits");return false;}else{formHelper.clearError($(element));return true;}},notDescending:function(element){if(element.value.length===4&&"9876543210".indexOf(element.value)!=-1){formHelper.setError($(element),"PIN cannot contain 4 consecutive digits");return false;}else{formHelper.clearError($(element));return true;}},numericOnly:function(element){if(!(/^\d*$/g).test(element.value)){formHelper.setError($(element),"Enter a valid PIN");return false;}else{formHelper.clearError($(element));return true;}},sameDigits:function(element){if((/^([0-9])\1{3}$/g).test(element.value)){formHelper.setError($(element),"PIN cannot contain 4 of the same digit");return false;}else{formHelper.clearError($(element));return true;}},validate:function(element){if(!uPIN.isEmpty(element)){return;}if(!uPIN.maxChars(element)){return;}if(!uPIN.numericOnly(element)){return;}if(!uPIN.sameDigits(element)){return;}if(!uPIN.notAscending(element)){return;}if(!uPIN.notDescending(element)){return;}if(!uPIN.match(element)){return;}}};uPIN.init();});$(document).ready(function(){var usernameField=$("[data-username]");function validateUsername($inputField){var unameval=$inputField.val(),unameMatch=unameval?formHelper.isUserIdValid(unameval):false,emailMatch=unameval?formHelper.isEmailValid(unameval):false,mobileMatch=unameval?formHelper.isMobileValid(unameval):false;if(unameMatch||emailMatch||mobileMatch){formHelper.clearError($inputField);if(mobileMatch){formHelper.setInfo($inputField,'You must have this <a href="/mygov/content/html/help.html#MobileNumber">mobile number</a> set up as a username in your Account settings.');}else{formHelper.clearInfo($inputField);}}else{formHelper.clearInfo($inputField);formHelper.setError($inputField,"<p>Enter a valid username</p>");}}usernameField.on("blur",function(){if(!this.hasAttribute("dont-validate")){validateUsername($(this));}});});(function($){$(":radio[data-apdm]").on("change",function(){var selected=this.value;switch(selected){case"true":$(".button-main").replaceWith('<button type="submit" class="button-main button">Next</button>');break;case"false":$(".button-main").replaceWith('<a href="'+$("#apdmLink").val()+'" role="button" class="button-main button">Next</a>');break;default:}});})(jQuery);(function($){$(window).on("resize",function(){var $expand=$(".outage .expand");if($expand.length&&!$expand.hasClass("expand--expanded")){var content=$(".outage__content").get(0);if(content&&content.offsetWidth>=content.scrollWidth){$expand.attr({"hidden":true,"aria-hidden":true});}else{if($expand.attr("hidden")){$expand.removeAttr("hidden aria-hidden");}}}}).resize();$(".outage").on("click",".expand",function(){$(this).toggleClass("expand--expanded").next(".outage__content").toggleClass("outage__content--expanded");});$("[data-dismiss]").each(function(){$(this).append('<button class="dismiss"><span class="is-visuallyhidden">Dismiss</span></button>');});$("[data-dismiss]").on("click",".dismiss",function(e){e.preventDefault();$(this).parent().fadeOut("fast",function(){$(this).remove();});});$("[data-dismiss-otp-alert]").on("click",".dismiss",function(){$.getJSON("/mygov/dismiss-otp-alert");});$("[data-dismiss-inbox-alert]").on("click",".dismiss",function(){$.getJSON("/mygov/dismiss-inbox-alert");});})(jQuery);(function($){$(document).ready(function(){function wait(seconds,formId){setTimeout(function(){submitForm(formId);},seconds*1000);}function submitForm(formId){try{document.getElementById(formId).submit();}catch(err){}}wait(10,"oidcRedirForm");wait(2,"redirForm");});})(jQuery);$("[data-home-welcome-message]").each(function(){$(this).text("Good "+getGreetingTime(moment())+" ");});function getGreetingTime(m){var g=null;if(!m||!m.isValid()){return;}var split_afternoon=12;var split_evening=17;var currentHour=parseFloat(m.format("HH"));if(currentHour>=split_afternoon&&currentHour<=split_evening){g="afternoon";}else{if(currentHour>=split_evening){g="evening";}else{g="morning";}}return g;}$(function(){var upins=$("#upin-login, #upin-input, #upin-confirm");if(global.getAndroidVersion()<4.3){$("fieldset.pin-fields, div.pin-fields").removeClass("pin-fields");upins.attr({type:"password",pattern:"[0-9]*",inputmode:"numeric"}).val("").on("keyup",function(e){if($(e.target).val().length===4){$(e.target).closest("form").submit();}}).focus();}else{upins.val("").pincodeInput({hidedigits:true,inputs:4,complete:function(value,e,errorElement){$(e.target).closest("form").submit();}});var upinData=upins.data("plugin_pincodeInput");if(upinData){upinData.focus();}}if(global.getUrlParams().event==="close"){$("a.button-back-home").text("Close").removeClass("button-back").click(function(e){e.preventDefault();window.close();});}});$(function(){var additionalSelectors="";var fields=$("[autofocus]");if(additionalSelectors){fields.add(additionalSelectors);}var focusField=fields[0];if(focusField){focusField.setAttribute("dont-validate","");global.oneUseEvent(focusField,"keyup",function(){focusField.removeAttribute("dont-validate");});}});