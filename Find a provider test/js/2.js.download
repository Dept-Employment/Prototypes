(function(){if(window.CKEDITOR&&window.CKEDITOR.dom){return}window.CKEDITOR||(window.CKEDITOR=function(){var d={timestamp:"E6FD",version:"4.4.3",revision:"fd4f17c",rnd:Math.floor(900*Math.random())+100,_:{pending:[]},status:"unloaded",basePath:function(){var c=window.CKEDITOR_BASEPATH||"";if(!c){for(var h=document.getElementsByTagName("script"),i=0;i<h.length;i++){var g=h[i].src.match(/(^|.*[\\\/])ckeditor(?:_basic)?(?:_source)?.js(?:\?.*)?$/i);if(g){c=g[1];break}}}-1==c.indexOf(":/")&&"//"!=c.slice(0,2)&&(c=0===c.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+c:location.href.match(/^[^\?]*\/(?:)/)[0]+c);if(!c){throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.'}return c}(),getUrl:function(b){-1==b.indexOf(":/")&&0!==b.indexOf("/")&&(b=this.basePath+b);this.timestamp&&("/"!=b.charAt(b.length-1)&&!/[&?]t=/.test(b))&&(b+=(0<=b.indexOf("?")?"&":"?")+"t="+this.timestamp);return b},domReady:function(){function b(){try{document.addEventListener?(document.removeEventListener("DOMContentLoaded",b,!1),c()):document.attachEvent&&"complete"===document.readyState&&(document.detachEvent("onreadystatechange",b),c())}catch(a){}}function c(){for(var h;h=g.shift();){h()}}var g=[];return function(i){g.push(i);"complete"===document.readyState&&setTimeout(b,1);if(1==g.length){if(document.addEventListener){document.addEventListener("DOMContentLoaded",b,!1),window.addEventListener("load",b,!1)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",b);window.attachEvent("onload",b);i=!1;try{i=!window.frameElement}catch(a){}if(document.documentElement.doScroll&&i){var h=function(){try{document.documentElement.doScroll("left")}catch(j){setTimeout(h,1);return}b()};h()}}}}}}()},f=window.CKEDITOR_GETURL;if(f){var e=d.getUrl;d.getUrl=function(a){return f.call(d,a)||e.call(d,a)}}return d}());CKEDITOR.event||(CKEDITOR.event=function(){},CKEDITOR.event.implementOn=function(d){var f=CKEDITOR.event.prototype,e;for(e in f){d[e]==void 0&&(d[e]=f[e])}},CKEDITOR.event.prototype=function(){function d(b){var c=f(this);return c[b]||(c[b]=new e(b))}var f=function(b){b=b.getPrivate&&b.getPrivate()||b._||(b._={});return b.events||(b.events={})},e=function(b){this.name=b;this.listeners=[]};e.prototype={getListenerIndex:function(b){for(var c=0,g=this.listeners;c<g.length;c++){if(g[c].fn==b){return c}}return -1}};return{define:function(a,c){var g=d.call(this,a);CKEDITOR.tools.extend(g,c,true)},on:function(a,j,k,g,r){function l(b,c,h,i){b={name:a,sender:this,editor:b,data:c,listenerData:g,stop:h,cancel:i,removeListener:o};return j.call(k,b)===false?false:b.data}function o(){t.removeListener(a,j)}var q=d.call(this,a);if(q.getListenerIndex(j)<0){q=q.listeners;k||(k=this);isNaN(r)&&(r=10);var t=this;l.fn=j;l.priority=r;for(var u=q.length-1;u>=0;u--){if(q[u].priority<=r){q.splice(u+1,0,l);return{removeListener:o}}}q.unshift(l)}return{removeListener:o}},once:function(){var b=arguments[1];arguments[1]=function(a){a.removeListener();return b.apply(this,arguments)};return this.on.apply(this,arguments)},capture:function(){CKEDITOR.event.useCapture=1;var b=this.on.apply(this,arguments);CKEDITOR.event.useCapture=0;return b},fire:function(){var c=0,h=function(){c=1},i=0,g=function(){i=1};return function(k,a,b){var j=f(this)[k],k=c,r=i;c=i=0;if(j){var u=j.listeners;if(u.length){for(var u=u.slice(0),v,t=0;t<u.length;t++){if(j.errorProof){try{v=u[t].call(this,b,a,h,g)}catch(l){}}else{v=u[t].call(this,b,a,h,g)}v===false?i=1:typeof v!="undefined"&&(a=v);if(c||i){break}}}}a=i?false:typeof a=="undefined"?true:a;c=k;i=r;return a}}(),fireOnce:function(b,c,g){c=this.fire(b,c,g);delete f(this)[b];return c},removeListener:function(c,h){var i=f(this)[c];if(i){var g=i.getListenerIndex(h);g>=0&&i.listeners.splice(g,1)}},removeAllListeners:function(){var b=f(this),c;for(c in b){delete b[c]}},hasListeners:function(b){return(b=f(this)[b])&&b.listeners.length>0}}}());CKEDITOR.editor||(CKEDITOR.editor=function(){CKEDITOR._.pending.push([this,arguments]);CKEDITOR.event.call(this)},CKEDITOR.editor.prototype.fire=function(b,d){b in {instanceReady:1,loaded:1}&&(this[b]=true);return CKEDITOR.event.prototype.fire.call(this,b,d,this)},CKEDITOR.editor.prototype.fireOnce=function(b,d){b in {instanceReady:1,loaded:1}&&(this[b]=true);return CKEDITOR.event.prototype.fireOnce.call(this,b,d,this)},CKEDITOR.event.implementOn(CKEDITOR.editor.prototype));CKEDITOR.env||(CKEDITOR.env=function(){var d=navigator.userAgent.toLowerCase(),g={ie:d.indexOf("trident/")>-1,webkit:d.indexOf(" applewebkit/")>-1,air:d.indexOf(" adobeair/")>-1,mac:d.indexOf("macintosh")>-1,quirks:document.compatMode=="BackCompat"&&(!document.documentMode||document.documentMode<10),mobile:d.indexOf("mobile")>-1,iOS:/(ipad|iphone|ipod)/.test(d),isCustomDomain:function(){if(!this.ie){return false}var b=document.domain,c=window.location.hostname;return b!=c&&b!="["+c+"]"},secure:location.protocol=="https:"};g.gecko=navigator.product=="Gecko"&&!g.webkit&&!g.ie;if(g.webkit){d.indexOf("chrome")>-1?g.chrome=true:g.safari=true}var e=0;if(g.ie){e=g.quirks||!document.documentMode?parseFloat(d.match(/msie (\d+)/)[1]):document.documentMode;g.ie9Compat=e==9;g.ie8Compat=e==8;g.ie7Compat=e==7;g.ie6Compat=e<7||g.quirks}if(g.gecko){var h=d.match(/rv:([\d\.]+)/);if(h){h=h[1].split(".");e=h[0]*10000+(h[1]||0)*100+(h[2]||0)*1}}g.air&&(e=parseFloat(d.match(/ adobeair\/(\d+)/)[1]));g.webkit&&(e=parseFloat(d.match(/ applewebkit\/(\d+)/)[1]));g.version=e;g.isCompatible=g.iOS&&e>=534||!g.mobile&&(g.ie&&e>6||g.gecko&&e>=20000||g.air&&e>=1||g.webkit&&e>=522||false);g.hidpi=window.devicePixelRatio>=2;g.needsBrFiller=g.gecko||g.webkit||g.ie&&e>10;g.needsNbspFiller=g.ie&&e<11;g.cssClass="cke_browser_"+(g.ie?"ie":g.gecko?"gecko":g.webkit?"webkit":"unknown");if(g.quirks){g.cssClass=g.cssClass+" cke_browser_quirks"}if(g.ie){g.cssClass=g.cssClass+(" cke_browser_ie"+(g.quirks?"6 cke_browser_iequirks":g.version))}if(g.air){g.cssClass=g.cssClass+" cke_browser_air"}if(g.iOS){g.cssClass=g.cssClass+" cke_browser_ios"}if(g.hidpi){g.cssClass=g.cssClass+" cke_hidpi"}return g}());"unloaded"==CKEDITOR.status&&function(){CKEDITOR.event.implementOn(CKEDITOR);CKEDITOR.loadFullCore=function(){if(CKEDITOR.status!="basic_ready"){CKEDITOR.loadFullCore._load=1}else{delete CKEDITOR.loadFullCore;var b=document.createElement("script");b.type="text/javascript";b.src=CKEDITOR.basePath+"ckeditor.js";document.getElementsByTagName("head")[0].appendChild(b)}};CKEDITOR.loadFullCoreTimeout=0;CKEDITOR.add=function(b){(this._.pending||(this._.pending=[])).push(b)};(function(){CKEDITOR.domReady(function(){var b=CKEDITOR.loadFullCore,d=CKEDITOR.loadFullCoreTimeout;if(b){CKEDITOR.status="basic_ready";b&&b._load?b():d&&setTimeout(function(){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore()},d*1000)}})})();CKEDITOR.status="basic_loaded"}();CKEDITOR.dom={};(function(){var j=[],l=CKEDITOR.env.gecko?"-moz-":CKEDITOR.env.webkit?"-webkit-":CKEDITOR.env.ie?"-ms-":"",k=/&/g,p=/>/g,m=/</g,o=/"/g,q=/&amp;/g,t=/&gt;/g,r=/&lt;/g,s=/&quot;/g;CKEDITOR.on("reset",function(){j=[]});CKEDITOR.tools={arrayCompare:function(b,c){if(!b&&!c){return true}if(!b||!c||b.length!=c.length){return false}for(var f=0;f<b.length;f++){if(b[f]!=c[f]){return false}}return true},clone:function(b){var c;if(b&&b instanceof Array){c=[];for(var f=0;f<b.length;f++){c[f]=CKEDITOR.tools.clone(b[f])}return c}if(b===null||typeof b!="object"||b instanceof String||b instanceof Number||b instanceof Boolean||b instanceof Date||b instanceof RegExp||b.nodeType||b.window===b){return b}c=new b.constructor;for(f in b){c[f]=CKEDITOR.tools.clone(b[f])}return c},capitalize:function(b,c){return b.charAt(0).toUpperCase()+(c?b.slice(1):b.slice(1).toLowerCase())},extend:function(g){var n=arguments.length,u,h;if(typeof(u=arguments[n-1])=="boolean"){n--}else{if(typeof(u=arguments[n-2])=="boolean"){h=arguments[n-1];n=n-2}}for(var i=1;i<n;i++){var w=arguments[i],v;for(v in w){if(u===true||g[v]==void 0){if(!h||v in h){g[v]=w[v]}}}}return g},prototypedCopy:function(b){var c=function(){};c.prototype=b;return new c},copy:function(b){var c={},f;for(f in b){c[f]=b[f]}return c},isArray:function(b){return Object.prototype.toString.call(b)=="[object Array]"},isEmpty:function(b){for(var c in b){if(b.hasOwnProperty(c)){return false}}return true},cssVendorPrefix:function(b,c,f){if(f){return l+b+":"+c+";"+b+":"+c}f={};f[b]=c;f[l+b]=c;return f},cssStyleToDomStyle:function(){var b=document.createElement("div").style,c=typeof b.cssFloat!="undefined"?"cssFloat":typeof b.styleFloat!="undefined"?"styleFloat":"float";return function(d){return d=="float"?c:d.replace(/-./g,function(e){return e.substr(1).toUpperCase()})}}(),buildStyleHtml:function(c){for(var c=[].concat(c),g,h=[],f=0;f<c.length;f++){if(g=c[f]){/@import|[{}]/.test(g)?h.push("<style>"+g+"</style>"):h.push('<link type="text/css" rel=stylesheet href="'+g+'">')}}return h.join("")},htmlEncode:function(b){return(""+b).replace(k,"&amp;").replace(p,"&gt;").replace(m,"&lt;")},htmlDecode:function(b){return b.replace(q,"&").replace(t,">").replace(r,"<")},htmlEncodeAttr:function(b){return b.replace(o,"&quot;").replace(m,"&lt;").replace(p,"&gt;")},htmlDecodeAttr:function(b){return b.replace(s,'"').replace(r,"<").replace(t,">")},getNextNumber:function(){var b=0;return function(){return ++b}}(),getNextId:function(){return"cke_"+this.getNextNumber()},override:function(b,c){var f=c(b);f.prototype=b.prototype;return f},setTimeout:function(f,i,n,g,h){h||(h=window);n||(n=h);return h.setTimeout(function(){g?f.apply(n,[].concat(g)):f.apply(n)},i||0)},trim:function(){var b=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(a){return a.replace(b,"")}}(),ltrim:function(){var b=/^[ \t\n\r]+/g;return function(a){return a.replace(b,"")}}(),rtrim:function(){var b=/[ \t\n\r]+$/g;return function(a){return a.replace(b,"")}}(),indexOf:function(c,g){if(typeof g=="function"){for(var h=0,f=c.length;h<f;h++){if(g(c[h])){return h}}}else{if(c.indexOf){return c.indexOf(g)}h=0;for(f=c.length;h<f;h++){if(c[h]===g){return h}}}return -1},search:function(b,c){var f=CKEDITOR.tools.indexOf(b,c);return f>=0?b[f]:null},bind:function(b,c){return function(){return b.apply(c,arguments)}},createClass:function(f){var i=f.$,n=f.base,g=f.privates||f._,h=f.proto,f=f.statics;!i&&(i=function(){n&&this.base.apply(this,arguments)});if(g){var u=i,i=function(){var b=this._||(this._={}),c;for(c in g){var v=g[c];b[c]=typeof v=="function"?CKEDITOR.tools.bind(v,this):v}u.apply(this,arguments)}}if(n){i.prototype=this.prototypedCopy(n.prototype);i.prototype.constructor=i;i.base=n;i.baseProto=n.prototype;i.prototype.base=function(){this.base=n.prototype.base;n.apply(this,arguments);this.base=arguments.callee}}h&&this.extend(i.prototype,h,true);f&&this.extend(i,f,true);return i},addFunction:function(a,b){return j.push(function(){return a.apply(b||this,arguments)})-1},removeFunction:function(a){j[a]=null},callFunction:function(a){var b=j[a];return b&&b.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var b=/^-?\d+\.?\d*px$/,c;return function(a){c=CKEDITOR.tools.trim(a+"")+"px";return b.test(c)?c:a||""}}(),convertToPx:function(){var b;return function(a){if(!b){b=CKEDITOR.dom.element.createFromHtml('<div style="position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"></div>',CKEDITOR.document);CKEDITOR.document.getBody().append(b)}if(!/%$/.test(a)){b.setStyle("width",a);return b.$.clientWidth}return a}}(),repeat:function(b,c){return Array(c+1).join(b)},tryThese:function(){for(var f,i=0,n=arguments.length;i<n;i++){var g=arguments[i];try{f=g();break}catch(h){}}return f},genKey:function(){return Array.prototype.slice.call(arguments).join("-")},defer:function(b){return function(){var a=arguments,c=this;window.setTimeout(function(){b.apply(c,a)},0)}},normalizeCssText:function(f,i){var n=[],g,h=CKEDITOR.tools.parseCssText(f,true,i);for(g in h){n.push(g+":"+h[g])}n.sort();return n.length?n.join(";")+";":""},convertRgbToHex:function(b){return b.replace(/(?:rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\))/gi,function(c,g,h,f){c=[g,h,f];for(g=0;g<3;g++){c[g]=("0"+parseInt(c[g],10).toString(16)).slice(-2)}return"#"+c.join("")})},parseCssText:function(c,g,h){var f={};if(h){h=new CKEDITOR.dom.element("span");h.setAttribute("style",c);c=CKEDITOR.tools.convertRgbToHex(h.getAttribute("style")||"")}if(!c||c==";"){return f}c.replace(/&quot;/g,'"').replace(/\s*([^:;\s]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(b,d,i){if(g){d=d.toLowerCase();d=="font-family"&&(i=i.toLowerCase().replace(/["']/g,"").replace(/\s*,\s*/g,","));i=CKEDITOR.tools.trim(i)}f[d]=i});return f},writeCssText:function(c,g){var h,f=[];for(h in c){f.push(h+":"+c[h])}g&&f.sort();return f.join("; ")},objectCompare:function(c,g,h){var f;if(!c&&!g){return true}if(!c||!g){return false}for(f in c){if(c[f]!=g[f]){return false}}if(!h){for(f in g){if(c[f]!=g[f]){return false}}}return true},objectKeys:function(b){var c=[],f;for(f in b){c.push(f)}return c},convertArrayToObject:function(f,i){var n={};arguments.length==1&&(i=true);for(var g=0,h=f.length;g<h;++g){n[f[g]]=i}return n},fixDomain:function(){for(var b;;){try{b=window.parent.document.domain;break}catch(c){b=b?b.replace(/.+?(?:\.|$)/,""):document.domain;if(!b){break}document.domain=b}}return !!b},eventsBuffer:function(f,i){function n(){h=(new Date).getTime();g=false;i()}var g,h=0;return{input:function(){if(!g){var a=(new Date).getTime()-h;a<f?g=setTimeout(n,f-a):n()}},reset:function(){g&&clearTimeout(g);g=h=0}}},enableHtml5Elements:function(f,i){for(var n=["abbr","article","aside","audio","bdi","canvas","data","datalist","details","figcaption","figure","footer","header","hgroup","mark","meter","nav","output","progress","section","summary","time","video"],g=n.length,h;g--;){h=f.createElement(n[g]);i&&f.appendChild(h)}},checkIfAnyArrayItemMatches:function(c,g){for(var h=0,f=c.length;h<f;++h){if(c[h].match(g)){return true}}return false},checkIfAnyObjectPropertyMatches:function(b,c){for(var f in b){if(f.match(c)){return true}}return false},transparentImageData:"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw=="}})();CKEDITOR.dtd=function(){var i=CKEDITOR.tools.extend,k=function(f,n){for(var s=CKEDITOR.tools.clone(f),g=1;g<arguments.length;g++){var n=arguments[g],h;for(h in n){delete s[h]}}return s},j={},o={},l={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},m={command:1,link:1,meta:1,noscript:1,script:1,style:1},p={},r={"#":1},q={center:1,dir:1,noframes:1};i(j,{a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,"var":1,video:1,wbr:1},r,{acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1});i(o,l,j,q);k={a:k(j,{a:1,button:1}),abbr:j,address:o,area:p,article:i({style:1},o),aside:i({style:1},o),audio:i({source:1,track:1},o),b:j,base:p,bdi:j,bdo:j,blockquote:o,body:o,br:p,button:k(j,{a:1,button:1}),canvas:j,caption:o,cite:j,code:j,col:p,colgroup:{col:1},command:p,datalist:i({option:1},j),dd:o,del:j,details:i({summary:1},o),dfn:j,div:i({style:1},o),dl:{dt:1,dd:1},dt:o,em:j,embed:p,fieldset:i({legend:1},o),figcaption:o,figure:i({figcaption:1},o),footer:o,form:o,h1:j,h2:j,h3:j,h4:j,h5:j,h6:j,head:i({title:1,base:1},m),header:o,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:p,html:i({head:1,body:1},o,m),i:j,iframe:r,img:p,input:p,ins:j,kbd:j,keygen:p,label:j,legend:j,li:o,link:p,map:o,mark:j,menu:i({li:1},o),meta:p,meter:k(j,{meter:1}),nav:o,noscript:i({link:1,meta:1,style:1},j),object:i({param:1},j),ol:{li:1},optgroup:{option:1},option:r,output:j,p:j,param:p,pre:j,progress:k(j,{progress:1}),q:j,rp:j,rt:j,ruby:i({rp:1,rt:1},j),s:j,samp:j,script:r,section:i({style:1},o),select:{optgroup:1,option:1},small:j,source:p,span:j,strong:j,style:r,sub:j,summary:j,sup:j,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:o,textarea:r,tfoot:{tr:1},th:o,thead:{tr:1},time:k(j,{time:1}),title:r,tr:{th:1,td:1},track:p,u:j,ul:{li:1},"var":j,video:i({source:1,track:1},o),wbr:p,acronym:j,applet:i({param:1},o),basefont:p,big:j,center:o,dialog:p,dir:{li:1},font:j,isindex:p,noframes:o,strike:j,tt:j};i(k,{$block:i({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},l,q),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,hgroup:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,nav:1,p:1,pre:1,section:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},$inline:j,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:i({body:1,head:1,html:1},k.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,"var":1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}});return k}();CKEDITOR.dom.event=function(b){this.$=b};CKEDITOR.dom.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var b=this.getKey();if(this.$.ctrlKey||this.$.metaKey){b=b+CKEDITOR.CTRL}this.$.shiftKey&&(b=b+CKEDITOR.SHIFT);this.$.altKey&&(b=b+CKEDITOR.ALT);return b},preventDefault:function(b){var d=this.$;d.preventDefault?d.preventDefault():d.returnValue=false;b&&this.stopPropagation()},stopPropagation:function(){var b=this.$;b.stopPropagation?b.stopPropagation():b.cancelBubble=true},getTarget:function(){var b=this.$.target||this.$.srcElement;return b?new CKEDITOR.dom.node(b):null},getPhase:function(){return this.$.eventPhase||2},getPageOffset:function(){var b=this.getTarget().getDocument().$;return{x:this.$.pageX||this.$.clientX+(b.documentElement.scrollLeft||b.body.scrollLeft),y:this.$.pageY||this.$.clientY+(b.documentElement.scrollTop||b.body.scrollTop)}}};CKEDITOR.CTRL=1114112;CKEDITOR.SHIFT=2228224;CKEDITOR.ALT=4456448;CKEDITOR.EVENT_PHASE_CAPTURING=1;CKEDITOR.EVENT_PHASE_AT_TARGET=2;CKEDITOR.EVENT_PHASE_BUBBLING=3;CKEDITOR.dom.domObject=function(b){if(b){this.$=b}};CKEDITOR.dom.domObject.prototype=function(){var b=function(c,d){return function(a){typeof CKEDITOR!="undefined"&&c.fire(d,new CKEDITOR.dom.event(a))}};return{getPrivate:function(){var c;if(!(c=this.getCustomData("_"))){this.setCustomData("_",c={})}return c},on:function(d){var a=this.getCustomData("_cke_nativeListeners");if(!a){a={};this.setCustomData("_cke_nativeListeners",a)}if(!a[d]){a=a[d]=b(this,d);this.$.addEventListener?this.$.addEventListener(d,a,!!CKEDITOR.event.useCapture):this.$.attachEvent&&this.$.attachEvent("on"+d,a)}return CKEDITOR.event.prototype.on.apply(this,arguments)},removeListener:function(c){CKEDITOR.event.prototype.removeListener.apply(this,arguments);if(!this.hasListeners(c)){var d=this.getCustomData("_cke_nativeListeners"),e=d&&d[c];if(e){this.$.removeEventListener?this.$.removeEventListener(c,e,false):this.$.detachEvent&&this.$.detachEvent("on"+c,e);delete d[c]}}},removeAllListeners:function(){var c=this.getCustomData("_cke_nativeListeners"),d;for(d in c){var e=c[d];this.$.detachEvent?this.$.detachEvent("on"+d,e):this.$.removeEventListener&&this.$.removeEventListener(d,e,false);delete c[d]}CKEDITOR.event.prototype.removeAllListeners.call(this)}}}();(function(b){var d={};CKEDITOR.on("reset",function(){d={}});b.equals=function(e){try{return e&&e.$===this.$}catch(f){return false}};b.setCustomData=function(c,g){var e=this.getUniqueId();(d[e]||(d[e]={}))[c]=g;return this};b.getCustomData=function(c){var e=this.$["data-cke-expando"];return(e=e&&d[e])&&c in e?e[c]:null};b.removeCustomData=function(c){var i=this.$["data-cke-expando"],i=i&&d[i],g,h;if(i){g=i[c];h=c in i;delete i[c]}return h?g:null};b.clearCustomData=function(){this.removeAllListeners();var c=this.$["data-cke-expando"];c&&delete d[c]};b.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=CKEDITOR.tools.getNextNumber())};CKEDITOR.event.implementOn(b)})(CKEDITOR.dom.domObject.prototype);CKEDITOR.dom.node=function(b){return b?new CKEDITOR.dom[b.nodeType==CKEDITOR.NODE_DOCUMENT?"document":b.nodeType==CKEDITOR.NODE_ELEMENT?"element":b.nodeType==CKEDITOR.NODE_TEXT?"text":b.nodeType==CKEDITOR.NODE_COMMENT?"comment":b.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT?"documentFragment":"domObject"](b):this};CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject;CKEDITOR.NODE_ELEMENT=1;CKEDITOR.NODE_DOCUMENT=9;CKEDITOR.NODE_TEXT=3;CKEDITOR.NODE_COMMENT=8;CKEDITOR.NODE_DOCUMENT_FRAGMENT=11;CKEDITOR.POSITION_IDENTICAL=0;CKEDITOR.POSITION_DISCONNECTED=1;CKEDITOR.POSITION_FOLLOWING=2;CKEDITOR.POSITION_PRECEDING=4;CKEDITOR.POSITION_IS_CONTAINED=8;CKEDITOR.POSITION_CONTAINS=16;CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function(b,d){b.append(this,d);return b},clone:function(d,g){var e=this.$.cloneNode(d),h=function(a){a["data-cke-expando"]&&(a["data-cke-expando"]=false);if(a.nodeType==CKEDITOR.NODE_ELEMENT){g||a.removeAttribute("id",false);if(d){for(var a=a.childNodes,b=0;b<a.length;b++){h(a[b])}}}};h(e);return new CKEDITOR.dom.node(e)},hasPrevious:function(){return !!this.$.previousSibling},hasNext:function(){return !!this.$.nextSibling},insertAfter:function(b){b.$.parentNode.insertBefore(this.$,b.$.nextSibling);return b},insertBefore:function(b){b.$.parentNode.insertBefore(this.$,b.$);return b},insertBeforeMe:function(b){this.$.parentNode.insertBefore(b.$,this.$);return b},getAddress:function(e){for(var h=[],g=this.getDocument().$.documentElement,j=this.$;j&&j!=g;){var i=j.parentNode;i&&h.unshift(this.getIndex.call({$:j},e));j=i}return h},getDocument:function(){return new CKEDITOR.dom.document(this.$.ownerDocument||this.$.parentNode.ownerDocument)},getIndex:function(d){var g=this.$,e=-1,h;if(!this.$.parentNode){return e}do{if(!d||!(g!=this.$&&g.nodeType==CKEDITOR.NODE_TEXT&&(h||!g.nodeValue))){e++;h=g.nodeType==CKEDITOR.NODE_TEXT}}while(g=g.previousSibling);return e},getNextSourceNode:function(e,h,g){if(g&&!g.call){var j=g,g=function(b){return !b.equals(j)}}var e=!e&&this.getFirst&&this.getFirst(),i;if(!e){if(this.type==CKEDITOR.NODE_ELEMENT&&g&&g(this,true)===false){return null}e=this.getNext()}for(;!e&&(i=(i||this).getParent());){if(g&&g(i,true)===false){return null}e=i.getNext()}return !e||g&&g(e)===false?null:h&&h!=e.type?e.getNextSourceNode(false,h,g):e},getPreviousSourceNode:function(e,h,g){if(g&&!g.call){var j=g,g=function(b){return !b.equals(j)}}var e=!e&&this.getLast&&this.getLast(),i;if(!e){if(this.type==CKEDITOR.NODE_ELEMENT&&g&&g(this,true)===false){return null}e=this.getPrevious()}for(;!e&&(i=(i||this).getParent());){if(g&&g(i,true)===false){return null}e=i.getPrevious()}return !e||g&&g(e)===false?null:h&&e.type!=h?e.getPreviousSourceNode(false,h,g):e},getPrevious:function(d){var f=this.$,e;do{e=(f=f.previousSibling)&&f.nodeType!=10&&new CKEDITOR.dom.node(f)}while(e&&d&&!d(e));return e},getNext:function(d){var f=this.$,e;do{e=(f=f.nextSibling)&&new CKEDITOR.dom.node(f)}while(e&&d&&!d(e));return e},getParent:function(b){var d=this.$.parentNode;return d&&(d.nodeType==CKEDITOR.NODE_ELEMENT||b&&d.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)?new CKEDITOR.dom.node(d):null},getParents:function(d){var f=this,e=[];do{e[d?"push":"unshift"](f)}while(f=f.getParent());return e},getCommonAncestor:function(b){if(b.equals(this)){return this}if(b.contains&&b.contains(this)){return b}var d=this.contains?this:this.getParent();do{if(d.contains(b)){return d}}while(d=d.getParent());return null},getPosition:function(d){var g=this.$,e=d.$;if(g.compareDocumentPosition){return g.compareDocumentPosition(e)}if(g==e){return CKEDITOR.POSITION_IDENTICAL}if(this.type==CKEDITOR.NODE_ELEMENT&&d.type==CKEDITOR.NODE_ELEMENT){if(g.contains){if(g.contains(e)){return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING}if(e.contains(g)){return CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING}}if("sourceIndex" in g){return g.sourceIndex<0||e.sourceIndex<0?CKEDITOR.POSITION_DISCONNECTED:g.sourceIndex<e.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}}for(var g=this.getAddress(),d=d.getAddress(),e=Math.min(g.length,d.length),h=0;h<=e-1;h++){if(g[h]!=d[h]){if(h<e){return g[h]<d[h]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}break}}return g.length<d.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING},getAscendant:function(e,h){var g=this.$,j;if(!h){g=g.parentNode}for(;g;){if(g.nodeName&&(j=g.nodeName.toLowerCase(),typeof e=="string"?j==e:j in e)){return new CKEDITOR.dom.node(g)}try{g=g.parentNode}catch(i){g=null}}return null},hasAscendant:function(d,f){var e=this.$;if(!f){e=e.parentNode}for(;e;){if(e.nodeName&&e.nodeName.toLowerCase()==d){return true}e=e.parentNode}return false},move:function(b,d){b.append(this.remove(),d)},remove:function(d){var f=this.$,e=f.parentNode;if(e){if(d){for(;d=f.firstChild;){e.insertBefore(f.removeChild(d),f)}}e.removeChild(f)}return this},replace:function(b){this.insertBefore(b);b.remove()},trim:function(){this.ltrim();this.rtrim()},ltrim:function(){for(var d;this.getFirst&&(d=this.getFirst());){if(d.type==CKEDITOR.NODE_TEXT){var f=CKEDITOR.tools.ltrim(d.getText()),e=d.getLength();if(f){if(f.length<e){d.split(e-f.length);this.$.removeChild(this.$.firstChild)}}else{d.remove();continue}}break}},rtrim:function(){for(var d;this.getLast&&(d=this.getLast());){if(d.type==CKEDITOR.NODE_TEXT){var f=CKEDITOR.tools.rtrim(d.getText()),e=d.getLength();if(f){if(f.length<e){d.split(f.length);this.$.lastChild.parentNode.removeChild(this.$.lastChild)}}else{d.remove();continue}}break}if(CKEDITOR.env.needsBrFiller){(d=this.$.lastChild)&&(d.type==1&&d.nodeName.toLowerCase()=="br")&&d.parentNode.removeChild(d)}},isReadOnly:function(){var b=this;this.type!=CKEDITOR.NODE_ELEMENT&&(b=this.getParent());if(b&&typeof b.$.isContentEditable!="undefined"){return !(b.$.isContentEditable||b.data("cke-editable"))}for(;b;){if(b.data("cke-editable")){break}if(b.getAttribute("contentEditable")=="false"){return true}if(b.getAttribute("contentEditable")=="true"){break}b=b.getParent()}return !b}});CKEDITOR.dom.window=function(b){CKEDITOR.dom.domObject.call(this,b)};CKEDITOR.dom.window.prototype=new CKEDITOR.dom.domObject;CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype,{focus:function(){this.$.focus()},getViewPaneSize:function(){var b=this.$.document,d=b.compatMode=="CSS1Compat";return{width:(d?b.documentElement.clientWidth:b.body.clientWidth)||0,height:(d?b.documentElement.clientHeight:b.body.clientHeight)||0}},getScrollPosition:function(){var b=this.$;if("pageXOffset" in b){return{x:b.pageXOffset||0,y:b.pageYOffset||0}}b=b.document;return{x:b.documentElement.scrollLeft||b.body.scrollLeft||0,y:b.documentElement.scrollTop||b.body.scrollTop||0}},getFrame:function(){var b=this.$.frameElement;return b?new CKEDITOR.dom.element.get(b):null}});CKEDITOR.dom.document=function(b){CKEDITOR.dom.domObject.call(this,b)};CKEDITOR.dom.document.prototype=new CKEDITOR.dom.domObject;CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype,{type:CKEDITOR.NODE_DOCUMENT,appendStyleSheet:function(b){if(this.$.createStyleSheet){this.$.createStyleSheet(b)}else{var d=new CKEDITOR.dom.element("link");d.setAttributes({rel:"stylesheet",type:"text/css",href:b});this.getHead().append(d)}},appendStyleText:function(d){if(this.$.createStyleSheet){var f=this.$.createStyleSheet("");f.cssText=d}else{var e=new CKEDITOR.dom.element("style",this);e.append(new CKEDITOR.dom.text(d,this));this.getHead().append(e)}return f||e.$.sheet},createElement:function(d,f){var e=new CKEDITOR.dom.element(d,this);if(f){f.attributes&&e.setAttributes(f.attributes);f.styles&&e.setStyles(f.styles)}return e},createText:function(b){return new CKEDITOR.dom.text(b,this)},focus:function(){this.getWindow().focus()},getActive:function(){return new CKEDITOR.dom.element(this.$.activeElement)},getById:function(b){return(b=this.$.getElementById(b))?new CKEDITOR.dom.element(b):null},getByAddress:function(h,j){for(var i=this.$.documentElement,m=0;i&&m<h.length;m++){var k=h[m];if(j){for(var l=-1,o=0;o<i.childNodes.length;o++){var p=i.childNodes[o];if(!(j===true&&p.nodeType==3&&p.previousSibling&&p.previousSibling.nodeType==3)){l++;if(l==k){i=p;break}}}}else{i=i.childNodes[k]}}return i?new CKEDITOR.dom.node(i):null},getElementsByTag:function(b,d){if((!CKEDITOR.env.ie||document.documentMode>8)&&d){b=d+":"+b}return new CKEDITOR.dom.nodeList(this.$.getElementsByTagName(b))},getHead:function(){var b=this.$.getElementsByTagName("head")[0];return b=b?new CKEDITOR.dom.element(b):this.getDocumentElement().append(new CKEDITOR.dom.element("head"),true)},getBody:function(){return new CKEDITOR.dom.element(this.$.body)},getDocumentElement:function(){return new CKEDITOR.dom.element(this.$.documentElement)},getWindow:function(){return new CKEDITOR.dom.window(this.$.parentWindow||this.$.defaultView)},write:function(b){this.$.open("text/html","replace");CKEDITOR.env.ie&&(b=b.replace(/(?:^\s*<!DOCTYPE[^>]*?>)|^/i,'$&\n<script data-cke-temp="1">('+CKEDITOR.tools.fixDomain+")();</script>"));this.$.write(b);this.$.close()},find:function(b){return new CKEDITOR.dom.nodeList(this.$.querySelectorAll(b))},findOne:function(b){return(b=this.$.querySelector(b))?new CKEDITOR.dom.element(b):null},_getHtml5ShivFrag:function(){var b=this.getCustomData("html5ShivFrag");if(!b){b=this.$.createDocumentFragment();CKEDITOR.tools.enableHtml5Elements(b,true);this.setCustomData("html5ShivFrag",b)}return b}});CKEDITOR.dom.nodeList=function(b){this.$=b};CKEDITOR.dom.nodeList.prototype={count:function(){return this.$.length},getItem:function(b){if(b<0||b>=this.$.length){return null}return(b=this.$[b])?new CKEDITOR.dom.node(b):null}};CKEDITOR.dom.element=function(b,d){typeof b=="string"&&(b=(d?d.$:document).createElement(b));CKEDITOR.dom.domObject.call(this,b)};CKEDITOR.dom.element.get=function(b){return(b=typeof b=="string"?document.getElementById(b)||document.getElementsByName(b)[0]:b)&&(b.$?b:new CKEDITOR.dom.element(b))};CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node;CKEDITOR.dom.element.createFromHtml=function(d,f){var e=new CKEDITOR.dom.element("div",f);e.setHtml(d);return e.getFirst().remove()};CKEDITOR.dom.element.setMarker=function(g,i,h,l){var j=i.getCustomData("list_marker_id")||i.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),k=i.getCustomData("list_marker_names")||i.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");g[j]=i;k[h]=1;return i.setCustomData(h,l)};CKEDITOR.dom.element.clearAllMarkers=function(b){for(var d in b){CKEDITOR.dom.element.clearMarkers(b,b[d],1)}};CKEDITOR.dom.element.clearMarkers=function(g,i,h){var l=i.getCustomData("list_marker_names"),j=i.getCustomData("list_marker_id"),k;for(k in l){i.removeCustomData(k)}i.removeCustomData("list_marker_names");if(h){i.removeCustomData("list_marker_id");delete g[j]}};(function(){function d(b){var c=true;if(!b.$.id){b.$.id="cke_tmp_"+CKEDITOR.tools.getNextNumber();c=false}return function(){c||b.removeAttribute("id")}}function g(b,c){return"#"+b.$.id+" "+c.split(/,\s*/).join(", #"+b.$.id+" ")}function e(f){for(var k=0,i=0,j=h[f].length;i<j;i++){k=k+(parseInt(this.getComputedStyle(h[f][i])||0,10)||0)}return k}CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:function(b){var c=this.$.className;c&&(RegExp("(?:^|\\s)"+b+"(?:\\s|$)","").test(c)||(c=c+(" "+b)));this.$.className=c||b;return this},removeClass:function(b){var c=this.getAttribute("class");if(c){b=RegExp("(?:^|\\s+)"+b+"(?=\\s|$)","i");if(b.test(c)){(c=c.replace(b,"").replace(/^\s+/,""))?this.setAttribute("class",c):this.removeAttribute("class")}}return this},hasClass:function(b){return RegExp("(?:^|\\s+)"+b+"(?=\\s|$)","").test(this.getAttribute("class"))},append:function(b,c){typeof b=="string"&&(b=this.getDocument().createElement(b));c?this.$.insertBefore(b.$,this.$.firstChild):this.$.appendChild(b.$);return b},appendHtml:function(b){if(this.$.childNodes.length){var c=new CKEDITOR.dom.element("div",this.getDocument());c.setHtml(b);c.moveChildren(this)}else{this.setHtml(b)}},appendText:function(b){this.$.text!=void 0?this.$.text=this.$.text+b:this.append(new CKEDITOR.dom.text(b))},appendBogus:function(b){if(b||CKEDITOR.env.needsBrFiller){for(b=this.getLast();b&&b.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(b.getText());){b=b.getPrevious()}if(!b||!b.is||!b.is("br")){b=this.getDocument().createElement("br");CKEDITOR.env.gecko&&b.setAttribute("type","_moz");this.append(b)}}},breakParent:function(b){var c=new CKEDITOR.dom.range(this.getDocument());c.setStartAfter(this);c.setEndAfter(b);b=c.extractContents();c.insertNode(this.remove());b.insertAfterNode(this)},contains:CKEDITOR.env.ie||CKEDITOR.env.webkit?function(b){var c=this.$;return b.type!=CKEDITOR.NODE_ELEMENT?c.contains(b.getParent().$):c!=b.$&&c.contains(b.$)}:function(b){return !!(this.$.compareDocumentPosition(b.$)&16)},focus:function(){function b(){try{this.$.focus()}catch(a){}}return function(a){a?CKEDITOR.tools.setTimeout(b,100,this):b.call(this)}}(),getHtml:function(){var b=this.$.innerHTML;return CKEDITOR.env.ie?b.replace(/<\?[^>]*>/g,""):b},getOuterHtml:function(){if(this.$.outerHTML){return this.$.outerHTML.replace(/<\?[^>]*>/,"")}var b=this.$.ownerDocument.createElement("div");b.appendChild(this.$.cloneNode(true));return b.innerHTML},getClientRect:function(){var b=CKEDITOR.tools.extend({},this.$.getBoundingClientRect());!b.width&&(b.width=b.right-b.left);!b.height&&(b.height=b.bottom-b.top);return b},setHtml:CKEDITOR.env.ie&&CKEDITOR.env.version<9?function(f){try{var k=this.$;if(this.getParent()){return k.innerHTML=f}var i=this.getDocument()._getHtml5ShivFrag();i.appendChild(k);k.innerHTML=f;i.removeChild(k);return f}catch(j){this.$.innerHTML="";k=new CKEDITOR.dom.element("body",this.getDocument());k.$.innerHTML=f;for(k=k.getChildren();k.count();){this.append(k.getItem(0))}return f}}:function(b){return this.$.innerHTML=b},setText:function(){var b=document.createElement("p");b.innerHTML="x";b=b.textContent;return function(a){this.$[b?"textContent":"innerText"]=a}}(),getAttribute:function(){var b=function(c){return this.$.getAttribute(c,2)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(c){switch(c){case"class":c="className";break;case"http-equiv":c="httpEquiv";break;case"name":return this.$.name;case"tabindex":c=this.$.getAttribute(c,2);c!==0&&this.$.tabIndex===0&&(c=null);return c;case"checked":c=this.$.attributes.getNamedItem(c);return(c.specified?c.nodeValue:this.$.checked)?"checked":null;case"hspace":case"value":return this.$[c];case"style":return this.$.style.cssText;case"contenteditable":case"contentEditable":return this.$.attributes.getNamedItem("contentEditable").specified?this.$.getAttribute("contentEditable"):null}return this.$.getAttribute(c,2)}:b}(),getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getComputedStyle:CKEDITOR.env.ie?function(b){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(b)]}:function(b){var c=this.getWindow().$.getComputedStyle(this.$,null);return c?c.getPropertyValue(b):""},getDtd:function(){var b=CKEDITOR.dtd[this.getName()];this.getDtd=function(){return b};return b},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,getTabIndex:CKEDITOR.env.ie?function(){var b=this.$.tabIndex;b===0&&(!CKEDITOR.dtd.$tabIndex[this.getName()]&&parseInt(this.getAttribute("tabindex"),10)!==0)&&(b=-1);return b}:CKEDITOR.env.webkit?function(){var b=this.$.tabIndex;if(b==void 0){b=parseInt(this.getAttribute("tabindex"),10);isNaN(b)&&(b=-1)}return b}:function(){return this.$.tabIndex},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var b=this.$.nodeName.toLowerCase();if(CKEDITOR.env.ie&&!(document.documentMode>8)){var c=this.$.scopeName;c!="HTML"&&(b=c.toLowerCase()+":"+b)}return(this.getName=function(){return b})()},getValue:function(){return this.$.value},getFirst:function(b){var c=this.$.firstChild;(c=c&&new CKEDITOR.dom.node(c))&&(b&&!b(c))&&(c=c.getNext(b));return c},getLast:function(b){var c=this.$.lastChild;(c=c&&new CKEDITOR.dom.node(c))&&(b&&!b(c))&&(c=c.getPrevious(b));return c},getStyle:function(b){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(b)]},is:function(){var b=this.getName();if(typeof arguments[0]=="object"){return !!arguments[0][b]}for(var c=0;c<arguments.length;c++){if(arguments[c]==b){return true}}return false},isEditable:function(b){var c=this.getName();if(this.isReadOnly()||this.getComputedStyle("display")=="none"||this.getComputedStyle("visibility")=="hidden"||CKEDITOR.dtd.$nonEditable[c]||CKEDITOR.dtd.$empty[c]||this.is("a")&&(this.data("cke-saved-name")||this.hasAttribute("name"))&&!this.getChildCount()){return false}if(b!==false){b=CKEDITOR.dtd[c]||CKEDITOR.dtd.span;return !(!b||!b["#"])}return true},isIdentical:function(c){var i=this.clone(0,1),c=c.clone(0,1);i.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]);c.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]);if(i.$.isEqualNode){i.$.style.cssText=CKEDITOR.tools.normalizeCssText(i.$.style.cssText);c.$.style.cssText=CKEDITOR.tools.normalizeCssText(c.$.style.cssText);return i.$.isEqualNode(c.$)}i=i.getOuterHtml();c=c.getOuterHtml();if(CKEDITOR.env.ie&&CKEDITOR.env.version<9&&this.is("a")){var f=this.getParent();if(f.type==CKEDITOR.NODE_ELEMENT){f=f.clone();f.setHtml(i);i=f.getHtml();f.setHtml(c);c=f.getHtml()}}return i==c},isVisible:function(){var c=(this.$.offsetHeight||this.$.offsetWidth)&&this.getComputedStyle("visibility")!="hidden",i,f;if(c&&CKEDITOR.env.webkit){i=this.getWindow();if(!i.equals(CKEDITOR.document.getWindow())&&(f=i.$.frameElement)){c=(new CKEDITOR.dom.element(f)).isVisible()}}return !!c},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()]){return false}for(var f=this.getChildren(),k=0,i=f.count();k<i;k++){var j=f.getItem(k);if(!(j.type==CKEDITOR.NODE_ELEMENT&&j.data("cke-bookmark"))&&(j.type==CKEDITOR.NODE_ELEMENT&&!j.isEmptyInlineRemoveable()||j.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(j.getText()))){return false}}return true},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(){for(var c=this.$.attributes,i=0;i<c.length;i++){var f=c[i];switch(f.nodeName){case"class":if(this.getAttribute("class")){return true}case"data-cke-expando":continue;default:if(f.specified){return true}}}return false}:function(){var c=this.$.attributes,i=c.length,f={"data-cke-expando":1,_moz_dirty:1};return i>0&&(i>2||!f[c[0].nodeName]||i==2&&!f[c[1].nodeName])},hasAttribute:function(){function b(c){var a=this.$.attributes.getNamedItem(c);if(this.getName()=="input"){switch(c){case"class":return this.$.className.length>0;case"checked":return !!this.$.checked;case"value":c=this.getAttribute("type");return c=="checkbox"||c=="radio"?this.$.value!="on":!!this.$.value}}return !a?false:a.specified}return CKEDITOR.env.ie?CKEDITOR.env.version<8?function(a){return a=="name"?!!this.$.name:b.call(this,a)}:b:function(c){return !!this.$.attributes.getNamedItem(c)}}(),hide:function(){this.setStyle("display","none")},moveChildren:function(f,k){var i=this.$,f=f.$;if(i!=f){var j;if(k){for(;j=i.lastChild;){f.insertBefore(i.removeChild(j),f.firstChild)}}else{for(;j=i.firstChild;){f.appendChild(i.removeChild(j))}}}},mergeSiblings:function(){function b(k,a,j){if(a&&a.type==CKEDITOR.NODE_ELEMENT){for(var l=[];a.data("cke-bookmark")||a.isEmptyInlineRemoveable();){l.push(a);a=j?a.getNext():a.getPrevious();if(!a||a.type!=CKEDITOR.NODE_ELEMENT){return}}if(k.isIdentical(a)){for(var m=j?k.getLast():k.getFirst();l.length;){l.shift().move(k,!j)}a.moveChildren(k,!j);a.remove();m&&m.type==CKEDITOR.NODE_ELEMENT&&m.mergeSiblings()}}}return function(a){if(a===false||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is("a")){b(this,this.getNext(),true);b(this,this.getPrevious())}}}(),show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var b=function(c,f){this.$.setAttribute(c,f);return this};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(c,a){c=="class"?this.$.className=a:c=="style"?this.$.style.cssText=a:c=="tabindex"?this.$.tabIndex=a:c=="checked"?this.$.checked=a:c=="contenteditable"?b.call(this,"contentEditable",a):b.apply(this,arguments);return this}:CKEDITOR.env.ie8Compat&&CKEDITOR.env.secure?function(a,i){if(a=="src"&&i.match(/^http:\/\//)){try{b.apply(this,arguments)}catch(j){}}else{b.apply(this,arguments)}return this}:b}(),setAttributes:function(c){for(var f in c){this.setAttribute(f,c[f])}return this},setValue:function(b){this.$.value=b;return this},removeAttribute:function(){var b=function(c){this.$.removeAttribute(c)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(c){c=="class"?c="className":c=="tabindex"?c="tabIndex":c=="contenteditable"&&(c="contentEditable");this.$.removeAttribute(c)}:b}(),removeAttributes:function(c){if(CKEDITOR.tools.isArray(c)){for(var f=0;f<c.length;f++){this.removeAttribute(c[f])}}else{for(f in c){c.hasOwnProperty(f)&&this.removeAttribute(f)}}},removeStyle:function(j){var k=this.$.style;if(!k.removeProperty&&(j=="border"||j=="margin"||j=="padding")){var l=["top","left","right","bottom"],m;j=="border"&&(m=["color","style","width"]);for(var k=[],n=0;n<l.length;n++){if(m){for(var o=0;o<m.length;o++){k.push([j,l[n],m[o]].join("-"))}}else{k.push([j,l[n]].join("-"))}}for(j=0;j<k.length;j++){this.removeStyle(k[j])}}else{k.removeProperty?k.removeProperty(j):k.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(j));this.$.style.cssText||this.removeAttribute("style")}},setStyle:function(c,f){this.$.style[CKEDITOR.tools.cssStyleToDomStyle(c)]=f;return this},setStyles:function(c){for(var f in c){this.setStyle(f,c[f])}return this},setOpacity:function(b){if(CKEDITOR.env.ie&&CKEDITOR.env.version<9){b=Math.round(b*100);this.setStyle("filter",b>=100?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+b+")")}else{this.setStyle("opacity",b)}},unselectable:function(){this.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","none"));if(CKEDITOR.env.ie){this.setAttribute("unselectable","on");for(var i,j=this.getElementsByTag("*"),k=0,l=j.count();k<l;k++){i=j.getItem(k);i.setAttribute("unselectable","on")}}},getPositionedAncestor:function(){for(var b=this;b.getName()!="html";){if(b.getComputedStyle("position")!="static"){return b}b=b.getParent()}return null},getDocumentPosition:function(j){var k=0,l=0,n=this.getDocument(),o=n.getBody(),r=n.$.compatMode=="BackCompat";if(document.documentElement.getBoundingClientRect){var t=this.$.getBoundingClientRect(),u=n.$.documentElement,w=u.clientTop||o.$.clientTop||0,y=u.clientLeft||o.$.clientLeft||0,v=true;if(CKEDITOR.env.ie){v=n.getDocumentElement().contains(this);n=n.getBody().contains(this);v=r&&n||!r&&v}if(v){k=t.left+(!r&&u.scrollLeft||o.$.scrollLeft);k=k-y;l=t.top+(!r&&u.scrollTop||o.$.scrollTop);l=l-w}}else{o=this;for(n=null;o&&!(o.getName()=="body"||o.getName()=="html");){k=k+(o.$.offsetLeft-o.$.scrollLeft);l=l+(o.$.offsetTop-o.$.scrollTop);if(!o.equals(this)){k=k+(o.$.clientLeft||0);l=l+(o.$.clientTop||0)}for(;n&&!n.equals(o);){k=k-n.$.scrollLeft;l=l-n.$.scrollTop;n=n.getParent()}n=o;o=(t=o.$.offsetParent)?new CKEDITOR.dom.element(t):null}}if(j){o=this.getWindow();n=j.getWindow();if(!o.equals(n)&&o.$.frameElement){j=(new CKEDITOR.dom.element(o.$.frameElement)).getDocumentPosition(j);k=k+j.x;l=l+j.y}}if(!document.documentElement.getBoundingClientRect&&CKEDITOR.env.gecko&&!r){k=k+(this.$.clientLeft?1:0);l=l+(this.$.clientTop?1:0)}return{x:k,y:l}},scrollIntoView:function(i){var j=this.getParent();if(j){do{(j.$.clientWidth&&j.$.clientWidth<j.$.scrollWidth||j.$.clientHeight&&j.$.clientHeight<j.$.scrollHeight)&&!j.is("body")&&this.scrollIntoParent(j,i,1);if(j.is("html")){var k=j.getWindow();try{var l=k.$.frameElement;l&&(j=new CKEDITOR.dom.element(l))}catch(m){}}}while(j=j.getParent())}},scrollIntoParent:function(j,n,r){var t,v,w,z;function C(a,c){if(/body|html/.test(j.getName())){j.getWindow().$.scrollBy(a,c)}else{j.$.scrollLeft=j.$.scrollLeft+a;j.$.scrollTop=j.$.scrollTop+c}}function E(c,f){var i={x:0,y:0};if(!c.is(D?"body":"html")){var k=c.$.getBoundingClientRect();i.x=k.left;i.y=k.top}k=c.getWindow();if(!k.equals(f)){k=E(CKEDITOR.dom.element.get(k.$.frameElement),f);i.x=i.x+k.x;i.y=i.y+k.y}return i}function G(c,f){return parseInt(c.getComputedStyle("margin-"+f)||0,10)||0}!j&&(j=this.getWindow());w=j.getDocument();var D=w.$.compatMode=="BackCompat";j instanceof CKEDITOR.dom.window&&(j=D?w.getBody():w.getDocumentElement());w=j.getWindow();v=E(this,w);var B=E(j,w),F=this.$.offsetHeight;t=this.$.offsetWidth;var l=j.$.clientHeight,y=j.$.clientWidth;w=v.x-G(this,"left")-B.x||0;z=v.y-G(this,"top")-B.y||0;t=v.x+t+G(this,"right")-(B.x+y)||0;v=v.y+F+G(this,"bottom")-(B.y+l)||0;if(z<0||v>0){C(0,n===true?z:n===false?v:z<0?z:v)}if(r&&(w<0||t>0)){C(w<0?w:t,0)}},setState:function(f,i,j){i=i||"cke";switch(f){case CKEDITOR.TRISTATE_ON:this.addClass(i+"_on");this.removeClass(i+"_off");this.removeClass(i+"_disabled");j&&this.setAttribute("aria-pressed",true);j&&this.removeAttribute("aria-disabled");break;case CKEDITOR.TRISTATE_DISABLED:this.addClass(i+"_disabled");this.removeClass(i+"_off");this.removeClass(i+"_on");j&&this.setAttribute("aria-disabled",true);j&&this.removeAttribute("aria-pressed");break;default:this.addClass(i+"_off");this.removeClass(i+"_on");this.removeClass(i+"_disabled");j&&this.removeAttribute("aria-pressed");j&&this.removeAttribute("aria-disabled")}},getFrameDocument:function(){var c=this.$;try{c.contentWindow.document}catch(f){c.src=c.src}return c&&new CKEDITOR.dom.document(c.contentWindow.document)},copyAttributes:function(j,k){for(var l=this.$.attributes,k=k||{},n=0;n<l.length;n++){var o=l[n],p=o.nodeName.toLowerCase(),q;if(!(p in k)){if(p=="checked"&&(q=this.getAttribute(p))){j.setAttribute(p,q)}else{if(!CKEDITOR.env.ie||this.hasAttribute(p)){q=this.getAttribute(p);if(q===null){q=o.nodeValue}j.setAttribute(p,q)}}}}if(this.$.style.cssText!==""){j.$.style.cssText=this.$.style.cssText}},renameNode:function(c){if(this.getName()!=c){var f=this.getDocument(),c=new CKEDITOR.dom.element(c,f);this.copyAttributes(c);this.moveChildren(c);this.getParent()&&this.$.parentNode.replaceChild(c.$,this.$);c.$["data-cke-expando"]=this.$["data-cke-expando"];this.$=c.$;delete this.getName}},getChild:function(){function b(a,i){var f=a.childNodes;if(i>=0&&i<f.length){return f[i]}}return function(a){var f=this.$;if(a.slice){for(;a.length>0&&f;){f=b(f,a.shift())}}else{f=b(f,a)}return f?new CKEDITOR.dom.node(f):null}}(),getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){this.on("contextmenu",function(b){b.data.getTarget().hasClass("cke_enable_context_menu")||b.data.preventDefault()})},getDirection:function(b){return b?this.getComputedStyle("direction")||this.getDirection()||this.getParent()&&this.getParent().getDirection(1)||this.getDocument().$.dir||"ltr":this.getStyle("direction")||this.getAttribute("dir")},data:function(c,f){c="data-"+c;if(f===void 0){return this.getAttribute(c)}f===false?this.removeAttribute(c):this.setAttribute(c,f);return null},getEditor:function(){var f=CKEDITOR.instances,i,j;for(i in f){j=f[i];if(j.element.equals(this)&&j.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){return j}}return null},find:function(a){var c=d(this),a=new CKEDITOR.dom.nodeList(this.$.querySelectorAll(g(this,a)));c();return a},findOne:function(a){var c=d(this),a=this.$.querySelector(g(this,a));c();return a?new CKEDITOR.dom.element(a):null},forEach:function(i,j,k){if(!k&&(!j||this.type==j)){var l=i(this)}if(l!==false){for(var k=this.getChildren(),m=0;m<k.count();m++){l=k.getItem(m);l.type==CKEDITOR.NODE_ELEMENT?l.forEach(i,j):(!j||l.type==j)&&i(l)}}}});var h={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};CKEDITOR.dom.element.prototype.setSize=function(b,i,j){if(typeof i=="number"){if(j&&(!CKEDITOR.env.ie||!CKEDITOR.env.quirks)){i=i-e.call(this,b)}this.setStyle(b,i+"px")}};CKEDITOR.dom.element.prototype.getSize=function(b,i){var j=Math.max(this.$["offset"+CKEDITOR.tools.capitalize(b)],this.$["client"+CKEDITOR.tools.capitalize(b)])||0;i&&(j=j-e.call(this,b));return j}})();CKEDITOR.dom.documentFragment=function(b){b=b||CKEDITOR.document;this.$=b.type==CKEDITOR.NODE_DOCUMENT?b.$.createDocumentFragment():b};CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,insertAfterNode:function(b){b=b.$;b.parentNode.insertBefore(this.$,b.nextSibling)}},!0,{append:1,appendBogus:1,getFirst:1,getLast:1,getParent:1,getNext:1,getPrevious:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1});(function(){function j(n,w){var x=this.range;if(this._.end){return null}if(!this._.start){this._.start=1;if(x.collapsed){this.end();return null}x.optimize()}var y,z=x.startContainer;y=x.endContainer;var A=x.startOffset,J=x.endOffset,H,I=this.guard,G=this.type,L=n?"getPreviousSourceNode":"getNextSourceNode";if(!n&&!this._.guardLTR){var C=y.type==CKEDITOR.NODE_ELEMENT?y:y.getParent(),K=y.type==CKEDITOR.NODE_ELEMENT?y.getChild(J):y.getNext();this._.guardLTR=function(c,d){return(!d||!C.equals(c))&&(!K||!c.equals(K))&&(c.type!=CKEDITOR.NODE_ELEMENT||!d||!c.equals(x.root))}}if(n&&!this._.guardRTL){var D=z.type==CKEDITOR.NODE_ELEMENT?z:z.getParent(),E=z.type==CKEDITOR.NODE_ELEMENT?A?z.getChild(A-1):null:z.getPrevious();this._.guardRTL=function(c,d){return(!d||!D.equals(c))&&(!E||!c.equals(E))&&(c.type!=CKEDITOR.NODE_ELEMENT||!d||!c.equals(x.root))}}var B=n?this._.guardRTL:this._.guardLTR;H=I?function(c,d){return B(c,d)===false?false:I(c,d)}:B;if(this.current){y=this.current[L](false,G,H)}else{if(n){y.type==CKEDITOR.NODE_ELEMENT&&(y=J>0?y.getChild(J-1):H(y,true)===false?null:y.getPreviousSourceNode(true,G,H))}else{y=z;if(y.type==CKEDITOR.NODE_ELEMENT&&!(y=y.getChild(A))){y=H(z,true)===false?null:z.getNextSourceNode(true,G,H)}}y&&H(y)===false&&(y=null)}for(;y&&!this._.end;){this.current=y;if(!this.evaluator||this.evaluator(y)!==false){if(!w){return y}}else{if(w&&this.evaluator){return false}}y=y[L](false,G,H)}this.end();return this.current=null}function l(a){for(var f,e=null;f=j.call(this,a);){e=f}return e}function k(c){if(t(c)){return false}if(c.type==CKEDITOR.NODE_TEXT){return true}if(c.type==CKEDITOR.NODE_ELEMENT){if(c.is(CKEDITOR.dtd.$inline)||c.is("hr")||c.getAttribute("contenteditable")=="false"){return true}var e;if(e=!CKEDITOR.env.needsBrFiller){if(e=c.is(u)){c:{e=0;for(var f=c.getChildCount();e<f;++e){if(!t(c.getChild(e))){e=false;break c}}e=true}}}if(e){return true}}return false}CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function(b){this.range=b;this._={}},proto:{end:function(){this._.end=1},next:function(){return j.call(this)},previous:function(){return j.call(this,1)},checkForward:function(){return j.call(this,0,1)!==false},checkBackward:function(){return j.call(this,1,1)!==false},lastForward:function(){return l.call(this)},lastBackward:function(){return l.call(this,1)},reset:function(){delete this.current;this._={}}}});var q={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1},o={absolute:1,fixed:1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(b){return this.getComputedStyle("float")=="none"&&!(this.getComputedStyle("position") in o)&&q[this.getComputedStyle("display")]?true:!!(this.is(CKEDITOR.dtd.$block)||b&&this.is(b))};CKEDITOR.dom.walker.blockBoundary=function(b){return function(a){return !(a.type==CKEDITOR.NODE_ELEMENT&&a.isBlockBoundary(b))}};CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1})};CKEDITOR.dom.walker.bookmark=function(c,e){function f(b){return b&&b.getName&&b.getName()=="span"&&b.data("cke-bookmark")}return function(a){var b,d;b=a&&a.type!=CKEDITOR.NODE_ELEMENT&&(d=a.getParent())&&f(d);b=c?b:b||f(a);return !!(e^b)}};CKEDITOR.dom.walker.whitespaces=function(b){return function(a){var c;a&&a.type==CKEDITOR.NODE_TEXT&&(c=!CKEDITOR.tools.trim(a.getText())||CKEDITOR.env.webkit&&a.getText()=="");return !!(b^c)}};CKEDITOR.dom.walker.invisible=function(c){var d=CKEDITOR.dom.walker.whitespaces();return function(a){if(d(a)){a=1}else{a.type==CKEDITOR.NODE_TEXT&&(a=a.getParent());a=!a.$.offsetHeight}return !!(c^a)}};CKEDITOR.dom.walker.nodeType=function(c,d){return function(a){return !!(d^a.type==c)}};CKEDITOR.dom.walker.bogus=function(c){function d(b){return !r(b)&&!v(b)}return function(b){var a=CKEDITOR.env.needsBrFiller?b.is&&b.is("br"):b.getText&&p.test(b.getText());if(a){a=b.getParent();b=b.getNext(d);a=a.isBlockBoundary()&&(!b||b.type==CKEDITOR.NODE_ELEMENT&&b.isBlockBoundary())}return !!(c^a)}};CKEDITOR.dom.walker.temp=function(b){return function(a){a.type!=CKEDITOR.NODE_ELEMENT&&(a=a.getParent());a=a&&a.hasAttribute("data-cke-temp");return !!(b^a)}};var p=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,r=CKEDITOR.dom.walker.whitespaces(),v=CKEDITOR.dom.walker.bookmark(),s=CKEDITOR.dom.walker.temp();CKEDITOR.dom.walker.ignored=function(b){return function(a){a=r(a)||v(a)||s(a);return !!(b^a)}};var t=CKEDITOR.dom.walker.ignored(),u=function(c){var e={},f;for(f in c){CKEDITOR.dtd[f]["#"]&&(e[f]=1)}return e}(CKEDITOR.dtd.$block);CKEDITOR.dom.walker.editable=function(b){return function(a){return !!(b^k(a))}};CKEDITOR.dom.element.prototype.getBogus=function(){var b=this;do{b=b.getPreviousSourceNode()}while(v(b)||r(b)||b.type==CKEDITOR.NODE_ELEMENT&&b.is(CKEDITOR.dtd.$inline)&&!b.is(CKEDITOR.dtd.$empty));return b&&(CKEDITOR.env.needsBrFiller?b.is&&b.is("br"):b.getText&&p.test(b.getText()))?b:false}})();CKEDITOR.dom.range=function(b){this.endOffset=this.endContainer=this.startOffset=this.startContainer=null;this.collapsed=true;var d=b instanceof CKEDITOR.dom.document;this.document=d?b:b.getDocument();this.root=d?b.getBody():b};(function(){function j(){var e=false,f=CKEDITOR.dom.walker.whitespaces(),h=CKEDITOR.dom.walker.bookmark(true),g=CKEDITOR.dom.walker.bogus();return function(a){if(h(a)||f(a)){return true}if(g(a)&&!e){return e=true}return a.type==CKEDITOR.NODE_TEXT&&(a.hasAscendant("pre")||CKEDITOR.tools.trim(a.getText()).length)||a.type==CKEDITOR.NODE_ELEMENT&&!a.is(o)?false:true}}function l(c){var e=CKEDITOR.dom.walker.whitespaces(),f=CKEDITOR.dom.walker.bookmark(1);return function(a){return f(a)||e(a)?true:!c&&q(a)||a.type==CKEDITOR.NODE_ELEMENT&&a.is(CKEDITOR.dtd.$removeEmpty)}}function k(b){return function(){var a;return this[b?"getPreviousNode":"getNextNode"](function(c){!a&&s(c)&&(a=c);return r(c)&&!(q(c)&&c.equals(a))})}}var p=function(b){b.collapsed=b.startContainer&&b.endContainer&&b.startContainer.equals(b.endContainer)&&b.startOffset==b.endOffset},m=function(w,x,z,y){w.optimizeBookmark();var B=w.startContainer,C=w.endContainer,O=w.startOffset,G=w.endOffset,K,L;if(C.type==CKEDITOR.NODE_TEXT){C=C.split(G)}else{if(C.getChildCount()>0){if(G>=C.getChildCount()){C=C.append(w.document.createText(""));L=true}else{C=C.getChild(G)}}}if(B.type==CKEDITOR.NODE_TEXT){B.split(O);B.equals(C)&&(C=B.getNext())}else{if(O){if(O>=B.getChildCount()){B=B.append(w.document.createText(""));K=true}else{B=B.getChild(O).getPrevious()}}else{B=B.append(w.document.createText(""),1);K=true}}var O=B.getParents(),G=C.getParents(),J,P,H;for(J=0;J<O.length;J++){P=O[J];H=G[J];if(!P.equals(H)){break}}for(var N=z,I,M,E,A=J;A<O.length;A++){I=O[A];N&&!I.equals(B)&&(M=N.append(I.clone()));for(I=I.getNext();I;){if(I.equals(G[A])||I.equals(C)){break}E=I.getNext();if(x==2){N.append(I.clone(true))}else{I.remove();x==1&&N.append(I)}I=E}N&&(N=M)}N=z;for(z=J;z<G.length;z++){I=G[z];x>0&&!I.equals(C)&&(M=N.append(I.clone()));if(!O[z]||I.$.parentNode!=O[z].$.parentNode){for(I=I.getPrevious();I;){if(I.equals(O[z])||I.equals(B)){break}E=I.getPrevious();if(x==2){N.$.insertBefore(I.$.cloneNode(true),N.$.firstChild)}else{I.remove();x==1&&N.$.insertBefore(I.$,N.$.firstChild)}I=E}}N&&(N=M)}if(x==2){P=w.startContainer;if(P.type==CKEDITOR.NODE_TEXT){P.$.data=P.$.data+P.$.nextSibling.data;P.$.parentNode.removeChild(P.$.nextSibling)}w=w.endContainer;if(w.type==CKEDITOR.NODE_TEXT&&w.$.nextSibling){w.$.data=w.$.data+w.$.nextSibling.data;w.$.parentNode.removeChild(w.$.nextSibling)}}else{if(P&&H&&(B.$.parentNode!=P.$.parentNode||C.$.parentNode!=H.$.parentNode)){x=H.getIndex();K&&H.$.parentNode==B.$.parentNode&&x--;if(y&&P.type==CKEDITOR.NODE_ELEMENT){y=CKEDITOR.dom.element.createFromHtml('<span data-cke-bookmark="1" style="display:none">&nbsp;</span>',w.document);y.insertAfter(P);P.mergeSiblings(false);w.moveToBookmark({startNode:y})}else{w.setStart(H.getParent(),x)}}w.collapse(true)}K&&B.remove();L&&C.$.parentNode&&C.remove()},o={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1},q=CKEDITOR.dom.walker.bogus(),t=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,r=CKEDITOR.dom.walker.editable(),s=CKEDITOR.dom.walker.ignored(true);CKEDITOR.dom.range.prototype={clone:function(){var b=new CKEDITOR.dom.range(this.root);b.startContainer=this.startContainer;b.startOffset=this.startOffset;b.endContainer=this.endContainer;b.endOffset=this.endOffset;b.collapsed=this.collapsed;return b},collapse:function(b){if(b){this.endContainer=this.startContainer;this.endOffset=this.startOffset}else{this.startContainer=this.endContainer;this.startOffset=this.endOffset}this.collapsed=true},cloneContents:function(){var b=new CKEDITOR.dom.documentFragment(this.document);this.collapsed||m(this,2,b);return b},deleteContents:function(b){this.collapsed||m(this,0,null,b)},extractContents:function(c){var d=new CKEDITOR.dom.documentFragment(this.document);this.collapsed||m(this,1,d,c);return d},createBookmark:function(g){var h,n,i,u,v=this.collapsed;h=this.document.createElement("span");h.data("cke-bookmark",1);h.setStyle("display","none");h.setHtml("&nbsp;");if(g){i="cke_bm_"+CKEDITOR.tools.getNextNumber();h.setAttribute("id",i+(v?"C":"S"))}if(!v){n=h.clone();n.setHtml("&nbsp;");g&&n.setAttribute("id",i+"E");u=this.clone();u.collapse();u.insertNode(n)}u=this.clone();u.collapse(true);u.insertNode(h);if(n){this.setStartAfter(h);this.setEndBefore(n)}else{this.moveToPosition(h,CKEDITOR.POSITION_AFTER_END)}return{startNode:g?i+(v?"C":"S"):h,endNode:g?i+"E":n,serializable:g,collapsed:v}},createBookmark2:function(){function b(a){var h=a.container,g=a.offset,i;i=h;var n=g;i=i.type!=CKEDITOR.NODE_ELEMENT||n===0||n==i.getChildCount()?0:i.getChild(n-1).type==CKEDITOR.NODE_TEXT&&i.getChild(n).type==CKEDITOR.NODE_TEXT;if(i){h=h.getChild(g-1);g=h.getLength()}h.type==CKEDITOR.NODE_ELEMENT&&g>1&&(g=h.getChild(g-1).getIndex(true)+1);if(h.type==CKEDITOR.NODE_TEXT){i=h;for(n=0;(i=i.getPrevious())&&i.type==CKEDITOR.NODE_TEXT;){n=n+i.getLength()}g=g+n}a.container=h;a.offset=g}return function(a){var g=this.collapsed,f={container:this.startContainer,offset:this.startOffset},h={container:this.endContainer,offset:this.endOffset};if(a){b(f);g||b(h)}return{start:f.container.getAddress(a),end:g?null:h.container.getAddress(a),startOffset:f.offset,endOffset:h.offset,normalized:a,collapsed:g,is2:true}}}(),moveToBookmark:function(e){if(e.is2){var f=this.document.getByAddress(e.start,e.normalized),h=e.startOffset,g=e.end&&this.document.getByAddress(e.end,e.normalized),e=e.endOffset;this.setStart(f,h);g?this.setEnd(g,e):this.collapse(true)}else{f=(h=e.serializable)?this.document.getById(e.startNode):e.startNode;e=h?this.document.getById(e.endNode):e.endNode;this.setStartBefore(f);f.remove();if(e){this.setEndBefore(e);e.remove()}else{this.collapse(true)}}},getBoundaryNodes:function(){var f=this.startContainer,g=this.endContainer,i=this.startOffset,h=this.endOffset,n;if(f.type==CKEDITOR.NODE_ELEMENT){n=f.getChildCount();if(n>i){f=f.getChild(i)}else{if(n<1){f=f.getPreviousSourceNode()}else{for(f=f.$;f.lastChild;){f=f.lastChild}f=new CKEDITOR.dom.node(f);f=f.getNextSourceNode()||f}}}if(g.type==CKEDITOR.NODE_ELEMENT){n=g.getChildCount();if(n>h){g=g.getChild(h).getPreviousSourceNode(true)}else{if(n<1){g=g.getPreviousSourceNode()}else{for(g=g.$;g.lastChild;){g=g.lastChild}g=new CKEDITOR.dom.node(g)}}}f.getPosition(g)&CKEDITOR.POSITION_FOLLOWING&&(f=g);return{startNode:f,endNode:g}},getCommonAncestor:function(e,f){var h=this.startContainer,g=this.endContainer,h=h.equals(g)?e&&h.type==CKEDITOR.NODE_ELEMENT&&this.startOffset==this.endOffset-1?h.getChild(this.startOffset):h:h.getCommonAncestor(g);return f&&!h.is?h.getParent():h},optimize:function(){var c=this.startContainer,d=this.startOffset;c.type!=CKEDITOR.NODE_ELEMENT&&(d?d>=c.getLength()&&this.setStartAfter(c):this.setStartBefore(c));c=this.endContainer;d=this.endOffset;c.type!=CKEDITOR.NODE_ELEMENT&&(d?d>=c.getLength()&&this.setEndAfter(c):this.setEndBefore(c))},optimizeBookmark:function(){var c=this.startContainer,d=this.endContainer;c.is&&(c.is("span")&&c.data("cke-bookmark"))&&this.setStartAt(c,CKEDITOR.POSITION_BEFORE_START);d&&(d.is&&d.is("span")&&d.data("cke-bookmark"))&&this.setEndAt(d,CKEDITOR.POSITION_AFTER_END)},trim:function(g,h){var n=this.startContainer,i=this.startOffset,u=this.collapsed;if((!g||u)&&n&&n.type==CKEDITOR.NODE_TEXT){if(i){if(i>=n.getLength()){i=n.getIndex()+1;n=n.getParent()}else{var v=n.split(i),i=n.getIndex()+1,n=n.getParent();if(this.startContainer.equals(this.endContainer)){this.setEnd(v,this.endOffset-this.startOffset)}else{if(n.equals(this.endContainer)){this.endOffset=this.endOffset+1}}}}else{i=n.getIndex();n=n.getParent()}this.setStart(n,i);if(u){this.collapse(true);return}}n=this.endContainer;i=this.endOffset;if(!h&&!u&&n&&n.type==CKEDITOR.NODE_TEXT){if(i){i>=n.getLength()||n.split(i);i=n.getIndex()+1}else{i=n.getIndex()}n=n.getParent();this.setEnd(n,i)}},enlarge:function(x,A){function H(b){return b&&b.type==CKEDITOR.NODE_ELEMENT&&b.hasAttribute("contenteditable")?null:b}var B=RegExp(/[^\s\ufeff]/);switch(x){case CKEDITOR.ENLARGE_INLINE:var K=1;case CKEDITOR.ENLARGE_ELEMENT:if(this.collapsed){break}var N=this.getCommonAncestor(),aa=this.root,R,U,V,S,ab,P=false,Y,Q;Y=this.startContainer;var X=this.startOffset;if(Y.type==CKEDITOR.NODE_TEXT){if(X){Y=!CKEDITOR.tools.trim(Y.substring(0,X)).length&&Y;P=!!Y}if(Y&&!(S=Y.getPrevious())){V=Y.getParent()}}else{X&&(S=Y.getChild(X-1)||Y.getLast());S||(V=Y)}for(V=H(V);V||S;){if(V&&!S){!ab&&V.equals(N)&&(ab=true);if(K?V.isBlockBoundary():!aa.contains(V)){break}if(!P||V.getComputedStyle("display")!="inline"){P=false;ab?R=V:this.setStartBefore(V)}S=V.getPrevious()}for(;S;){Y=false;if(S.type==CKEDITOR.NODE_COMMENT){S=S.getPrevious()}else{if(S.type==CKEDITOR.NODE_TEXT){Q=S.getText();B.test(Q)&&(S=null);Y=/[\s\ufeff]$/.test(Q)}else{if((S.$.offsetWidth>0||A&&S.is("br"))&&!S.data("cke-bookmark")){if(P&&CKEDITOR.dtd.$removeEmpty[S.getName()]){Q=S.getText();if(B.test(Q)){S=null}else{for(var X=S.$.getElementsByTagName("*"),O=0,I;I=X[O++];){if(!CKEDITOR.dtd.$removeEmpty[I.nodeName.toLowerCase()]){S=null;break}}}S&&(Y=!!Q.length)}else{S=null}}}Y&&(P?ab?R=V:V&&this.setStartBefore(V):P=true);if(S){Y=S.getPrevious();if(!V&&!Y){V=S;S=null;break}S=Y}else{V=null}}}V&&(V=H(V.getParent()))}Y=this.endContainer;X=this.endOffset;V=S=null;ab=P=false;var W=function(c,f){var g=new CKEDITOR.dom.range(aa);g.setStart(c,f);g.setEndAt(aa,CKEDITOR.POSITION_BEFORE_END);var g=new CKEDITOR.dom.walker(g),h;for(g.guard=function(b){return !(b.type==CKEDITOR.NODE_ELEMENT&&b.isBlockBoundary())};h=g.next();){if(h.type!=CKEDITOR.NODE_TEXT){return false}Q=h!=c?h.getText():h.substring(f);if(B.test(Q)){return false}}return true};if(Y.type==CKEDITOR.NODE_TEXT){if(CKEDITOR.tools.trim(Y.substring(X)).length){P=true}else{P=!Y.getLength();if(X==Y.getLength()){if(!(S=Y.getNext())){V=Y.getParent()}}else{W(Y,X)&&(V=Y.getParent())}}}else{(S=Y.getChild(X))||(V=Y)}for(;V||S;){if(V&&!S){!ab&&V.equals(N)&&(ab=true);if(K?V.isBlockBoundary():!aa.contains(V)){break}if(!P||V.getComputedStyle("display")!="inline"){P=false;ab?U=V:V&&this.setEndAfter(V)}S=V.getNext()}for(;S;){Y=false;if(S.type==CKEDITOR.NODE_TEXT){Q=S.getText();W(S,0)||(S=null);Y=/^[\s\ufeff]/.test(Q)}else{if(S.type==CKEDITOR.NODE_ELEMENT){if((S.$.offsetWidth>0||A&&S.is("br"))&&!S.data("cke-bookmark")){if(P&&CKEDITOR.dtd.$removeEmpty[S.getName()]){Q=S.getText();if(B.test(Q)){S=null}else{X=S.$.getElementsByTagName("*");for(O=0;I=X[O++];){if(!CKEDITOR.dtd.$removeEmpty[I.nodeName.toLowerCase()]){S=null;break}}}S&&(Y=!!Q.length)}else{S=null}}}else{Y=1}}Y&&P&&(ab?U=V:this.setEndAfter(V));if(S){Y=S.getNext();if(!V&&!Y){V=S;S=null;break}S=Y}else{V=null}}V&&(V=H(V.getParent()))}if(R&&U){N=R.contains(U)?U:R;this.setStartBefore(N);this.setEndAfter(N)}break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:V=new CKEDITOR.dom.range(this.root);aa=this.root;V.setStartAt(aa,CKEDITOR.POSITION_AFTER_START);V.setEnd(this.startContainer,this.startOffset);V=new CKEDITOR.dom.walker(V);var T,ac,ae=CKEDITOR.dom.walker.blockBoundary(x==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?{br:1}:null),Z=null,M=function(c){if(c.type==CKEDITOR.NODE_ELEMENT&&c.getAttribute("contenteditable")=="false"){if(Z){if(Z.equals(c)){Z=null;return}}else{Z=c}}else{if(Z){return}}var d=ae(c);d||(T=c);return d},K=function(c){var d=M(c);!d&&(c.is&&c.is("br"))&&(ac=c);return d};V.guard=M;V=V.lastBackward();T=T||aa;this.setStartAt(T,!T.is("br")&&(!V&&this.checkStartOfBlock()||V&&T.contains(V))?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END);if(x==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS){V=this.clone();V=new CKEDITOR.dom.walker(V);var ad=CKEDITOR.dom.walker.whitespaces(),G=CKEDITOR.dom.walker.bookmark();V.evaluator=function(b){return !ad(b)&&!G(b)};if((V=V.previous())&&V.type==CKEDITOR.NODE_ELEMENT&&V.is("br")){break}}V=this.clone();V.collapse();V.setEndAt(aa,CKEDITOR.POSITION_BEFORE_END);V=new CKEDITOR.dom.walker(V);V.guard=x==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?K:M;T=Z=ac=null;V=V.lastForward();T=T||aa;this.setEndAt(T,!V&&this.checkEndOfBlock()||V&&T.contains(V)?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START);ac&&this.setEndAfter(ac)}},shrink:function(h,i,w){if(!this.collapsed){var h=h||CKEDITOR.SHRINK_TEXT,n=this.clone(),x=this.startContainer,y=this.endContainer,D=this.startOffset,z=this.endOffset,B=1,C=1;if(x&&x.type==CKEDITOR.NODE_TEXT){if(D){if(D>=x.getLength()){n.setStartAfter(x)}else{n.setStartBefore(x);B=0}}else{n.setStartBefore(x)}}if(y&&y.type==CKEDITOR.NODE_TEXT){if(z){if(z>=y.getLength()){n.setEndAfter(y)}else{n.setEndAfter(y);C=0}}else{n.setEndBefore(y)}}var n=new CKEDITOR.dom.walker(n),A=CKEDITOR.dom.walker.bookmark();n.evaluator=function(a){return a.type==(h==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT)};var E;n.guard=function(a,d){if(A(a)){return true}if(h==CKEDITOR.SHRINK_ELEMENT&&a.type==CKEDITOR.NODE_TEXT||d&&a.equals(E)||w===false&&a.type==CKEDITOR.NODE_ELEMENT&&a.isBlockBoundary()||a.type==CKEDITOR.NODE_ELEMENT&&a.hasAttribute("contenteditable")){return false}!d&&a.type==CKEDITOR.NODE_ELEMENT&&(E=a);return true};if(B){(x=n[h==CKEDITOR.SHRINK_ELEMENT?"lastForward":"next"]())&&this.setStartAt(x,i?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START)}if(C){n.reset();(n=n[h==CKEDITOR.SHRINK_ELEMENT?"lastBackward":"previous"]())&&this.setEndAt(n,i?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END)}return !(!B&&!C)}},insertNode:function(c){this.optimizeBookmark();this.trim(false,true);var e=this.startContainer,f=e.getChild(this.startOffset);f?c.insertBefore(f):e.append(c);c.getParent()&&c.getParent().equals(this.endContainer)&&this.endOffset++;this.setStartBefore(c)},moveToPosition:function(c,d){this.setStartAt(c,d);this.collapse(true)},moveToRange:function(b){this.setStart(b.startContainer,b.startOffset);this.setEnd(b.endContainer,b.endOffset)},selectNodeContents:function(b){this.setStart(b,0);this.setEnd(b,b.type==CKEDITOR.NODE_TEXT?b.getLength():b.getChildCount())},setStart:function(c,d){if(c.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[c.getName()]){d=c.getIndex();c=c.getParent()}this.startContainer=c;this.startOffset=d;if(!this.endContainer){this.endContainer=c;this.endOffset=d}p(this)},setEnd:function(c,d){if(c.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[c.getName()]){d=c.getIndex()+1;c=c.getParent()}this.endContainer=c;this.endOffset=d;if(!this.startContainer){this.startContainer=c;this.startOffset=d}p(this)},setStartAfter:function(b){this.setStart(b.getParent(),b.getIndex()+1)},setStartBefore:function(b){this.setStart(b.getParent(),b.getIndex())},setEndAfter:function(b){this.setEnd(b.getParent(),b.getIndex()+1)},setEndBefore:function(b){this.setEnd(b.getParent(),b.getIndex())},setStartAt:function(c,d){switch(d){case CKEDITOR.POSITION_AFTER_START:this.setStart(c,0);break;case CKEDITOR.POSITION_BEFORE_END:c.type==CKEDITOR.NODE_TEXT?this.setStart(c,c.getLength()):this.setStart(c,c.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setStartBefore(c);break;case CKEDITOR.POSITION_AFTER_END:this.setStartAfter(c)}p(this)},setEndAt:function(c,d){switch(d){case CKEDITOR.POSITION_AFTER_START:this.setEnd(c,0);break;case CKEDITOR.POSITION_BEFORE_END:c.type==CKEDITOR.NODE_TEXT?this.setEnd(c,c.getLength()):this.setEnd(c,c.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setEndBefore(c);break;case CKEDITOR.POSITION_AFTER_END:this.setEndAfter(c)}p(this)},fixBlock:function(e,f){var h=this.createBookmark(),g=this.document.createElement(f);this.collapse(e);this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS);this.extractContents().appendTo(g);g.trim();g.appendBogus();this.insertNode(g);this.moveToBookmark(h);return g},splitBlock:function(g){var h=new CKEDITOR.dom.elementPath(this.startContainer,this.root),n=new CKEDITOR.dom.elementPath(this.endContainer,this.root),i=h.block,u=n.block,v=null;if(!h.blockLimit.equals(n.blockLimit)){return null}if(g!="br"){if(!i){i=this.fixBlock(true,g);u=(new CKEDITOR.dom.elementPath(this.endContainer,this.root)).block}u||(u=this.fixBlock(false,g))}g=i&&this.checkStartOfBlock();h=u&&this.checkEndOfBlock();this.deleteContents();if(i&&i.equals(u)){if(h){v=new CKEDITOR.dom.elementPath(this.startContainer,this.root);this.moveToPosition(u,CKEDITOR.POSITION_AFTER_END);u=null}else{if(g){v=new CKEDITOR.dom.elementPath(this.startContainer,this.root);this.moveToPosition(i,CKEDITOR.POSITION_BEFORE_START);i=null}else{u=this.splitElement(i);i.is("ul","ol")||i.appendBogus()}}}return{previousBlock:i,nextBlock:u,wasStartOfBlock:g,wasEndOfBlock:h,elementPath:v}},splitElement:function(c){if(!this.collapsed){return null}this.setEndAt(c,CKEDITOR.POSITION_BEFORE_END);var e=this.extractContents(),f=c.clone(false);e.appendTo(f);f.insertAfter(c);this.moveToPosition(c,CKEDITOR.POSITION_AFTER_END);return f},removeEmptyBlocksAtEnd:function(){function c(a){return function(b){return e(b)||(f(b)||b.type==CKEDITOR.NODE_ELEMENT&&b.isEmptyInlineRemoveable())||a.is("table")&&b.is("caption")?false:true}}var e=CKEDITOR.dom.walker.whitespaces(),f=CKEDITOR.dom.walker.bookmark(false);return function(a){for(var h=this.createBookmark(),g=this[a?"endPath":"startPath"](),i=g.block||g.blockLimit,n;i&&!i.equals(g.root)&&!i.getFirst(c(i));){n=i.getParent();this[a?"setEndAt":"setStartAt"](i,CKEDITOR.POSITION_AFTER_END);i.remove(1);i=n}this.moveToBookmark(h)}}(),startPath:function(){return new CKEDITOR.dom.elementPath(this.startContainer,this.root)},endPath:function(){return new CKEDITOR.dom.elementPath(this.endContainer,this.root)},checkBoundaryOfElement:function(c,f){var g=f==CKEDITOR.START,h=this.clone();h.collapse(g);h[g?"setStartAt":"setEndAt"](c,g?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END);h=new CKEDITOR.dom.walker(h);h.evaluator=l(g);return h[g?"checkBackward":"checkForward"]()},checkStartOfBlock:function(){var a=this.startContainer,c=this.startOffset;if(CKEDITOR.env.ie&&c&&a.type==CKEDITOR.NODE_TEXT){a=CKEDITOR.tools.ltrim(a.substring(0,c));t.test(a)&&this.trim(0,1)}this.trim();a=new CKEDITOR.dom.elementPath(this.startContainer,this.root);c=this.clone();c.collapse(true);c.setStartAt(a.block||a.blockLimit,CKEDITOR.POSITION_AFTER_START);a=new CKEDITOR.dom.walker(c);a.evaluator=j();return a.checkBackward()},checkEndOfBlock:function(){var a=this.endContainer,c=this.endOffset;if(CKEDITOR.env.ie&&a.type==CKEDITOR.NODE_TEXT){a=CKEDITOR.tools.rtrim(a.substring(c));t.test(a)&&this.trim(1,0)}this.trim();a=new CKEDITOR.dom.elementPath(this.endContainer,this.root);c=this.clone();c.collapse(false);c.setEndAt(a.block||a.blockLimit,CKEDITOR.POSITION_BEFORE_END);a=new CKEDITOR.dom.walker(c);a.evaluator=j();return a.checkForward()},getPreviousNode:function(e,f,h){var g=this.clone();g.collapse(1);g.setStartAt(h||this.root,CKEDITOR.POSITION_AFTER_START);h=new CKEDITOR.dom.walker(g);h.evaluator=e;h.guard=f;return h.previous()},getNextNode:function(e,f,h){var g=this.clone();g.collapse();g.setEndAt(h||this.root,CKEDITOR.POSITION_BEFORE_END);h=new CKEDITOR.dom.walker(g);h.evaluator=e;h.guard=f;return h.next()},checkReadOnly:function(){function b(a,c){for(;a;){if(a.type==CKEDITOR.NODE_ELEMENT){if(a.getAttribute("contentEditable")=="false"&&!a.data("cke-editable")){return 0}if(a.is("html")||a.getAttribute("contentEditable")=="true"&&(a.contains(c)||a.equals(c))){break}}a=a.getParent()}return 1}return function(){var a=this.startContainer,c=this.endContainer;return !(b(a,c)&&b(c,a))}}(),moveToElementEditablePosition:function(g,h){if(g.type==CKEDITOR.NODE_ELEMENT&&!g.isEditable(false)){this.moveToPosition(g,h?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START);return true}for(var n=0;g;){if(g.type==CKEDITOR.NODE_TEXT){h&&this.endContainer&&this.checkEndOfBlock()&&t.test(g.getText())?this.moveToPosition(g,CKEDITOR.POSITION_BEFORE_START):this.moveToPosition(g,h?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START);n=1;break}if(g.type==CKEDITOR.NODE_ELEMENT){if(g.isEditable()){this.moveToPosition(g,h?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START);n=1}else{if(h&&g.is("br")&&this.endContainer&&this.checkEndOfBlock()){this.moveToPosition(g,CKEDITOR.POSITION_BEFORE_START)}else{if(g.getAttribute("contenteditable")=="false"&&g.is(CKEDITOR.dtd.$block)){this.setStartBefore(g);this.setEndAfter(g);return true}}}}var i=g,u=n,v=void 0;i.type==CKEDITOR.NODE_ELEMENT&&i.isEditable(false)&&(v=i[h?"getLast":"getFirst"](s));!u&&!v&&(v=i[h?"getPrevious":"getNext"](s));g=v}return !!n},moveToClosestEditablePosition:function(g,h){var n=new CKEDITOR.dom.range(this.root),i=0,u,v=[CKEDITOR.POSITION_AFTER_END,CKEDITOR.POSITION_BEFORE_START];n.moveToPosition(g,v[h?0:1]);if(g.is(CKEDITOR.dtd.$block)){if(u=n[h?"getNextEditableNode":"getPreviousEditableNode"]()){i=1;if(u.type==CKEDITOR.NODE_ELEMENT&&u.is(CKEDITOR.dtd.$block)&&u.getAttribute("contenteditable")=="false"){n.setStartAt(u,CKEDITOR.POSITION_BEFORE_START);n.setEndAt(u,CKEDITOR.POSITION_AFTER_END)}else{n.moveToPosition(u,v[h?1:0])}}}else{i=1}i&&this.moveToRange(n);return !!i},moveToElementEditStart:function(b){return this.moveToElementEditablePosition(b)},moveToElementEditEnd:function(b){return this.moveToElementEditablePosition(b,true)},getEnclosedNode:function(){var e=this.clone();e.optimize();if(e.startContainer.type!=CKEDITOR.NODE_ELEMENT||e.endContainer.type!=CKEDITOR.NODE_ELEMENT){return null}var e=new CKEDITOR.dom.walker(e),f=CKEDITOR.dom.walker.bookmark(false,true),h=CKEDITOR.dom.walker.whitespaces(true);e.evaluator=function(b){return h(b)&&f(b)};var g=e.next();e.reset();return g&&g.equals(e.previous())?g:null},getTouchedStartNode:function(){var b=this.startContainer;return this.collapsed||b.type!=CKEDITOR.NODE_ELEMENT?b:b.getChild(this.startOffset)||b},getTouchedEndNode:function(){var b=this.endContainer;return this.collapsed||b.type!=CKEDITOR.NODE_ELEMENT?b:b.getChild(this.endOffset-1)||b},getNextEditableNode:k(),getPreviousEditableNode:k(1),scrollIntoView:function(){var f=new CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",this.document),g,i,h,n=this.clone();n.optimize();if(h=n.startContainer.type==CKEDITOR.NODE_TEXT){i=n.startContainer.getText();g=n.startContainer.split(n.startOffset);f.insertAfter(n.startContainer)}else{n.insertNode(f)}f.scrollIntoView();if(h){n.startContainer.setText(i);g.remove()}f.remove()}}})();CKEDITOR.POSITION_AFTER_START=1;CKEDITOR.POSITION_BEFORE_END=2;CKEDITOR.POSITION_BEFORE_START=3;CKEDITOR.POSITION_AFTER_END=4;CKEDITOR.ENLARGE_ELEMENT=1;CKEDITOR.ENLARGE_BLOCK_CONTENTS=2;CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3;CKEDITOR.ENLARGE_INLINE=4;CKEDITOR.START=1;CKEDITOR.END=2;CKEDITOR.SHRINK_ELEMENT=1;CKEDITOR.SHRINK_TEXT=2;"use strict";(function(){function h(b){if(!(arguments.length<1)){this.range=b;this.forceBrBreak=0;this.enlargeBr=1;this.enforceRealBlocks=0;this._||(this._={})}}function j(c,e,f){for(c=c.getNextSourceNode(e,null,f);!l(c);){c=c.getNextSourceNode(e,null,f)}return c}function i(c){var d=[];c.forEach(function(b){if(b.getAttribute("contenteditable")=="true"){d.push(b);return false}},CKEDITOR.NODE_ELEMENT,true);return d}function m(b,n,f,q){b:{q==void 0&&(q=i(f));for(var r;r=q.shift();){if(r.getDtd().p){q={element:r,remaining:q};break b}}q=null}if(!q){return 0}if((r=CKEDITOR.filter.instances[q.element.data("cke-filter")])&&!r.check(n)){return m(b,n,f,q.remaining)}n=new CKEDITOR.dom.range(q.element);n.selectNodeContents(q.element);n=n.createIterator();n.enlargeBr=b.enlargeBr;n.enforceRealBlocks=b.enforceRealBlocks;n.activeFilter=n.filter=r;b._.nestedEditable={element:q.element,container:f,remaining:q.remaining,iterator:n};return 1}var k=/^[\r\n\t ]+$/,l=CKEDITOR.dom.walker.bookmark(false,true),o=CKEDITOR.dom.walker.whitespaces(true),p=function(b){return l(b)&&o(b)};h.prototype={getNextParagraph:function(c){var e,f,w,z,C,c=c||"p";if(this._.nestedEditable){if(e=this._.nestedEditable.iterator.getNextParagraph(c)){this.activeFilter=this._.nestedEditable.iterator.activeFilter;return e}this.activeFilter=this.filter;if(m(this,c,this._.nestedEditable.container,this._.nestedEditable.remaining)){this.activeFilter=this._.nestedEditable.iterator.activeFilter;return this._.nestedEditable.iterator.getNextParagraph(c)}this._.nestedEditable=null}if(!this.range.root.getDtd()[c]){return null}if(!this._.started){var y=this.range.clone();y.shrink(CKEDITOR.SHRINK_ELEMENT,true);f=y.endContainer.hasAscendant("pre",true)||y.startContainer.hasAscendant("pre",true);y.enlarge(this.forceBrBreak&&!f||!this.enlargeBr?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS);if(!y.collapsed){f=new CKEDITOR.dom.walker(y.clone());var v=CKEDITOR.dom.walker.bookmark(true,true);f.evaluator=v;this._.nextNode=f.next();f=new CKEDITOR.dom.walker(y.clone());f.evaluator=v;f=f.previous();this._.lastNode=f.getNextSourceNode(true);if(this._.lastNode&&this._.lastNode.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()){v=this.range.clone();v.moveToPosition(this._.lastNode,CKEDITOR.POSITION_AFTER_END);if(v.checkEndOfBlock()){v=new CKEDITOR.dom.elementPath(v.endContainer,v.root);this._.lastNode=(v.block||v.blockLimit).getNextSourceNode(true)}}if(!this._.lastNode||!y.root.contains(this._.lastNode)){this._.lastNode=this._.docEndMarker=y.document.createText("");this._.lastNode.insertAfter(f)}y=null}this._.started=1;f=y}v=this._.nextNode;y=this._.lastNode;for(this._.nextNode=null;v;){var B=0,d=v.hasAscendant("pre"),r=v.type!=CKEDITOR.NODE_ELEMENT,t=0;if(r){v.type==CKEDITOR.NODE_TEXT&&k.test(v.getText())&&(r=0)}else{var n=v.getName();if(CKEDITOR.dtd.$block[n]&&v.getAttribute("contenteditable")=="false"){e=v;m(this,c,e);break}else{if(v.isBlockBoundary(this.forceBrBreak&&!d&&{br:1})){if(n=="br"){r=1}else{if(!f&&!v.getChildCount()&&n!="hr"){e=v;w=v.equals(y);break}}if(f){f.setEndAt(v,CKEDITOR.POSITION_BEFORE_START);if(n!="br"){this._.nextNode=v}}B=1}else{if(v.getFirst()){if(!f){f=this.range.clone();f.setStartAt(v,CKEDITOR.POSITION_BEFORE_START)}v=v.getFirst();continue}r=1}}}if(r&&!f){f=this.range.clone();f.setStartAt(v,CKEDITOR.POSITION_BEFORE_START)}w=(!B||r)&&v.equals(y);if(f&&!B){for(;!v.getNext(p)&&!w;){n=v.getParent();if(n.isBlockBoundary(this.forceBrBreak&&!d&&{br:1})){B=1;r=0;w||n.equals(y);f.setEndAt(n,CKEDITOR.POSITION_BEFORE_END);break}v=n;r=1;w=v.equals(y);t=1}}r&&f.setEndAt(v,CKEDITOR.POSITION_AFTER_END);v=j(v,t,y);if((w=!v)||B&&f){break}}if(!e){if(!f){this._.docEndMarker&&this._.docEndMarker.remove();return this._.nextNode=null}e=new CKEDITOR.dom.elementPath(f.startContainer,f.root);v=e.blockLimit;B={div:1,th:1,td:1};e=e.block;if(!e&&v&&!this.enforceRealBlocks&&B[v.getName()]&&f.checkStartOfBlock()&&f.checkEndOfBlock()&&!v.equals(f.root)){e=v}else{if(!e||this.enforceRealBlocks&&e.getName()=="li"){e=this.range.document.createElement(c);f.extractContents().appendTo(e);e.trim();f.insertNode(e);z=C=true}else{if(e.getName()!="li"){if(!f.checkStartOfBlock()||!f.checkEndOfBlock()){e=e.clone(false);f.extractContents().appendTo(e);e.trim();C=f.splitBlock();z=!C.wasStartOfBlock;C=!C.wasEndOfBlock;f.insertNode(e)}}else{if(!w){this._.nextNode=e.equals(y)?null:j(f.getBoundaryNodes().endNode,1,y)}}}}}if(z){(z=e.getPrevious())&&z.type==CKEDITOR.NODE_ELEMENT&&(z.getName()=="br"?z.remove():z.getLast()&&z.getLast().$.nodeName.toLowerCase()=="br"&&z.getLast().remove())}if(C){(z=e.getLast())&&z.type==CKEDITOR.NODE_ELEMENT&&z.getName()=="br"&&(!CKEDITOR.env.needsBrFiller||z.getPrevious(l)||z.getNext(l))&&z.remove()}if(!this._.nextNode){this._.nextNode=w||e.equals(y)||!y?null:j(e,1,y)}return e}};CKEDITOR.dom.range.prototype.createIterator=function(){return new h(this)}})();CKEDITOR.command=function(d,f){this.uiItems=[];this.exec=function(a){if(this.state==CKEDITOR.TRISTATE_DISABLED||!this.checkAllowed()){return false}this.editorFocus&&d.focus();return this.fire("exec")===false?true:f.exec.call(this,d,a)!==false};this.refresh=function(c,g){if(!this.readOnly&&c.readOnly){return true}if(this.context&&!g.isContextFor(this.context)){this.disable();return true}if(!this.checkAllowed(true)){this.disable();return true}this.startDisabled||this.enable();this.modes&&!this.modes[c.mode]&&this.disable();return this.fire("refresh",{editor:c,path:g})===false?true:f.refresh&&f.refresh.apply(this,arguments)!==false};var e;this.checkAllowed=function(a){return !a&&typeof e=="boolean"?e:e=d.activeFilter.checkFeature(this)};CKEDITOR.tools.extend(this,f,{modes:{wysiwyg:1},editorFocus:1,contextSensitive:!!f.context,state:CKEDITOR.TRISTATE_DISABLED});CKEDITOR.event.call(this)};CKEDITOR.command.prototype={enable:function(){this.state==CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()&&this.setState(!this.preserveState||typeof this.previousState=="undefined"?CKEDITOR.TRISTATE_OFF:this.previousState)},disable:function(){this.setState(CKEDITOR.TRISTATE_DISABLED)},setState:function(b){if(this.state==b||b!=CKEDITOR.TRISTATE_DISABLED&&!this.checkAllowed()){return false}this.previousState=this.state;this.state=b;this.fire("state");return true},toggleState:function(){this.state==CKEDITOR.TRISTATE_OFF?this.setState(CKEDITOR.TRISTATE_ON):this.state==CKEDITOR.TRISTATE_ON&&this.setState(CKEDITOR.TRISTATE_OFF)}};CKEDITOR.event.implementOn(CKEDITOR.command.prototype);CKEDITOR.ENTER_P=1;CKEDITOR.ENTER_BR=2;CKEDITOR.ENTER_DIV=3;CKEDITOR.config={customConfig:"config.js",autoUpdateElement:!0,language:"",defaultLanguage:"en",contentsLangDirection:"",enterMode:CKEDITOR.ENTER_P,forceEnterMode:!1,shiftEnterMode:CKEDITOR.ENTER_BR,docType:"<!DOCTYPE html>",bodyId:"",bodyClass:"",fullPage:!1,height:200,extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,width:"",baseFloatZIndex:10000,blockedKeystrokes:[CKEDITOR.CTRL+66,CKEDITOR.CTRL+73,CKEDITOR.CTRL+85]};(function(){function B(g,m,p,n,s){var t,E,g=[];for(t in m){E=m[t];E=typeof E=="boolean"?{}:typeof E=="function"?{match:E}:ah(E);if(t.charAt(0)!="$"){E.elements=t}if(p){E.featureName=p.toLowerCase()}var A=E;A.elements=Y(A.elements,/\s+/)||null;A.propertiesOnly=A.propertiesOnly||A.elements===true;var C=/\s*,\s*/,D=void 0;for(D in ar){A[D]=Y(A[D],C)||null;var J=A,G=V[D],O=Y(A[V[D]],C),F=A[D],L=[],I=true,x=void 0;O?I=false:O={};for(x in F){if(x.charAt(0)=="!"){x=x.slice(1);L.push(x);O[x]=true;I=false}}for(;x=L.pop();){F[x]=F["!"+x];delete F["!"+x]}J[G]=(I?false:O)||null}A.match=A.match||null;n.push(E);g.push(E)}for(var m=s.elements,s=s.generic,z,p=0,n=g.length;p<n;++p){t=ah(g[p]);E=t.classes===true||t.styles===true||t.attributes===true;A=t;D=G=C=void 0;for(C in ar){A[C]=H(A[C])}J=true;for(D in V){C=V[D];G=A[C];O=[];F=void 0;for(F in G){F.indexOf("*")>-1?O.push(RegExp("^"+F.replace(/\*/g,".*")+"$")):O.push(F)}G=O;if(G.length){A[C]=G;J=false}}A.nothingRequired=J;A.noProperties=!(A.attributes||A.classes||A.styles);if(t.elements===true||t.elements===null){s[E?"unshift":"push"](t)}else{A=t.elements;delete t.elements;for(z in A){if(m[z]){m[z][E?"unshift":"push"](t)}else{m[z]=[t]}}}}}function N(b,h,g,i){if(!b.match||b.match(h)){if(i||aj(b,h)){if(!b.propertiesOnly){g.valid=true}if(!g.allAttributes){g.allAttributes=K(b.attributes,h.attributes,g.validAttributes)}if(!g.allStyles){g.allStyles=K(b.styles,h.styles,g.validStyles)}if(!g.allClasses){b=b.classes;h=h.classes;i=g.validClasses;if(b){if(b===true){b=true}else{for(var k=0,m=h.length,l;k<m;++k){l=h[k];i[l]||(i[l]=b(l))}b=false}}else{b=false}g.allClasses=b}}}}function K(e,f,h){if(!e){return false}if(e===true){return true}for(var g in f){h[g]||(h[g]=e(g))}return false}function W(d,g,h){if(!d.match||d.match(g)){if(d.noProperties){return false}h.hadInvalidAttribute=R(d.attributes,g.attributes)||h.hadInvalidAttribute;h.hadInvalidStyle=R(d.styles,g.styles)||h.hadInvalidStyle;d=d.classes;g=g.classes;if(d){for(var i=false,j=d===true,k=g.length;k--;){if(j||d(g[k])){g.splice(k,1);i=true}}d=i}else{d=false}h.hadInvalidClass=d||h.hadInvalidClass}}function R(f,g){if(!f){return false}var i=false,h=f===true,j;for(j in g){if(h||f(j)){delete g[j];i=true}}return i}function U(c,e,f){if(c.disabled||c.customConfig&&!f||!e){return false}c._.cachedChecks={};return true}function Y(f,g){if(!f){return false}if(f===true){return f}if(typeof f=="string"){f=ae(f);return f=="*"?true:CKEDITOR.tools.convertArrayToObject(f.split(g))}if(CKEDITOR.tools.isArray(f)){return f.length?CKEDITOR.tools.convertArrayToObject(f):false}var i={},h=0,j;for(j in f){i[j]=f[j];h++}return h?i:false}function aj(g,h){if(g.nothingRequired){return true}var j,i,k,l;if(k=g.requiredClasses){l=h.classes;for(j=0;j<k.length;++j){i=k[j];if(typeof i=="string"){if(CKEDITOR.tools.indexOf(l,i)==-1){return false}}else{if(!CKEDITOR.tools.checkIfAnyArrayItemMatches(l,i)){return false}}}}return aa(h.styles,g.requiredStyles)&&aa(h.attributes,g.requiredAttributes)}function aa(e,f){if(!f){return true}for(var h=0,g;h<f.length;++h){g=f[h];if(typeof g=="string"){if(!(g in e)){return false}}else{if(!CKEDITOR.tools.checkIfAnyObjectPropertyMatches(e,g)){return false}}}return true}function ab(c){if(!c){return{}}for(var c=c.split(/\s*,\s*/).sort(),d={};c.length;){d[c.shift()]=av}return d}function ai(g){for(var h,j,i,k,l={},m=1,g=ae(g);h=g.match(ax);){if(j=h[2]){i=am(j,"styles");k=am(j,"attrs");j=am(j,"classes")}else{i=k=j=null}l["$"+m++]={elements:h[1],classes:j,styles:i,attributes:k};g=g.slice(h[0].length)}return l}function am(c,e){var f=c.match(P[e]);return f?ae(f[1]):null}function ap(c){var e=c.styleBackup=c.attributes.style,f=c.classBackup=c.attributes["class"];if(!c.styles){c.styles=CKEDITOR.tools.parseCssText(e||"",1)}if(!c.classes){c.classes=f?f.split(/\s+/):[]}}function aw(c,f,n,o){var A=0,D;if(o.toHtml){f.name=f.name.replace(M,"$1")}if(o.doCallbacks&&c.elementCallbacks){c:for(var F=c.elementCallbacks,s=0,J=F.length,S;s<J;++s){if(S=F[s](f)){D=S;break c}}if(D){return D}}if(o.doTransform){if(D=c._.transformations[f.name]){ap(f);for(F=0;F<D.length;++F){au(c,f,D[F])}ak(f)}}if(o.doFilter){c:{F=f.name;s=c._;c=s.allowedRules.elements[F];D=s.allowedRules.generic;F=s.disallowedRules.elements[F];s=s.disallowedRules.generic;J=o.skipRequired;S={valid:false,validAttributes:{},validClasses:{},validStyles:{},allAttributes:false,allClasses:false,allStyles:false,hadInvalidAttribute:false,hadInvalidClass:false,hadInvalidStyle:false};var G,O;if(!c&&!D){c=null}else{ap(f);if(F){G=0;for(O=F.length;G<O;++G){if(W(F[G],f,S)===false){c=null;break c}}}if(s){G=0;for(O=s.length;G<O;++G){W(s[G],f,S)}}if(c){G=0;for(O=c.length;G<O;++G){N(c[G],f,S,J)}}if(D){G=0;for(O=D.length;G<O;++G){N(D[G],f,S,J)}}c=S}}if(!c){n.push(f);return T}if(!c.valid){n.push(f);return T}O=c.validAttributes;var u=c.validStyles;D=c.validClasses;var F=f.attributes,p=f.styles,s=f.classes,J=f.classBackup,v=f.styleBackup,L,az,m=[];S=[];var x=/^data-cke-/;G=false;delete F.style;delete F["class"];delete f.classBackup;delete f.styleBackup;if(!c.allAttributes){for(L in F){if(!O[L]){if(x.test(L)){if(L!=(az=L.replace(/^data-cke-saved-/,""))&&!O[az]){delete F[L];G=true}}else{delete F[L];G=true}}}}if(!c.allStyles||c.hadInvalidStyle){for(L in p){c.allStyles||u[L]?m.push(L+":"+p[L]):G=true}if(m.length){F.style=m.sort().join("; ")}}else{if(v){F.style=v}}if(!c.allClasses||c.hadInvalidClass){for(L=0;L<s.length;++L){(c.allClasses||D[s[L]])&&S.push(s[L])}S.length&&(F["class"]=S.sort().join(" "));J&&S.length<J.split(/\s+/).length&&(G=true)}else{J&&(F["class"]=J)}G&&(A=T);if(!o.skipFinalValidation&&!at(f)){n.push(f);return T}}if(o.toHtml){f.name=f.name.replace(Q,"cke:$1")}return A}function an(c){var e=[],f;for(f in c){f.indexOf("*")>-1&&e.push(f.replace(/\*/g,".*"))}return e.length?RegExp("^(?:"+e.join("|")+")$"):null}function ak(c){var e=c.attributes,f;delete e.style;delete e["class"];if(f=CKEDITOR.tools.writeCssText(c.styles,true)){e.style=f}c.classes.length&&(e["class"]=c.classes.sort().join(" "))}function at(b){switch(b.name){case"a":if(!b.children.length&&!b.attributes.name){return false}break;case"img":if(!b.attributes.src){return false}}return true}function H(c){if(!c){return false}if(c===true){return true}var d=an(c);return function(a){return a in c||d&&a.match(d)}}function af(){return new CKEDITOR.htmlParser.element("br")}function ag(b){return b.type==CKEDITOR.NODE_ELEMENT&&(b.name=="br"||X.$block[b.name])}function ad(h,i,l){var k=h.name;if(X.$empty[k]||!h.children.length){if(k=="hr"&&i=="br"){h.replaceWith(af())}else{h.parent&&l.push({check:"it",el:h.parent});h.remove()}}else{if(X.$block[k]||k=="tr"){if(i=="br"){if(h.previous&&!ag(h.previous)){i=af();i.insertBefore(h)}if(h.next&&!ag(h.next)){i=af();i.insertAfter(h)}h.replaceWithChildren()}else{var k=h.children,m;i:{m=X[i];for(var n=0,r=k.length,q;n<r;++n){q=k[n];if(q.type==CKEDITOR.NODE_ELEMENT&&!m[q.name]){m=false;break i}}m=true}if(m){h.name=i;h.attributes={};l.push({check:"parent-down",el:h})}else{m=h.parent;for(var n=m.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||m.name=="body",p,r=k.length;r>0;){q=k[--r];if(n&&(q.type==CKEDITOR.NODE_TEXT||q.type==CKEDITOR.NODE_ELEMENT&&X.$inline[q.name])){if(!p){p=new CKEDITOR.htmlParser.element(i);p.insertAfter(h);l.push({check:"parent-down",el:p})}p.add(q,0)}else{p=null;q.insertAfter(h);m.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT&&(q.type==CKEDITOR.NODE_ELEMENT&&!X[m.name][q.name])&&l.push({check:"el-up",el:q})}}h.remove()}}}else{if(k=="style"){h.remove()}else{h.parent&&l.push({check:"it",el:h.parent});h.replaceWithChildren()}}}}function au(f,g,i){var h,j;for(h=0;h<i.length;++h){j=i[h];if((!j.check||f.check(j.check,false))&&(!j.left||j.left(g))){j.right(g,Z);break}}}function ac(g,h){var l=h.getDefinition(),i=l.attributes,m=l.styles,n,r,p,q;if(g.name!=l.element){return false}for(n in i){if(n=="class"){l=i[n].split(/\s+/);for(p=g.classes.join("|");q=l.pop();){if(p.indexOf(q)==-1){return false}}}else{if(g.attributes[n]!=i[n]){return false}}}for(r in m){if(g.styles[r]!=m[r]){return false}}return true}function ao(e,f){var h,g;if(typeof e=="string"){h=e}else{if(e instanceof CKEDITOR.style){g=e}else{h=e[0];g=e[1]}}return[{element:h,left:g,right:function(b,c){c.transform(b,f)}}]}function al(b){return function(a){return ac(a,b)}}function aq(b){return function(a,c){c[b](a)}}var X=CKEDITOR.dtd,T=1,ah=CKEDITOR.tools.copy,ae=CKEDITOR.tools.trim,av="cke-test",ay=["","p","br","div"];CKEDITOR.FILTER_SKIP_TREE=2;CKEDITOR.filter=function(c){this.allowedContent=[];this.disallowedContent=[];this.elementCallbacks=null;this.disabled=false;this.editor=null;this.id=CKEDITOR.tools.getNextNumber();this._={allowedRules:{elements:{},generic:[]},disallowedRules:{elements:{},generic:[]},transformations:{},cachedTests:{}};CKEDITOR.filter.instances[this.id]=this;if(c instanceof CKEDITOR.editor){c=this.editor=c;this.customConfig=true;var d=c.config.allowedContent;if(d===true){this.disabled=true}else{if(!d){this.customConfig=false}this.allow(d,"config",1);this.allow(c.config.extraAllowedContent,"extra",1);this.allow(ay[c.enterMode]+" "+ay[c.shiftEnterMode],"default",1);this.disallow(c.config.disallowedContent)}}else{this.customConfig=false;this.allow(c,"default",1)}};CKEDITOR.filter.instances={};CKEDITOR.filter.prototype={allow:function(a,g,e){if(!U(this,a,e)){return false}var h,i;if(typeof a=="string"){a=ai(a)}else{if(a instanceof CKEDITOR.style){if(a.toAllowedContentRules){return this.allow(a.toAllowedContentRules(this.editor),g,e)}h=a.getDefinition();a={};e=h.attributes;a[h.element]=h={styles:h.styles,requiredStyles:h.styles&&CKEDITOR.tools.objectKeys(h.styles)};if(e){e=ah(e);h.classes=e["class"]?e["class"].split(/\s+/):null;h.requiredClasses=h.classes;delete e["class"];h.attributes=e;h.requiredAttributes=e&&CKEDITOR.tools.objectKeys(e)}}else{if(CKEDITOR.tools.isArray(a)){for(h=0;h<a.length;++h){i=this.allow(a[h],g,e)}return i}}}B(this,a,g,this.allowedContent,this._.allowedRules);return true},applyTo:function(h,i,m,j){if(this.disabled){return false}var n=this,p=[],t=this.editor&&this.editor.config.protectedSource,r,s=false,q={doFilter:!m,doTransform:true,doCallbacks:true,toHtml:i};h.forEach(function(b){if(b.type==CKEDITOR.NODE_ELEMENT){if(b.attributes["data-cke-filter"]=="off"){return false}if(!i||!(b.name=="span"&&~CKEDITOR.tools.objectKeys(b.attributes).join("|").indexOf("data-cke-"))){r=aw(n,b,p,q);if(r&T){s=true}else{if(r&2){return false}}}}else{if(b.type==CKEDITOR.NODE_COMMENT&&b.value.match(/^\{cke_protected\}(?!\{C\})/)){var f;b:{var e=decodeURIComponent(b.value.replace(/^\{cke_protected\}/,""));f=[];var g,l,k;if(t){for(l=0;l<t.length;++l){if((k=e.match(t[l]))&&k[0].length==e.length){f=true;break b}}}e=CKEDITOR.htmlParser.fragment.fromHtml(e);e.children.length==1&&(g=e.children[0]).type==CKEDITOR.NODE_ELEMENT&&aw(n,g,f,q);f=!f.length}f||p.push(b)}}},null,true);p.length&&(s=true);for(var u,h=[],j=ay[j||(this.editor?this.editor.enterMode:CKEDITOR.ENTER_P)];m=p.pop();){m.type==CKEDITOR.NODE_ELEMENT?ad(m,j,h):m.remove()}for(;u=h.pop();){m=u.el;if(m.parent){switch(u.check){case"it":X.$removeEmpty[m.name]&&!m.children.length?ad(m,j,h):at(m)||ad(m,j,h);break;case"el-up":m.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT&&!X[m.parent.name][m.name]&&ad(m,j,h);break;case"parent-down":m.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT&&!X[m.parent.name][m.name]&&ad(m.parent,j,h)}}}return s},checkFeature:function(b){if(this.disabled||!b){return true}b.toFeature&&(b=b.toFeature(this.editor));return !b.requiredContent||this.check(b.requiredContent)},disable:function(){this.disabled=true},disallow:function(a){if(!U(this,a,true)){return false}typeof a=="string"&&(a=ai(a));B(this,a,null,this.disallowedContent,this._.disallowedRules);return true},addContentForms:function(f){if(!this.disabled&&f){var g,i,h=[],j;for(g=0;g<f.length&&!j;++g){i=f[g];if((typeof i=="string"||i instanceof CKEDITOR.style)&&this.check(i)){j=i}}if(j){for(g=0;g<f.length;++g){h.push(ao(f[g],j))}this.addTransformations(h)}}},addElementCallback:function(b){if(!this.elementCallbacks){this.elementCallbacks=[]}this.elementCallbacks.push(b)},addFeature:function(b){if(this.disabled||!b){return true}b.toFeature&&(b=b.toFeature(this.editor));this.allow(b.allowedContent,b.name);this.addTransformations(b.contentTransformations);this.addContentForms(b.contentForms);return b.requiredContent&&(this.customConfig||this.disallowedContent.length)?this.check(b.requiredContent):true},addTransformations:function(h){var i,n;if(!this.disabled&&h){var m=this._.transformations,p;for(p=0;p<h.length;++p){i=h[p];var q=void 0,v=void 0,s=void 0,t=void 0,u=void 0,r=void 0;n=[];for(v=0;v<i.length;++v){s=i[v];if(typeof s=="string"){s=s.split(/\s*:\s*/);t=s[0];u=null;r=s[1]}else{t=s.check;u=s.left;r=s.right}if(!q){q=s;q=q.element?q.element:t?t.match(/^([a-z0-9]+)/i)[0]:q.left.getDefinition().element}u instanceof CKEDITOR.style&&(u=al(u));n.push({check:t==q?null:t,left:u,right:typeof r=="string"?aq(r):r})}i=q;m[i]||(m[i]=[]);m[i].push(n)}}},check:function(g,h,m){if(this.disabled){return true}if(CKEDITOR.tools.isArray(g)){for(var i=g.length;i--;){if(this.check(g[i],h,m)){return true}}return false}var n,o;if(typeof g=="string"){o=g+"<"+(h===false?"0":"1")+(m?"1":"0")+">";if(o in this._.cachedChecks){return this._.cachedChecks[o]}i=ai(g).$1;n=i.styles;var p=i.classes;i.name=i.elements;i.classes=p=p?p.split(/\s*,\s*/):[];i.styles=ab(n);i.attributes=ab(i.attributes);i.children=[];p.length&&(i.attributes["class"]=p.join(" "));if(n){i.attributes.style=CKEDITOR.tools.writeCssText(i.styles)}n=i}else{i=g.getDefinition();n=i.styles;p=i.attributes||{};if(n){n=ah(n);p.style=CKEDITOR.tools.writeCssText(n,true)}else{n={}}n={name:i.element,attributes:p,classes:p["class"]?p["class"].split(/\s+/):[],styles:n,children:[]}}var p=CKEDITOR.tools.clone(n),q=[],r;if(h!==false&&(r=this._.transformations[n.name])){for(i=0;i<r.length;++i){au(this,n,r[i])}ak(n)}aw(this,p,q,{doFilter:true,doTransform:h!==false,skipRequired:!m,skipFinalValidation:!m});h=q.length>0?false:CKEDITOR.tools.objectCompare(n.attributes,p.attributes,true)?true:false;typeof g=="string"&&(this._.cachedChecks[o]=h);return h},getAllowedEnterMode:function(){var c=["p","div","br"],d={p:CKEDITOR.ENTER_P,div:CKEDITOR.ENTER_DIV,br:CKEDITOR.ENTER_BR};return function(b,a){var g=c.slice(),h;if(this.check(ay[b])){return b}for(a||(g=g.reverse());h=g.pop();){if(this.check(h)){return d[h]}}return CKEDITOR.ENTER_BR}}()};var ar={styles:1,attributes:1,classes:1},V={styles:"requiredStyles",attributes:"requiredAttributes",classes:"requiredClasses"},ax=/^([a-z0-9*\s]+)((?:\s*\{[!\w\-,\s\*]+\}\s*|\s*\[[!\w\-,\s\*]+\]\s*|\s*\([!\w\-,\s\*]+\)\s*){0,3})(?:;\s*|$)/i,P={styles:/{([^}]+)}/,attrs:/\[([^\]]+)\]/,classes:/\(([^\)]+)\)/},M=/^cke:(object|embed|param)$/,Q=/^(object|embed|param)$/,Z=CKEDITOR.filter.transformationsTools={sizeToStyle:function(b){this.lengthToStyle(b,"width");this.lengthToStyle(b,"height")},sizeToAttribute:function(b){this.lengthToAttribute(b,"width");this.lengthToAttribute(b,"height")},lengthToStyle:function(e,f,h){h=h||f;if(!(h in e.styles)){var g=e.attributes[f];if(g){/^\d+$/.test(g)&&(g=g+"px");e.styles[h]=g}}delete e.attributes[f]},lengthToAttribute:function(f,g,i){i=i||g;if(!(i in f.attributes)){var h=f.styles[g],j=h&&h.match(/^(\d+)(?:\.\d*)?px$/);j?f.attributes[i]=j[1]:h==av&&(f.attributes[i]=av)}delete f.styles[g]},alignmentToStyle:function(c){if(!("float" in c.styles)){var d=c.attributes.align;if(d=="left"||d=="right"){c.styles["float"]=d}}delete c.attributes.align},alignmentToAttribute:function(c){if(!("align" in c.attributes)){var d=c.styles["float"];if(d=="left"||d=="right"){c.attributes.align=d}}delete c.styles["float"]},matchesStyle:ac,transform:function(g,h){if(typeof h=="string"){g.name=h}else{var l=h.getDefinition(),i=l.styles,m=l.attributes,n,p,r,q;g.name=l.element;for(n in m){if(n=="class"){l=g.classes.join("|");for(r=m[n].split(/\s+/);q=r.pop();){l.indexOf(q)==-1&&g.classes.push(q)}}else{g.attributes[n]=m[n]}}for(p in i){g.styles[p]=i[p]}}}}})();(function(){CKEDITOR.focusManager=function(b){if(b.focusManager){return b.focusManager}this.hasFocus=false;this.currentActive=null;this._={editor:b};return this};CKEDITOR.focusManager._={blurDelay:200};CKEDITOR.focusManager.prototype={focus:function(b){this._.timer&&clearTimeout(this._.timer);if(b){this.currentActive=b}if(!this.hasFocus&&!this._.locked){(b=CKEDITOR.currentInstance)&&b.focusManager.blur(1);this.hasFocus=true;(b=this._.editor.container)&&b.addClass("cke_focus");this._.editor.fire("focus")}},lock:function(){this._.locked=1},unlock:function(){delete this._.locked},blur:function(d){function f(){if(this.hasFocus){this.hasFocus=false;var b=this._.editor.container;b&&b.removeClass("cke_focus");this._.editor.fire("blur")}}if(!this._.locked){this._.timer&&clearTimeout(this._.timer);var e=CKEDITOR.focusManager._.blurDelay;d||!e?f.call(this):this._.timer=CKEDITOR.tools.setTimeout(function(){delete this._.timer;f.call(this)},e,this)}},add:function(e,h){var g=e.getCustomData("focusmanager");if(!g||g!=this){g&&g.remove(e);var g="focus",j="blur";if(h){if(CKEDITOR.env.ie){g="focusin";j="focusout"}else{CKEDITOR.event.useCapture=1}}var i={blur:function(){e.equals(this.currentActive)&&this.blur()},focus:function(){this.focus(e)}};e.on(g,i.focus,this);e.on(j,i.blur,this);if(h){CKEDITOR.event.useCapture=0}e.setCustomData("focusmanager",this);e.setCustomData("focusmanager_handlers",i)}},remove:function(b){b.removeCustomData("focusmanager");var d=b.removeCustomData("focusmanager_handlers");b.removeListener("blur",d.blur);b.removeListener("focus",d.focus)}}})();CKEDITOR.keystrokeHandler=function(b){if(b.keystrokeHandler){return b.keystrokeHandler}this.keystrokes={};this.blockedKeystrokes={};this._={editor:b};return this};(function(){var d,f=function(a){var a=a.data,i=a.getKeystroke(),h=this.keystrokes[i],j=this._.editor;d=j.fire("key",{keyCode:i,domEvent:a})===false;if(!d){h&&(d=j.execCommand(h,{from:"keystrokeHandler"})!==false);d||(d=!!this.blockedKeystrokes[i])}d&&a.preventDefault(true);return !d},e=function(a){if(d){d=false;a.data.preventDefault(true)}};CKEDITOR.keystrokeHandler.prototype={attach:function(b){b.on("keydown",f,this);if(CKEDITOR.env.gecko&&CKEDITOR.env.mac){b.on("keypress",e,this)}}}})();(function(){CKEDITOR.lang={languages:{af:1,ar:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,ms:1,nb:1,nl:1,no:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,"zh-cn":1,zh:1},rtl:{ar:1,fa:1,he:1,ku:1,ug:1},load:function(d,g,e){if(!d||!CKEDITOR.lang.languages[d]){d=this.detect(g,d)}var h=this,g=function(){h[d].dir=h.rtl[d]?"rtl":"ltr";e(d,h[d])};this[d]?g():CKEDITOR.scriptLoader.load(CKEDITOR.getUrl("lang/"+d+".js"),g,this)},detect:function(e,h){var g=this.languages,h=h||navigator.userLanguage||navigator.language||e,j=h.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),i=j[1],j=j[2];g[i+"-"+j]?i=i+"-"+j:g[i]||(i=null);CKEDITOR.lang.detect=i?function(){return i}:function(b){return b};return i||e}}})();CKEDITOR.scriptLoader=function(){var b={},d={};return{load:function(a,k,c,j){var l=typeof a=="string";l&&(a=[a]);c||(c=CKEDITOR);var u=a.length,o=[],r=[],t=function(e){k&&(l?k.call(c,e):k.call(c,o,r))};if(u===0){t(true)}else{var v=function(e,f){(f?o:r).push(e);if(--u<=0){j&&CKEDITOR.document.getDocumentElement().removeStyle("cursor");t(f)}},y=function(g,h){b[g]=1;var i=d[g];delete d[g];for(var m=0;m<i.length;m++){i[m](g,h)}},z=function(f){if(b[f]){v(f,true)}else{var g=d[f]||(d[f]=[]);g.push(v);if(!(g.length>1)){var h=new CKEDITOR.dom.element("script");h.setAttributes({type:"text/javascript",src:f});if(k){if(CKEDITOR.env.ie&&CKEDITOR.env.version<11){h.$.onreadystatechange=function(){if(h.$.readyState=="loaded"||h.$.readyState=="complete"){h.$.onreadystatechange=null;y(f,true)}}}else{h.$.onload=function(){setTimeout(function(){y(f,true)},0)};h.$.onerror=function(){y(f,false)}}}h.appendTo(CKEDITOR.document.getHead())}}};j&&CKEDITOR.document.getDocumentElement().setStyle("cursor","wait");for(var w=0;w<u;w++){z(a[w])}}},queue:function(){function e(){var a;(a=f[0])&&this.load(a.scriptUrl,a.callback,CKEDITOR,0)}var f=[];return function(a,c){var h=this;f.push({scriptUrl:a,callback:function(){c&&c.apply(this,arguments);f.shift();e.call(h)}});f.length==1&&e.call(this)}}()}}();CKEDITOR.resourceManager=function(b,d){this.basePath=b;this.fileName=d;this.registered={};this.loaded={};this.externals={};this._={waitingList:{}}};CKEDITOR.resourceManager.prototype={add:function(d,f){if(this.registered[d]){throw'[CKEDITOR.resourceManager.add] The resource name "'+d+'" is already registered.'}var e=this.registered[d]=f||{};e.name=d;e.path=this.getPath(d);CKEDITOR.fire(d+CKEDITOR.tools.capitalize(this.fileName)+"Ready",e);return this.get(d)},get:function(b){return this.registered[b]||null},getPath:function(b){var d=this.externals[b];return CKEDITOR.getUrl(d&&d.dir||this.basePath+b+"/")},getFilePath:function(b){var d=this.externals[b];return CKEDITOR.getUrl(this.getPath(b)+(d?d.file:this.fileName+".js"))},addExternal:function(e,h,g){for(var e=e.split(","),j=0;j<e.length;j++){var i=e[j];g||(h=h.replace(/[^\/]+$/,function(b){g=b;return""}));this.externals[i]={dir:h,file:g||this.fileName+".js"}}},load:function(j,l,k){CKEDITOR.tools.isArray(j)||(j=j?[j]:[]);for(var q=this.loaded,o=this.registered,p=[],r={},v={},s=0;s<j.length;s++){var t=j[s];if(t){if(!q[t]&&!o[t]){var u=this.getFilePath(t);p.push(u);u in r||(r[u]=[]);r[u].push(t)}else{v[t]=this.get(t)}}}CKEDITOR.scriptLoader.load(p,function(b,c){if(c.length){throw'[CKEDITOR.resourceManager.load] Resource name "'+r[c[0]].join(",")+'" was not found at "'+c[0]+'".'}for(var f=0;f<b.length;f++){for(var h=r[b[f]],g=0;g<h.length;g++){var i=h[g];v[i]=this.get(i);q[i]=1}}l.call(k,v)},this)}};CKEDITOR.plugins=new CKEDITOR.resourceManager("plugins/","plugin");CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,function(b){var d={};return function(a,i,c){var h={},j=function(e){b.call(this,e,function(f){CKEDITOR.tools.extend(h,f);var g=[],k;for(k in f){var l=f[k],o=l&&l.requires;if(!d[k]){if(l.icons){for(var r=l.icons.split(","),m=r.length;m--;){CKEDITOR.skin.addIcon(r[m],l.path+"icons/"+(CKEDITOR.env.hidpi&&l.hidpi?"hidpi/":"")+r[m]+".png")}}d[k]=1}if(o){o.split&&(o=o.split(","));for(l=0;l<o.length;l++){h[o[l]]||g.push(o[l])}}}if(g.length){j.call(this,g)}else{for(k in h){l=h[k];if(l.onLoad&&!l.onLoad._called){l.onLoad()===false&&delete h[k];l.onLoad._called=1}}i&&i.call(c||window,h)}},this)};j.call(this,a)}});CKEDITOR.plugins.setLang=function(d,g,e){var h=this.get(d),d=h.langEntries||(h.langEntries={}),h=h.lang||(h.lang=[]);h.split&&(h=h.split(","));CKEDITOR.tools.indexOf(h,g)==-1&&h.push(g);d[g]=e};CKEDITOR.ui=function(b){if(b.ui){return b.ui}this.items={};this.instances={};this.editor=b;this._={handlers:{}};return this};CKEDITOR.ui.prototype={add:function(d,g,e){e.name=d.toLowerCase();var h=this.items[d]={type:g,command:e.command||null,args:Array.prototype.slice.call(arguments,2)};CKEDITOR.tools.extend(h,e)},get:function(b){return this.instances[b]},create:function(d){var g=this.items[d],e=g&&this._.handlers[g.type],h=g&&g.command&&this.editor.getCommand(g.command),e=e&&e.create.apply(this,g.args);this.instances[d]=e;h&&h.uiItems.push(e);if(e&&!e.type){e.type=g.type}return e},addHandler:function(b,d){this._.handlers[b]=d},space:function(b){return CKEDITOR.document.getById(this.spaceId(b))},spaceId:function(b){return this.editor.id+"_"+b}};CKEDITOR.event.implementOn(CKEDITOR.ui);(function(){function j(b,c,d){CKEDITOR.event.call(this);b=b&&CKEDITOR.tools.clone(b);if(c!==void 0){if(c instanceof CKEDITOR.dom.element){if(!d){throw Error("One of the element modes must be specified.")}}else{throw Error("Expect element of type CKEDITOR.dom.element.")}if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&d==CKEDITOR.ELEMENT_MODE_INLINE){throw Error("Inline element mode is not supported on IE quirks.")}if(!(d==CKEDITOR.ELEMENT_MODE_INLINE?c.is(CKEDITOR.dtd.$editable)||c.is("textarea"):d==CKEDITOR.ELEMENT_MODE_REPLACE?!c.is(CKEDITOR.dtd.$nonBodyContent):1)){throw Error('The specified element mode is not supported on element: "'+c.getName()+'".')}this.element=c;this.elementMode=d;this.name=this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO&&(c.getId()||c.getNameAtt())}else{this.elementMode=CKEDITOR.ELEMENT_MODE_NONE}this._={};this.commands={};this.templates={};this.name=this.name||l();this.id=CKEDITOR.tools.getNextId();this.status="unloaded";this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config);this.ui=new CKEDITOR.ui(this);this.focusManager=new CKEDITOR.focusManager(this);this.keystrokeHandler=new CKEDITOR.keystrokeHandler(this);this.on("readOnly",k);this.on("selectionChange",function(e){o(this,e.data.path)});this.on("activeFilterChange",function(){o(this,this.elementPath(),true)});this.on("mode",k);this.on("instanceReady",function(){this.config.startupFocus&&this.focus()});CKEDITOR.fire("instanceCreated",null,this);CKEDITOR.add(this);CKEDITOR.tools.setTimeout(function(){t(this,b)},0,this)}function l(){do{var b="editor"+ ++A}while(CKEDITOR.instances[b]);return b}function k(){var c=this.commands,d;for(d in c){r(this,c[d])}}function r(c,d){d[d.startDisabled?"disable":c.readOnly&&!d.readOnly?"disable":d.modes[c.mode]?"enable":"disable"]()}function o(g,h,m){if(h){var i,n,p=g.commands;for(n in p){i=p[n];(m||i.contextSensitive)&&i.refresh(g,h)}}}function q(c){var e=c.config.customConfig;if(!e){return false}var e=CKEDITOR.getUrl(e),f=B[e]||(B[e]={});if(f.fn){f.fn.call(c,c.config);(CKEDITOR.getUrl(c.config.customConfig)==e||!q(c))&&c.fireOnce("customConfigLoaded")}else{CKEDITOR.scriptLoader.queue(e,function(){f.fn=CKEDITOR.editorConfig?CKEDITOR.editorConfig:function(){};q(c)})}return true}function t(c,d){c.on("customConfigLoaded",function(){if(d){if(d.on){for(var a in d.on){c.on(a,d.on[a])}}CKEDITOR.tools.extend(c.config,d,true);delete c.config.on}a=c.config;c.readOnly=!(!a.readOnly&&!(c.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?c.element.is("textarea")?c.element.hasAttribute("disabled"):c.element.isReadOnly():c.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&c.element.hasAttribute("disabled")));c.blockless=c.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?!(c.element.is("textarea")||CKEDITOR.dtd[c.element.getName()].p):false;c.tabIndex=a.tabIndex||c.element&&c.element.getAttribute("tabindex")||0;c.activeEnterMode=c.enterMode=c.blockless?CKEDITOR.ENTER_BR:a.enterMode;c.activeShiftEnterMode=c.shiftEnterMode=c.blockless?CKEDITOR.ENTER_BR:a.shiftEnterMode;if(a.skin){CKEDITOR.skinName=a.skin}c.fireOnce("configLoaded");c.dataProcessor=new CKEDITOR.htmlDataProcessor(c);c.filter=c.activeFilter=new CKEDITOR.filter(c);y(c)});if(d&&d.customConfig!=void 0){c.config.customConfig=d.customConfig}q(c)||c.fireOnce("customConfigLoaded")}function y(b){CKEDITOR.skin.loadPart("editor",function(){u(b)})}function u(b){CKEDITOR.lang.load(b.config.language,b.config.defaultLanguage,function(a,f){var e=b.config.title;b.langCode=a;b.lang=CKEDITOR.tools.prototypedCopy(f);b.title=typeof e=="string"||e===false?e:[b.lang.editor,b.name].join(", ");if(!b.config.contentsLangDirection){b.config.contentsLangDirection=b.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?b.element.getDirection(1):b.lang.dir}b.fire("langLoaded");v(b)})}function v(b){b.getStylesSet(function(a){b.once("loaded",function(){b.fire("stylesSet",{styles:a})},null,null,1);w(b)})}function w(g){var h=g.config,m=h.plugins,i=h.extraPlugins,n=h.removePlugins;if(i){var p=RegExp("(?:^|,)(?:"+i.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),m=m.replace(p,""),m=m+(","+i)}if(n){var s=RegExp("(?:^|,)(?:"+n.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),m=m.replace(s,"")}CKEDITOR.env.air&&(m=m+",adobeair");CKEDITOR.plugins.load(m.split(","),function(b){var a=[],x=[],C=[];g.plugins=b;for(var F in b){var G=b[F],D=G.lang,E=null,H=G.requires,I;CKEDITOR.tools.isArray(H)&&(H=H.join(","));if(H&&(I=H.match(s))){for(;H=I.pop();){CKEDITOR.tools.setTimeout(function(c,d){throw Error('Plugin "'+c.replace(",","")+'" cannot be removed from the plugins list, because it\'s required by "'+d+'" plugin.')},0,null,[H,F])}}if(D&&!g.lang[F]){D.split&&(D=D.split(","));if(CKEDITOR.tools.indexOf(D,g.langCode)>=0){E=g.langCode}else{E=g.langCode.replace(/-.*/,"");E=E!=g.langCode&&CKEDITOR.tools.indexOf(D,E)>=0?E:CKEDITOR.tools.indexOf(D,"en")>=0?"en":D[0]}if(!G.langEntries||!G.langEntries[E]){C.push(CKEDITOR.getUrl(G.path+"lang/"+E+".js"))}else{g.lang[F]=G.langEntries[E];E=null}}x.push(E);a.push(G)}CKEDITOR.scriptLoader.load(C,function(){for(var c=["beforeInit","init","afterInit"],e=0;e<c.length;e++){for(var J=0;J<a.length;J++){var K=a[J];e===0&&(x[J]&&K.lang&&K.langEntries)&&(g.lang[K.name]=K.langEntries[x[J]]);if(K[c[e]]){K[c[e]](g)}}}g.fireOnce("pluginsLoaded");h.keystrokes&&g.setKeystroke(g.config.keystrokes);for(J=0;J<g.config.blockedKeystrokes.length;J++){g.keystrokeHandler.blockedKeystrokes[g.config.blockedKeystrokes[J]]=1}g.status="loaded";g.fireOnce("loaded");CKEDITOR.fire("instanceLoaded",null,g)})})}function z(){var c=this.element;if(c&&this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){var d=this.getData();this.config.htmlEncodeOutput&&(d=CKEDITOR.tools.htmlEncode(d));c.is("textarea")?c.setValue(d):c.setHtml(d);return true}return false}j.prototype=CKEDITOR.editor.prototype;CKEDITOR.editor=j;var A=0,B={};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{addCommand:function(c,e){e.name=c.toLowerCase();var f=new CKEDITOR.command(this,e);this.mode&&r(this,f);return this.commands[c]=f},_attachToForm:function(){var e=this,f=e.element,h=new CKEDITOR.dom.element(f.$.form);if(f.is("textarea")&&h){var g=function(a){e.updateElement();e._.required&&(!f.getValue()&&e.fire("required")===false)&&a.data.preventDefault()};h.on("submit",g);if(h.$.submit&&h.$.submit.call&&h.$.submit.apply){h.$.submit=CKEDITOR.tools.override(h.$.submit,function(b){return function(){g();b.apply?b.apply(this):b()}})}e.on("destroy",function(){h.removeListener("submit",g)})}},destroy:function(b){this.fire("beforeDestroy");!b&&z.call(this);this.editable(null);this.status="destroyed";this.fire("destroy");this.removeAllListeners();CKEDITOR.remove(this);CKEDITOR.fire("instanceDestroyed",null,this)},elementPath:function(b){if(!b){b=this.getSelection();if(!b){return null}b=b.getStartElement()}return b?new CKEDITOR.dom.elementPath(b,this.editable()):null},createRange:function(){var b=this.editable();return b?new CKEDITOR.dom.range(b):null},execCommand:function(e,f){var h=this.getCommand(e),g={name:e,commandData:f,command:h};if(h&&h.state!=CKEDITOR.TRISTATE_DISABLED&&this.fire("beforeCommandExec",g)!==false){g.returnValue=h.exec(g.commandData);if(!h.async&&this.fire("afterCommandExec",g)!==false){return g.returnValue}}return false},getCommand:function(b){return this.commands[b]},getData:function(c){!c&&this.fire("beforeGetData");var d=this._.data;if(typeof d!="string"){d=(d=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?d.is("textarea")?d.getValue():d.getHtml():""}d={dataValue:d};!c&&this.fire("getData",d);return d.dataValue},getSnapshot:function(){var c=this.fire("getSnapshot");if(typeof c!="string"){var d=this.element;d&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(c=d.is("textarea")?d.getValue():d.getHtml())}return c},loadSnapshot:function(b){this.fire("loadSnapshot",b)},setData:function(f,g,i){var h=true,m=g;if(g&&typeof g=="object"){i=g.internal;m=g.callback;h=!g.noSnapshot}!i&&h&&this.fire("saveSnapshot");if(m||!i){this.once("dataReady",function(b){!i&&h&&this.fire("saveSnapshot");m&&m.call(b.editor)})}f={dataValue:f};!i&&this.fire("setData",f);this._.data=f.dataValue;!i&&this.fire("afterSetData",f)},setReadOnly:function(b){b=b==void 0||b;if(this.readOnly!=b){this.readOnly=b;this.keystrokeHandler.blockedKeystrokes[8]=+b;this.editable().setReadOnly(b);this.fire("readOnly")}},insertHtml:function(c,d){this.fire("insertHtml",{dataValue:c,mode:d})},insertText:function(b){this.fire("insertText",b)},insertElement:function(b){this.fire("insertElement",b)},focus:function(){this.fire("beforeFocus")},checkDirty:function(){return this.status=="ready"&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this._.previousValue=this.getSnapshot()},updateElement:function(){return z.call(this)},setKeystroke:function(){for(var f=this.keystrokeHandler.keystrokes,g=CKEDITOR.tools.isArray(arguments[0])?arguments[0]:[[].slice.call(arguments,0)],i,h,m=g.length;m--;){i=g[m];h=0;if(CKEDITOR.tools.isArray(i)){h=i[1];i=i[0]}h?f[i]=h:delete f[i]}},addFeature:function(b){return this.filter.addFeature(b)},setActiveFilter:function(b){if(!b){b=this.filter}if(this.activeFilter!==b){this.activeFilter=b;this.fire("activeFilterChange");b===this.filter?this.setActiveEnterMode(null,null):this.setActiveEnterMode(b.getAllowedEnterMode(this.enterMode),b.getAllowedEnterMode(this.shiftEnterMode,true))}},setActiveEnterMode:function(c,d){c=c?this.blockless?CKEDITOR.ENTER_BR:c:this.enterMode;d=d?this.blockless?CKEDITOR.ENTER_BR:d:this.shiftEnterMode;if(this.activeEnterMode!=c||this.activeShiftEnterMode!=d){this.activeEnterMode=c;this.activeShiftEnterMode=d;this.fire("activeEnterModeChange")}}})})();CKEDITOR.ELEMENT_MODE_NONE=0;CKEDITOR.ELEMENT_MODE_REPLACE=1;CKEDITOR.ELEMENT_MODE_APPENDTO=2;CKEDITOR.ELEMENT_MODE_INLINE=3;CKEDITOR.htmlParser=function(){this._={htmlPartsRegex:RegExp("<(?:(?:\\/([^>]+)>)|(?:!--([\\S|\\s]*?)-->)|(?:([^\\s>]+)\\s*((?:(?:\"[^\"]*\")|(?:'[^']*')|[^\"'>])*)\\/?>))","g")}};(function(){var b=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,d={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};CKEDITOR.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(a){for(var k,c,j=0,l;k=this._.htmlPartsRegex.exec(a);){c=k.index;if(c>j){j=a.substring(j,c);if(l){l.push(j)}else{this.onText(j)}}j=this._.htmlPartsRegex.lastIndex;if(c=k[1]){c=c.toLowerCase();if(l&&CKEDITOR.dtd.$cdata[c]){this.onCDATA(l.join(""));l=null}if(!l){this.onTagClose(c);continue}}if(l){l.push(k[0])}else{if(c=k[3]){c=c.toLowerCase();if(!/="/.test(c)){var r={},o;k=k[4];var p=!!(k&&k.charAt(k.length-1)=="/");if(k){for(;o=b.exec(k);){var q=o[1].toLowerCase();o=o[2]||o[3]||o[4]||"";r[q]=!o&&d[q]?q:CKEDITOR.tools.htmlDecodeAttr(o)}}this.onTagOpen(c,r,p);!l&&CKEDITOR.dtd.$cdata[c]&&(l=[])}}else{if(c=k[2]){this.onComment(c)}}}}if(a.length>j){this.onText(a.substring(j,a.length))}}}})();CKEDITOR.htmlParser.basicWriter=CKEDITOR.tools.createClass({$:function(){this._={output:[]}},proto:{openTag:function(b){this._.output.push("<",b)},openTagClose:function(b,d){d?this._.output.push(" />"):this._.output.push(">")},attribute:function(b,d){typeof d=="string"&&(d=CKEDITOR.tools.htmlEncodeAttr(d));this._.output.push(" ",b,'="',d,'"')},closeTag:function(b){this._.output.push("</",b,">")},text:function(b){this._.output.push(b)},comment:function(b){this._.output.push("<!--",b,"-->")},write:function(b){this._.output.push(b)},reset:function(){this._.output=[];this._.indent=false},getHtml:function(b){var d=this._.output.join("");b&&this.reset();return d}}});"use strict";(function(){CKEDITOR.htmlParser.node=function(){};CKEDITOR.htmlParser.node.prototype={remove:function(){var d=this.parent.children,g=CKEDITOR.tools.indexOf(d,this),e=this.previous,h=this.next;e&&(e.next=h);h&&(h.previous=e);d.splice(g,1);this.parent=null},replaceWith:function(e){var h=this.parent.children,g=CKEDITOR.tools.indexOf(h,this),j=e.previous=this.previous,i=e.next=this.next;j&&(j.next=e);i&&(i.previous=e);h[g]=e;e.parent=this.parent;this.parent=null},insertAfter:function(d){var g=d.parent.children,e=CKEDITOR.tools.indexOf(g,d),h=d.next;g.splice(e+1,0,this);this.next=d.next;this.previous=d;d.next=this;h&&(h.previous=this);this.parent=d.parent},insertBefore:function(d){var f=d.parent.children,e=CKEDITOR.tools.indexOf(f,d);f.splice(e,0,this);this.next=d;(this.previous=d.previous)&&(d.previous.next=this);d.previous=this;this.parent=d.parent},getAscendant:function(d){var f=typeof d=="function"?d:typeof d=="string"?function(a){return a.name==d}:function(a){return a.name in d},e=this.parent;for(;e&&e.type==CKEDITOR.NODE_ELEMENT;){if(f(e)){return e}e=e.parent}return null},wrapWith:function(b){this.replaceWith(b);b.add(this);return b},getIndex:function(){return CKEDITOR.tools.indexOf(this.parent.children,this)},getFilterContext:function(b){return b||{}}}})();"use strict";CKEDITOR.htmlParser.comment=function(b){this.value=b;this._={isBlockLike:false}};CKEDITOR.htmlParser.comment.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_COMMENT,filter:function(d,f){var e=this.value;if(!(e=d.onComment(f,e,this))){this.remove();return false}if(typeof e!="string"){this.replaceWith(e);return false}this.value=e;return true},writeHtml:function(b,d){d&&this.filter(d);b.comment(this.value)}});"use strict";(function(){CKEDITOR.htmlParser.text=function(b){this.value=b;this._={isBlockLike:false}};CKEDITOR.htmlParser.text.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(b,d){if(!(this.value=b.onText(d,this.value,this))){this.remove();return false}},writeHtml:function(b,d){d&&this.filter(d);b.text(this.value)}})})();"use strict";(function(){CKEDITOR.htmlParser.cdata=function(b){this.value=b};CKEDITOR.htmlParser.cdata.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(){},writeHtml:function(b){b.write(this.value)}})})();"use strict";CKEDITOR.htmlParser.fragment=function(){this.children=[];this.parent=null;this._={isBlockLike:true,hasInlineStarted:false}};(function(){function e(b){return b.attributes["data-cke-survive"]?false:b.name=="a"&&b.attributes.href||CKEDITOR.dtd.$removeEmpty[b.name]}var h=CKEDITOR.tools.extend({table:1,ul:1,ol:1,dl:1},CKEDITOR.dtd.table,CKEDITOR.dtd.ul,CKEDITOR.dtd.ol,CKEDITOR.dtd.dl),g={ol:1,ul:1},j=CKEDITOR.tools.extend({},{html:1},CKEDITOR.dtd.html,CKEDITOR.dtd.body,CKEDITOR.dtd.head,{style:1,script:1}),i={ul:"li",ol:"li",dl:"dd",table:"tbody",tbody:"tr",thead:"tr",tfoot:"tr",tr:"td"};CKEDITOR.htmlParser.fragment.fromHtml=function(b,c,y){function d(k){var l;if(E.length>0){for(var n=0;n<E.length;n++){var m=E[n],o=m.name,p=CKEDITOR.dtd[o],q=t.name&&CKEDITOR.dtd[t.name];if((!q||q[o])&&(!k||!p||p[k]||!CKEDITOR.dtd[k])){if(!l){f();l=1}m=m.clone();m.parent=t;t=m;E.splice(n,1);n--}else{if(o==t.name){B(t,t.parent,1);n--}}}}}function f(){for(;a.length;){B(a.shift(),t)}}function w(k){if(k._.isBlockLike&&k.name!="pre"&&k.name!="textarea"){var l=k.children.length,n=k.children[l-1],m;if(n&&n.type==CKEDITOR.NODE_TEXT){(m=CKEDITOR.tools.rtrim(n.value))?n.value=m:k.children.length=l-1}}}function B(k,m,l){var m=m||t||z,n=t;if(k.previous===void 0){if(D(m,k)){t=m;C.onTagOpen(y,{});k.returnPoint=m=t}w(k);(!e(k)||k.children.length)&&m.add(k);k.name=="pre"&&(r=false);k.name=="textarea"&&(v=false)}if(k.returnPoint){t=k.returnPoint;delete k.returnPoint}else{t=l?m:n}}function D(k,l){if((k==z||k.name=="body")&&y&&(!k.name||CKEDITOR.dtd[k.name][y])){var n,m;return(n=l.attributes&&(m=l.attributes["data-cke-real-element-type"])?m:l.name)&&n in CKEDITOR.dtd.$inline&&!(n in CKEDITOR.dtd.head)&&!l.isOrphan||l.type==CKEDITOR.NODE_TEXT}}function F(k,l){return k in CKEDITOR.dtd.$listItem||k in CKEDITOR.dtd.$tableContent?k==l||k=="dt"&&l=="dd"||k=="dd"&&l=="dt":false}var C=new CKEDITOR.htmlParser,z=c instanceof CKEDITOR.htmlParser.element?c:typeof c=="string"?new CKEDITOR.htmlParser.element(c):new CKEDITOR.htmlParser.fragment,E=[],a=[],t=z,v=z.name=="textarea",r=z.name=="pre";C.onTagOpen=function(k,l,m,n){l=new CKEDITOR.htmlParser.element(k,l);if(l.isUnknown&&m){l.isEmpty=true}l.isOptionalClose=n;if(e(l)){E.push(l)}else{if(k=="pre"){r=true}else{if(k=="br"&&r){t.add(new CKEDITOR.htmlParser.text("\n"));return}k=="textarea"&&(v=true)}if(k=="br"){a.push(l)}else{for(;;){n=(m=t.name)?CKEDITOR.dtd[m]||(t._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):j;if(!l.isUnknown&&!t.isUnknown&&!n[k]){if(t.isOptionalClose){C.onTagClose(m)}else{if(k in g&&m in g){m=t.children;(m=m[m.length-1])&&m.name=="li"||B(m=new CKEDITOR.htmlParser.element("li"),t);!l.returnPoint&&(l.returnPoint=t);t=m}else{if(k in CKEDITOR.dtd.$listItem&&!F(k,m)){C.onTagOpen(k=="li"?"ul":"dl",{},0,1)}else{if(m in h&&!F(k,m)){!l.returnPoint&&(l.returnPoint=t);t=t.parent}else{m in CKEDITOR.dtd.$inline&&E.unshift(t);if(t.parent){B(t,t.parent,1)}else{l.isOrphan=1;break}}}}}}else{break}}d(k);f();l.parent=t;l.isEmpty?B(l):t=l}}};C.onTagClose=function(k){for(var l=E.length-1;l>=0;l--){if(k==E[l].name){E.splice(l,1);return}}for(var n=[],m=[],o=t;o!=z&&o.name!=k;){o._.isBlockLike||m.unshift(o);n.push(o);o=o.returnPoint||o.parent}if(o!=z){for(l=0;l<n.length;l++){var p=n[l];B(p,p.parent)}t=o;o._.isBlockLike&&f();B(o,o.parent);if(o==t){t=t.parent}E=E.concat(m)}k=="body"&&(y=false)};C.onText=function(k){if((!t._.hasInlineStarted||a.length)&&!r&&!v){k=CKEDITOR.tools.ltrim(k);if(k.length===0){return}}var l=t.name,m=l?CKEDITOR.dtd[l]||(t._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):j;if(!v&&!m["#"]&&l in h){C.onTagOpen(i[l]||"");C.onText(k)}else{f();d();!r&&!v&&(k=k.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," "));k=new CKEDITOR.htmlParser.text(k);if(D(t,k)){this.onTagOpen(y,{},0,1)}t.add(k)}};C.onCDATA=function(k){t.add(new CKEDITOR.htmlParser.cdata(k))};C.onComment=function(k){f();d();t.add(new CKEDITOR.htmlParser.comment(k))};C.parse(b);for(f();t!=z;){B(t,t.parent,1)}w(z);return z};CKEDITOR.htmlParser.fragment.prototype={type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,add:function(c,f){isNaN(f)&&(f=this.children.length);var k=f>0?this.children[f-1]:null;if(k){if(c._.isBlockLike&&k.type==CKEDITOR.NODE_TEXT){k.value=CKEDITOR.tools.rtrim(k.value);if(k.value.length===0){this.children.pop();this.add(c);return}}k.next=c}c.previous=k;c.parent=this;this.children.splice(f,0,c);if(!this._.hasInlineStarted){this._.hasInlineStarted=c.type==CKEDITOR.NODE_TEXT||c.type==CKEDITOR.NODE_ELEMENT&&!c._.isBlockLike}},filter:function(c,d){d=this.getFilterContext(d);c.onRoot(d,this);this.filterChildren(c,false,d)},filterChildren:function(c,f,k){if(this.childrenFilteredBy!=c.id){k=this.getFilterContext(k);if(f&&!this.parent){c.onRoot(k,this)}this.childrenFilteredBy=c.id;for(f=0;f<this.children.length;f++){this.children[f].filter(c,k)===false&&f--}}},writeHtml:function(c,d){d&&this.filter(d);this.writeChildrenHtml(c)},writeChildrenHtml:function(f,k,m){var l=this.getFilterContext();if(m&&!this.parent&&k){k.onRoot(l,this)}k&&this.filterChildren(k,false,l);k=0;m=this.children;for(l=m.length;k<l;k++){m[k].writeHtml(f)}},forEach:function(k,l,n){if(!n&&(!l||this.type==l)){var m=k(this)}if(m!==false){for(var n=this.children,o=0;o<n.length;o++){m=n[o];m.type==CKEDITOR.NODE_ELEMENT?m.forEach(k,l):(!l||m.type==l)&&k(m)}}},getFilterContext:function(b){return b||{}}}})();"use strict";(function(){function b(){this.rules=[]}function d(a,f,h,i){var j,k;for(j in f){(k=a[j])||(k=a[j]=new b);k.add(f[j],h,i)}}CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function(a){this.id=CKEDITOR.tools.getNextNumber();this.elementNameRules=new b;this.attributeNameRules=new b;this.elementsRules={};this.attributesRules={};this.textRules=new b;this.commentRules=new b;this.rootRules=new b;a&&this.addRules(a,10)},proto:{addRules:function(c,g){var e;if(typeof g=="number"){e=g}else{if(g&&"priority" in g){e=g.priority}}typeof e!="number"&&(e=10);typeof g!="object"&&(g={});c.elementNames&&this.elementNameRules.addMany(c.elementNames,e,g);c.attributeNames&&this.attributeNameRules.addMany(c.attributeNames,e,g);c.elements&&d(this.elementsRules,c.elements,e,g);c.attributes&&d(this.attributesRules,c.attributes,e,g);c.text&&this.textRules.add(c.text,e,g);c.comment&&this.commentRules.add(c.comment,e,g);c.root&&this.rootRules.add(c.root,e,g)},applyTo:function(c){c.filter(this)},onElementName:function(e,f){return this.elementNameRules.execOnName(e,f)},onAttributeName:function(e,f){return this.attributeNameRules.execOnName(e,f)},onText:function(e,f,g){return this.textRules.exec(e,f,g)},onComment:function(e,f,g){return this.commentRules.exec(e,f,g)},onRoot:function(e,f){return this.rootRules.exec(e,f)},onElement:function(f,h){for(var i=[this.elementsRules["^"],this.elementsRules[h.name],this.elementsRules.$],j,k=0;k<3;k++){if(j=i[k]){j=j.exec(f,h,this);if(j===false){return null}if(j&&j!=h){return this.onNode(f,j)}if(h.parent&&!h.name){break}}}return h},onNode:function(e,f){var g=f.type;return g==CKEDITOR.NODE_ELEMENT?this.onElement(e,f):g==CKEDITOR.NODE_TEXT?new CKEDITOR.htmlParser.text(this.onText(e,f.value)):g==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(e,f.value)):null},onAttribute:function(f,g,h,i){return(h=this.attributesRules[h])?h.exec(f,i,g,this):i}}});CKEDITOR.htmlParser.filterRulesGroup=b;b.prototype={add:function(e,f,g){this.rules.splice(this.findIndex(f),0,{value:e,priority:f,options:g})},addMany:function(f,h,i){for(var j=[this.findIndex(h),0],k=0,l=f.length;k<l;k++){j.push({value:f[k],priority:h,options:i})}this.rules.splice.apply(this.rules,j)},findIndex:function(e){for(var f=this.rules,g=f.length-1;g>=0&&e<f[g].priority;){g--}return g+1},exec:function(f,j){var k=j instanceof CKEDITOR.htmlParser.node||j instanceof CKEDITOR.htmlParser.fragment,l=Array.prototype.slice.call(arguments,1),o=this.rules,t=o.length,q,r,s,u;for(u=0;u<t;u++){if(k){q=j.type;r=j.name}s=o[u];if(!(f.nonEditable&&!s.options.applyToAll||f.nestedEditable&&s.options.excludeNestedEditable)){s=s.value.apply(null,l);if(s===false||k&&s&&(s.name!=r||s.type!=q)){return s}s!=void 0&&(l[0]=j=s)}}return j},execOnName:function(f,h){for(var i=0,j=this.rules,k=j.length,l;h&&i<k;i++){l=j[i];!(f.nonEditable&&!l.options.applyToAll||f.nestedEditable&&l.options.excludeNestedEditable)&&(h=h.replace(l.value[0],l.value[1]))}return h}}})();(function(){function y(b,d){function f(c){return c||CKEDITOR.env.needsNbspFiller?new CKEDITOR.htmlParser.text(""):new CKEDITOR.htmlParser.element("br",{"data-cke-bogus":1})}function g(c,h){return function(a){if(a.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var n=[],p=C(a),q,l;if(p){for(i(p,1)&&n.push(p);p;){if(M(p)&&(q=P(p))&&i(q)){if((l=P(q))&&!M(l)){n.push(q)}else{f(k).insertAfter(q);q.remove()}}p=p.previous}}for(p=0;p<n.length;p++){n[p].remove()}if(n=(typeof h=="function"?h(a):h)!==false){if(!k&&!CKEDITOR.env.needsBrFiller&&a.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT){n=false}else{if(!k&&!CKEDITOR.env.needsBrFiller&&(document.documentMode>7||a.name in CKEDITOR.dtd.tr||a.name in CKEDITOR.dtd.$listItem)){n=false}else{n=C(a);n=!n||a.name=="form"&&n.name=="input"}}}n&&a.add(f(c))}}}function i(c,h){if((!k||CKEDITOR.env.needsBrFiller)&&c.type==CKEDITOR.NODE_ELEMENT&&c.name=="br"&&!c.attributes["data-cke-eol"]){return true}var l;if(c.type==CKEDITOR.NODE_TEXT&&(l=c.value.match(al))){if(l.index){(new CKEDITOR.htmlParser.text(c.value.substring(0,l.index))).insertBefore(c);c.value=l[0]}if(!CKEDITOR.env.needsBrFiller&&k&&(!h||c.parent.name in e)){return true}if(!k){if((l=c.previous)&&l.name=="br"||!l||M(l)){return true}}}return false}var m={elements:{}},k=d=="html",e=CKEDITOR.tools.extend({},W),j;for(j in e){"#" in Y[j]||delete e[j]}for(j in e){m.elements[j]=g(k,b.config.fillEmptyBlocks)}m.root=g(k,false);m.elements.br=function(c){return function(a){if(a.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var h=a.attributes;if("data-cke-bogus" in h||"data-cke-eol" in h){delete h["data-cke-bogus"]}else{for(h=a.next;h&&H(h);){h=h.next}var l=P(a);!h&&M(a.parent)?R(a.parent,f(c)):M(h)&&(l&&!M(l))&&f(c).insertBefore(h)}}}}(k);return m}function G(c,d){return c!=CKEDITOR.ENTER_BR&&d!==false?c==CKEDITOR.ENTER_DIV?"div":"p":false}function C(b){for(b=b.children[b.children.length-1];b&&H(b);){b=b.previous}return b}function P(b){for(b=b.previous;b&&H(b);){b=b.previous}return b}function H(b){return b.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(b.value)||b.type==CKEDITOR.NODE_ELEMENT&&b.attributes["data-cke-bookmark"]}function M(b){return b&&(b.type==CKEDITOR.NODE_ELEMENT&&b.name in W||b.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)}function R(c,e){var f=c.children[c.children.length-1];c.children.push(e);e.parent=c;if(f){f.next=e;e.previous=f}}function ac(b){b=b.attributes;b.contenteditable!="false"&&(b["data-cke-editable"]=b.contenteditable?"true":1);b.contenteditable="false"}function T(b){b=b.attributes;switch(b["data-cke-editable"]){case"true":b.contenteditable="true";break;case"1":delete b.contenteditable}}function U(b){return b.replace(aj,function(c,e,f){return"<"+e+f.replace(Q,function(d,g){return K.test(g)&&f.indexOf("data-cke-saved-"+g)==-1?" data-cke-saved-"+d+" data-cke-"+CKEDITOR.rnd+"-"+d:d})+">"})}function ab(c,d){return c.replace(d,function(e,f,g){e.indexOf("<textarea")===0&&(e=f+ao(g).replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</textarea>");return"<cke:encoded>"+encodeURIComponent(e)+"</cke:encoded>"})}function af(b){return b.replace(an,function(c,d){return decodeURIComponent(d)})}function ai(b){return b.replace(/<\!--(?!{cke_protected})[\s\S]+?--\>/g,function(c){return"<!--"+B+"{C}"+encodeURIComponent(c).replace(/--/g,"%2D%2D")+"-->"})}function ao(b){return b.replace(/<\!--\{cke_protected\}\{C\}([\s\S]+?)--\>/g,function(c,d){return decodeURIComponent(d)})}function ag(c,e){var f=e._.dataStore;return c.replace(/<\!--\{cke_protected\}([\s\S]+?)--\>/g,function(d,g){return decodeURIComponent(g)}).replace(/\{cke_protected_(\d+)\}/g,function(d,g){return f&&f[g]||""})}function ad(g,h){for(var k=[],i=h.config.protectedSource,l=h._.dataStore||(h._.dataStore={id:1}),m=/<\!--\{cke_temp(comment)?\}(\d*?)--\>/g,i=[/<script[\s\S]*?<\/script>/gi,/<noscript[\s\S]*?<\/noscript>/gi,/<meta[\s\S]*?\/?>/gi].concat(i),g=g.replace(/<\!--[\s\S]*?--\>/g,function(b){return"<!--{cke_tempcomment}"+(k.push(b)-1)+"-->"}),n=0;n<i.length;n++){g=g.replace(i[n],function(b){b=b.replace(m,function(d,e,f){return k[f]});return/cke_temp(comment)?/.test(b)?b:"<!--{cke_temp}"+(k.push(b)-1)+"-->"})}g=g.replace(m,function(d,e,f){return"<!--"+B+(e?"{C}":"")+encodeURIComponent(k[f]).replace(/--/g,"%2D%2D")+"-->"});g=g.replace(/<\w+(?:\s+(?:(?:[^\s=>]+\s*=\s*(?:[^'"\s>]+|'[^']*'|"[^"]*"))|[^\s=>]+))+\s*>/g,function(b){return b.replace(/<\!--\{cke_protected\}([^>]*)--\>/g,function(c,d){l[l.id]=decodeURIComponent(d);return"{cke_protected_"+l.id+++"}"})});return g=g.replace(/<(title|iframe|textarea)([^>]*)>([\s\S]*?)<\/\1>/g,function(b,j,f,o){return"<"+j+f+">"+ag(ao(o),h)+"</"+j+">"})}CKEDITOR.htmlDataProcessor=function(a){var c,g,h=this;this.editor=a;this.dataFilter=c=new CKEDITOR.htmlParser.filter;this.htmlFilter=g=new CKEDITOR.htmlParser.filter;this.writer=new CKEDITOR.htmlParser.basicWriter;c.addRules(am);c.addRules(V,{applyToAll:true});c.addRules(y(a,"data"),{applyToAll:true});g.addRules(ah);g.addRules(ae,{applyToAll:true});g.addRules(y(a,"html"),{applyToAll:true});a.on("toHtml",function(b){var b=b.data,i=b.dataValue,i=ad(i,a),i=ab(i,X),i=U(i),i=ab(i,aa),i=i.replace(ap,"$1cke:$2"),i=i.replace(N,"<cke:$1$2></cke:$1>"),i=i.replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2"),i=i.replace(/([^a-z0-9<\-])(on\w{3,})(?!>)/gi,"$1data-cke-"+CKEDITOR.rnd+"-$2"),j=b.context||a.editable().getName(),k;if(CKEDITOR.env.ie&&CKEDITOR.env.version<9&&j=="pre"){j="div";i="<pre>"+i+"</pre>";k=1}j=a.document.createElement(j);j.setHtml("a"+i);i=j.getHtml().substr(1);i=i.replace(RegExp("data-cke-"+CKEDITOR.rnd+"-","ig"),"");k&&(i=i.replace(/^<pre>|<\/pre>$/gi,""));i=i.replace(ak,"$1$2");i=af(i);i=ao(i);b.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(i,b.context,b.fixForBody===false?false:G(b.enterMode,a.config.autoParagraph))},null,null,5);a.on("toHtml",function(b){b.data.filter.applyTo(b.data.dataValue,true,b.data.dontFilter,b.data.enterMode)&&a.fire("dataFiltered")},null,null,6);a.on("toHtml",function(b){b.data.dataValue.filterChildren(h.dataFilter,true)},null,null,10);a.on("toHtml",function(e){var e=e.data,f=e.dataValue,i=new CKEDITOR.htmlParser.basicWriter;f.writeChildrenHtml(i);f=i.getHtml(true);e.dataValue=ai(f)},null,null,15);a.on("toDataFormat",function(b){var e=b.data.dataValue;b.data.enterMode!=CKEDITOR.ENTER_BR&&(e=e.replace(/^<br *\/?>/i,""));b.data.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(e,b.data.context,G(b.data.enterMode,a.config.autoParagraph))},null,null,5);a.on("toDataFormat",function(b){b.data.dataValue.filterChildren(h.htmlFilter,true)},null,null,10);a.on("toDataFormat",function(b){b.data.filter.applyTo(b.data.dataValue,false,true)},null,null,11);a.on("toDataFormat",function(b){var f=b.data.dataValue,e=h.writer;e.reset();f.writeChildrenHtml(e);f=e.getHtml(true);f=ao(f);f=ag(f,a);b.data.dataValue=f},null,null,15)};CKEDITOR.htmlDataProcessor.prototype={toHtml:function(g,h,l,i){var m=this.editor,n,o,p;if(h&&typeof h=="object"){n=h.context;l=h.fixForBody;i=h.dontFilter;o=h.filter;p=h.enterMode}else{n=h}!n&&n!==null&&(n=m.editable().getName());return m.fire("toHtml",{dataValue:g,context:n,fixForBody:l,dontFilter:i,filter:o||m.filter,enterMode:p||m.enterMode}).dataValue},toDataFormat:function(f,g){var i,h,j;if(g){i=g.context;h=g.filter;j=g.enterMode}!i&&i!==null&&(i=this.editor.editable().getName());return this.editor.fire("toDataFormat",{dataValue:f,filter:h||this.editor.filter,context:i,enterMode:j||this.editor.enterMode}).dataValue}};var al=/(?:&nbsp;|\xa0)$/,B="{cke_protected}",Y=CKEDITOR.dtd,Z=["caption","colgroup","col","thead","tfoot","tbody"],W=CKEDITOR.tools.extend({},Y.$blockLimit,Y.$block),am={elements:{input:ac,textarea:ac}},V={attributeNames:[[/^on/,"data-cke-pa-on"],[/^data-cke-expando$/,""]]},ah={elements:{embed:function(c){var e=c.parent;if(e&&e.name=="object"){var f=e.attributes.width,e=e.attributes.height;if(f){c.attributes.width=f}if(e){c.attributes.height=e}}},a:function(b){if(!b.children.length&&!b.attributes.name&&!b.attributes["data-cke-saved-name"]){return false}}}},ae={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(f){var g=f.attributes;if(g){if(g["data-cke-temp"]){return false}for(var i=["name","href","src"],h,j=0;j<i.length;j++){h="data-cke-saved-"+i[j];h in g&&delete g[i[j]]}}return f},table:function(b){b.children.slice(0).sort(function(e,f){var h,g;if(e.type==CKEDITOR.NODE_ELEMENT&&f.type==e.type){h=CKEDITOR.tools.indexOf(Z,e.name);g=CKEDITOR.tools.indexOf(Z,f.name)}if(!(h>-1&&g>-1&&h!=g)){h=e.parent?e.getIndex():-1;g=f.parent?f.getIndex():-1}return h>g?1:-1})},param:function(b){b.children=[];b.isEmpty=true;return b},span:function(b){b.attributes["class"]=="Apple-style-span"&&delete b.name},html:function(b){delete b.attributes.contenteditable;delete b.attributes["class"]},body:function(b){delete b.attributes.spellcheck;delete b.attributes.contenteditable},style:function(c){var d=c.children[0];if(d&&d.value){d.value=CKEDITOR.tools.trim(d.value)}if(!c.attributes.type){c.attributes.type="text/css"}},title:function(c){var d=c.children[0];!d&&R(c,d=new CKEDITOR.htmlParser.text);d.value=c.attributes["data-cke-title"]||""},input:T,textarea:T},attributes:{"class":function(b){return CKEDITOR.tools.ltrim(b.replace(/(?:^|\s+)cke_[^\s]*/g,""))||false}}};if(CKEDITOR.env.ie){ae.attributes.style=function(b){return b.replace(/(^|;)([^\:]+)/g,function(c){return c.toLowerCase()})}}var aj=/<(a|area|img|input|source)\b([^>]*)>/gi,Q=/([\w-]+)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,K=/^(href|src|name)$/i,aa=/(?:<style(?=[ >])[^>]*>[\s\S]*?<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,X=/(<textarea(?=[ >])[^>]*>)([\s\S]*?)(?:<\/textarea>)/gi,an=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,ap=/(<\/?)((?:object|embed|param|html|body|head|title)[^>]*>)/gi,ak=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,N=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi})();"use strict";CKEDITOR.htmlParser.element=function(d,g){this.name=d;this.attributes=g||{};this.children=[];var e=d||"",h=e.match(/^cke:(.*)/);h&&(e=h[1]);e=!(!CKEDITOR.dtd.$nonBodyContent[e]&&!CKEDITOR.dtd.$block[e]&&!CKEDITOR.dtd.$listItem[e]&&!CKEDITOR.dtd.$tableContent[e]&&!(CKEDITOR.dtd.$nonEditable[e]||e=="br"));this.isEmpty=!!CKEDITOR.dtd.$empty[d];this.isUnknown=!CKEDITOR.dtd[d];this._={isBlockLike:e,hasInlineStarted:this.isEmpty||!e}};CKEDITOR.htmlParser.cssStyle=function(b){var d={};((b instanceof CKEDITOR.htmlParser.element?b.attributes.style:b)||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(c,g,e){g=="font-family"&&(e=e.replace(/["']/g,""));d[g.toLowerCase()]=e});return{rules:d,populate:function(e){var f=this.toString();if(f){e instanceof CKEDITOR.dom.element?e.setAttribute("style",f):e instanceof CKEDITOR.htmlParser.element?e.attributes.style=f:e.style=f}},toString:function(){var c=[],e;for(e in d){d[e]&&c.push(e,":",d[e],";")}return c.join("")}}};(function(){function d(b){return function(a){return a.type==CKEDITOR.NODE_ELEMENT&&(typeof b=="string"?a.name==b:a.name in b)}}var f=function(c,g){c=c[0];g=g[0];return c<g?-1:c>g?1:0},e=CKEDITOR.htmlParser.fragment.prototype;CKEDITOR.htmlParser.element.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_ELEMENT,add:e.add,clone:function(){return new CKEDITOR.htmlParser.element(this.name,this.attributes)},filter:function(j,k){var l=this,m,q,k=l.getFilterContext(k);if(k.off){return true}if(!l.parent){j.onRoot(k,l)}for(;;){m=l.name;if(!(q=j.onElementName(k,m))){this.remove();return false}l.name=q;if(!(l=j.onElement(k,l))){this.remove();return false}if(l!==this){this.replaceWith(l);return false}if(l.name==m){break}if(l.type!=CKEDITOR.NODE_ELEMENT){this.replaceWith(l);return false}if(!l.name){this.replaceWithChildren();return false}}m=l.attributes;var o,p;for(o in m){p=o;for(q=m[o];;){if(p=j.onAttributeName(k,o)){if(p!=o){delete m[o];o=p}else{break}}else{delete m[o];break}}p&&((q=j.onAttribute(k,l,p,q))===false?delete m[p]:m[p]=q)}l.isEmpty||this.filterChildren(j,false,k);return true},filterChildren:e.filterChildren,writeHtml:function(c,j){j&&this.filter(j);var k=this.name,l=[],p=this.attributes,m,o;c.openTag(k,p);for(m in p){l.push([m,p[m]])}c.sortAttributes&&l.sort(f);m=0;for(o=l.length;m<o;m++){p=l[m];c.attribute(p[0],p[1])}c.openTagClose(k,this.isEmpty);this.writeChildrenHtml(c);this.isEmpty||c.closeTag(k)},writeChildrenHtml:e.writeChildrenHtml,replaceWithChildren:function(){for(var c=this.children,g=c.length;g;){c[--g].insertAfter(this)}this.remove()},forEach:e.forEach,getFirst:function(a){if(!a){return this.children.length?this.children[0]:null}typeof a!="function"&&(a=d(a));for(var h=0,g=this.children.length;h<g;++h){if(a(this.children[h])){return this.children[h]}}return null},getHtml:function(){var b=new CKEDITOR.htmlParser.basicWriter;this.writeChildrenHtml(b);return b.getHtml()},setHtml:function(g){for(var g=this.children=CKEDITOR.htmlParser.fragment.fromHtml(g).children,h=0,i=g.length;h<i;++h){g[h].parent=this}},getOuterHtml:function(){var b=new CKEDITOR.htmlParser.basicWriter;this.writeHtml(b);return b.getHtml()},split:function(h){for(var i=this.children.splice(h,this.children.length-h),j=this.clone(),k=0;k<i.length;++k){i[k].parent=j}j.children=i;if(i[0]){i[0].previous=null}if(h>0){this.children[h-1].next=null}this.parent.add(j,this.getIndex()+1);return j},addClass:function(c){if(!this.hasClass(c)){var g=this.attributes["class"]||"";this.attributes["class"]=g+(g?" ":"")+c}},removeClass:function(c){var g=this.attributes["class"];if(g){(g=CKEDITOR.tools.trim(g.replace(RegExp("(?:\\s+|^)"+c+"(?:\\s+|$)")," ")))?this.attributes["class"]=g:delete this.attributes["class"]}},hasClass:function(c){var g=this.attributes["class"];return !g?false:RegExp("(?:^|\\s)"+c+"(?=\\s|$)").test(g)},getFilterContext:function(g){var h=[];g||(g={off:false,nonEditable:false,nestedEditable:false});!g.off&&this.attributes["data-cke-processor"]=="off"&&h.push("off",true);!g.nonEditable&&this.attributes.contenteditable=="false"?h.push("nonEditable",true):g.nonEditable&&(!g.nestedEditable&&this.attributes.contenteditable=="true")&&h.push("nestedEditable",true);if(h.length){for(var g=CKEDITOR.tools.copy(g),i=0;i<h.length;i=i+2){g[h[i]]=h[i+1]}}return g}},true)})();(function(){var e={},h=/{([^}]+)}/g,g=/([\\'])/g,j=/\n/g,i=/\r/g;CKEDITOR.template=function(a){if(e[a]){this.output=e[a]}else{var b=a.replace(g,"\\$1").replace(j,"\\n").replace(i,"\\r").replace(h,function(c,d){return"',data['"+d+"']==undefined?'{"+d+"}':data['"+d+"'],'"});this.output=e[a]=Function("data","buffer","return buffer?buffer.push('"+b+"'):['"+b+"'].join('');")}}})();delete CKEDITOR.loadFullCore;CKEDITOR.instances={};CKEDITOR.document=new CKEDITOR.dom.document(document);CKEDITOR.add=function(b){CKEDITOR.instances[b.name]=b;b.on("focus",function(){if(CKEDITOR.currentInstance!=b){CKEDITOR.currentInstance=b;CKEDITOR.fire("currentInstance")}});b.on("blur",function(){if(CKEDITOR.currentInstance==b){CKEDITOR.currentInstance=null;CKEDITOR.fire("currentInstance")}});CKEDITOR.fire("instance",null,b)};CKEDITOR.remove=function(b){delete CKEDITOR.instances[b.name]};(function(){var b={};CKEDITOR.addTemplate=function(d,a){var e=b[d];if(e){return e}e={name:d,source:a};CKEDITOR.fire("template",e);return b[d]=new CKEDITOR.template(e.source)};CKEDITOR.getTemplate=function(a){return b[a]}})();(function(){var b=[];CKEDITOR.addCss=function(a){b.push(a)};CKEDITOR.getCss=function(){return b.join("\n")}})();CKEDITOR.on("instanceDestroyed",function(){CKEDITOR.tools.isEmpty(this.instances)&&CKEDITOR.fire("reset")});CKEDITOR.TRISTATE_ON=1;CKEDITOR.TRISTATE_OFF=2;CKEDITOR.TRISTATE_DISABLED=0;(function(){CKEDITOR.inline=function(d,g){if(!CKEDITOR.env.isCompatible){return null}d=CKEDITOR.dom.element.get(d);if(d.getEditor()){throw'The editor instance "'+d.getEditor().name+'" is already attached to the provided element.'}var e=new CKEDITOR.editor(g,d,CKEDITOR.ELEMENT_MODE_INLINE),h=d.is("textarea")?d:null;if(h){e.setData(h.getValue(),null,true);d=CKEDITOR.dom.element.createFromHtml('<div contenteditable="'+!!e.readOnly+'" class="cke_textarea_inline">'+h.getValue()+"</div>",CKEDITOR.document);d.insertAfter(h);h.hide();h.$.form&&e._attachToForm()}else{e.setData(d.getHtml(),null,true)}e.on("loaded",function(){e.fire("uiReady");e.editable(d);e.container=d;e.setData(e.getData(1));e.resetDirty();e.fire("contentDom");e.mode="wysiwyg";e.fire("mode");e.status="ready";e.fireOnce("instanceReady");CKEDITOR.fire("instanceReady",null,e)},null,null,10000);e.on("destroy",function(){if(h){e.container.clearCustomData();e.container.remove();h.show()}e.element.clearCustomData();delete e.element});return e};CKEDITOR.inlineAll=function(){var g,i,h;for(h in CKEDITOR.dtd.$editable){for(var l=CKEDITOR.document.getElementsByTag(h),j=0,k=l.count();j<k;j++){g=l.getItem(j);if(g.getAttribute("contenteditable")=="true"){i={element:g,config:{}};CKEDITOR.fire("inline",i)!==false&&CKEDITOR.inline(g,i.config)}}}};CKEDITOR.domReady(function(){!CKEDITOR.disableAutoInline&&CKEDITOR.inlineAll()})})();CKEDITOR.replaceClass="ckeditor";(function(){function d(b,c,i,k){if(!CKEDITOR.env.isCompatible){return null}b=CKEDITOR.dom.element.get(b);if(b.getEditor()){throw'The editor instance "'+b.getEditor().name+'" is already attached to the provided element.'}var j=new CKEDITOR.editor(c,b,k);if(k==CKEDITOR.ELEMENT_MODE_REPLACE){b.setStyle("visibility","hidden");j._.required=b.hasAttribute("required");b.removeAttribute("required")}i&&j.setData(i,null,true);j.on("loaded",function(){e(j);k==CKEDITOR.ELEMENT_MODE_REPLACE&&(j.config.autoUpdateElement&&b.$.form)&&j._attachToForm();j.setMode(j.config.startupMode,function(){j.resetDirty();j.status="ready";j.fireOnce("instanceReady");CKEDITOR.fire("instanceReady",null,j)})});j.on("destroy",g);return j}function g(){var c=this.container,f=this.element;if(c){c.clearCustomData();c.remove()}if(f){f.clearCustomData();if(this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE){f.show();this._.required&&f.setAttribute("required","required")}delete this.element}}function e(f){var j=f.name,k=f.element,o=f.elementMode,l=f.fire("uiSpace",{space:"top",html:""}).html,m=f.fire("uiSpace",{space:"bottom",html:""}).html;h||(h=CKEDITOR.addTemplate("maincontainer",'<{outerEl} id="cke_{name}" class="{id} cke cke_reset cke_chrome cke_editor_{name} cke_{langDir} '+CKEDITOR.env.cssClass+'"  dir="{langDir}" lang="{langCode}" role="application" aria-labelledby="cke_{name}_arialbl"><span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span><{outerEl} class="cke_inner cke_reset" role="presentation">{topHtml}<{outerEl} id="{contentId}" class="cke_contents cke_reset" role="presentation"></{outerEl}>{bottomHtml}</{outerEl}></{outerEl}>'));j=CKEDITOR.dom.element.createFromHtml(h.output({id:f.id,name:j,langDir:f.lang.dir,langCode:f.langCode,voiceLabel:[f.lang.editor,f.name].join(", "),topHtml:l?'<span id="'+f.ui.spaceId("top")+'" class="cke_top cke_reset_all" role="presentation" style="height:auto">'+l+"</span>":"",contentId:f.ui.spaceId("contents"),bottomHtml:m?'<span id="'+f.ui.spaceId("bottom")+'" class="cke_bottom cke_reset_all" role="presentation">'+m+"</span>":"",outerEl:CKEDITOR.env.ie?"span":"div"}));if(o==CKEDITOR.ELEMENT_MODE_REPLACE){k.hide();j.insertAfter(k)}else{k.append(j)}f.container=j;l&&f.ui.space("top").unselectable();m&&f.ui.space("bottom").unselectable();k=f.config.width;o=f.config.height;k&&j.setStyle("width",CKEDITOR.tools.cssLength(k));o&&f.ui.space("contents").setStyle("height",CKEDITOR.tools.cssLength(o));j.disableContextMenu();CKEDITOR.env.webkit&&j.on("focus",function(){f.focus()});f.fireOnce("uiReady")}CKEDITOR.replace=function(a,f){return d(a,f,null,CKEDITOR.ELEMENT_MODE_REPLACE)};CKEDITOR.appendTo=function(a,i,j){return d(a,i,j,CKEDITOR.ELEMENT_MODE_APPENDTO)};CKEDITOR.replaceAll=function(){for(var i=document.getElementsByTagName("textarea"),j=0;j<i.length;j++){var k=null,l=i[j];if(l.name||l.id){if(typeof arguments[0]=="string"){if(!RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)").test(l.className)){continue}}else{if(typeof arguments[0]=="function"){k={};if(arguments[0](l,k)===false){continue}}}this.replace(l,k)}}};CKEDITOR.editor.prototype.addMode=function(c,f){(this._.modes||(this._.modes={}))[c]=f};CKEDITOR.editor.prototype.setMode=function(j,k){var l=this,n=this._.modes;if(!(j==l.mode||!n||!n[j])){l.fire("beforeSetMode",j);if(l.mode){var o=l.checkDirty(),n=l._.previousModeData,p,q=0;l.fire("beforeModeUnload");l.editable(0);l._.previousMode=l.mode;l._.previousModeData=p=l.getData(1);if(l.mode=="source"&&n==p){l.fire("lockSnapshot",{forceUpdate:true});q=1}l.ui.space("contents").setHtml("");l.mode=""}else{l._.previousModeData=l.getData(1)}this._.modes[j](function(){l.mode=j;o!==void 0&&!o&&l.resetDirty();q?l.fire("unlockSnapshot"):j=="wysiwyg"&&l.fire("saveSnapshot");setTimeout(function(){l.fire("mode");k&&k.call(l)},0)})}};CKEDITOR.editor.prototype.resize=function(j,k,l,n){var o=this.container,p=this.ui.space("contents"),q=CKEDITOR.env.webkit&&this.document&&this.document.getWindow().$.frameElement,n=n?o.getChild(1):o;n.setSize("width",j,true);q&&(q.style.width="1%");p.setStyle("height",Math.max(k-(l?0:(n.$.offsetHeight||0)-(p.$.clientHeight||0)),0)+"px");q&&(q.style.width="100%");this.fire("resize")};CKEDITOR.editor.prototype.getResizable=function(b){return b?this.ui.space("contents"):this.container};var h;CKEDITOR.domReady(function(){CKEDITOR.replaceClass&&CKEDITOR.replaceAll(CKEDITOR.replaceClass)})})();CKEDITOR.config.startupMode="wysiwyg";(function(){function j(c){var f=c.editor,h=c.data.path,i=h.blockLimit,p=c.data.selection,n=p.getRanges()[0],m;if(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller){if(p=l(p,h)){p.appendBogus();m=CKEDITOR.env.ie}}if(f.config.autoParagraph!==false&&f.activeEnterMode!=CKEDITOR.ENTER_BR&&f.editable().equals(i)&&!h.block&&n.collapsed&&!n.getCommonAncestor().isReadOnly()){h=n.clone();h.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS);i=new CKEDITOR.dom.walker(h);i.guard=function(b){return !t(b)||b.type==CKEDITOR.NODE_COMMENT||b.isReadOnly()};if(!i.checkForward()||h.checkStartOfBlock()&&h.checkEndOfBlock()){f=n.fixBlock(true,f.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p");if(!CKEDITOR.env.needsBrFiller){(f=f.getFirst(t))&&(f.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(f.getText()).match(/^(?:&nbsp;|\xa0)$/))&&f.remove()}m=1;c.cancel()}}m&&n.select()}function l(e,f){if(e.isFake){return 0}var g=f.block||f.blockLimit,h=g&&g.getLast(t);if(g&&g.isBlockBoundary()&&(!h||!(h.type==CKEDITOR.NODE_ELEMENT&&h.isBlockBoundary()))&&!g.is("pre")&&!g.getBogus()){return g}}function k(c){var d=c.data.getTarget();if(d.is("input")){d=d.getAttribute("type");(d=="submit"||d=="reset")&&c.data.preventDefault()}}function t(b){return A(b)&&C(b)}function o(c,d){return function(a){var b=CKEDITOR.dom.element.get(a.data.$.toElement||a.data.$.fromElement||a.data.$.relatedTarget);(!b||!d.equals(b)&&!d.contains(b))&&c.call(this,a)}}function r(f){var g,h=f.getRanges()[0],i=f.root,m={table:1,ul:1,ol:1,dl:1};if(h.startPath().contains(m)){var f=function(b){return function(a,e){e&&(a.type==CKEDITOR.NODE_ELEMENT&&a.is(m))&&(g=a);if(!e&&t(a)&&(!b||!w(a))){return false}}},n=h.clone();n.collapse(1);n.setStartAt(i,CKEDITOR.POSITION_AFTER_START);i=new CKEDITOR.dom.walker(n);i.guard=f();i.checkBackward();if(g){n=h.clone();n.collapse();n.setEndAt(g,CKEDITOR.POSITION_AFTER_END);i=new CKEDITOR.dom.walker(n);i.guard=f(true);g=false;i.checkForward();return g}}return null}function u(b){b.editor.focus();b.editor.fire("saveSnapshot")}function z(c){var d=c.editor;d.getSelection().scrollIntoView();setTimeout(function(){d.fire("saveSnapshot")},0)}function v(e,f,g){for(var h=e.getCommonAncestor(f),f=e=g?f:e;(e=e.getParent())&&!h.equals(e)&&e.getChildCount()==1;){f=e}f.remove()}CKEDITOR.editable=CKEDITOR.tools.createClass({base:CKEDITOR.dom.element,$:function(c,d){this.base(d.$||d);this.editor=c;this.status="unloaded";this.hasFocus=false;this.setup()},proto:{focus:function(){var c;if(CKEDITOR.env.webkit&&!this.hasFocus){c=this.editor._.previousActive||this.getDocument().getActive();if(this.contains(c)){c.focus();return}}try{this.$[CKEDITOR.env.ie&&this.getDocument().equals(CKEDITOR.document)?"setActive":"focus"]()}catch(d){if(!CKEDITOR.env.ie){throw d}}if(CKEDITOR.env.safari&&!this.isInline()){c=CKEDITOR.document.getActive();c.equals(this.getWindow().getFrame())||this.getWindow().focus()}},on:function(d,e){var f=Array.prototype.slice.call(arguments,0);if(CKEDITOR.env.ie&&/^focus|blur$/.exec(d)){d=d=="focus"?"focusin":"focusout";e=o(e,this);f[0]=d;f[1]=e}return CKEDITOR.dom.element.prototype.on.apply(this,f)},attachListener:function(h,i,m,n,p,q){!this._.listeners&&(this._.listeners=[]);var s=Array.prototype.slice.call(arguments,1),s=h.on.apply(h,s);this._.listeners.push(s);return s},clearListeners:function(){var c=this._.listeners;try{for(;c.length;){c.pop().removeListener()}}catch(d){}},restoreAttrs:function(){var d=this._.attrChanges,e,f;for(f in d){if(d.hasOwnProperty(f)){e=d[f];e!==null?this.setAttribute(f,e):this.removeAttribute(f)}}},attachClass:function(c){var d=this.getCustomData("classes");if(!this.hasClass(c)){!d&&(d=[]);d.push(c);this.setCustomData("classes",d);this.addClass(c)}},changeAttr:function(d,e){var f=this.getAttribute(d);if(e!==f){!this._.attrChanges&&(this._.attrChanges={});d in this._.attrChanges||(this._.attrChanges[d]=f);this.setAttribute(d,e)}},insertHtml:function(c,d){u(this);D(this,d||"html",c)},insertText:function(g){u(this);var h=this.editor,i=h.getSelection().getStartElement().hasAscendant("pre",true)?CKEDITOR.ENTER_BR:h.activeEnterMode,h=i==CKEDITOR.ENTER_BR,m=CKEDITOR.tools,g=m.htmlEncode(g.replace(/\r\n/g,"\n")),g=g.replace(/\t/g,"&nbsp;&nbsp; &nbsp;"),i=i==CKEDITOR.ENTER_P?"p":"div";if(!h){var n=/\n{2}/g;if(n.test(g)){var p="<"+i+">",q="</"+i+">",g=p+g.replace(n,function(){return q+p})+q}}g=g.replace(/\n/g,"<br>");h||(g=g.replace(RegExp("<br>(?=</"+i+">)"),function(b){return m.repeat(b,2)}));g=g.replace(/^ | $/g,"&nbsp;");g=g.replace(/(>|\s) /g,function(c,d){return d+"&nbsp;"}).replace(/ (?=<)/g,"&nbsp;");D(this,"text",g)},insertElement:function(c,d){d?this.insertElementIntoRange(c,d):this.insertElementIntoSelection(c)},insertElementIntoRange:function(i,m){var n=this.editor,p=n.config.enterMode,q=i.getName(),s=CKEDITOR.dtd.$block[q];if(m.checkReadOnly()){return false}m.deleteContents(1);m.startContainer.type==CKEDITOR.NODE_ELEMENT&&m.startContainer.is({tr:1,table:1,tbody:1,thead:1,tfoot:1})&&B(m);var x,E;if(s){for(;(x=m.getCommonAncestor(0,1))&&(E=CKEDITOR.dtd[x.getName()])&&(!E||!E[q]);){if(x.getName() in CKEDITOR.dtd.span){m.splitElement(x)}else{if(m.checkStartOfBlock()&&m.checkEndOfBlock()){m.setStartBefore(x);m.collapse(true);x.remove()}else{m.splitBlock(p==CKEDITOR.ENTER_DIV?"div":"p",n.editable())}}}}m.insertNode(i);return true},insertElementIntoSelection:function(f){u(this);var g=this.editor,h=g.activeEnterMode,g=g.getSelection(),i=g.getRanges()[0],m=f.getName(),m=CKEDITOR.dtd.$block[m];if(this.insertElementIntoRange(f,i)){i.moveToPosition(f,CKEDITOR.POSITION_AFTER_END);if(m){if((m=f.getNext(function(b){return t(b)&&!w(b)}))&&m.type==CKEDITOR.NODE_ELEMENT&&m.is(CKEDITOR.dtd.$block)){m.getDtd()["#"]?i.moveToElementEditStart(m):i.moveToElementEditEnd(f)}else{if(!m&&h!=CKEDITOR.ENTER_BR){m=i.fixBlock(true,h==CKEDITOR.ENTER_DIV?"div":"p");i.moveToElementEditStart(m)}}}}g.selectRanges([i]);z(this)},setData:function(c,d){d||(c=this.editor.dataProcessor.toHtml(c));this.setHtml(c);if(this.status=="unloaded"){this.status="ready"}this.editor.fire("dataReady")},getData:function(c){var d=this.getHtml();c||(d=this.editor.dataProcessor.toDataFormat(d));return d},setReadOnly:function(b){this.setAttribute("contenteditable",!b)},detach:function(){this.removeClass("cke_editable");this.status="detached";var b=this.editor;this._.detach();delete b.document;delete b.window},isInline:function(){return this.getDocument().equals(CKEDITOR.document)},setup:function(){var b=this.editor;this.attachListener(b,"beforeGetData",function(){var a=this.getData();this.is("textarea")||b.config.ignoreEmptyParagraph!==false&&(a=a.replace(y,function(c,d){return d}));b.setData(a,null,1)},this);this.attachListener(b,"getSnapshot",function(c){c.data=this.getData(1)},this);this.attachListener(b,"afterSetData",function(){this.setData(b.getData(1))},this);this.attachListener(b,"loadSnapshot",function(c){this.setData(c.data,1)},this);this.attachListener(b,"beforeFocus",function(){var a=b.getSelection();(a=a&&a.getNative())&&a.type=="Control"||this.focus()},this);this.attachListener(b,"insertHtml",function(c){this.insertHtml(c.data.dataValue,c.data.mode)},this);this.attachListener(b,"insertElement",function(c){this.insertElement(c.data)},this);this.attachListener(b,"insertText",function(c){this.insertText(c.data)},this);this.setReadOnly(b.readOnly);this.attachClass("cke_editable");this.attachClass(b.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"cke_editable_inline":b.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE||b.elementMode==CKEDITOR.ELEMENT_MODE_APPENDTO?"cke_editable_themed":"");this.attachClass("cke_contents_"+b.config.contentsLangDirection);b.keystrokeHandler.blockedKeystrokes[8]=+b.readOnly;b.keystrokeHandler.attach(this);this.on("blur",function(){this.hasFocus=false},null,null,-1);this.on("focus",function(){this.hasFocus=true},null,null,-1);b.focusManager.add(this);if(this.equals(CKEDITOR.document.getActive())){this.hasFocus=true;b.once("contentDom",function(){b.focusManager.focus()})}this.isInline()&&this.changeAttr("tabindex",b.tabIndex);if(!this.is("textarea")){b.document=this.getDocument();b.window=this.getWindow();var e=b.document;this.changeAttr("spellcheck",!b.config.disableNativeSpellChecker);var f=b.config.contentsLangDirection;this.getDirection(1)!=f&&this.changeAttr("dir",f);var g=CKEDITOR.getCss();if(g){f=e.getHead();if(!f.getCustomData("stylesheet")){g=e.appendStyleText(g);g=new CKEDITOR.dom.element(g.ownerNode||g.owningElement);f.setCustomData("stylesheet",g);g.data("cke-temp",1)}}f=e.getCustomData("stylesheet_ref")||0;e.setCustomData("stylesheet_ref",f+1);this.setCustomData("cke_includeReadonly",!b.config.disableReadonlyStyling);this.attachListener(this,"click",function(c){var c=c.data,d=(new CKEDITOR.dom.elementPath(c.getTarget(),this)).contains("a");d&&(c.$.button!=2&&d.isReadOnly())&&c.preventDefault()});var h={8:1,46:1};this.attachListener(b,"key",function(a){if(b.readOnly){return true}var n=a.data.domEvent.getKey(),p;if(n in h){var a=b.getSelection(),q,F=a.getRanges()[0],s=F.startPath(),x,E,G,n=n==8;if(CKEDITOR.env.ie&&CKEDITOR.env.version<11&&(q=a.getSelectedElement())||(q=r(a))){b.fire("saveSnapshot");F.moveToPosition(q,CKEDITOR.POSITION_BEFORE_START);q.remove();F.select();b.fire("saveSnapshot");p=1}else{if(F.collapsed){if((x=s.block)&&(G=x[n?"getPrevious":"getNext"](A))&&G.type==CKEDITOR.NODE_ELEMENT&&G.is("table")&&F[n?"checkStartOfBlock":"checkEndOfBlock"]()){b.fire("saveSnapshot");F[n?"checkEndOfBlock":"checkStartOfBlock"]()&&x.remove();F["moveToElementEdit"+(n?"End":"Start")](G);F.select();b.fire("saveSnapshot");p=1}else{if(s.blockLimit&&s.blockLimit.is("td")&&(E=s.blockLimit.getAscendant("table"))&&F.checkBoundaryOfElement(E,n?CKEDITOR.START:CKEDITOR.END)&&(G=E[n?"getPrevious":"getNext"](A))){b.fire("saveSnapshot");F["moveToElementEdit"+(n?"End":"Start")](G);F.checkStartOfBlock()&&F.checkEndOfBlock()?G.remove():F.select();b.fire("saveSnapshot");p=1}else{if((E=s.contains(["td","th","caption"]))&&F.checkBoundaryOfElement(E,n?CKEDITOR.START:CKEDITOR.END)){p=1}}}}}}return !p});b.blockless&&(CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller)&&this.attachListener(this,"keyup",function(a){if(a.data.getKeystroke() in h&&!this.getFirst(t)){this.appendBogus();a=b.createRange();a.moveToPosition(this,CKEDITOR.POSITION_AFTER_START);a.select()}});this.attachListener(this,"dblclick",function(a){if(b.readOnly){return false}a={element:a.data.getTarget()};b.fire("doubleclick",a)});CKEDITOR.env.ie&&this.attachListener(this,"click",k);CKEDITOR.env.ie||this.attachListener(this,"mousedown",function(a){var d=a.data.getTarget();if(d.is("img","hr","input","textarea","select")&&!d.isReadOnly()){b.getSelection().selectElement(d);d.is("input","textarea","select")&&a.data.preventDefault()}});CKEDITOR.env.gecko&&this.attachListener(this,"mouseup",function(a){if(a.data.$.button==2){a=a.data.getTarget();if(!a.getOuterHtml().replace(y,"")){var d=b.createRange();d.moveToElementEditStart(a);d.select(true)}}});if(CKEDITOR.env.webkit){this.attachListener(this,"click",function(c){c.data.getTarget().is("input","select")&&c.data.preventDefault()});this.attachListener(this,"mouseup",function(c){c.data.getTarget().is("input","textarea")&&c.data.preventDefault()})}CKEDITOR.env.webkit&&this.attachListener(b,"key",function(a){a=a.data.domEvent.getKey();if(a in h){var i=a==8,m=b.getSelection().getRanges()[0],a=m.startPath();if(m.collapsed){var n;b:{var p=a.block;if(p){if(m[i?"checkStartOfBlock":"checkEndOfBlock"]()){if(!m.moveToClosestEditablePosition(p,!i)||!m.collapsed){n=false}else{if(m.startContainer.type==CKEDITOR.NODE_ELEMENT){var s=m.startContainer.getChild(m.startOffset-(i?1:0));if(s&&s.type==CKEDITOR.NODE_ELEMENT&&s.is("hr")){b.fire("saveSnapshot");s.remove();n=true;break b}}if((m=m.startPath().block)&&(!m||!m.contains(p))){b.fire("saveSnapshot");var q;(q=(i?m:p).getBogus())&&q.remove();n=b.getSelection();q=n.createBookmarks();(i?p:m).moveChildren(i?m:p,false);a.lastElement.mergeSiblings();v(p,m,!i);n.selectBookmarks(q);n=true}}}else{n=false}}else{n=false}}if(!n){return}}else{i=m;n=a.block;q=i.endPath().block;if(!n||!q||n.equals(q)){a=false}else{b.fire("saveSnapshot");(p=n.getBogus())&&p.remove();i.deleteContents();if(q.getParent()){q.moveChildren(n,false);a.lastElement.mergeSiblings();v(n,q,true)}i=b.getSelection().getRanges()[0];i.collapse(1);i.select();a=true}if(!a){return}}b.getSelection().scrollIntoView();b.fire("saveSnapshot");return false}},this,null,100)}}},_:{detach:function(){this.editor.setData(this.editor.getData(),0,1);this.clearListeners();this.restoreAttrs();var d;if(d=this.removeCustomData("classes")){for(;d.length;){this.removeClass(d.pop())}}if(!this.is("textarea")){d=this.getDocument();var e=d.getHead();if(e.getCustomData("stylesheet")){var f=d.getCustomData("stylesheet_ref");if(--f){d.setCustomData("stylesheet_ref",f)}else{d.removeCustomData("stylesheet_ref");e.removeCustomData("stylesheet").remove()}}}this.editor.fire("contentDomUnload");delete this.editor}}});CKEDITOR.editor.prototype.editable=function(c){var d=this._.editable;if(d&&c){return 0}if(arguments.length){d=this._.editable=c?c instanceof CKEDITOR.editable?c:new CKEDITOR.editable(this,c):(d&&d.detach(),null)}return d};var w=CKEDITOR.dom.walker.bogus(),y=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,A=CKEDITOR.dom.walker.whitespaces(true),C=CKEDITOR.dom.walker.bookmark(false,true);CKEDITOR.on("instanceLoaded",function(a){var d=a.editor;d.on("insertElement",function(b){b=b.data;if(b.type==CKEDITOR.NODE_ELEMENT&&(b.is("input")||b.is("textarea"))){b.getAttribute("contentEditable")!="false"&&b.data("cke-editable",b.hasAttribute("contenteditable")?"true":"1");b.setAttribute("contentEditable",false)}});d.on("selectionChange",function(c){if(!d.readOnly){var e=d.getSelection();if(e&&!e.isLocked){e=d.checkDirty();d.fire("lockSnapshot");j(c);d.fire("unlockSnapshot");!e&&d.resetDirty()}}})});CKEDITOR.on("instanceCreated",function(c){var d=c.editor;d.on("mode",function(){var b=d.editable();if(b&&b.isInline()){var f=d.title;b.changeAttr("role","textbox");b.changeAttr("aria-label",f);f&&b.changeAttr("title",f);var g=d.fire("ariaEditorHelpLabel",{}).label;if(g){if(f=this.ui.space(this.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"top":"contents")){var h=CKEDITOR.tools.getNextId(),g=CKEDITOR.dom.element.createFromHtml('<span id="'+h+'" class="cke_voice_label">'+g+"</span>");f.append(g);b.changeAttr("aria-describedby",h)}}}})});CKEDITOR.addCss(".cke_editable{cursor:text}.cke_editable img,.cke_editable input,.cke_editable textarea{cursor:default}");var D=function(){function f(a){return a.type==CKEDITOR.NODE_ELEMENT}function m(a,b){var g,H,K,L,M=[],R=b.range.startContainer;g=b.range.startPath();for(var R=s[R.getName()],I=0,J=a.getChildren(),N=J.count(),O=-1,Q=-1,P=0,S=g.contains(s.$list);I<N;++I){g=J.getItem(I);if(f(g)){K=g.getName();if(S&&K in CKEDITOR.dtd.$list){M=M.concat(m(g,b))}else{L=!!R[K];if(K=="br"&&g.data("cke-eol")&&(!I||I==N-1)){P=(H=I?M[I-1].node:J.getItem(I+1))&&(!f(H)||!H.is("br"));H=H&&f(H)&&s.$block[H.getName()]}O==-1&&!L&&(O=I);L||(Q=I);M.push({isElement:1,isLineBreak:P,isBlock:g.isBlockBoundary(),hasBlockSibling:H,node:g,name:K,allowed:L});H=P=0}}else{M.push({isElement:0,node:g,allowed:1})}}if(O>-1){M[O].firstNotAllowed=1}if(Q>-1){M[Q].lastNotAllowed=1}return M}function n(a,c){var g=[],i=a.getChildren(),I=i.count(),J,K=0,L=s[c],H=!a.is(s.$inline)||a.is("br");for(H&&g.push(" ");K<I;K++){J=i.getItem(K);f(J)&&!J.is(L)?g=g.concat(n(J,c)):g.push(J)}H&&g.push(" ");return g}function p(a){return a&&f(a)&&(a.is(s.$removeEmpty)||a.is("a")&&!a.isBlockBoundary())}function q(a,e,h,i){var I=a.clone(),J,H;I.setEndAt(e,CKEDITOR.POSITION_BEFORE_END);if((J=(new CKEDITOR.dom.walker(I)).next())&&f(J)&&x[J.getName()]&&(H=J.getPrevious())&&f(H)&&!H.getParent().equals(a.startContainer)&&h.contains(H)&&i.contains(J)&&J.isIdentical(H)){J.moveChildren(H);J.remove();q(a,e,h,i)}}function F(a,g){function h(d,e){if(e.isBlock&&e.isElement&&!e.node.is("br")&&f(d)&&d.is("br")){d.remove();return 1}}var i=g.endContainer.getChild(g.endOffset),H=g.endContainer.getChild(g.endOffset-1);i&&h(i,a[a.length-1]);if(H&&h(H,a[0])){g.setEnd(g.endContainer,g.endOffset-1);g.collapse()}}var s=CKEDITOR.dtd,x={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,li:1,pre:1,dl:1,blockquote:1},G={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},E=CKEDITOR.tools.extend({},s.$inline);delete E.br;return function(i,R,ab){var Y=i.editor;i.getDocument();var ad=Y.getSelection().getRanges()[0],ah=false;if(R=="unfiltered_html"){R="html";ah=true}if(!ad.checkReadOnly()){var am=(new CKEDITOR.dom.elementPath(ad.startContainer,ad.root)).blockLimit||ad.root,R={type:R,dontFilter:ah,editable:i,editor:Y,range:ad,blockLimit:am,mergeCandidates:[],zombies:[]},Y=R.range,ah=R.mergeCandidates,ae,e,al,d;if(R.type=="text"&&Y.shrink(CKEDITOR.SHRINK_ELEMENT,true,false)){ae=CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",Y.document);Y.insertNode(ae);Y.setStartAfter(ae)}e=new CKEDITOR.dom.elementPath(Y.startContainer);R.endPath=al=new CKEDITOR.dom.elementPath(Y.endContainer);if(!Y.collapsed){var am=al.block||al.blockLimit,L=Y.getCommonAncestor();am&&(!am.equals(L)&&!am.contains(L)&&Y.checkEndOfBlock())&&R.zombies.push(am);Y.deleteContents()}for(;(d=f(Y.startContainer)&&Y.startContainer.getChild(Y.startOffset-1))&&f(d)&&d.isBlockBoundary()&&e.contains(d);){Y.moveToPosition(d,CKEDITOR.POSITION_BEFORE_END)}q(Y,R.blockLimit,e,al);if(ae){Y.setEndBefore(ae);Y.collapse();ae.remove()}ae=Y.startPath();if(am=ae.contains(p,false,1)){Y.splitElement(am);R.inlineStylesRoot=am;R.inlineStylesPeak=ae.lastElement}ae=Y.createBookmark();(am=ae.startNode.getPrevious(t))&&f(am)&&p(am)&&ah.push(am);(am=ae.startNode.getNext(t))&&f(am)&&p(am)&&ah.push(am);for(am=ae.startNode;(am=am.getParent())&&p(am);){ah.push(am)}Y.moveToBookmark(ae);if(ae=ab){ae=R.range;if(R.type=="text"&&R.inlineStylesRoot){d=R.inlineStylesPeak;Y=d.getDocument().createText("{cke-peak}");for(ah=R.inlineStylesRoot.getParent();!d.equals(ah);){Y=Y.appendTo(d.clone());d=d.getParent()}ab=Y.getOuterHtml().split("{cke-peak}").join(ab)}d=R.blockLimit.getName();if(/^\s+|\s+$/.test(ab)&&"span" in CKEDITOR.dtd[d]){var aj='<span data-cke-marker="1">&nbsp;</span>',ab=aj+ab+aj}ab=R.editor.dataProcessor.toHtml(ab,{context:null,fixForBody:false,dontFilter:R.dontFilter,filter:R.editor.activeFilter,enterMode:R.editor.activeEnterMode});d=ae.document.createElement("body");d.setHtml(ab);if(aj){d.getFirst().remove();d.getLast().remove()}if((aj=ae.startPath().block)&&!(aj.getChildCount()==1&&aj.getBogus())){f:{var g;if(d.getChildCount()==1&&f(g=d.getFirst())&&g.is(G)){aj=g.getElementsByTag("*");ae=0;for(ah=aj.count();ae<ah;ae++){Y=aj.getItem(ae);if(!Y.is(E)){break f}}g.moveChildren(g.getParent(1));g.remove()}}}R.dataWrapper=d;ae=ab}if(ae){g=R.range;var aj=g.document,c,ab=R.blockLimit;ae=0;var O;d=[];var J,ac,ah=Y=0,S,af;e=g.startContainer;var am=R.endPath.elements[0],ag;al=am.getPosition(e);L=!!am.getCommonAncestor(e)&&al!=CKEDITOR.POSITION_IDENTICAL&&!(al&CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED);e=m(R.dataWrapper,R);for(F(e,g);ae<e.length;ae++){al=e[ae];if(c=al.isLineBreak){c=g;S=ab;var V=void 0,ai=void 0;if(al.hasBlockSibling){c=1}else{V=c.startContainer.getAscendant(s.$block,1);if(!V||!V.is({div:1,p:1})){c=0}else{ai=V.getPosition(S);if(ai==CKEDITOR.POSITION_IDENTICAL||ai==CKEDITOR.POSITION_CONTAINS){c=0}else{S=c.splitElement(V);c.moveToPosition(S,CKEDITOR.POSITION_AFTER_START);c=1}}}}if(c){ah=ae>0}else{c=g.startPath();if(!al.isBlock&&R.editor.config.autoParagraph!==false&&(R.editor.activeEnterMode!=CKEDITOR.ENTER_BR&&R.editor.editable().equals(c.blockLimit)&&!c.block)&&(ac=R.editor.activeEnterMode!=CKEDITOR.ENTER_BR&&R.editor.config.autoParagraph!==false?R.editor.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p":false)){ac=aj.createElement(ac);ac.appendBogus();g.insertNode(ac);CKEDITOR.env.needsBrFiller&&(O=ac.getBogus())&&O.remove();g.moveToPosition(ac,CKEDITOR.POSITION_BEFORE_END)}if((c=g.startPath().block)&&!c.equals(J)){if(O=c.getBogus()){O.remove();d.push(c)}J=c}al.firstNotAllowed&&(Y=1);if(Y&&al.isElement){c=g.startContainer;for(S=null;c&&!s[c.getName()][al.name];){if(c.equals(ab)){c=null;break}S=c;c=c.getParent()}if(c){if(S){af=g.splitElement(S);R.zombies.push(af);R.zombies.push(S)}}else{S=ab.getName();ag=!ae;c=ae==e.length-1;S=n(al.node,S);for(var V=[],ai=S.length,ak=0,an=void 0,a=0,b=-1;ak<ai;ak++){an=S[ak];if(an==" "){if(!a&&(!ag||ak)){V.push(new CKEDITOR.dom.text(" "));b=V.length}a=1}else{V.push(an);a=0}}c&&b==V.length&&V.pop();ag=V}}if(ag){for(;c=ag.pop();){g.insertNode(c)}ag=0}else{g.insertNode(al.node)}if(al.lastNotAllowed&&ae<e.length-1){(af=L?am:af)&&g.setEndAt(af,CKEDITOR.POSITION_AFTER_START);Y=0}g.collapse()}}R.dontMoveCaret=ah;R.bogusNeededBlocks=d}O=R.range;var aa;af=R.bogusNeededBlocks;for(ag=O.createBookmark();J=R.zombies.pop();){if(J.getParent()){ac=O.clone();ac.moveToElementEditStart(J);ac.removeEmptyBlocksAtEnd()}}if(af){for(;J=af.pop();){CKEDITOR.env.needsBrFiller?J.appendBogus():J.append(O.document.createText(""))}}for(;J=R.mergeCandidates.pop();){J.mergeSiblings()}O.moveToBookmark(ag);if(!R.dontMoveCaret){for(J=f(O.startContainer)&&O.startContainer.getChild(O.startOffset-1);J&&f(J)&&!J.is(s.$empty);){if(J.isBlockBoundary()){O.moveToPosition(J,CKEDITOR.POSITION_BEFORE_END)}else{if(p(J)&&J.getHtml().match(/(\s|&nbsp;)$/g)){aa=null;break}aa=O.clone();aa.moveToPosition(J,CKEDITOR.POSITION_BEFORE_END)}J=J.getLast(t)}aa&&O.moveToRange(aa)}ad.select();z(i)}}}(),B=function(){function d(a){a=new CKEDITOR.dom.walker(a);a.guard=function(c,g){if(g){return false}if(c.type==CKEDITOR.NODE_ELEMENT){return c.is(CKEDITOR.dtd.$tableContent)}};a.evaluator=function(b){return b.type==CKEDITOR.NODE_ELEMENT};return a}function e(b,g,h){g=b.getDocument().createElement(g);b.append(g,h);return g}function f(c){var g=c.count(),h;for(g;g-->0;){h=c.getItem(g);if(!CKEDITOR.tools.trim(h.getHtml())){h.appendBogus();CKEDITOR.env.ie&&(CKEDITOR.env.version<9&&h.getChildCount())&&h.getFirst().remove()}}}return function(a){var b=a.startContainer,c=b.getAscendant("table",1),h=false;f(c.getElementsByTag("td"));f(c.getElementsByTag("th"));c=a.clone();c.setStart(b,0);c=d(c).lastBackward();if(!c){c=a.clone();c.setEndAt(b,CKEDITOR.POSITION_BEFORE_END);c=d(c).lastForward();h=true}c||(c=b);if(c.is("table")){a.setStartAt(c,CKEDITOR.POSITION_BEFORE_START);a.collapse(true);c.remove()}else{c.is({tbody:1,thead:1,tfoot:1})&&(c=e(c,"tr",h));c.is("tr")&&(c=e(c,c.getParent().is("thead")?"th":"td",h));(b=c.getBogus())&&b.remove();a.moveToPosition(c,h?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END)}}}()})();(function(){function j(){var c=this._.fakeSelection,d;if(c){d=this.getSelection(1);if(!d||!d.isHidden()){c.reset();c=0}}if(!c){c=d||this.getSelection(1);if(!c||c.getType()==CKEDITOR.SELECTION_NONE){return}}this.fire("selectionCheck",c);d=this.elementPath();if(!d.compare(this._.selectionPreviousPath)){if(CKEDITOR.env.webkit){this._.previousActive=this.document.getActive()}this._.selectionPreviousPath=d;this.fire("selectionChange",{selection:c,path:d})}}function r(){H=true;if(!F){l.call(this);F=CKEDITOR.tools.setTimeout(l,200,this)}}function l(){F=null;if(H){CKEDITOR.tools.setTimeout(j,0,this);H=false}}function w(f){function g(a,b){return !a||a.type==CKEDITOR.NODE_TEXT?false:f.clone()["moveToElementEdit"+(b?"End":"Start")](a)}if(!(f.root instanceof CKEDITOR.editable)){return false}var h=f.startContainer,i=f.getPreviousNode(J,null,h),m=f.getNextNode(J,null,h);return g(i)||g(m,1)||!i&&!m&&!(h.type==CKEDITOR.NODE_ELEMENT&&h.isBlockBoundary()&&h.getBogus())?true:false}function t(b){return b.getCustomData("cke-fillingChar")}function v(g,i){var m=g&&g.removeCustomData("cke-fillingChar");if(m){if(i!==false){var n,o=g.getDocument().getSelection().getNative(),p=o&&o.type!="None"&&o.getRangeAt(0);if(m.getLength()>1&&p&&p.intersectsNode(m.$)){n=[o.anchorOffset,o.focusOffset];p=o.focusNode==m.$&&o.focusOffset>0;o.anchorNode==m.$&&o.anchorOffset>0&&n[0]--;p&&n[1]--;var q;p=o;if(!p.isCollapsed){q=p.getRangeAt(0);q.setStart(p.anchorNode,p.anchorOffset);q.setEnd(p.focusNode,p.focusOffset);q=q.collapsed}q&&n.unshift(n.pop())}}m.setText(y(m.getText()));if(n){m=o.getRangeAt(0);m.setStart(m.startContainer,n[0]);m.setEnd(m.startContainer,n[1]);o.removeAllRanges();o.addRange(m)}}}function y(b){return b.replace(/\u200B( )?/g,function(c){return c[1]?"":""})}function D(h,i,m){var n=h.on("focus",function(b){b.cancel()},null,null,-100);if(CKEDITOR.env.ie){var o=h.getDocument().on("selectionchange",function(b){b.cancel()},null,null,-100)}else{var p=new CKEDITOR.dom.range(h);p.moveToElementEditStart(h);var q=h.getDocument().$.createRange();q.setStart(p.startContainer.$,p.startOffset);q.collapse(1);i.removeAllRanges();i.addRange(q)}m&&h.focus();n.removeListener();o&&o.removeListener()}function z(f){var g=CKEDITOR.dom.element.createFromHtml('<div data-cke-hidden-sel="1" data-cke-temp="1" style="'+(CKEDITOR.env.ie?"display:none":"position:fixed;top:0;left:-1000px")+'">&nbsp;</div>',f.document);f.fire("lockSnapshot");f.editable().append(g);var h=f.getSelection(1),i=f.createRange(),m=h.root.on("selectionchange",function(b){b.cancel()},null,null,0);i.setStartAt(g,CKEDITOR.POSITION_AFTER_START);i.setEndAt(g,CKEDITOR.POSITION_BEFORE_END);h.selectRanges([i]);m.removeListener();f.fire("unlockSnapshot");f._.hiddenSelectionContainer=g}function B(c){var d={37:1,39:1,8:1,46:1};return function(a){var b=a.data.getKeystroke();if(d[b]){var g=c.getSelection().getRanges(),h=g[0];if(g.length==1&&h.collapsed){if((b=h[b<38?"getPreviousEditableNode":"getNextEditableNode"]())&&b.type==CKEDITOR.NODE_ELEMENT&&b.getAttribute("contenteditable")=="false"){c.getSelection().fake(b);a.data.preventDefault();a.cancel()}}}}}function C(i){for(var m=0;m<i.length;m++){var n=i[m];n.getCommonAncestor().isReadOnly()&&i.splice(m,1);if(!n.collapsed){if(n.startContainer.isReadOnly()){for(var o=n.startContainer,p;o;){if((p=o.type==CKEDITOR.NODE_ELEMENT)&&o.is("body")||!o.isReadOnly()){break}p&&o.getAttribute("contentEditable")=="false"&&n.setStartAfter(o);o=o.getParent()}}o=n.startContainer;p=n.endContainer;var q=n.startOffset,s=n.endOffset,u=n.clone();o&&o.type==CKEDITOR.NODE_TEXT&&(q>=o.getLength()?u.setStartAfter(o):u.setStartBefore(o));p&&p.type==CKEDITOR.NODE_TEXT&&(s?u.setEndAfter(p):u.setEndBefore(p));o=new CKEDITOR.dom.walker(u);o.evaluator=function(a){if(a.type==CKEDITOR.NODE_ELEMENT&&a.isReadOnly()){var b=n.clone();n.setEndBefore(a);n.collapsed&&i.splice(m--,1);if(!(a.getPosition(u.endContainer)&CKEDITOR.POSITION_CONTAINS)){b.setStartAfter(a);b.collapsed||i.splice(m+1,0,b)}return true}return false};o.next()}}return i}var F,H,J=CKEDITOR.dom.walker.invisible(1),G=function(){function e(a){return function(b){var d=b.editor.createRange();d.moveToClosestEditablePosition(b.selected,a)&&b.editor.getSelection().selectRanges([d]);return false}}function f(b){return function(a){var i=a.editor,m=i.createRange(),n;if(!(n=m.moveToClosestEditablePosition(a.selected,b))){n=m.moveToClosestEditablePosition(a.selected,!b)}n&&i.getSelection().selectRanges([m]);i.fire("saveSnapshot");a.selected.remove();if(!n){m.moveToElementEditablePosition(i.editable());i.getSelection().selectRanges([m])}i.fire("saveSnapshot");return false}}var g=e(),h=e(1);return{37:g,38:g,39:h,40:h,8:f(),46:f(1)}}();CKEDITOR.on("instanceCreated",function(a){function c(){var b=e.getSelection();b&&b.removeAllRanges()}var e=a.editor;e.on("contentDom",function(){var f=e.document,i=CKEDITOR.document,o=e.editable(),s=f.getBody(),u=f.getDocumentElement(),p=o.isInline(),x,A;CKEDITOR.env.gecko&&o.attachListener(o,"focus",function(b){b.removeListener();if(x!==0){if((b=e.getSelection().getNative())&&b.isCollapsed&&b.anchorNode==o.$){b=e.createRange();b.moveToElementEditStart(o);b.select()}}},null,null,-2);o.attachListener(o,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){x&&CKEDITOR.env.webkit&&(x=e._.previousActive&&e._.previousActive.equals(f.getActive()));e.unlockSelection(x);x=0},null,null,-1);o.attachListener(o,"mousedown",function(){x=0});if(CKEDITOR.env.ie||p){var K=function(){A=new CKEDITOR.dom.selection(e.getSelection());A.lock()};E?o.attachListener(o,"beforedeactivate",K,null,null,-1):o.attachListener(e,"selectionCheck",K,null,null,-1);o.attachListener(o,CKEDITOR.env.webkit?"DOMFocusOut":"blur",function(){e.lockSelection(A);x=1},null,null,-1);o.attachListener(o,"mousedown",function(){x=0})}if(CKEDITOR.env.ie&&!p){var M;o.attachListener(o,"mousedown",function(b){if(b.data.$.button==2){b=e.document.getSelection();if(!b||b.getType()==CKEDITOR.SELECTION_NONE){M=e.window.getScrollPosition()}}});o.attachListener(o,"mouseup",function(b){if(b.data.$.button==2&&M){e.document.$.documentElement.scrollLeft=M.x;e.document.$.documentElement.scrollTop=M.y}M=null});if(f.$.compatMode!="BackCompat"){if(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat){u.on("mousedown",function(d){function h(b){b=b.data.$;if(n){var g=s.$.createTextRange();try{g.moveToPoint(b.x,b.y)}catch(P){}n.setEndPoint(O.compareEndPoints("StartToStart",g)<0?"EndToEnd":"StartToStart",g);n.select()}}function m(){u.removeListener("mousemove",h);i.removeListener("mouseup",m);u.removeListener("mouseup",m);n.select()}d=d.data;if(d.getTarget().is("html")&&d.$.y<u.$.clientHeight&&d.$.x<u.$.clientWidth){var n=s.$.createTextRange();try{n.moveToPoint(d.$.x,d.$.y)}catch(q){}var O=n.duplicate();u.on("mousemove",h);i.on("mouseup",m);u.on("mouseup",m)}})}if(CKEDITOR.env.version>7&&CKEDITOR.env.version<11){u.on("mousedown",function(b){if(b.data.getTarget().is("html")){i.on("mouseup",N);u.on("mouseup",N)}});var N=function(){i.removeListener("mouseup",N);u.removeListener("mouseup",N);var b=CKEDITOR.document.$.selection,d=b.createRange();b.type!="None"&&d.parentElement().ownerDocument==f.$&&d.select()}}}}o.attachListener(o,"selectionchange",j,e);o.attachListener(o,"keyup",r,e);o.attachListener(o,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){e.forceNextSelectionCheck();e.selectionChange(1)});if(p&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko)){var L;o.attachListener(o,"mousedown",function(){L=1});o.attachListener(f.getDocumentElement(),"mouseup",function(){L&&r.call(e);L=0})}else{o.attachListener(CKEDITOR.env.ie?o:f.getDocumentElement(),"mouseup",r,e)}CKEDITOR.env.webkit&&o.attachListener(f,"keydown",function(b){switch(b.data.getKey()){case 13:case 33:case 34:case 35:case 36:case 37:case 39:case 8:case 45:case 46:v(o)}},null,null,-1);o.attachListener(o,"keydown",B(e),null,null,-1)});e.on("setData",function(){e.unlockSelection();CKEDITOR.env.webkit&&c()});e.on("contentDomUnload",function(){e.unlockSelection()});if(CKEDITOR.env.ie9Compat){e.on("beforeDestroy",c,null,null,9)}e.on("dataReady",function(){delete e._.fakeSelection;delete e._.hiddenSelectionContainer;e.selectionChange(1)});e.on("loadSnapshot",function(){var b=e.editable().getLast(function(d){return d.type==CKEDITOR.NODE_ELEMENT});b&&b.hasAttribute("data-cke-hidden-sel")&&b.remove()},null,null,100);e.on("key",function(d){if(e.mode=="wysiwyg"){var f=e.getSelection();if(f.isFake){var g=G[d.data.keyCode];if(g){return g({editor:e,selected:f.getSelectedElement(),selection:f,keyEvent:d})}}}})});CKEDITOR.on("instanceReady",function(d){var e=d.editor;if(CKEDITOR.env.webkit){e.on("selectionChange",function(){var b=e.editable(),f=t(b);f&&(f.getCustomData("ready")?v(b):f.setCustomData("ready",1))},null,null,-1);e.on("beforeSetMode",function(){v(e.editable())},null,null,-1);var g,i,d=function(){var b=e.editable();if(b){if(b=t(b)){var c=e.document.$.defaultView.getSelection();c.type=="Caret"&&c.anchorNode==b.$&&(i=1);g=b.getText();b.setText(y(g))}}},m=function(){var b=e.editable();if(b){if(b=t(b)){b.setText(g);if(i){e.document.$.defaultView.getSelection().setPosition(b.$,b.getLength());i=0}}}};e.on("beforeUndoImage",d);e.on("afterUndoImage",m);e.on("beforeGetData",d,null,null,0);e.on("getData",m)}});CKEDITOR.editor.prototype.selectionChange=function(a){(a?j:r).call(this)};CKEDITOR.editor.prototype.getSelection=function(b){if((this._.savedSelection||this._.fakeSelection)&&!b){return this._.savedSelection||this._.fakeSelection}return(b=this.editable())&&this.mode=="wysiwyg"?new CKEDITOR.dom.selection(b):null};CKEDITOR.editor.prototype.lockSelection=function(b){b=b||this.getSelection(1);if(b.getType()!=CKEDITOR.SELECTION_NONE){!b.isLocked&&b.lock();this._.savedSelection=b;return true}return false};CKEDITOR.editor.prototype.unlockSelection=function(c){var d=this._.savedSelection;if(d){d.unlock(c);delete this._.savedSelection;return true}return false};CKEDITOR.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath};CKEDITOR.dom.document.prototype.getSelection=function(){return new CKEDITOR.dom.selection(this)};CKEDITOR.dom.range.prototype.select=function(){var b=this.root instanceof CKEDITOR.editable?this.root.editor.getSelection():new CKEDITOR.dom.selection(this.root);b.selectRanges([this]);return b};CKEDITOR.SELECTION_NONE=1;CKEDITOR.SELECTION_TEXT=2;CKEDITOR.SELECTION_ELEMENT=3;var E=typeof window.getSelection!="function",I=1;CKEDITOR.dom.selection=function(i){if(i instanceof CKEDITOR.dom.selection){var m=i,i=i.root}var n=i instanceof CKEDITOR.dom.element;this.rev=m?m.rev:I++;this.document=i instanceof CKEDITOR.dom.document?i:i.getDocument();this.root=i=n?i:this.document.getBody();this.isLocked=0;this._={cache:{}};if(m){CKEDITOR.tools.extend(this._.cache,m._.cache);this.isFake=m.isFake;this.isLocked=m.isLocked;return this}m=E?this.document.$.selection:this.document.getWindow().$.getSelection();if(CKEDITOR.env.webkit){(m.type=="None"&&this.document.getActive().equals(i)||m.type=="Caret"&&m.anchorNode.nodeType==CKEDITOR.NODE_DOCUMENT)&&D(i,m)}else{if(CKEDITOR.env.gecko){m&&(this.document.getActive().equals(i)&&m.anchorNode&&m.anchorNode.nodeType==CKEDITOR.NODE_DOCUMENT)&&D(i,m,true)}else{if(CKEDITOR.env.ie){var o;try{o=this.document.getActive()}catch(p){}if(E){m.type=="None"&&(o&&o.equals(this.document.getDocumentElement()))&&D(i,null,true)}else{(m=m&&m.anchorNode)&&(m=new CKEDITOR.dom.node(m));o&&(o.equals(this.document.getDocumentElement())&&m&&(i.equals(m)||i.contains(m)))&&D(i,null,true)}}}}o=this.getNative();var q,s;if(o){if(o.getRangeAt){q=(s=o.rangeCount&&o.getRangeAt(0))&&new CKEDITOR.dom.node(s.commonAncestorContainer)}else{try{s=o.createRange()}catch(u){}q=s&&CKEDITOR.dom.element.get(s.item&&s.item(0)||s.parentElement())}}if(!q||!(q.type==CKEDITOR.NODE_ELEMENT||q.type==CKEDITOR.NODE_TEXT)||!this.root.equals(q)&&!this.root.contains(q)){this._.cache.type=CKEDITOR.SELECTION_NONE;this._.cache.startElement=null;this._.cache.selectedElement=null;this._.cache.selectedText="";this._.cache.ranges=new CKEDITOR.dom.rangeList}return this};var k={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1};CKEDITOR.dom.selection.prototype={getNative:function(){return this._.cache.nativeSel!==void 0?this._.cache.nativeSel:this._.cache.nativeSel=E?this.document.$.selection:this.document.getWindow().$.getSelection()},getType:E?function(){var f=this._.cache;if(f.type){return f.type}var g=CKEDITOR.SELECTION_NONE;try{var h=this.getNative(),i=h.type;if(i=="Text"){g=CKEDITOR.SELECTION_TEXT}if(i=="Control"){g=CKEDITOR.SELECTION_ELEMENT}if(h.createRange().parentElement()){g=CKEDITOR.SELECTION_TEXT}}catch(m){}return f.type=g}:function(){var e=this._.cache;if(e.type){return e.type}var f=CKEDITOR.SELECTION_TEXT,g=this.getNative();if(!g||!g.rangeCount){f=CKEDITOR.SELECTION_NONE}else{if(g.rangeCount==1){var g=g.getRangeAt(0),h=g.startContainer;if(h==g.endContainer&&h.nodeType==1&&g.endOffset-g.startOffset==1&&k[h.childNodes[g.startOffset].nodeName.toLowerCase()]){f=CKEDITOR.SELECTION_ELEMENT}}}return e.type=f},getRanges:function(){var b=E?function(){function c(a){return(new CKEDITOR.dom.node(a)).getIndex()}var d=function(a,n){a=a.duplicate();a.collapse(n);var o=a.parentElement();if(!o.hasChildNodes()){return{container:o,offset:0}}for(var p=o.children,q,s,K=a.duplicate(),A=0,u=p.length-1,N=-1,x,M;A<=u;){N=Math.floor((A+u)/2);q=p[N];K.moveToElementText(q);x=K.compareEndPoints("StartToStart",a);if(x>0){u=N-1}else{if(x<0){A=N+1}else{return{container:o,offset:c(q)}}}}if(N==-1||N==p.length-1&&x<0){K.moveToElementText(o);K.setEndPoint("StartToStart",a);K=K.text.replace(/(\r\n|\r)/g,"\n").length;p=o.childNodes;if(!K){q=p[p.length-1];return q.nodeType!=CKEDITOR.NODE_TEXT?{container:o,offset:p.length}:{container:q,offset:q.nodeValue.length}}for(o=p.length;K>0&&o>0;){s=p[--o];if(s.nodeType==CKEDITOR.NODE_TEXT){M=s;K=K-s.nodeValue.length}}return{container:M,offset:-K}}K.collapse(x>0?true:false);K.setEndPoint(x>0?"StartToStart":"EndToStart",a);K=K.text.replace(/(\r\n|\r)/g,"\n").length;if(!K){return{container:o,offset:c(q)+(x>0?0:1)}}for(;K>0;){try{s=q[x>0?"previousSibling":"nextSibling"];if(s.nodeType==CKEDITOR.NODE_TEXT){K=K-s.nodeValue.length;M=s}q=s}catch(L){return{container:o,offset:c(q)}}}return{container:M,offset:x>0?-K:M.nodeValue.length+K}};return function(){var h=this.getNative(),i=h&&h.createRange(),m=this.getType();if(!h){return[]}if(m==CKEDITOR.SELECTION_TEXT){h=new CKEDITOR.dom.range(this.root);m=d(i,true);h.setStart(new CKEDITOR.dom.node(m.container),m.offset);m=d(i);h.setEnd(new CKEDITOR.dom.node(m.container),m.offset);h.endContainer.getPosition(h.startContainer)&CKEDITOR.POSITION_PRECEDING&&h.endOffset<=h.startContainer.getIndex()&&h.collapse();return[h]}if(m==CKEDITOR.SELECTION_ELEMENT){for(var m=[],n=0;n<i.length;n++){for(var o=i.item(n),p=o.parentNode,q=0,h=new CKEDITOR.dom.range(this.root);q<p.childNodes.length&&p.childNodes[q]!=o;q++){}h.setStart(new CKEDITOR.dom.node(p),q);h.setEnd(new CKEDITOR.dom.node(p),q+1);m.push(h)}return m}return[]}}():function(){var f=[],g,h=this.getNative();if(!h){return f}for(var i=0;i<h.rangeCount;i++){var m=h.getRangeAt(i);g=new CKEDITOR.dom.range(this.root);g.setStart(new CKEDITOR.dom.node(m.startContainer),m.startOffset);g.setEnd(new CKEDITOR.dom.node(m.endContainer),m.endOffset);f.push(g)}return f};return function(a){var e=this._.cache,f=e.ranges;if(!f){e.ranges=f=new CKEDITOR.dom.rangeList(b.call(this))}return !a?f:C(new CKEDITOR.dom.rangeList(f.slice()))}}(),getStartElement:function(){var d=this._.cache;if(d.startElement!==void 0){return d.startElement}var e;switch(this.getType()){case CKEDITOR.SELECTION_ELEMENT:return this.getSelectedElement();case CKEDITOR.SELECTION_TEXT:var f=this.getRanges()[0];if(f){if(f.collapsed){e=f.startContainer;e.type!=CKEDITOR.NODE_ELEMENT&&(e=e.getParent())}else{for(f.optimize();;){e=f.startContainer;if(f.startOffset==(e.getChildCount?e.getChildCount():e.getLength())&&!e.isBlockBoundary()){f.setStartAfter(e)}else{break}}e=f.startContainer;if(e.type!=CKEDITOR.NODE_ELEMENT){return e.getParent()}e=e.getChild(f.startOffset);if(!e||e.type!=CKEDITOR.NODE_ELEMENT){e=f.startContainer}else{for(f=e.getFirst();f&&f.type==CKEDITOR.NODE_ELEMENT;){e=f;f=f.getFirst()}}}e=e.$}}return d.startElement=e?new CKEDITOR.dom.element(e):null},getSelectedElement:function(){var d=this._.cache;if(d.selectedElement!==void 0){return d.selectedElement}var e=this,f=CKEDITOR.tools.tryThese(function(){return e.getNative().createRange().item(0)},function(){for(var b=e.getRanges()[0].clone(),g,h,i=2;i&&(!(g=b.getEnclosedNode())||!(g.type==CKEDITOR.NODE_ELEMENT&&k[g.getName()]&&(h=g)));i--){b.shrink(CKEDITOR.SHRINK_ELEMENT)}return h&&h.$});return d.selectedElement=f?new CKEDITOR.dom.element(f):null},getSelectedText:function(){var c=this._.cache;if(c.selectedText!==void 0){return c.selectedText}var d=this.getNative(),d=E?d.type=="Control"?"":d.createRange().text:d.toString();return c.selectedText=d},lock:function(){this.getRanges();this.getStartElement();this.getSelectedElement();this.getSelectedText();this._.cache.nativeSel=null;this.isLocked=1},unlock:function(e){if(this.isLocked){if(e){var f=this.getSelectedElement(),g=!f&&this.getRanges(),h=this.isFake}this.isLocked=0;this.reset();if(e){(e=f||g[0]&&g[0].getCommonAncestor())&&e.getAscendant("body",1)&&(h?this.fake(f):f?this.selectElement(f):this.selectRanges(g))}}},reset:function(){this._.cache={};this.isFake=0;var d=this.root.editor;if(d&&d._.fakeSelection&&this.rev==d._.fakeSelection.rev){delete d._.fakeSelection;var e=d._.hiddenSelectionContainer;if(e){var f=d.checkDirty();d.fire("lockSnapshot");e.remove();d.fire("unlockSnapshot");!f&&d.resetDirty()}delete d._.hiddenSelectionContainer}this.rev=I++},selectElement:function(c){var d=new CKEDITOR.dom.range(this.root);d.setStartBefore(c);d.setEndAfter(c);this.selectRanges([d])},selectRanges:function(e){var f=this.root.editor,f=f&&f._.hiddenSelectionContainer;this.reset();if(f){for(var f=this.root,o,u=0;u<e.length;++u){o=e[u];if(o.endContainer.equals(f)){o.endOffset=Math.min(o.endOffset,f.getChildCount())}}}if(e.length){if(this.isLocked){var x=CKEDITOR.document.getActive();this.unlock();this.selectRanges(e);this.lock();!x.equals(this.root)&&x.focus()}else{var A;e:{var K,L;if(e.length==1&&!(L=e[0]).collapsed&&(A=L.getEnclosedNode())&&A.type==CKEDITOR.NODE_ELEMENT){L=L.clone();L.shrink(CKEDITOR.SHRINK_ELEMENT,true);if((K=L.getEnclosedNode())&&K.type==CKEDITOR.NODE_ELEMENT){A=K}if(A.getAttribute("contenteditable")=="false"){break e}}A=void 0}if(A){this.fake(A)}else{if(E){L=CKEDITOR.dom.walker.whitespaces(true);K=/\ufeff|\u00a0/;f={table:1,tbody:1,tr:1};if(e.length>1){A=e[e.length-1];e[0].setEnd(A.endContainer,A.endOffset)}A=e[0];var e=A.collapsed,M,O,N;if((o=A.getEnclosedNode())&&o.type==CKEDITOR.NODE_ELEMENT&&o.getName() in k&&(!o.is("a")||!o.getText())){try{N=o.$.createControlRange();N.addElement(o.$);N.select();return}catch(P){}}if(A.startContainer.type==CKEDITOR.NODE_ELEMENT&&A.startContainer.getName() in f||A.endContainer.type==CKEDITOR.NODE_ELEMENT&&A.endContainer.getName() in f){A.shrink(CKEDITOR.NODE_ELEMENT,true);e=A.collapsed}N=A.createBookmark();f=N.startNode;if(!e){x=N.endNode}N=A.document.$.body.createTextRange();N.moveToElementText(f.$);N.moveStart("character",1);if(x){K=A.document.$.body.createTextRange();K.moveToElementText(x.$);N.setEndPoint("EndToEnd",K);N.moveEnd("character",-1)}else{M=f.getNext(L);O=f.hasAscendant("pre");M=!(M&&M.getText&&M.getText().match(K))&&(O||!f.hasPrevious()||f.getPrevious().is&&f.getPrevious().is("br"));O=A.document.createElement("span");O.setHtml("&#65279;");O.insertBefore(f);M&&A.document.createText("").insertBefore(f)}A.setStartBefore(f);f.remove();if(e){if(M){N.moveStart("character",-1);N.select();A.document.$.selection.clear()}else{N.select()}A.moveToPosition(O,CKEDITOR.POSITION_BEFORE_START);O.remove()}else{A.setEndBefore(x);x.remove();N.select()}}else{x=this.getNative();if(!x){return}this.removeAllRanges();for(N=0;N<e.length;N++){if(N<e.length-1){M=e[N];O=e[N+1];K=M.clone();K.setStart(M.endContainer,M.endOffset);K.setEnd(O.startContainer,O.startOffset);if(!K.collapsed){K.shrink(CKEDITOR.NODE_ELEMENT,true);A=K.getCommonAncestor();K=K.getEnclosedNode();if(A.isReadOnly()||K&&K.isReadOnly()){O.setStart(M.startContainer,M.startOffset);e.splice(N--,1);continue}}}A=e[N];O=this.document.$.createRange();if(A.collapsed&&CKEDITOR.env.webkit&&w(A)){M=this.root;v(M,false);K=M.getDocument().createText("");M.setCustomData("cke-fillingChar",K);A.insertNode(K);if((M=K.getNext())&&!K.getPrevious()&&M.type==CKEDITOR.NODE_ELEMENT&&M.getName()=="br"){v(this.root);A.moveToPosition(M,CKEDITOR.POSITION_BEFORE_START)}else{A.moveToPosition(K,CKEDITOR.POSITION_AFTER_END)}}O.setStart(A.startContainer.$,A.startOffset);try{O.setEnd(A.endContainer.$,A.endOffset)}catch(Q){if(Q.toString().indexOf("NS_ERROR_ILLEGAL_VALUE")>=0){A.collapse(1);O.setEnd(A.endContainer.$,A.endOffset)}else{throw Q}}x.addRange(O)}}this.reset();this.root.fire("selectionchange")}}}},fake:function(e){var f=this.root.editor;this.reset();z(f);var g=this._.cache,h=new CKEDITOR.dom.range(this.root);h.setStartBefore(e);h.setEndAfter(e);g.ranges=new CKEDITOR.dom.rangeList(h);g.selectedElement=g.startElement=e;g.type=CKEDITOR.SELECTION_ELEMENT;g.selectedText=g.nativeSel=null;this.isFake=1;this.rev=I++;f._.fakeSelection=this;this.root.fire("selectionchange")},isHidden:function(){var b=this.getCommonAncestor();b&&b.type==CKEDITOR.NODE_TEXT&&(b=b.getParent());return !(!b||!b.data("cke-hidden-sel"))},createBookmarks:function(b){b=this.getRanges().createBookmarks(b);this.isFake&&(b.isFake=1);return b},createBookmarks2:function(b){b=this.getRanges().createBookmarks2(b);this.isFake&&(b.isFake=1);return b},selectBookmarks:function(e){for(var f=[],g=0;g<e.length;g++){var h=new CKEDITOR.dom.range(this.root);h.moveToBookmark(e[g]);f.push(h)}e.isFake?this.fake(f[0].getEnclosedNode()):this.selectRanges(f);return this},getCommonAncestor:function(){var b=this.getRanges();return !b.length?null:b[0].startContainer.getCommonAncestor(b[b.length-1].endContainer)},scrollIntoView:function(){this.type!=CKEDITOR.SELECTION_NONE&&this.getRanges()[0].scrollIntoView()},removeAllRanges:function(){if(this.getType()!=CKEDITOR.SELECTION_NONE){var c=this.getNative();try{c&&c[E?"empty":"removeAllRanges"]()}catch(d){}this.reset()}}}})();"use strict";CKEDITOR.STYLE_BLOCK=1;CKEDITOR.STYLE_INLINE=2;CKEDITOR.STYLE_OBJECT=3;(function(){function t(f,g){for(var h,i;f=f.getParent();){if(f.equals(g)){break}if(f.getAttribute("data-nostyle")){h=f}else{if(!i){var j=f.getAttribute("contentEditable");j=="false"?h=f:j=="true"&&(i=1)}}}return h}function z(c){var f=c.document;if(c.collapsed){f=af(this,f);c.insertNode(f);c.moveToPosition(f,CKEDITOR.POSITION_BEFORE_END)}else{var x=this.element,F=this._.definition,J,L=F.ignoreReadonly,aj=L||F.includeReadonly;aj==void 0&&(aj=c.root.getCustomData("cke_includeReadonly"));var ak=CKEDITOR.dtd[x];if(!ak){J=true;ak=CKEDITOR.dtd.span}c.enlarge(CKEDITOR.ENLARGE_INLINE,1);c.trim();var am=c.createBookmark(),al=am.startNode,an=am.endNode,aq=al,at;if(!L){var ao=c.getCommonAncestor(),L=t(al,ao),ao=t(an,ao);L&&(aq=L.getNextSourceNode(true));ao&&(an=ao)}for(aq.getPosition(an)==CKEDITOR.POSITION_FOLLOWING&&(aq=0);aq;){L=false;if(aq.equals(an)){aq=null;L=true}else{var aw=aq.type==CKEDITOR.NODE_ELEMENT?aq.getName():null,ao=aw&&aq.getAttribute("contentEditable")=="false",au=aw&&aq.getAttribute("data-nostyle");if(aw&&aq.data("cke-bookmark")){aq=aq.getNextSourceNode(true);continue}if(ao&&aj&&CKEDITOR.dtd.$block[aw]){for(var ay=aq,a=G(ay),u=void 0,ai=a.length,ap=0,ay=ai&&new CKEDITOR.dom.range(ay.getDocument());ap<ai;++ap){var u=a[ap],ax=CKEDITOR.filter.instances[u.data("cke-filter")];if(ax?ax.check(this):1){ay.selectNodeContents(u);z.call(this,ay)}}}a=aw?!ak[aw]||au?0:ao&&!aj?0:(aq.getPosition(an)|V)==V&&(!F.childRule||F.childRule(aq)):1;if(a){if((a=aq.getParent())&&((a.getDtd()||CKEDITOR.dtd.span)[x]||J)&&(!F.parentRule||F.parentRule(a))){if(!at&&(!aw||!CKEDITOR.dtd.$removeEmpty[aw]||(aq.getPosition(an)|V)==V)){at=c.clone();at.setStartBefore(aq)}aw=aq.type;if(aw==CKEDITOR.NODE_TEXT||ao||aw==CKEDITOR.NODE_ELEMENT&&!aq.getChildCount()){for(var aw=aq,ar;(L=!aw.getNext(H))&&(ar=aw.getParent(),ak[ar.getName()])&&(ar.getPosition(al)|R)==R&&(!F.childRule||F.childRule(ar));){aw=ar}at.setEndAfter(aw)}}else{L=true}}else{L=true}aq=aq.getNextSourceNode(au||ao)}if(L&&at&&!at.collapsed){for(var L=af(this,f),ao=L.hasAttributes(),au=at.getCommonAncestor(),aw={},a={},u={},ai={},az,av,aA;L&&au;){if(au.getName()==x){for(az in F.attributes){if(!ai[az]&&(aA=au.getAttribute(av))){L.getAttribute(az)==aA?a[az]=1:ai[az]=1}}for(av in F.styles){if(!u[av]&&(aA=au.getStyle(av))){L.getStyle(av)==aA?aw[av]=1:u[av]=1}}}au=au.getParent()}for(az in a){L.removeAttribute(az)}for(av in aw){L.removeStyle(av)}ao&&!L.hasAttributes()&&(L=null);if(L){at.extractContents().appendTo(L);at.insertNode(L);ah.call(this,L);L.mergeSiblings();CKEDITOR.env.ie||L.$.normalize()}else{L=new CKEDITOR.dom.element("span");at.extractContents().appendTo(L);at.insertNode(L);ah.call(this,L);L.remove(true)}at=null}}c.moveToBookmark(am);c.shrink(CKEDITOR.SHRINK_TEXT);c.shrink(CKEDITOR.NODE_ELEMENT,true)}}function y(l){function m(){for(var b=new CKEDITOR.dom.elementPath(o.getParent()),d=new CKEDITOR.dom.elementPath(v.getParent()),i=null,j=null,k=0;k<b.elements.length;k++){var A=b.elements[k];if(A==b.block||A==b.blockLimit){break}x.checkElementRemovable(A)&&(i=A)}for(k=0;k<d.elements.length;k++){A=d.elements[k];if(A==d.block||A==d.blockLimit){break}x.checkElementRemovable(A)&&(j=A)}j&&v.breakParent(j);i&&o.breakParent(i)}l.enlarge(CKEDITOR.ENLARGE_INLINE,1);var n=l.createBookmark(),o=n.startNode;if(l.collapsed){for(var p=new CKEDITOR.dom.elementPath(o.getParent(),l.root),q,r=0,s;r<p.elements.length&&(s=p.elements[r]);r++){if(s==p.block||s==p.blockLimit){break}if(this.checkElementRemovable(s)){var u;if(l.collapsed&&(l.checkBoundaryOfElement(s,CKEDITOR.END)||(u=l.checkBoundaryOfElement(s,CKEDITOR.START)))){q=s;q.match=u?"start":"end"}else{s.mergeSiblings();s.is(this.element)?ad.call(this,s):ab(s,U(this)[s.getName()])}}}if(q){s=o;for(r=0;;r++){u=p.elements[r];if(u.equals(q)){break}else{if(u.match){continue}else{u=u.clone()}}u.append(s);s=u}s[q.match=="start"?"insertBefore":"insertAfter"](q)}}else{var v=n.endNode,x=this;m();for(p=o;!p.equals(v);){q=p.getNextSourceNode();if(p.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(p)){p.getName()==this.element?ad.call(this,p):ab(p,U(this)[p.getName()]);if(q.type==CKEDITOR.NODE_ELEMENT&&q.contains(o)){m();q=o.getNext()}}p=q}}l.moveToBookmark(n);l.shrink(CKEDITOR.NODE_ELEMENT,true)}function G(c){var d=[];c.forEach(function(b){if(b.getAttribute("contenteditable")=="true"){d.push(b);return false}},CKEDITOR.NODE_ELEMENT,true);return d}function B(c){var d=c.getEnclosedNode()||c.getCommonAncestor(false,true);(c=(new CKEDITOR.dom.elementPath(d,c.root)).contains(this.element,1))&&!c.isReadOnly()&&w(c,this)}function E(f){var g=f.getCommonAncestor(true,true);if(f=(new CKEDITOR.dom.elementPath(g,f.root)).contains(this.element,1)){var g=this._.definition,h=g.attributes;if(h){for(var i in h){f.removeAttribute(i,h[i])}}if(g.styles){for(var j in g.styles){g.styles.hasOwnProperty(j)&&f.removeStyle(j)}}}}function K(g){var h=g.createBookmark(true),i=g.createIterator();i.enforceRealBlocks=true;if(this._.enterMode){i.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR}for(var j,k=g.document,l;j=i.getNextParagraph();){if(!j.isReadOnly()&&(i.activeFilter?i.activeFilter.check(this):1)){l=af(this,k,j);M(j,l)}}g.moveToBookmark(h)}function X(f){var g=f.createBookmark(1),h=f.createIterator();h.enforceRealBlocks=true;h.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;for(var i,j;i=h.getNextParagraph();){if(this.checkElementRemovable(i)){if(i.is("pre")){(j=this._.enterMode==CKEDITOR.ENTER_BR?null:f.document.createElement(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))&&i.copyAttributes(j);M(i,j)}else{ad.call(this,i)}}}f.moveToBookmark(g)}function M(i,j){var k=!j;if(k){j=i.getDocument().createElement("div");i.copyAttributes(j)}var l=j&&j.is("pre"),m=i.is("pre"),n=!l&&m;if(l&&!m){m=j;(n=i.getBogus())&&n.remove();n=i.getHtml();n=W(n,/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,"");n=n.replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1");n=n.replace(/([ \t\n\r]+|&nbsp;)/g," ");n=n.replace(/<br\b[^>]*>/gi,"\n");if(CKEDITOR.env.ie){var o=i.getDocument().createElement("div");o.append(m);m.$.outerHTML="<pre>"+n+"</pre>";m.copyAttributes(o.getFirst());m=o.getFirst().remove()}else{m.setHtml(n)}j=m}else{n?j=aa(k?[i.getHtml()]:N(i),j):i.moveChildren(j)}j.replace(i);if(l){var k=j,p;if((p=k.getPrevious(C))&&p.type==CKEDITOR.NODE_ELEMENT&&p.is("pre")){l=W(p.getHtml(),/\n$/,"")+"\n\n"+W(k.getHtml(),/^\n/,"");CKEDITOR.env.ie?k.$.outerHTML="<pre>"+l+"</pre>":k.setHtml(l);p.remove()}}else{k&&Y(j)}}function N(c){c.getName();var d=[];W(c.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,function(e,f,g){return f+"</pre>"+g+"<pre>"}).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(b,e){d.push(e)});return d}function W(f,g,h){var i="",j="",f=f.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,function(d,e,k){e&&(i=e);k&&(j=k);return""});return i+f.replace(g,h)+j}function aa(g,h){var i;g.length>1&&(i=new CKEDITOR.dom.documentFragment(h.getDocument()));for(var j=0;j<g.length;j++){var k=g[j],k=k.replace(/(\r\n|\r)/g,"\n"),k=W(k,/^[ \t]*\n/,""),k=W(k,/\n$/,""),k=W(k,/^[ \t]+|[ \t]+$/g,function(c,d){return c.length==1?"&nbsp;":d?" "+CKEDITOR.tools.repeat("&nbsp;",c.length-1):CKEDITOR.tools.repeat("&nbsp;",c.length-1)+" "}),k=k.replace(/\n/g,"<br>"),k=k.replace(/[ \t]{2,}/g,function(b){return CKEDITOR.tools.repeat("&nbsp;",b.length-1)+" "});if(i){var l=h.clone();l.setHtml(k);i.append(l)}else{h.setHtml(k)}}return i||h}function ad(i,j){var k=this._.definition,l=k.attributes,k=k.styles,m=U(this)[i.getName()],n=CKEDITOR.tools.isEmpty(l)&&CKEDITOR.tools.isEmpty(k),o;for(o in l){if(!((o=="class"||this._.definition.fullMatch)&&i.getAttribute(o)!=Q(o,l[o]))&&!(j&&o.slice(0,5)=="data-")){n=i.hasAttribute(o);i.removeAttribute(o)}}for(var p in k){if(!(this._.definition.fullMatch&&i.getStyle(p)!=Q(p,k[p],true))){n=n||!!i.getStyle(p);i.removeStyle(p)}}ab(i,m,P[i.getName()]);n&&(this._.definition.alwaysRemoveElement?Y(i,1):!CKEDITOR.dtd.$block[i.getName()]||this._.enterMode==CKEDITOR.ENTER_BR&&!i.hasAttributes()?Y(i):i.renameNode(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))}function ah(g){for(var h=U(this),i=g.getElementsByTag(this.element),j,k=i.count();--k>=0;){j=i.getItem(k);j.isReadOnly()||ad.call(this,j,true)}for(var l in h){if(l!=this.element){i=g.getElementsByTag(l);for(k=i.count()-1;k>=0;k--){j=i.getItem(k);j.isReadOnly()||ab(j,h[l])}}}}function ab(h,i,j){if(i=i&&i.attributes){for(var k=0;k<i.length;k++){var l=i[k][0],m;if(m=h.getAttribute(l)){var n=i[k][1];(n===null||n.test&&n.test(m)||typeof n=="string"&&m==n)&&h.removeAttribute(l)}}}j||Y(h)}function Y(e,f){if(!e.hasAttributes()||f){if(CKEDITOR.dtd.$block[e.getName()]){var g=e.getPrevious(C),h=e.getNext(C);g&&(g.type==CKEDITOR.NODE_TEXT||!g.isBlockBoundary({br:1}))&&e.append("br",1);h&&(h.type==CKEDITOR.NODE_TEXT||!h.isBlockBoundary({br:1}))&&e.append("br");e.remove(true)}else{g=e.getFirst();h=e.getLast();e.remove(true);if(g){g.type==CKEDITOR.NODE_ELEMENT&&g.mergeSiblings();h&&(!g.equals(h)&&h.type==CKEDITOR.NODE_ELEMENT)&&h.mergeSiblings()}}}}function af(e,f,g){var h;h=e.element;h=="*"&&(h="span");h=new CKEDITOR.dom.element(h,f);g&&g.copyAttributes(h);h=w(h,e);f.getCustomData("doc_processing_style")&&h.hasAttribute("id")?h.removeAttribute("id"):f.setCustomData("doc_processing_style",1);return h}function w(f,g){var h=g._.definition,i=h.attributes,h=CKEDITOR.style.getStyleText(h);if(i){for(var j in i){f.setAttribute(j,i[j])}}h&&f.setAttribute("style",h);return f}function T(d,e){for(var f in d){d[f]=d[f].replace(ae,function(b,g){return e[g]})}}function U(i){if(i._.overrides){return i._.overrides}var j=i._.overrides={},k=i._.definition.overrides;if(k){CKEDITOR.tools.isArray(k)||(k=[k]);for(var l=0;l<k.length;l++){var m=k[l],n,o;if(typeof m=="string"){n=m.toLowerCase()}else{n=m.element?m.element.toLowerCase():i.element;o=m.attributes}m=j[n]||(j[n]={});if(o){var m=m.attributes=m.attributes||[],p;for(p in o){m.push([p.toLowerCase(),o[p]])}}}}return j}function Q(e,f,g){var h=new CKEDITOR.dom.element("span");h[g?"setStyle":"setAttribute"](e,f);return h[g?"getStyle":"getAttribute"](e)}function ag(h,i,j){for(var k=h.document,l=h.getRanges(),i=i?this.removeFromRange:this.applyToRange,m,n=l.createIterator();m=n.getNextRange();){i.call(this,m,j)}h.selectRanges(l);k.removeCustomData("doc_processing_style")}var P={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,details:1,datagrid:1,datalist:1},ac={a:1,blockquote:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},Z=/\s*(?:;\s*|$)/,ae=/#\((.+?)\)/g,H=CKEDITOR.dom.walker.bookmark(0,1),C=CKEDITOR.dom.walker.whitespaces(1);CKEDITOR.style=function(d,e){if(typeof d.type=="string"){return new CKEDITOR.style.customHandlers[d.type](d)}var f=d.attributes;if(f&&f.style){d.styles=CKEDITOR.tools.extend({},d.styles,CKEDITOR.tools.parseCssText(f.style));delete f.style}if(e){d=CKEDITOR.tools.clone(d);T(d.attributes,e);T(d.styles,e)}f=this.element=d.element?typeof d.element=="string"?d.element.toLowerCase():d.element:"*";this.type=d.type||(P[f]?CKEDITOR.STYLE_BLOCK:ac[f]?CKEDITOR.STYLE_OBJECT:CKEDITOR.STYLE_INLINE);if(typeof this.element=="object"){this.type=CKEDITOR.STYLE_OBJECT}this._={definition:d}};CKEDITOR.style.prototype={apply:function(c){if(c instanceof CKEDITOR.dom.document){return ag.call(this,c.getSelection())}if(this.checkApplicable(c.elementPath(),c)){var d=this._.enterMode;if(!d){this._.enterMode=c.activeEnterMode}ag.call(this,c.getSelection(),0,c);this._.enterMode=d}},remove:function(c){if(c instanceof CKEDITOR.dom.document){return ag.call(this,c.getSelection(),1)}if(this.checkApplicable(c.elementPath(),c)){var d=this._.enterMode;if(!d){this._.enterMode=c.activeEnterMode}ag.call(this,c.getSelection(),1,c);this._.enterMode=d}},applyToRange:function(b){this.applyToRange=this.type==CKEDITOR.STYLE_INLINE?z:this.type==CKEDITOR.STYLE_BLOCK?K:this.type==CKEDITOR.STYLE_OBJECT?B:null;return this.applyToRange(b)},removeFromRange:function(b){this.removeFromRange=this.type==CKEDITOR.STYLE_INLINE?y:this.type==CKEDITOR.STYLE_BLOCK?X:this.type==CKEDITOR.STYLE_OBJECT?E:null;return this.removeFromRange(b)},applyToObject:function(b){w(b,this)},checkActive:function(g,h){switch(this.type){case CKEDITOR.STYLE_BLOCK:return this.checkElementRemovable(g.block||g.blockLimit,true,h);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var i=g.elements,j=0,k;j<i.length;j++){k=i[j];if(!(this.type==CKEDITOR.STYLE_INLINE&&(k==g.block||k==g.blockLimit))){if(this.type==CKEDITOR.STYLE_OBJECT){var l=k.getName();if(!(typeof this.element=="string"?l==this.element:l in this.element)){continue}}if(this.checkElementRemovable(k,true,h)){return true}}}}return false},checkApplicable:function(d,e,f){e&&e instanceof CKEDITOR.filter&&(f=e);if(f&&!f.check(this)){return false}switch(this.type){case CKEDITOR.STYLE_OBJECT:return !!d.contains(this.element);case CKEDITOR.STYLE_BLOCK:return !!d.blockLimit.getDtd()[this.element]}return true},checkElementMatch:function(i,j){var k=this._.definition;if(!i||!k.ignoreReadonly&&i.isReadOnly()){return false}var l=i.getName();if(typeof this.element=="string"?l==this.element:l in this.element){if(!j&&!i.hasAttributes()){return true}if(l=k._AC){k=l}else{var l={},m=0,n=k.attributes;if(n){for(var o in n){m++;l[o]=n[o]}}if(o=CKEDITOR.style.getStyleText(k)){l.style||m++;l.style=o}l._length=m;k=k._AC=l}if(k._length){for(var p in k){if(p!="_length"){m=i.getAttribute(p)||"";if(p=="style"){i:{l=k[p];typeof l=="string"&&(l=CKEDITOR.tools.parseCssText(l));typeof m=="string"&&(m=CKEDITOR.tools.parseCssText(m,true));o=void 0;for(o in l){if(!(o in m&&(m[o]==l[o]||l[o]=="inherit"||m[o]=="inherit"))){l=false;break i}}l=true}}else{l=k[p]==m}if(l){if(!j){return true}}else{if(j){return false}}}}if(j){return true}}else{return true}}return false},checkElementRemovable:function(f,g,h){if(this.checkElementMatch(f,g,h)){return true}if(g=U(this)[f.getName()]){var i;if(!(g=g.attributes)){return true}for(h=0;h<g.length;h++){i=g[h][0];if(i=f.getAttribute(i)){var j=g[h][1];if(j===null||typeof j=="string"&&i==j||j.test(i)){return true}}}}return false},buildPreview:function(g){var h=this._.definition,i=[],j=h.element;j=="bdo"&&(j="span");var i=["<",j],k=h.attributes;if(k){for(var l in k){i.push(" ",l,'="',k[l],'"')}}(k=CKEDITOR.style.getStyleText(h))&&i.push(' style="',k,'"');i.push(">",g||h.name,"</",j,">");return i.join("")},getDefinition:function(){return this._.definition}};CKEDITOR.style.getStyleText=function(h){var i=h._ST;if(i){return i}var i=h.styles,j=h.attributes&&h.attributes.style||"",k="";j.length&&(j=j.replace(Z,";"));for(var l in i){var m=i[l],n=(l+":"+m).replace(Z,";");m=="inherit"?k=k+n:j=j+n}j.length&&(j=CKEDITOR.tools.normalizeCssText(j,true));return h._ST=j+k};CKEDITOR.style.customHandlers={};CKEDITOR.style.addCustomHandler=function(c){var d=function(b){this._={definition:b};this.setup&&this.setup(b)};d.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.style.prototype),{assignedTo:CKEDITOR.STYLE_OBJECT},c,true);return this.customHandlers[c.type]=d};var V=CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED,R=CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED})();CKEDITOR.styleCommand=function(b,d){this.requiredContent=this.allowedContent=this.style=b;CKEDITOR.tools.extend(this,d,true)};CKEDITOR.styleCommand.prototype.exec=function(b){b.focus();this.state==CKEDITOR.TRISTATE_OFF?b.applyStyle(this.style):this.state==CKEDITOR.TRISTATE_ON&&b.removeStyle(this.style)};CKEDITOR.stylesSet=new CKEDITOR.resourceManager("","stylesSet");CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet);CKEDITOR.loadStylesSet=function(d,f,e){CKEDITOR.stylesSet.addExternal(d,f,"");CKEDITOR.stylesSet.load(d,e)};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{attachStyleStateChange:function(d,f){var e=this._.styleStateChangeCallbacks;if(!e){e=this._.styleStateChangeCallbacks=[];this.on("selectionChange",function(b){for(var h=0;h<e.length;h++){var i=e[h],j=i.style.checkActive(b.data.path,this)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;i.fn.call(this,j)}})}e.push({style:d,fn:f})},applyStyle:function(b){b.apply(this)},removeStyle:function(b){b.remove(this)},getStylesSet:function(d){if(this._.stylesDefinitions){d(this._.stylesDefinitions)}else{var g=this,e=g.config.stylesCombo_stylesSet||g.config.stylesSet;if(e===false){d(null)}else{if(e instanceof Array){g._.stylesDefinitions=e;d(e)}else{e||(e="default");var e=e.split(":"),h=e[0];CKEDITOR.stylesSet.addExternal(h,e[1]?e.slice(1).join(":"):CKEDITOR.getUrl("styles.js"),"");CKEDITOR.stylesSet.load(h,function(a){g._.stylesDefinitions=a[h];d(g._.stylesDefinitions)})}}}}});CKEDITOR.dom.comment=function(b,d){typeof b=="string"&&(b=(d?d.$:document).createComment(b));CKEDITOR.dom.domObject.call(this,b)};CKEDITOR.dom.comment.prototype=new CKEDITOR.dom.node;CKEDITOR.tools.extend(CKEDITOR.dom.comment.prototype,{type:CKEDITOR.NODE_COMMENT,getOuterHtml:function(){return"<!--"+this.$.nodeValue+"-->"}});"use strict";(function(){var d={},f={},e;for(e in CKEDITOR.dtd.$blockLimit){e in CKEDITOR.dtd.$list||(d[e]=1)}for(e in CKEDITOR.dtd.$block){e in CKEDITOR.dtd.$blockLimit||e in CKEDITOR.dtd.$empty||(f[e]=1)}CKEDITOR.dom.elementPath=function(a,c){var j=null,k=null,r=[],l=a,o,c=c||a.getDocument().getBody();do{if(l.type==CKEDITOR.NODE_ELEMENT){r.push(l);if(!this.lastElement){this.lastElement=l;if(l.is(CKEDITOR.dtd.$object)||l.getAttribute("contenteditable")=="false"){continue}}if(l.equals(c)){break}if(!k){o=l.getName();l.getAttribute("contenteditable")=="true"?k=l:!j&&f[o]&&(j=l);if(d[o]){var q;if(q=!j){if(o=o=="div"){d:{o=l.getChildren();q=0;for(var t=o.count();q<t;q++){var u=o.getItem(q);if(u.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$block[u.getName()]){o=true;break d}}o=false}o=!o}q=o}q?j=l:k=l}}}}while(l=l.getParent());k||(k=c);this.block=j;this.blockLimit=k;this.root=c;this.elements=r}})();CKEDITOR.dom.elementPath.prototype={compare:function(d){var f=this.elements,d=d&&d.elements;if(!d||f.length!=d.length){return false}for(var e=0;e<f.length;e++){if(!f[e].equals(d[e])){return false}}return true},contains:function(g,i,h){var l;typeof g=="string"&&(l=function(a){return a.getName()==g});g instanceof CKEDITOR.dom.element?l=function(a){return a.equals(g)}:CKEDITOR.tools.isArray(g)?l=function(a){return CKEDITOR.tools.indexOf(g,a.getName())>-1}:typeof g=="function"?l=g:typeof g=="object"&&(l=function(a){return a.getName() in g});var j=this.elements,k=j.length;i&&k--;if(h){j=Array.prototype.slice.call(j,0);j.reverse()}for(i=0;i<k;i++){if(l(j[i])){return j[i]}}return null},isContextFor:function(b){var d;if(b in CKEDITOR.dtd.$block){d=this.contains(CKEDITOR.dtd.$intermediate)||this.root.equals(this.block)&&this.block||this.blockLimit;return !!d.getDtd()[b]}return true},direction:function(){return(this.block||this.blockLimit||this.root).getDirection(1)}};CKEDITOR.dom.text=function(b,d){typeof b=="string"&&(b=(d?d.$:document).createTextNode(b));this.$=b};CKEDITOR.dom.text.prototype=new CKEDITOR.dom.node;CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype,{type:CKEDITOR.NODE_TEXT,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},setText:function(b){this.$.nodeValue=b},split:function(g){var i=this.$.parentNode,h=i.childNodes.length,l=this.getLength(),j=this.getDocument(),k=new CKEDITOR.dom.text(this.$.splitText(g),j);if(i.childNodes.length==h){if(g>=l){k=j.createText("");k.insertAfter(this)}else{g=j.createText("");g.insertAfter(k);g.remove()}}return k},substring:function(b,d){return typeof d!="number"?this.$.nodeValue.substr(b):this.$.nodeValue.substring(b,d)}});(function(){function b(f,i,j){var k=f.serializable,l=i[j?"endContainer":"startContainer"],o=j?"endOffset":"startOffset",m=k?i.document.getById(f.startNode):f.startNode,f=k?i.document.getById(f.endNode):f.endNode;if(l.equals(m.getPrevious())){i.startOffset=i.startOffset-l.getLength()-f.getPrevious().getLength();l=f.getNext()}else{if(l.equals(f.getPrevious())){i.startOffset=i.startOffset-l.getLength();l=f.getNext()}}l.equals(m.getParent())&&i[o]++;l.equals(f.getParent())&&i[o]++;i[j?"endContainer":"startContainer"]=l;return i}CKEDITOR.dom.rangeList=function(c){if(c instanceof CKEDITOR.dom.rangeList){return c}c?c instanceof CKEDITOR.dom.range&&(c=[c]):c=[];return CKEDITOR.tools.extend(c,d)};var d={createIterator:function(){var f=this,g=CKEDITOR.dom.walker.bookmark(),h=[],i;return{getNextRange:function(a){i=i==void 0?0:i+1;var k=f[i];if(k&&f.length>1){if(!i){for(var c=f.length-1;c>=0;c--){h.unshift(f[c].createBookmark(true))}}if(a){for(var e=0;f[i+e+1];){for(var j=k.document,a=0,c=j.getById(h[e].endNode),j=j.getById(h[e+1].startNode);;){c=c.getNextSourceNode(false);if(j.equals(c)){a=1}else{if(g(c)||c.type==CKEDITOR.NODE_ELEMENT&&c.isBlockBoundary()){continue}}break}if(!a){break}e++}}for(k.moveToBookmark(h.shift());e--;){c=f[++i];c.moveToBookmark(h.shift());k.setEnd(c.endContainer,c.endOffset)}}return k}}},createBookmarks:function(a){for(var f=[],h,i=0;i<this.length;i++){f.push(h=this[i].createBookmark(a,true));for(var j=i+1;j<this.length;j++){this[j]=b(h,this[j]);this[j]=b(h,this[j],true)}}return f},createBookmarks2:function(e){for(var f=[],g=0;g<this.length;g++){f.push(this[g].createBookmark2(e))}return f},moveToBookmarks:function(e){for(var f=0;f<this.length;f++){this[f].moveToBookmark(e[f])}}}})();(function(){function i(){return CKEDITOR.getUrl(CKEDITOR.skinName.split(",")[1]||"skins/"+CKEDITOR.skinName.split(",")[0]+"/")}function k(a){var g=CKEDITOR.skin["ua_"+a],h=CKEDITOR.env;if(g){for(var g=g.split(",").sort(function(c,d){return c>d?-1:1}),n=0,s;n<g.length;n++){s=g[n];if(h.ie&&(s.replace(/^ie/,"")==h.version||h.quirks&&s=="iequirks")){s="ie"}if(h[s]){a=a+("_"+g[n]);break}}}return CKEDITOR.getUrl(i()+a+".css")}function j(c,d){if(!m[c]){CKEDITOR.document.appendStyleSheet(k(c));m[c]=1}d&&d()}function o(c){var d=c.getById(p);if(!d){d=c.getHead().append("style");d.setAttribute("id",p);d.setAttribute("type","text/css")}return d}function l(h,n,s){var t,u,v;if(CKEDITOR.env.webkit){n=n.split("}").slice(0,-1);for(u=0;u<n.length;u++){n[u]=n[u].split("{")}}for(var w=0;w<h.length;w++){if(CKEDITOR.env.webkit){for(u=0;u<n.length;u++){v=n[u][1];for(t=0;t<s.length;t++){v=v.replace(s[t][0],s[t][1])}h[w].$.sheet.addRule(n[u][0],v)}}else{v=n;for(t=0;t<s.length;t++){v=v.replace(s[t][0],s[t][1])}CKEDITOR.env.ie&&CKEDITOR.env.version<11?h[w].$.styleSheet.cssText=h[w].$.styleSheet.cssText+v:h[w].$.innerHTML=h[w].$.innerHTML+v}}}var m={};CKEDITOR.skin={path:i,loadPart:function(a,b){CKEDITOR.skin.name!=CKEDITOR.skinName.split(",")[0]?CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(i()+"skin.js"),function(){j(a,b)}):j(a,b)},getPath:function(b){return CKEDITOR.getUrl(k(b))},icons:{},addIcon:function(e,f,g,h){e=e.toLowerCase();this.icons[e]||(this.icons[e]={path:f,offset:g||0,bgsize:h||"16px"})},getIconStyle:function(g,h,n,s,t){var u;if(g){g=g.toLowerCase();h&&(u=this.icons[g+"-rtl"]);u||(u=this.icons[g])}g=n||u&&u.path||"";s=s||u&&u.offset;t=t||u&&u.bgsize||"16px";return g&&"background-image:url("+CKEDITOR.getUrl(g)+");background-position:0 "+s+"px;background-size:"+t+";"}};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{getUiColor:function(){return this.uiColor},setUiColor:function(c){var d=o(CKEDITOR.document);return(this.setUiColor=function(b){var f=CKEDITOR.skin.chameleon,g=[[q,b]];this.uiColor=b;l([d],f(this,"editor"),g);l(r,f(this,"panel"),g)}).call(this,c)}});var p="cke_ui_color",r=[],q=/\$color/g;CKEDITOR.on("instanceLoaded",function(c){if(!CKEDITOR.env.ie||!CKEDITOR.env.quirks){var d=c.editor,c=function(b){b=(b.data[0]||b.data).element.getElementsByTag("iframe").getItem(0).getFrameDocument();if(!b.getById("cke_ui_color")){b=o(b);r.push(b);var e=d.getUiColor();e&&l([b],CKEDITOR.skin.chameleon(d,"panel"),[[q,e]])}};d.on("panelShow",c);d.on("menuShow",c);d.config.uiColor&&d.setUiColor(d.config.uiColor)}})})();(function(){if(CKEDITOR.env.webkit){CKEDITOR.env.hc=false}else{var d=CKEDITOR.dom.element.createFromHtml('<div style="width:0;height:0;position:absolute;left:-10000px;border:1px solid;border-color:red blue"></div>',CKEDITOR.document);d.appendTo(CKEDITOR.document.getHead());try{var g=d.getComputedStyle("border-top-color"),e=d.getComputedStyle("border-right-color");CKEDITOR.env.hc=!!(g&&g==e)}catch(h){CKEDITOR.env.hc=false}d.remove()}if(CKEDITOR.env.hc){CKEDITOR.env.cssClass=CKEDITOR.env.cssClass+" cke_hc"}CKEDITOR.document.appendStyleText(".cke{visibility:hidden;}");CKEDITOR.status="loaded";CKEDITOR.fireOnce("loaded");if(d=CKEDITOR._.pending){delete CKEDITOR._.pending;for(g=0;g<d.length;g++){CKEDITOR.editor.prototype.constructor.apply(d[g][0],d[g][1]);CKEDITOR.add(d[g][0])}}})();CKEDITOR.skin.name="moono";CKEDITOR.skin.ua_editor="ie,iequirks,ie7,ie8,gecko";CKEDITOR.skin.ua_dialog="ie,iequirks,ie7,ie8";CKEDITOR.skin.chameleon=function(){var a=function(){return function(i,l){for(var g=i.match(/[^#]./g),j=0;3>j;j++){var m=g,n=j,k;k=parseInt(g[j],16);k=("0"+(0>l?0|k*(1+l):0|k+(255-k)*l).toString(16)).slice(-2);m[n]=k}return"#"+g.join("")}}(),d=function(){var c=new CKEDITOR.template("background:#{to};background-image:-webkit-gradient(linear,lefttop,leftbottom,from({from}),to({to}));background-image:-moz-linear-gradient(top,{from},{to});background-image:-webkit-linear-gradient(top,{from},{to});background-image:-o-linear-gradient(top,{from},{to});background-image:-ms-linear-gradient(top,{from},{to});background-image:linear-gradient(top,{from},{to});filter:progid:DXImageTransform.Microsoft.gradient(gradientType=0,startColorstr='{from}',endColorstr='{to}');");return function(f,b){return c.output({from:f,to:b})}}(),e={editor:new CKEDITOR.template("{id}.cke_chrome [border-color:{defaultBorder};] {id} .cke_top [ {defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_bottom [{defaultGradient}border-top-color:{defaultBorder};] {id} .cke_resizer [border-right-color:{ckeResizer}] {id} .cke_dialog_title [{defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_dialog_footer [{defaultGradient}outline-color:{defaultBorder};border-top-color:{defaultBorder};] {id} .cke_dialog_tab [{lightGradient}border-color:{defaultBorder};] {id} .cke_dialog_tab:hover [{mediumGradient}] {id} .cke_dialog_contents [border-top-color:{defaultBorder};] {id} .cke_dialog_tab_selected, {id} .cke_dialog_tab_selected:hover [background:{dialogTabSelected};border-bottom-color:{dialogTabSelectedBorder};] {id} .cke_dialog_body [background:{dialogBody};border-color:{defaultBorder};] {id} .cke_toolgroup [{lightGradient}border-color:{defaultBorder};] {id} a.cke_button_off:hover, {id} a.cke_button_off:focus, {id} a.cke_button_off:active [{mediumGradient}] {id} .cke_button_on [{ckeButtonOn}] {id} .cke_toolbar_separator [background-color: {ckeToolbarSeparator};] {id} .cke_combo_button [border-color:{defaultBorder};{lightGradient}] {id} a.cke_combo_button:hover, {id} a.cke_combo_button:focus, {id} .cke_combo_on a.cke_combo_button [border-color:{defaultBorder};{mediumGradient}] {id} .cke_path_item [color:{elementsPathColor};] {id} a.cke_path_item:hover, {id} a.cke_path_item:focus, {id} a.cke_path_item:active [background-color:{elementsPathBg};] {id}.cke_panel [border-color:{defaultBorder};] "),panel:new CKEDITOR.template(".cke_panel_grouptitle [{lightGradient}border-color:{defaultBorder};] .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menubutton:hover .cke_menubutton_icon, .cke_menubutton:focus .cke_menubutton_icon, .cke_menubutton:active .cke_menubutton_icon [background-color:{menubuttonIconHover};] .cke_menuseparator [background-color:{menubuttonIcon};] a:hover.cke_colorbox, a:focus.cke_colorbox, a:active.cke_colorbox [border-color:{defaultBorder};] a:hover.cke_colorauto, a:hover.cke_colormore, a:focus.cke_colorauto, a:focus.cke_colormore, a:active.cke_colorauto, a:active.cke_colormore [background-color:{ckeColorauto};border-color:{defaultBorder};] ")};return function(f,c){var b=f.uiColor,b={id:"."+f.id,defaultBorder:a(b,-0.1),defaultGradient:d(a(b,0.9),b),lightGradient:d(a(b,1),a(b,0.7)),mediumGradient:d(a(b,0.8),a(b,0.5)),ckeButtonOn:d(a(b,0.6),a(b,0.7)),ckeResizer:a(b,-0.4),ckeToolbarSeparator:a(b,0.5),ckeColorauto:a(b,0.8),dialogBody:a(b,0.7),dialogTabSelected:d("#FFFFFF","#FFFFFF"),dialogTabSelectedBorder:"#FFF",elementsPathColor:a(b,-0.6),elementsPathBg:b,menubuttonIcon:a(b,0.5),menubuttonIconHover:a(b,0.3)};return e[c].output(b).replace(/\[/g,"{").replace(/\]/g,"}")}}();CKEDITOR.plugins.add("dialogui",{onLoad:function(){var a=function(i){this._||(this._={});this._["default"]=this._.initValue=i["default"]||"";this._.required=i.required||!1;for(var h=[this._],j=1;j<arguments.length;j++){h.push(arguments[j])}h.push(!0);CKEDITOR.tools.extend.apply(CKEDITOR.tools,h);return this._},f={build:function(i,h,j){return new CKEDITOR.ui.dialog.textInput(i,h,j)}},b={build:function(i,h,j){return new CKEDITOR.ui.dialog[h.type](i,h,j)}},c={isChanged:function(){return this.getValue()!=this.getInitValue()},reset:function(h){this.setValue(this.getInitValue(),h)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._["default"]},getInitValue:function(){return this._.initValue}},d=CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onChange:function(i,h){this._.domOnChangeRegistered||(i.on("load",function(){this.getInputElement().on("change",function(){i.parts.dialog.isVisible()&&this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0);this.on("change",h)}},!0),g=/^on([A-Z]\w+)/,e=function(i){for(var h in i){(g.test(h)||"title"==h||"type"==h)&&delete i[h]}return i};CKEDITOR.tools.extend(CKEDITOR.ui.dialog,{labeledElement:function(i,h,k,m){if(!(4>arguments.length)){var j=a.call(this,h);j.labelId=CKEDITOR.tools.getNextId()+"_label";this._.children=[];var l={role:h.role||"presentation"};h.includeLabel&&(l["aria-labelledby"]=j.labelId);CKEDITOR.ui.dialog.uiElement.call(this,i,h,k,"div",null,l,function(){var n=[],o=h.required?" cke_required":"";if(h.labelLayout!="horizontal"){n.push('<label class="cke_dialog_ui_labeled_label'+o+'" ',' id="'+j.labelId+'"',j.inputId?' for="'+j.inputId+'"':"",(h.labelStyle?' style="'+h.labelStyle+'"':"")+">",h.label,"</label>",'<div class="cke_dialog_ui_labeled_content"',h.controlStyle?' style="'+h.controlStyle+'"':"",' role="presentation">',m.call(this,i,h),"</div>")}else{o={type:"hbox",widths:h.widths,padding:0,children:[{type:"html",html:'<label class="cke_dialog_ui_labeled_label'+o+'" id="'+j.labelId+'" for="'+j.inputId+'"'+(h.labelStyle?' style="'+h.labelStyle+'"':"")+">"+CKEDITOR.tools.htmlEncode(h.label)+"</span>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content"'+(h.controlStyle?' style="'+h.controlStyle+'"':"")+">"+m.call(this,i,h)+"</span>"}]};CKEDITOR.dialog._.uiElementBuilders.hbox.build(i,o,n)}return n.join("")})}},textInput:function(i,h,l){if(!(3>arguments.length)){a.call(this,h);var n=this._.inputId=CKEDITOR.tools.getNextId()+"_textInput",j={"class":"cke_dialog_ui_input_"+h.type,id:n,type:h.type};h.validate&&(this.validate=h.validate);h.maxLength&&(j.maxlength=h.maxLength);h.size&&(j.size=h.size);h.inputStyle&&(j.style=h.inputStyle);var m=this,o=!1;i.on("load",function(){m.getInputElement().on("keydown",function(k){k.data.getKeystroke()==13&&(o=true)});m.getInputElement().on("keyup",function(k){if(k.data.getKeystroke()==13&&o){i.getButton("ok")&&setTimeout(function(){i.getButton("ok").click()},0);o=false}},null,null,1000)});CKEDITOR.ui.dialog.labeledElement.call(this,i,h,l,function(){var k=['<div class="cke_dialog_ui_input_',h.type,'" role="presentation"'];h.width&&k.push('style="width:'+h.width+'" ');k.push("><input ");j["aria-labelledby"]=this._.labelId;this._.required&&(j["aria-required"]=this._.required);for(var p in j){k.push(p+'="'+j[p]+'" ')}k.push(" /></div>");return k.join("")})}},textarea:function(i,h,k){if(!(3>arguments.length)){a.call(this,h);var m=this,j=this._.inputId=CKEDITOR.tools.getNextId()+"_textarea",l={};h.validate&&(this.validate=h.validate);l.rows=h.rows||5;l.cols=h.cols||20;l["class"]="cke_dialog_ui_input_textarea "+(h["class"]||"");"undefined"!=typeof h.inputStyle&&(l.style=h.inputStyle);h.dir&&(l.dir=h.dir);CKEDITOR.ui.dialog.labeledElement.call(this,i,h,k,function(){l["aria-labelledby"]=this._.labelId;this._.required&&(l["aria-required"]=this._.required);var n=['<div class="cke_dialog_ui_input_textarea" role="presentation"><textarea id="',j,'" '],o;for(o in l){n.push(o+'="'+CKEDITOR.tools.htmlEncode(l[o])+'" ')}n.push(">",CKEDITOR.tools.htmlEncode(m._["default"]),"</textarea></div>");return n.join("")})}},checkbox:function(i,h,j){if(!(3>arguments.length)){var k=a.call(this,h,{"default":!!h["default"]});h.validate&&(this.validate=h.validate);CKEDITOR.ui.dialog.uiElement.call(this,i,h,j,"span",null,null,function(){var l=CKEDITOR.tools.extend({},h,{id:h.id?h.id+"_checkbox":CKEDITOR.tools.getNextId()+"_checkbox"},true),n=[],m=CKEDITOR.tools.getNextId()+"_label",o={"class":"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":m};e(l);if(h["default"]){o.checked="checked"}if(typeof l.inputStyle!="undefined"){l.style=l.inputStyle}k.checkbox=new CKEDITOR.ui.dialog.uiElement(i,l,n,"input",null,o);n.push(' <label id="',m,'" for="',o.id,'"'+(h.labelStyle?' style="'+h.labelStyle+'"':"")+">",CKEDITOR.tools.htmlEncode(h.label),"</label>");return n.join("")})}},radio:function(i,h,k){if(!(3>arguments.length)){a.call(this,h);this._["default"]||(this._["default"]=this._.initValue=h.items[0][1]);h.validate&&(this.validate=h.valdiate);var l=[],j=this;h.role="radiogroup";h.includeLabel=!0;CKEDITOR.ui.dialog.labeledElement.call(this,i,h,k,function(){for(var r=[],p=[],s=(h.id?h.id:CKEDITOR.tools.getNextId())+"_radio",u=0;u<h.items.length;u++){var v=h.items[u],t=v[2]!==void 0?v[2]:v[0],w=v[1]!==void 0?v[1]:v[0],x=CKEDITOR.tools.getNextId()+"_radio_input",y=x+"_label",x=CKEDITOR.tools.extend({},h,{id:x,title:null,type:null},true),t=CKEDITOR.tools.extend({},x,{title:t},true),z={type:"radio","class":"cke_dialog_ui_radio_input",name:s,value:w,"aria-labelledby":y},A=[];if(j._["default"]==w){z.checked="checked"}e(x);e(t);if(typeof x.inputStyle!="undefined"){x.style=x.inputStyle}x.keyboardFocusable=true;l.push(new CKEDITOR.ui.dialog.uiElement(i,x,A,"input",null,z));A.push(" ");new CKEDITOR.ui.dialog.uiElement(i,t,A,"label",null,{id:y,"for":z.id},v[0]);r.push(A.join(""))}new CKEDITOR.ui.dialog.hbox(i,l,r,p);return p.join("")});this._.children=l}},button:function(i,h,k){if(arguments.length){"function"==typeof h&&(h=h(i.getParentEditor()));a.call(this,h,{disabled:h.disabled||!1});CKEDITOR.event.implementOn(this);var m=this;i.on("load",function(){var n=this.getElement();(function(){n.on("click",function(o){m.click();o.data.preventDefault()});n.on("keydown",function(o){o.data.getKeystroke() in {32:1}&&(m.click(),o.data.preventDefault())})})();n.unselectable()},this);var j=CKEDITOR.tools.extend({},h);delete j.style;var l=CKEDITOR.tools.getNextId()+"_label";CKEDITOR.ui.dialog.uiElement.call(this,i,j,k,"a",null,{style:h.style,href:"javascript:void(0)",title:h.label,hidefocus:"true","class":h["class"],role:"button","aria-labelledby":l},'<span id="'+l+'" class="cke_dialog_ui_button">'+CKEDITOR.tools.htmlEncode(h.label)+"</span>")}},select:function(i,h,j){if(!(3>arguments.length)){var k=a.call(this,h);h.validate&&(this.validate=h.validate);k.inputId=CKEDITOR.tools.getNextId()+"_select";CKEDITOR.ui.dialog.labeledElement.call(this,i,h,j,function(){var l=CKEDITOR.tools.extend({},h,{id:h.id?h.id+"_select":CKEDITOR.tools.getNextId()+"_select"},true),n=[],m=[],o={id:k.inputId,"class":"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};n.push('<div class="cke_dialog_ui_input_',h.type,'" role="presentation"');h.width&&n.push('style="width:'+h.width+'" ');n.push(">");if(h.size!=void 0){o.size=h.size}if(h.multiple!=void 0){o.multiple=h.multiple}e(l);for(var p=0,q;p<h.items.length&&(q=h.items[p]);p++){m.push('<option value="',CKEDITOR.tools.htmlEncode(q[1]!==void 0?q[1]:q[0]).replace(/"/g,"&quot;"),'" /> ',CKEDITOR.tools.htmlEncode(q[0]))}if(typeof l.inputStyle!="undefined"){l.style=l.inputStyle}k.select=new CKEDITOR.ui.dialog.uiElement(i,l,n,"select",null,o,m.join(""));n.push("</div>");return n.join("")})}},file:function(i,h,j){if(!(3>arguments.length)){void 0===h["default"]&&(h["default"]="");var k=CKEDITOR.tools.extend(a.call(this,h),{definition:h,buttons:[]});h.validate&&(this.validate=h.validate);i.on("load",function(){CKEDITOR.document.getById(k.frameId).getParent().addClass("cke_dialog_ui_input_file")});CKEDITOR.ui.dialog.labeledElement.call(this,i,h,j,function(){k.frameId=CKEDITOR.tools.getNextId()+"_fileInput";var l=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" role="presentation" id="',k.frameId,'" title="',h.label,'" src="javascript:void('];l.push(CKEDITOR.env.ie?"(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"})()":"0");l.push(')"></iframe>');return l.join("")})}},fileButton:function(i,h,k){if(!(3>arguments.length)){a.call(this,h);var m=this;h.validate&&(this.validate=h.validate);var j=CKEDITOR.tools.extend({},h),l=j.onClick;j.className=(j.className?j.className+" ":"")+"cke_dialog_ui_button";j.onClick=function(n){var o=h["for"];if(!l||l.call(this,n)!==false){i.getContentElement(o[0],o[1]).submit();this.disable()}};i.on("load",function(){i.getContentElement(h["for"][0],h["for"][1])._.buttons.push(m)});CKEDITOR.ui.dialog.button.call(this,i,j,k)}},html:function(){var i=/^\s*<[\w:]+\s+([^>]*)?>/,h=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,j=/\/$/;return function(n,l,m){if(!(3>arguments.length)){var r=[],o=l.html;"<"!=o.charAt(0)&&(o="<span>"+o+"</span>");var p=l.focus;if(p){var q=this.focus;this.focus=function(){("function"==typeof p?p:q).call(this);this.fire("focus")};l.isFocusable&&(this.isFocusable=this.isFocusable);this.keyboardFocusable=!0}CKEDITOR.ui.dialog.uiElement.call(this,n,l,r,"span",null,null,"");r=r.join("").match(i);o=o.match(h)||["","",""];j.test(o[1])&&(o[1]=o[1].slice(0,-1),o[2]="/"+o[2]);m.push([o[1]," ",r[1]||"",o[2]].join(""))}}}(),fieldset:function(i,h,k,m,j){var l=j.label;this._={children:h};CKEDITOR.ui.dialog.uiElement.call(this,i,j,m,"fieldset",null,null,function(){var n=[];l&&n.push("<legend"+(j.labelStyle?' style="'+j.labelStyle+'"':"")+">"+l+"</legend>");for(var o=0;o<k.length;o++){n.push(k[o])}return n.join("")})}},!0);CKEDITOR.ui.dialog.html.prototype=new CKEDITOR.ui.dialog.uiElement;CKEDITOR.ui.dialog.labeledElement.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setLabel:function(i){var h=CKEDITOR.document.getById(this._.labelId);1>h.getChildCount()?(new CKEDITOR.dom.text(i,CKEDITOR.document)).appendTo(h):h.getChild(0).$.nodeValue=i;return this},getLabel:function(){var h=CKEDITOR.document.getById(this._.labelId);return !h||1>h.getChildCount()?"":h.getChild(0).getText()},eventProcessors:d},!0);CKEDITOR.ui.dialog.button.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{click:function(){return !this._.disabled?this.fire("click",{dialog:this._.dialog}):!1},enable:function(){this._.disabled=!1;var h=this.getElement();h&&h.removeClass("cke_disabled")},disable:function(){this._.disabled=!0;this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return !this._.disabled},eventProcessors:CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onClick:function(i,h){this.on("click",function(){h.apply(this,arguments)})}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0);CKEDITOR.ui.dialog.textInput.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return CKEDITOR.document.getById(this._.inputId)},focus:function(){var h=this.selectParentTab();setTimeout(function(){var i=h.getInputElement();i&&i.$.focus()},0)},select:function(){var h=this.selectParentTab();setTimeout(function(){var i=h.getInputElement();i&&(i.$.focus(),i.$.select())},0)},accessKeyUp:function(){this.select()},setValue:function(h){!h&&(h="");return CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this,arguments)},keyboardFocusable:!0},c,!0);CKEDITOR.ui.dialog.textarea.prototype=new CKEDITOR.ui.dialog.textInput;CKEDITOR.ui.dialog.select.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(i,h,k){var l=new CKEDITOR.dom.element("option",this.getDialog().getParentEditor().document),j=this.getInputElement().$;l.$.text=i;l.$.value=void 0===h||null===h?i:h;void 0===k||null===k?CKEDITOR.env.ie?j.add(l.$):j.add(l.$,null):j.add(l.$,k);return this},remove:function(h){this.getInputElement().$.remove(h);return this},clear:function(){for(var h=this.getInputElement().$;0<h.length;){h.remove(0)}return this},keyboardFocusable:!0},c,!0);CKEDITOR.ui.dialog.checkbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(i,h){this.getInputElement().$.checked=i;!h&&this.fire("change",{value:i})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(i,h){if(!CKEDITOR.env.ie||8<CKEDITOR.env.version){return d.onChange.apply(this,arguments)}i.on("load",function(){var j=this._.checkbox.getElement();j.on("propertychange",function(k){k=k.data.$;"checked"==k.propertyName&&this.fire("change",{value:j.$.checked})},this)},this);this.on("change",h);return null}},keyboardFocusable:!0},c,!0);CKEDITOR.ui.dialog.radio.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setValue:function(i,h){for(var k=this._.children,l,j=0;j<k.length&&(l=k[j]);j++){l.getElement().$.checked=l.getValue()==i}!h&&this.fire("change",{value:i})},getValue:function(){for(var i=this._.children,h=0;h<i.length;h++){if(i[h].getElement().$.checked){return i[h].getValue()}}return null},accessKeyUp:function(){var i=this._.children,h;for(h=0;h<i.length;h++){if(i[h].getElement().$.checked){i[h].getElement().focus();return}}i[0].getElement().focus()},eventProcessors:{onChange:function(i,h){if(CKEDITOR.env.ie){i.on("load",function(){for(var j=this._.children,k=this,l=0;l<j.length;l++){j[l].getElement().on("propertychange",function(m){m=m.data.$;"checked"==m.propertyName&&this.$.checked&&k.fire("change",{value:this.getAttribute("value")})})}},this),this.on("change",h)}else{return d.onChange.apply(this,arguments)}return null}}},c,!0);CKEDITOR.ui.dialog.file.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,c,{getInputElement:function(){var h=CKEDITOR.document.getById(this._.frameId).getFrameDocument();return 0<h.$.forms.length?new CKEDITOR.dom.element(h.$.forms[0].elements[0]):this.getElement()},submit:function(){this.getInputElement().getParent().$.submit();return this},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(i){var h=/^on([A-Z]\w+)/,k,l=function(m,n,o,p){m.on("formLoaded",function(){m.getInputElement().on(o,p,m)})},j;for(j in i){if(k=j.match(h)){this.eventProcessors[j]?this.eventProcessors[j].call(this,this._.dialog,i[j]):l(this,this._.dialog,k[1].toLowerCase(),i[j])}}return this},reset:function(){function j(){m.$.open();var i="";o.size&&(i=o.size-(CKEDITOR.env.ie?7:0));var k=h.frameId+"_input";m.$.write(['<html dir="'+p+'" lang="'+q+'"><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" dir="'+p+'" lang="'+q+'" action="',CKEDITOR.tools.htmlEncode(o.action),'"><label id="',h.labelId,'" for="',k,'" style="display:none">',CKEDITOR.tools.htmlEncode(o.label),'</label><input style="width:100%" id="',k,'" aria-labelledby="',h.labelId,'" type="file" name="',CKEDITOR.tools.htmlEncode(o.id||"cke_upload"),'" size="',CKEDITOR.tools.htmlEncode(0<i?i:""),'" /></form></body></html><script>',CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"","window.parent.CKEDITOR.tools.callFunction("+n+");","window.onbeforeunload = function() {window.parent.CKEDITOR.tools.callFunction("+r+")}","</script>"].join(""));m.$.close();for(i=0;i<l.length;i++){l[i].enable()}}var h=this._,m=CKEDITOR.document.getById(h.frameId).getFrameDocument(),o=h.definition,l=h.buttons,n=this.formLoadedNumber,r=this.formUnloadNumber,p=h.dialog._.editor.lang.dir,q=h.dialog._.editor.langCode;n||(n=this.formLoadedNumber=CKEDITOR.tools.addFunction(function(){this.fire("formLoaded")},this),r=this.formUnloadNumber=CKEDITOR.tools.addFunction(function(){this.getInputElement().clearCustomData()},this),this.getDialog()._.editor.on("destroy",function(){CKEDITOR.tools.removeFunction(n);CKEDITOR.tools.removeFunction(r)}));CKEDITOR.env.gecko?setTimeout(j,500):j()},getValue:function(){return this.getInputElement().$.value||""},setInitValue:function(){this._.initValue=""},eventProcessors:{onChange:function(i,h){this._.domOnChangeRegistered||(this.on("formLoaded",function(){this.getInputElement().on("change",function(){this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0);this.on("change",h)}},keyboardFocusable:!0},!0);CKEDITOR.ui.dialog.fileButton.prototype=new CKEDITOR.ui.dialog.button;CKEDITOR.ui.dialog.fieldset.prototype=CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype);CKEDITOR.dialog.addUIElement("text",f);CKEDITOR.dialog.addUIElement("password",f);CKEDITOR.dialog.addUIElement("textarea",b);CKEDITOR.dialog.addUIElement("checkbox",b);CKEDITOR.dialog.addUIElement("radio",b);CKEDITOR.dialog.addUIElement("button",b);CKEDITOR.dialog.addUIElement("select",b);CKEDITOR.dialog.addUIElement("file",b);CKEDITOR.dialog.addUIElement("fileButton",b);CKEDITOR.dialog.addUIElement("html",b);CKEDITOR.dialog.addUIElement("fieldset",{build:function(k,j,m){for(var o=j.children,l,n=[],q=[],p=0;p<o.length&&(l=o[p]);p++){var r=[];n.push(r);q.push(CKEDITOR.dialog._.uiElementBuilders[l.type].build(k,l,r))}return new CKEDITOR.ui.dialog[j.type](k,q,n,m,j)}})}});CKEDITOR.DIALOG_RESIZE_NONE=0;CKEDITOR.DIALOG_RESIZE_WIDTH=1;CKEDITOR.DIALOG_RESIZE_HEIGHT=2;CKEDITOR.DIALOG_RESIZE_BOTH=3;(function(){function D(){for(var q=this._.tabIdList.length,r=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId)+q,s=r-1;s>r-q;s--){if(this._.tabs[this._.tabIdList[s%q]][0].$.offsetHeight){return this._.tabIdList[s%q]}}return null}function ab(){for(var q=this._.tabIdList.length,r=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId),s=r+1;s<r+q;s++){if(this._.tabs[this._.tabIdList[s%q]][0].$.offsetHeight){return this._.tabIdList[s%q]}}return null}function e(q,r){for(var s=q.$.getElementsByTagName("input"),u=0,t=s.length;u<t;u++){var w=new CKEDITOR.dom.element(s[u]);"text"==w.getAttribute("type").toLowerCase()&&(r?(w.setAttribute("value",w.getCustomData("fake_value")||""),w.removeCustomData("fake_value")):(w.setCustomData("fake_value",w.getAttribute("value")),w.setAttribute("value","")))}}function n(q,r){var s=this.getInputElement();s&&(q?s.removeAttribute("aria-invalid"):s.setAttribute("aria-invalid",!0));q||(this.select?this.select():this.focus());r&&alert(r);this.fire("validated",{valid:q,msg:r})}function p(){var q=this.getInputElement();q&&q.removeAttribute("aria-invalid")}function x(q){var q=CKEDITOR.dom.element.createFromHtml(CKEDITOR.addTemplate("dialog",C).output({id:CKEDITOR.tools.getNextNumber(),editorId:q.id,langDir:q.lang.dir,langCode:q.langCode,editorDialogClass:"cke_editor_"+q.name.replace(/\./g,"\\.")+"_dialog",closeTitle:q.lang.common.close,hidpi:CKEDITOR.env.hidpi?"cke_hidpi":""})),r=q.getChild([0,0,0,0,0]),s=r.getChild(0),u=r.getChild(1);if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var t="javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())";CKEDITOR.dom.element.createFromHtml('<iframe frameBorder="0" class="cke_iframe_shim" src="'+t+'" tabIndex="-1"></iframe>').appendTo(r.getParent())}s.unselectable();u.unselectable();return{element:q,parts:{dialog:q.getChild(0),title:s,close:u,tabs:r.getChild(2),contents:r.getChild([3,0,0,0]),footer:r.getChild([3,0,1,0])}}}function f(q,r,s){this.element=r;this.focusIndex=s;this.tabIndex=0;this.isFocusable=function(){return !r.getAttribute("disabled")&&r.isVisible()};this.focus=function(){q._.currentFocusIndex=this.focusIndex;this.element.focus()};r.on("keydown",function(t){t.data.getKeystroke() in {32:1,13:1}&&this.fire("click")});r.on("focus",function(){this.fire("mouseover")});r.on("blur",function(){this.fire("mouseout")})}function aa(q){function r(){q.layout()}var s=CKEDITOR.document.getWindow();s.on("resize",r);q.on("hide",function(){s.removeListener("resize",r)})}function g(q,r){this._={dialog:q};CKEDITOR.tools.extend(this,r)}function ac(q){function r(B){var E=q.getSize(),F=CKEDITOR.document.getWindow().getViewPaneSize(),J=B.data.$.screenX,G=B.data.$.screenY,I=J-u.x,H=G-u.y;u={x:J,y:G};t.x+=I;t.y+=H;q.move(t.x+A[3]<w?-A[3]:t.x-A[1]>F.width-E.width-w?F.width-E.width+("rtl"==z.lang.dir?0:A[1]):t.x,t.y+A[0]<w?-A[0]:t.y-A[2]>F.height-E.height-w?F.height-E.height+A[2]:t.y,1);B.data.preventDefault()}function s(){CKEDITOR.document.removeListener("mousemove",r);CKEDITOR.document.removeListener("mouseup",s);if(CKEDITOR.env.ie6Compat){var B=o.getChild(0).getFrameDocument();B.removeListener("mousemove",r);B.removeListener("mouseup",s)}}var u=null,t=null;q.getElement().getFirst();var z=q.getParentEditor(),w=z.config.dialog_magnetDistance,A=CKEDITOR.skin.margins||[0,0,0,0];"undefined"==typeof w&&(w=20);q.parts.title.on("mousedown",function(B){u={x:B.data.$.screenX,y:B.data.$.screenY};CKEDITOR.document.on("mousemove",r);CKEDITOR.document.on("mouseup",s);t=q.getPosition();if(CKEDITOR.env.ie6Compat){var E=o.getChild(0).getFrameDocument();E.on("mousemove",r);E.on("mouseup",s)}B.data.preventDefault()},q)}function ad(q){var r,s;function u(K){var M="rtl"==A.lang.dir,N=I.width,J=I.height,L=N+(K.data.$.screenX-r)*(M?-1:1)*(q._.moved?1:2),O=J+(K.data.$.screenY-s)*(q._.moved?1:2),P=q._.element.getFirst(),P=M&&P.getComputedStyle("right"),Q=q.getPosition();Q.y+O>B.height&&(O=B.height-Q.y);if((M?P:Q.x)+L>B.width){L=B.width-(M?P:Q.x)}if(w==CKEDITOR.DIALOG_RESIZE_WIDTH||w==CKEDITOR.DIALOG_RESIZE_BOTH){N=Math.max(z.minWidth||0,L-G)}if(w==CKEDITOR.DIALOG_RESIZE_HEIGHT||w==CKEDITOR.DIALOG_RESIZE_BOTH){J=Math.max(z.minHeight||0,O-F)}q.resize(N,J);q._.moved||q.layout();K.data.preventDefault()}function t(){CKEDITOR.document.removeListener("mouseup",t);CKEDITOR.document.removeListener("mousemove",u);E&&(E.remove(),E=null);if(CKEDITOR.env.ie6Compat){var J=o.getChild(0).getFrameDocument();J.removeListener("mouseup",t);J.removeListener("mousemove",u)}}var z=q.definition,w=z.resizable;if(w!=CKEDITOR.DIALOG_RESIZE_NONE){var A=q.getParentEditor(),G,F,B,I,E,H=CKEDITOR.tools.addFunction(function(J){I=q.getSize();var K=q.parts.contents;K.$.getElementsByTagName("iframe").length&&(E=CKEDITOR.dom.element.createFromHtml('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>'),K.append(E));F=I.height-q.parts.contents.getSize("height",!(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.quirks));G=I.width-q.parts.contents.getSize("width",1);r=J.screenX;s=J.screenY;B=CKEDITOR.document.getWindow().getViewPaneSize();CKEDITOR.document.on("mousemove",u);CKEDITOR.document.on("mouseup",t);CKEDITOR.env.ie6Compat&&(K=o.getChild(0).getFrameDocument(),K.on("mousemove",u),K.on("mouseup",t));J.preventDefault&&J.preventDefault()});q.on("load",function(){var J="";w==CKEDITOR.DIALOG_RESIZE_WIDTH?J=" cke_resizer_horizontal":w==CKEDITOR.DIALOG_RESIZE_HEIGHT&&(J=" cke_resizer_vertical");J=CKEDITOR.dom.element.createFromHtml('<div class="cke_resizer'+J+" cke_resizer_"+A.lang.dir+'" title="'+CKEDITOR.tools.htmlEncode(A.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+H+', event )">'+("ltr"==A.lang.dir?"":"")+"</div>");q.parts.footer.append(J,1)});A.on("destroy",function(){CKEDITOR.tools.removeFunction(H)})}}function c(q){q.data.preventDefault(1)}function h(q){var r=CKEDITOR.document.getWindow(),s=q.config,u=s.dialog_backgroundCoverColor||"white",t=s.dialog_backgroundCoverOpacity,z=s.baseFloatZIndex,s=CKEDITOR.tools.genKey(u,t,z),w=ae[s];w?w.show():(z=['<div tabIndex="-1" style="position: ',CKEDITOR.env.ie6Compat?"absolute":"fixed","; z-index: ",z,"; top: 0px; left: 0px; ",!CKEDITOR.env.ie6Compat?"background-color: "+u:"",'" class="cke_dialog_background_cover">'],CKEDITOR.env.ie6Compat&&(u="<html><body style=\\'background-color:"+u+";\\'></body></html>",z.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:'),z.push("void((function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.write( '"+u+"' );document.close();")+"})())"),z.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')),z.push("</div>"),w=CKEDITOR.dom.element.createFromHtml(z.join("")),w.setOpacity(void 0!=t?t:0.5),w.on("keydown",c),w.on("keypress",c),w.on("keyup",c),w.appendTo(CKEDITOR.document.getBody()),ae[s]=w);q.focusManager.add(w);o=w;var q=function(){var E=r.getViewPaneSize();w.setStyles({width:E.width+"px",height:E.height+"px"})},A=function(){var E=r.getScrollPosition(),F=CKEDITOR.dialog._.currentTop;w.setStyles({left:E.x+"px",top:E.y+"px"});if(F){do{E=F.getPosition();F.move(E.x,E.y)}while(F=F._.parentDialog)}};d=q;r.on("resize",q);q();(!CKEDITOR.env.mac||!CKEDITOR.env.webkit)&&w.focus();if(CKEDITOR.env.ie6Compat){var B=function(){A();arguments.callee.prevScrollHandler.apply(this,arguments)};r.$.setTimeout(function(){B.prevScrollHandler=window.onscroll||function(){};window.onscroll=B},0);A()}}function i(q){o&&(q.focusManager.remove(o),q=CKEDITOR.document.getWindow(),o.hide(),q.removeListener("resize",d),CKEDITOR.env.ie6Compat&&q.$.setTimeout(function(){window.onscroll=window.onscroll&&window.onscroll.prevScrollHandler||null},0),d=null)}var v=CKEDITOR.tools.cssLength,C='<div class="cke_reset_all {editorId} {editorDialogClass} {hidpi}" dir="{langDir}" lang="{langCode}" role="dialog" aria-labelledby="cke_dialog_title_{id}"><table class="cke_dialog '+CKEDITOR.env.cssClass+' cke_{langDir}" style="position:absolute" role="presentation"><tr><td role="presentation"><div class="cke_dialog_body" role="presentation"><div id="cke_dialog_title_{id}" class="cke_dialog_title" role="presentation"></div><a id="cke_dialog_close_button_{id}" class="cke_dialog_close_button" href="javascript:void(0)" title="{closeTitle}" role="button"><span class="cke_label">X</span></a><div id="cke_dialog_tabs_{id}" class="cke_dialog_tabs" role="tablist"></div><table class="cke_dialog_contents" role="presentation"><tr><td id="cke_dialog_contents_{id}" class="cke_dialog_contents_body" role="presentation"></td></tr><tr><td id="cke_dialog_footer_{id}" class="cke_dialog_footer" role="presentation"></td></tr></table></div></td></tr></table></div>';CKEDITOR.dialog=function(q,r){function s(){var M=G._.focusList;M.sort(function(P,Q){return P.tabIndex!=Q.tabIndex?Q.tabIndex-P.tabIndex:P.focusIndex-Q.focusIndex});for(var N=M.length,O=0;O<N;O++){M[O].focusIndex=O}}function u(M){var N=G._.focusList,M=M||0;if(!(1>N.length)){var O=G._.currentFocusIndex;try{N[O].getInputElement().$.blur()}catch(Q){}for(var P=O=(O+M+N.length)%N.length;M&&!N[P].isFocusable()&&!(P=(P+M+N.length)%N.length,P==O);){}N[P].focus();"text"==N[P].type&&N[P].select()}}function t(M){if(G==CKEDITOR.dialog._.currentTop){var N=M.data.getKeystroke(),O="rtl"==q.lang.dir;J=E=0;if(9==N||N==CKEDITOR.SHIFT+9){N=N==CKEDITOR.SHIFT+9,G._.tabBarMode?(N=N?D.call(G):ab.call(G),G.selectPage(N),G._.tabs[N][0].focus()):u(N?-1:1),J=1}else{if(N==CKEDITOR.ALT+121&&!G._.tabBarMode&&1<G.getPageCount()){G._.tabBarMode=!0,G._.tabs[G._.currentTabId][0].focus(),J=1}else{if((37==N||39==N)&&G._.tabBarMode){N=N==(O?39:37)?D.call(G):ab.call(G),G.selectPage(N),G._.tabs[N][0].focus(),J=1}else{if((13==N||32==N)&&G._.tabBarMode){this.selectPage(this._.currentTabId),this._.tabBarMode=!1,this._.currentFocusIndex=-1,u(1),J=1}else{if(13==N){N=M.data.getTarget();if(!N.is("a","button","select","textarea")&&(!N.is("input")||"button"!=N.$.type)){(N=this.getButton("ok"))&&CKEDITOR.tools.setTimeout(N.click,0,N),J=1}E=1}else{if(27==N){(N=this.getButton("cancel"))?CKEDITOR.tools.setTimeout(N.click,0,N):!1!==this.fire("cancel",{hide:!0}).hide&&this.hide(),E=1}else{return}}}}}}z(M)}}function z(M){J?M.data.preventDefault(1):E&&M.data.stopPropagation()}var w=CKEDITOR.dialog._.dialogDefinitions[r],A=CKEDITOR.tools.clone(af),H=q.config.dialog_buttonsOrder||"OS",F=q.lang.dir,B={},J,E;("OS"==H&&CKEDITOR.env.mac||"rtl"==H&&"ltr"==F||"ltr"==H&&"rtl"==F)&&A.buttons.reverse();w=CKEDITOR.tools.extend(w(q),A);w=CKEDITOR.tools.clone(w);w=new j(this,w);A=x(q);this._={editor:q,element:A.element,name:r,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1};this.parts=A.parts;CKEDITOR.tools.setTimeout(function(){q.fire("ariaWidget",this.parts.contents)},0,this);A={position:CKEDITOR.env.ie6Compat?"absolute":"fixed",top:0,visibility:"hidden"};A["rtl"==F?"right":"left"]=0;this.parts.dialog.setStyles(A);CKEDITOR.event.call(this);this.definition=w=CKEDITOR.fire("dialogDefinition",{name:r,definition:w},q).definition;if(!("removeDialogTabs" in q._)&&q.config.removeDialogTabs){A=q.config.removeDialogTabs.split(";");for(F=0;F<A.length;F++){if(H=A[F].split(":"),2==H.length){var I=H[0];B[I]||(B[I]=[]);B[I].push(H[1])}}q._.removeDialogTabs=B}if(q._.removeDialogTabs&&(B=q._.removeDialogTabs[r])){for(F=0;F<B.length;F++){w.removeContents(B[F])}}if(w.onLoad){this.on("load",w.onLoad)}if(w.onShow){this.on("show",w.onShow)}if(w.onHide){this.on("hide",w.onHide)}if(w.onOk){this.on("ok",function(M){q.fire("saveSnapshot");setTimeout(function(){q.fire("saveSnapshot")},0);!1===w.onOk.call(this,M)&&(M.data.hide=!1)})}if(w.onCancel){this.on("cancel",function(M){!1===w.onCancel.call(this,M)&&(M.data.hide=!1)})}var G=this,K=function(M){var N=G._.contents,O=!1,P;for(P in N){for(var Q in N[P]){if(O=M.call(this,N[P][Q])){return}}}};this.on("ok",function(M){K(function(N){if(N.validate){var O=N.validate(this),P="string"==typeof O||!1===O;P&&(M.data.hide=!1,M.stop());n.call(N,!P,"string"==typeof O?O:void 0);return P}})},this,null,0);this.on("cancel",function(M){K(function(N){if(N.isChanged()){return !q.config.dialog_noConfirmCancel&&!confirm(q.lang.common.confirmCancel)&&(M.data.hide=!1),!0}})},this,null,0);this.parts.close.on("click",function(M){!1!==this.fire("cancel",{hide:!0}).hide&&this.hide();M.data.preventDefault()},this);this.changeFocus=u;var L=this._.element;q.focusManager.add(L,1);this.on("show",function(){L.on("keydown",t,this);if(CKEDITOR.env.gecko){L.on("keypress",z,this)}});this.on("hide",function(){L.removeListener("keydown",t);CKEDITOR.env.gecko&&L.removeListener("keypress",z);K(function(M){p.apply(M)})});this.on("iframeAdded",function(M){(new CKEDITOR.dom.document(M.data.iframe.$.contentWindow.document)).on("keydown",t,this,null,0)});this.on("show",function(){s();if(q.config.dialog_startupFocusTab&&1<G._.pageCount){G._.tabBarMode=!0,G._.tabs[G._.currentTabId][0].focus()}else{if(!this._.hasFocus){if(this._.currentFocusIndex=-1,w.onFocus){var M=w.onFocus.call(this);M&&M.focus()}else{u(1)}}}},this,null,4294967295);if(CKEDITOR.env.ie6Compat){this.on("load",function(){var M=this.getElement(),N=M.getFirst();N.remove();N.appendTo(M)},this)}ac(this);ad(this);(new CKEDITOR.dom.text(w.title,CKEDITOR.document)).appendTo(this.parts.title);for(F=0;F<w.contents.length;F++){(B=w.contents[F])&&this.addPage(B)}this.parts.tabs.on("click",function(M){var N=M.data.getTarget();N.hasClass("cke_dialog_tab")&&(N=N.$.id,this.selectPage(N.substring(4,N.lastIndexOf("_"))),this._.tabBarMode&&(this._.tabBarMode=!1,this._.currentFocusIndex=-1,u(1)),M.data.preventDefault())},this);F=[];B=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:w.buttons},F).getChild();this.parts.footer.setHtml(F.join(""));for(F=0;F<B.length;F++){this._.buttons[B[F].id]=B[F]}};CKEDITOR.dialog.prototype={destroy:function(){this.hide();this._.element.remove()},resize:function(){return function(q,r){if(!this._.contentSize||!(this._.contentSize.width==q&&this._.contentSize.height==r)){CKEDITOR.dialog.fire("resize",{dialog:this,width:q,height:r},this._.editor),this.fire("resize",{width:q,height:r},this._.editor),this.parts.contents.setStyles({width:q+"px",height:r+"px"}),"rtl"==this._.editor.lang.dir&&this._.position&&(this._.position.x=CKEDITOR.document.getWindow().getViewPaneSize().width-this._.contentSize.width-parseInt(this._.element.getFirst().getStyle("right"),10)),this._.contentSize={width:q,height:r}}}}(),getSize:function(){var q=this._.element.getFirst();return{width:q.$.offsetWidth||0,height:q.$.offsetHeight||0}},move:function(q,r,s){var u=this._.element.getFirst(),t="rtl"==this._.editor.lang.dir,w="fixed"==u.getComputedStyle("position");CKEDITOR.env.ie&&u.setStyle("zoom","100%");if(!w||!this._.position||!(this._.position.x==q&&this._.position.y==r)){this._.position={x:q,y:r},w||(w=CKEDITOR.document.getWindow().getScrollPosition(),q+=w.x,r+=w.y),t&&(w=this.getSize(),q=CKEDITOR.document.getWindow().getViewPaneSize().width-w.width-q),r={top:(0<r?r:0)+"px"},r[t?"right":"left"]=(0<q?q:0)+"px",u.setStyles(r),s&&(this._.moved=1)}},getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var q=this._.element,r=this.definition;!q.getParent()||!q.getParent().equals(CKEDITOR.document.getBody())?q.appendTo(CKEDITOR.document.getBody()):q.setStyle("display","block");this.resize(this._.contentSize&&this._.contentSize.width||r.width||r.minWidth,this._.contentSize&&this._.contentSize.height||r.height||r.minHeight);this.reset();this.selectPage(this.definition.contents[0].id);null===CKEDITOR.dialog._.currentZIndex&&(CKEDITOR.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex);this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex+=10);null===CKEDITOR.dialog._.currentTop?(CKEDITOR.dialog._.currentTop=this,this._.parentDialog=null,h(this._.editor)):(this._.parentDialog=CKEDITOR.dialog._.currentTop,this._.parentDialog.getElement().getFirst().$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2),CKEDITOR.dialog._.currentTop=this);q.on("keydown",k);q.on("keyup",l);this._.hasFocus=!1;for(var s in r.contents){if(r.contents[s]){var q=r.contents[s],u=this._.tabs[q.id],t=q.requiredContent,z=0;if(u){for(var w in this._.contents[q.id]){var A=this._.contents[q.id][w];"hbox"==A.type||("vbox"==A.type||!A.getInputElement())||(A.requiredContent&&!this._.editor.activeFilter.check(A.requiredContent)?A.disable():(A.enable(),z++))}!z||t&&!this._.editor.activeFilter.check(t)?u[0].addClass("cke_dialog_tab_disabled"):u[0].removeClass("cke_dialog_tab_disabled")}}}CKEDITOR.tools.setTimeout(function(){this.layout();aa(this);this.parts.dialog.setStyle("visibility","");this.fireOnce("load",{});CKEDITOR.ui.fire("ready",this);this.fire("show",{});this._.editor.fire("dialogShow",this);this._.parentDialog||this._.editor.focusManager.lock();this.foreach(function(B){B.setInitValue&&B.setInitValue()})},100,this)},layout:function(){var q=this.parts.dialog,r=this.getSize(),s=CKEDITOR.document.getWindow().getViewPaneSize(),u=(s.width-r.width)/2,t=(s.height-r.height)/2;CKEDITOR.env.ie6Compat||(r.height+(0<t?t:0)>s.height||r.width+(0<u?u:0)>s.width?q.setStyle("position","absolute"):q.setStyle("position","fixed"));this.move(this._.moved?this._.position.x:u,this._.moved?this._.position.y:t)},foreach:function(q){for(var r in this._.contents){for(var s in this._.contents[r]){q.call(this,this._.contents[r][s])}}return this},reset:function(){var q=function(r){r.reset&&r.reset(1)};return function(){this.foreach(q);return this}}(),setupContent:function(){var q=arguments;this.foreach(function(r){r.setup&&r.setup.apply(r,q)})},commitContent:function(){var q=arguments;this.foreach(function(r){CKEDITOR.env.ie&&this._.currentFocusIndex==r.focusIndex&&r.getInputElement().$.blur();r.commit&&r.commit.apply(r,q)})},hide:function(){if(this.parts.dialog.isVisible()){this.fire("hide",{});this._.editor.fire("dialogHide",this);this.selectPage(this._.tabIdList[0]);var q=this._.element;q.setStyle("display","none");this.parts.dialog.setStyle("visibility","hidden");for(ag(this);CKEDITOR.dialog._.currentTop!=this;){CKEDITOR.dialog._.currentTop.hide()}if(this._.parentDialog){var r=this._.parentDialog.getElement().getFirst();r.setStyle("z-index",parseInt(r.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))}else{i(this._.editor)}if(CKEDITOR.dialog._.currentTop=this._.parentDialog){CKEDITOR.dialog._.currentZIndex-=10}else{CKEDITOR.dialog._.currentZIndex=null;q.removeListener("keydown",k);q.removeListener("keyup",l);var s=this._.editor;s.focus();setTimeout(function(){s.focusManager.unlock()},0)}delete this._.parentDialog;this.foreach(function(t){t.resetInitValue&&t.resetInitValue()})}},addPage:function(q){if(!q.requiredContent||this._.editor.filter.check(q.requiredContent)){for(var r=[],s=q.label?' title="'+CKEDITOR.tools.htmlEncode(q.label)+'"':"",u=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:q.elements,expand:!!q.expand,padding:q.padding,style:q.style||"width: 100%;"},r),t=this._.contents[q.id]={},z=u.getChild(),w=0;u=z.shift();){!u.notAllowed&&("hbox"!=u.type&&"vbox"!=u.type)&&w++,t[u.id]=u,"function"==typeof u.getChild&&z.push.apply(z,u.getChild())}w||(q.hidden=!0);r=CKEDITOR.dom.element.createFromHtml(r.join(""));r.setAttribute("role","tabpanel");u=CKEDITOR.env;t="cke_"+q.id+"_"+CKEDITOR.tools.getNextNumber();s=CKEDITOR.dom.element.createFromHtml(['<a class="cke_dialog_tab"',0<this._.pageCount?" cke_last":"cke_first",s,q.hidden?' style="display:none"':"",' id="',t,'"',u.gecko&&!u.hc?"":' href="javascript:void(0)"',' tabIndex="-1" hidefocus="true" role="tab">',q.label,"</a>"].join(""));r.setAttribute("aria-labelledby",t);this._.tabs[q.id]=[s,r];this._.tabIdList.push(q.id);!q.hidden&&this._.pageCount++;this._.lastTab=s;this.updateStyle();r.setAttribute("name",q.id);r.appendTo(this.parts.contents);s.unselectable();this.parts.tabs.append(s);q.accessKey&&(m(this,this,"CTRL+"+q.accessKey,ah,aj),this._.accessKeyMap["CTRL+"+q.accessKey]=q.id)}},selectPage:function(q){if(this._.currentTabId!=q&&!this._.tabs[q][0].hasClass("cke_dialog_tab_disabled")&&!1!==this.fire("selectPage",{page:q,currentPage:this._.currentTabId})){for(var r in this._.tabs){var s=this._.tabs[r][0],u=this._.tabs[r][1];r!=q&&(s.removeClass("cke_dialog_tab_selected"),u.hide());u.setAttribute("aria-hidden",r!=q)}var t=this._.tabs[q];t[0].addClass("cke_dialog_tab_selected");CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?(e(t[1]),t[1].show(),setTimeout(function(){e(t[1],1)},0)):t[1].show();this._.currentTabId=q;this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,q)}},updateStyle:function(){this.parts.dialog[(1===this._.pageCount?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(q){var r=this._.tabs[q]&&this._.tabs[q][0];r&&(1!=this._.pageCount&&r.isVisible())&&(q==this._.currentTabId&&this.selectPage(D.call(this)),r.hide(),this._.pageCount--,this.updateStyle())},showPage:function(q){if(q=this._.tabs[q]&&this._.tabs[q][0]){q.show(),this._.pageCount++,this.updateStyle()}},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(q,r){var s=this._.contents[q];return s&&s[r]},getValueOf:function(q,r){return this.getContentElement(q,r).getValue()},setValueOf:function(q,r,s){return this.getContentElement(q,r).setValue(s)},getButton:function(q){return this._.buttons[q]},click:function(q){return this._.buttons[q].click()},disableButton:function(q){return this._.buttons[q].disable()},enableButton:function(q){return this._.buttons[q].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(q,r){if("undefined"==typeof r){r=this._.focusList.length,this._.focusList.push(new f(this,q,r))}else{this._.focusList.splice(r,0,new f(this,q,r));for(var s=r+1;s<this._.focusList.length;s++){this._.focusList[s].focusIndex++}}}};CKEDITOR.tools.extend(CKEDITOR.dialog,{add:function(q,r){if(!this._.dialogDefinitions[q]||"function"==typeof r){this._.dialogDefinitions[q]=r}},exists:function(q){return !!this._.dialogDefinitions[q]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},isTabEnabled:function(q,r,s){q=q.config.removeDialogTabs;return !(q&&q.match(RegExp("(?:^|;)"+r+":"+s+"(?:$|;)","i")))},okButton:function(){var q=function(r,s){s=s||{};return CKEDITOR.tools.extend({id:"ok",type:"button",label:r.lang.common.ok,"class":"cke_dialog_ui_button_ok",onClick:function(t){t=t.data.dialog;!1!==t.fire("ok",{hide:!0}).hide&&t.hide()}},s,!0)};q.type="button";q.override=function(r){return CKEDITOR.tools.extend(function(s){return q(s,r)},{type:"button"},!0)};return q}(),cancelButton:function(){var q=function(r,s){s=s||{};return CKEDITOR.tools.extend({id:"cancel",type:"button",label:r.lang.common.cancel,"class":"cke_dialog_ui_button_cancel",onClick:function(t){t=t.data.dialog;!1!==t.fire("cancel",{hide:!0}).hide&&t.hide()}},s,!0)};q.type="button";q.override=function(r){return CKEDITOR.tools.extend(function(s){return q(s,r)},{type:"button"},!0)};return q}(),addUIElement:function(q,r){this._.uiElementBuilders[q]=r}});CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null};CKEDITOR.event.implementOn(CKEDITOR.dialog);CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype);var af={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]},ai=function(q,r,s){for(var u=0,t;t=q[u];u++){if(t.id==r||s&&t[s]&&(t=ai(t[s],r,s))){return t}}return null},a=function(q,r,s,u,t){if(s){for(var z=0,w;w=q[z];z++){if(w.id==s){return q.splice(z,0,r),r}if(u&&w[u]&&(w=a(w[u],r,s,u,!0))){return w}}if(t){return null}}q.push(r);return r},b=function(q,r,s){for(var u=0,t;t=q[u];u++){if(t.id==r){return q.splice(u,1)}if(s&&t[s]&&(t=b(t[s],r,s))){return t}}return null},j=function(q,r){this.dialog=q;for(var s=r.contents,u=0,t;t=s[u];u++){s[u]=t&&new g(q,t)}CKEDITOR.tools.extend(this,r)};j.prototype={getContents:function(q){return ai(this.contents,q)},getButton:function(q){return ai(this.buttons,q)},addContents:function(q,r){return a(this.contents,q,r)},addButton:function(q,r){return a(this.buttons,q,r)},removeContents:function(q){b(this.contents,q)},removeButton:function(q){b(this.buttons,q)}};g.prototype={get:function(q){return ai(this.elements,q,"children")},add:function(q,r){return a(this.elements,q,r,"children")},remove:function(q){b(this.elements,q,"children")}};var d,ae={},o,y={},k=function(q){var r=q.data.$.ctrlKey||q.data.$.metaKey,s=q.data.$.altKey,u=q.data.$.shiftKey,t=String.fromCharCode(q.data.$.keyCode);if((r=y[(r?"CTRL+":"")+(s?"ALT+":"")+(u?"SHIFT+":"")+t])&&r.length){r=r[r.length-1],r.keydown&&r.keydown.call(r.uiElement,r.dialog,r.key),q.data.preventDefault()}},l=function(q){var r=q.data.$.ctrlKey||q.data.$.metaKey,s=q.data.$.altKey,u=q.data.$.shiftKey,t=String.fromCharCode(q.data.$.keyCode);if((r=y[(r?"CTRL+":"")+(s?"ALT+":"")+(u?"SHIFT+":"")+t])&&r.length){r=r[r.length-1],r.keyup&&(r.keyup.call(r.uiElement,r.dialog,r.key),q.data.preventDefault())}},m=function(q,r,s,u,t){(y[s]||(y[s]=[])).push({uiElement:q,dialog:r,key:s,keyup:t||q.accessKeyUp,keydown:u||q.accessKeyDown})},ag=function(q){for(var r in y){for(var s=y[r],t=s.length-1;0<=t;t--){(s[t].dialog==q||s[t].uiElement==q)&&s.splice(t,1)}0===s.length&&delete y[r]}},aj=function(q,r){q._.accessKeyMap[r]&&q.selectPage(q._.accessKeyMap[r])},ah=function(){};(function(){CKEDITOR.ui.dialog={uiElement:function(q,r,s,u,t,z,w){if(!(4>arguments.length)){var A=(u.call?u(r):u)||"div",H=["<",A," "],F=(t&&t.call?t(r):t)||{},B=(z&&z.call?z(r):z)||{},J=(w&&w.call?w.call(this,q,r):w)||"",E=this.domId=B.id||CKEDITOR.tools.getNextId()+"_uiElement";this.id=r.id;r.requiredContent&&!q.getParentEditor().filter.check(r.requiredContent)&&(F.display="none",this.notAllowed=!0);B.id=E;var I={};r.type&&(I["cke_dialog_ui_"+r.type]=1);r.className&&(I[r.className]=1);r.disabled&&(I.cke_disabled=1);for(var G=B["class"]&&B["class"].split?B["class"].split(" "):[],E=0;E<G.length;E++){G[E]&&(I[G[E]]=1)}G=[];for(E in I){G.push(E)}B["class"]=G.join(" ");r.title&&(B.title=r.title);I=(r.style||"").split(";");r.align&&(G=r.align,F["margin-left"]="left"==G?0:"auto",F["margin-right"]="right"==G?0:"auto");for(E in F){I.push(E+":"+F[E])}r.hidden&&I.push("display:none");for(E=I.length-1;0<=E;E--){""===I[E]&&I.splice(E,1)}0<I.length&&(B.style=(B.style?B.style+"; ":"")+I.join("; "));for(E in B){H.push(E+'="'+CKEDITOR.tools.htmlEncode(B[E])+'" ')}H.push(">",J,"</",A,">");s.push(H.join(""));(this._||(this._={})).dialog=q;"boolean"==typeof r.isChanged&&(this.isChanged=function(){return r.isChanged});"function"==typeof r.isChanged&&(this.isChanged=r.isChanged);"function"==typeof r.setValue&&(this.setValue=CKEDITOR.tools.override(this.setValue,function(L){return function(M){L.call(this,r.setValue.call(this,M))}}));"function"==typeof r.getValue&&(this.getValue=CKEDITOR.tools.override(this.getValue,function(L){return function(){return r.getValue.call(this,L.call(this))}}));CKEDITOR.event.implementOn(this);this.registerEvents(r);this.accessKeyUp&&(this.accessKeyDown&&r.accessKey)&&m(this,q,"CTRL+"+r.accessKey);var K=this;q.on("load",function(){var L=K.getInputElement();if(L){var M=K.type in {checkbox:1,ratio:1}&&CKEDITOR.env.ie&&CKEDITOR.env.version<8?"cke_dialog_ui_focused":"";L.on("focus",function(){q._.tabBarMode=false;q._.hasFocus=true;K.fire("focus");M&&this.addClass(M)});L.on("blur",function(){K.fire("blur");M&&this.removeClass(M)})}});CKEDITOR.tools.extend(this,r);this.keyboardFocusable&&(this.tabIndex=r.tabIndex||0,this.focusIndex=q._.focusList.push(this)-1,this.on("focus",function(){q._.currentFocusIndex=K.focusIndex}))}},hbox:function(q,r,s,u,t){if(!(4>arguments.length)){this._||(this._={});var z=this._.children=r,w=t&&t.widths||null,A=t&&t.height||null,E,B={role:"presentation"};t&&t.align&&(B.align=t.align);CKEDITOR.ui.dialog.uiElement.call(this,q,t||{type:"hbox"},u,"table",{},B,function(){var F=['<tbody><tr class="cke_dialog_ui_hbox">'];for(E=0;E<s.length;E++){var G="cke_dialog_ui_hbox_child",H=[];0===E&&(G="cke_dialog_ui_hbox_first");E==s.length-1&&(G="cke_dialog_ui_hbox_last");F.push('<td class="',G,'" role="presentation" ');w?w[E]&&H.push("width:"+v(w[E])):H.push("width:"+Math.floor(100/s.length)+"%");A&&H.push("height:"+v(A));t&&void 0!=t.padding&&H.push("padding:"+v(t.padding));CKEDITOR.env.ie&&(CKEDITOR.env.quirks&&z[E].align)&&H.push("text-align:"+z[E].align);0<H.length&&F.push('style="'+H.join("; ")+'" ');F.push(">",s[E],"</td>")}F.push("</tr></tbody>");return F.join("")})}},vbox:function(q,r,s,u,t){if(!(3>arguments.length)){this._||(this._={});var z=this._.children=r,w=t&&t.width||null,A=t&&t.heights||null;CKEDITOR.ui.dialog.uiElement.call(this,q,t||{type:"vbox"},u,"div",null,{role:"presentation"},function(){var B=['<table role="presentation" cellspacing="0" border="0" '];B.push('style="');t&&t.expand&&B.push("height:100%;");B.push("width:"+v(w||"100%"),";");CKEDITOR.env.webkit&&B.push("float:none;");B.push('"');B.push('align="',CKEDITOR.tools.htmlEncode(t&&t.align||("ltr"==q.getParentEditor().lang.dir?"left":"right")),'" ');B.push("><tbody>");for(var E=0;E<s.length;E++){var F=[];B.push('<tr><td role="presentation" ');w&&F.push("width:"+v(w||"100%"));A?F.push("height:"+v(A[E])):t&&t.expand&&F.push("height:"+Math.floor(100/s.length)+"%");t&&void 0!=t.padding&&F.push("padding:"+v(t.padding));CKEDITOR.env.ie&&(CKEDITOR.env.quirks&&z[E].align)&&F.push("text-align:"+z[E].align);0<F.length&&B.push('style="',F.join("; "),'" ');B.push(' class="cke_dialog_ui_vbox_child">',s[E],"</td></tr>")}B.push("</tbody></table>");return B.join("")})}}}})();CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(q,r){this.getInputElement().setValue(q);!r&&this.fire("change",{value:q});return this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return !1},selectParentTab:function(){for(var q=this.getInputElement();(q=q.getParent())&&-1==q.$.className.search("cke_dialog_page_contents");){}if(!q){return this}q=q.getAttribute("name");this._.dialog._.currentTabId!=q&&this._.dialog.selectPage(q);return this},focus:function(){this.selectParentTab().getInputElement().focus();return this},registerEvents:function(q){var r=/^on([A-Z]\w+)/,s,u=function(w,z,A,B){z.on("load",function(){w.getInputElement().on(A,B,w)})},t;for(t in q){if(s=t.match(r)){this.eventProcessors[t]?this.eventProcessors[t].call(this,this._.dialog,q[t]):u(this,this._.dialog,s[1].toLowerCase(),q[t])}}return this},eventProcessors:{onLoad:function(q,r){q.on("load",r,this)},onShow:function(q,r){q.on("show",r,this)},onHide:function(q,r){q.on("hide",r,this)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var q=this.getElement();this.getInputElement().setAttribute("disabled","true");q.addClass("cke_disabled")},enable:function(){var q=this.getElement();this.getInputElement().removeAttribute("disabled");q.removeClass("cke_disabled")},isEnabled:function(){return !this.getElement().hasClass("cke_disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return !this.isEnabled()||!this.isVisible()?!1:!0}};CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(q){if(1>arguments.length){return this._.children.concat()}q.splice||(q=[q]);return 2>q.length?this._.children[q[0]]:this._.children[q[0]]&&this._.children[q[0]].getChild?this._.children[q[0]].getChild(q.slice(1,q.length)):null}},!0);CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox;(function(){var q={build:function(r,s,u){for(var t=s.children,z,w=[],A=[],E=0;E<t.length&&(z=t[E]);E++){var B=[];w.push(B);A.push(CKEDITOR.dialog._.uiElementBuilders[z.type].build(r,z,B))}return new CKEDITOR.ui.dialog[s.type](r,A,w,u,s)}};CKEDITOR.dialog.addUIElement("hbox",q);CKEDITOR.dialog.addUIElement("vbox",q)})();CKEDITOR.dialogCommand=function(q,r){this.dialogName=q;CKEDITOR.tools.extend(this,r,!0)};CKEDITOR.dialogCommand.prototype={exec:function(q){q.openDialog(this.dialogName)},canUndo:!1,editorFocus:1};(function(){var q=/^([a]|[^a])+$/,r=/^\d*$/,s=/^\d*(?:\.\d+)?$/,u=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,t=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,w=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;CKEDITOR.VALIDATE_OR=1;CKEDITOR.VALIDATE_AND=2;CKEDITOR.dialog.validate={functions:function(){var z=arguments;return function(){var A=this&&this.getValue?this.getValue():z[0],B=void 0,E=CKEDITOR.VALIDATE_AND,F=[],G;for(G=0;G<z.length;G++){if("function"==typeof z[G]){F.push(z[G])}else{break}}G<z.length&&"string"==typeof z[G]&&(B=z[G],G++);G<z.length&&"number"==typeof z[G]&&(E=z[G]);var H=E==CKEDITOR.VALIDATE_AND?!0:!1;for(G=0;G<F.length;G++){H=E==CKEDITOR.VALIDATE_AND?H&&F[G](A):H||F[G](A)}return !H?B:!0}},regex:function(z,A){return function(B){B=this&&this.getValue?this.getValue():B;return !z.test(B)?A:!0}},notEmpty:function(z){return this.regex(q,z)},integer:function(z){return this.regex(r,z)},number:function(z){return this.regex(s,z)},cssLength:function(z){return this.functions(function(A){return t.test(CKEDITOR.tools.trim(A))},z)},htmlLength:function(z){return this.functions(function(A){return u.test(CKEDITOR.tools.trim(A))},z)},inlineStyle:function(z){return this.functions(function(A){return w.test(CKEDITOR.tools.trim(A))},z)},equals:function(z,A){return this.functions(function(B){return B==z},A)},notEqual:function(z,A){return this.functions(function(B){return B!=z},A)}};CKEDITOR.on("instanceDestroyed",function(z){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){for(var A;A=CKEDITOR.dialog._.currentTop;){A.hide()}for(var B in ae){ae[B].remove()}ae={}}var z=z.editor._.storedDialogs,E;for(E in z){z[E].destroy()}})})();CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(q,r){var s=null,t=CKEDITOR.dialog._.dialogDefinitions[q];null===CKEDITOR.dialog._.currentTop&&h(this);if("function"==typeof t){s=this._.storedDialogs||(this._.storedDialogs={}),s=s[q]||(s[q]=new CKEDITOR.dialog(this,q)),r&&r.call(s,s),s.show()}else{if("failed"==t){throw i(this),Error('[CKEDITOR.dialog.openDialog] Dialog "'+q+'" failed when loading definition.')}"string"==typeof t&&CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(t),function(){"function"!=typeof CKEDITOR.dialog._.dialogDefinitions[q]&&(CKEDITOR.dialog._.dialogDefinitions[q]="failed");this.openDialog(q,r)},this,0,1)}CKEDITOR.skin.loadPart("dialog");return s}})})();CKEDITOR.plugins.add("dialog",{requires:"dialogui",init:function(a){a.on("doubleclick",function(b){b.data.dialog&&a.openDialog(b.data.dialog)},null,null,999)}});CKEDITOR.plugins.add("about",{requires:"dialog",init:function(c){var d=c.addCommand("about",new CKEDITOR.dialogCommand("about"));d.modes={wysiwyg:1,source:1};d.canUndo=!1;d.readOnly=1;c.ui.addButton&&c.ui.addButton("About",{label:c.lang.about.title,command:"about",toolbar:"about"});CKEDITOR.dialog.add("about",this.path+"dialogs/about.js")}});(function(){CKEDITOR.plugins.add("a11yhelp",{requires:"dialog",availableLangs:{ar:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,en:1,"en-gb":1,eo:1,es:1,et:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,nb:1,nl:1,no:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,"sr-latn":1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},init:function(a){var d=this;a.addCommand("a11yHelp",{exec:function(){var b=a.langCode,b=d.availableLangs[b]?b:d.availableLangs[b.replace(/-.*/,"")]?b.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(d.path+"dialogs/lang/"+b+".js"),function(){a.lang.a11yhelp=d.langEntries[b];a.openDialog("a11yHelp")})},modes:{wysiwyg:1,source:1},readOnly:1,canUndo:!1});a.setKeystroke(CKEDITOR.ALT+48,"a11yHelp");CKEDITOR.dialog.add("a11yHelp",this.path+"dialogs/a11yhelp.js");a.on("ariaEditorHelpLabel",function(b){b.data.label=a.lang.common.editorHelp})}})})();(function(){function a(e){var d=this.att,e=e&&e.hasAttribute(d)&&e.getAttribute(d)||"";void 0!==e&&this.setValue(e)}function b(){for(var f,d=0;d<arguments.length;d++){if(arguments[d] instanceof CKEDITOR.dom.element){f=arguments[d];break}}if(f){var d=this.att,e=this.getValue();e?f.setAttribute(d,e):f.removeAttribute(d,e)}}var c={id:1,dir:1,classes:1,styles:1};CKEDITOR.plugins.add("dialogadvtab",{requires:"dialog",allowedContent:function(f){f||(f=c);var d=[];f.id&&d.push("id");f.dir&&d.push("dir");var e="";d.length&&(e+="["+d.join(",")+"]");f.classes&&(e+="(*)");f.styles&&(e+="{*}");return e},createAdvancedTab:function(i,f,g){f||(f=c);var j=i.lang.common,l={id:"advanced",label:j.advancedTab,title:j.advancedTab,elements:[{type:"vbox",padding:1,children:[]}]},k=[];if(f.id||f.dir){f.id&&k.push({id:"advId",att:"id",type:"text",requiredContent:g?g+"[id]":null,label:j.id,setup:a,commit:b}),f.dir&&k.push({id:"advLangDir",att:"dir",type:"select",requiredContent:g?g+"[dir]":null,label:j.langDir,"default":"",style:"width:100%",items:[[j.notSet,""],[j.langDirLTR,"ltr"],[j.langDirRTL,"rtl"]],setup:a,commit:b}),l.elements[0].children.push({type:"hbox",widths:["50%","50%"],children:[].concat(k)})}if(f.styles||f.classes){k=[],f.styles&&k.push({id:"advStyles",att:"style",type:"text",requiredContent:g?g+"{cke-xyz}":null,label:j.styles,"default":"",validate:CKEDITOR.dialog.validate.inlineStyle(j.invalidInlineStyle),onChange:function(){},getStyle:function(d,h){var e=this.getValue().match(RegExp("(?:^|;)\\s*"+d+"\\s*:\\s*([^;]*)","i"));return e?e[1]:h},updateStyle:function(h,m){var n=this.getValue(),o=i.document.createElement("span");o.setAttribute("style",n);o.setStyle(h,m);n=CKEDITOR.tools.normalizeCssText(o.getAttribute("style"));this.setValue(n,1)},setup:a,commit:b}),f.classes&&k.push({type:"hbox",widths:["45%","55%"],children:[{id:"advCSSClasses",att:"class",type:"text",requiredContent:g?g+"(cke-xyz)":null,label:j.cssClasses,"default":"",setup:a,commit:b}]}),l.elements[0].children.push({type:"hbox",widths:["50%","50%"],children:[].concat(k)})}return l}})})();CKEDITOR.plugins.add("basicstyles",{init:function(i){var k=0,j=function(n,h,e,c){if(c){var c=new CKEDITOR.style(c),m=l[e];m.unshift(c);i.attachStyleStateChange(c,function(b){!i.readOnly&&i.getCommand(e).setState(b)});i.addCommand(e,new CKEDITOR.styleCommand(c,{contentForms:m}));i.ui.addButton&&i.ui.addButton(n,{label:h,command:e,toolbar:"basicstyles,"+(k+=10)})}},l={bold:["strong","b",["span",function(b){b=b.styles["font-weight"];return"bold"==b||700<=+b}]],italic:["em","i",["span",function(b){return"italic"==b.styles["font-style"]}]],underline:["u",["span",function(b){return"underline"==b.styles["text-decoration"]}]],strike:["s","strike",["span",function(b){return"line-through"==b.styles["text-decoration"]}]],subscript:["sub"],superscript:["sup"]},g=i.config,f=i.lang.basicstyles;j("Bold",f.bold,"bold",g.coreStyles_bold);j("Italic",f.italic,"italic",g.coreStyles_italic);j("Underline",f.underline,"underline",g.coreStyles_underline);j("Strike",f.strike,"strike",g.coreStyles_strike);j("Subscript",f.subscript,"subscript",g.coreStyles_subscript);j("Superscript",f.superscript,"superscript",g.coreStyles_superscript);i.setKeystroke([[CKEDITOR.CTRL+66,"bold"],[CKEDITOR.CTRL+73,"italic"],[CKEDITOR.CTRL+85,"underline"]])}});CKEDITOR.config.coreStyles_bold={element:"strong",overrides:"b"};CKEDITOR.config.coreStyles_italic={element:"em",overrides:"i"};CKEDITOR.config.coreStyles_underline={element:"u"};CKEDITOR.config.coreStyles_strike={element:"s",overrides:"strike"};CKEDITOR.config.coreStyles_subscript={element:"sub"};CKEDITOR.config.coreStyles_superscript={element:"sup"};(function(){function e(j,n,m,k){if(!j.isReadOnly()&&!j.equals(m.editable())){CKEDITOR.dom.element.setMarker(k,j,"bidi_processed",1);for(var k=j,l=m.editable();(k=k.getParent())&&!k.equals(l);){if(k.getCustomData("bidi_processed")){j.removeStyle("direction");j.removeAttribute("dir");return}}k="useComputedState" in m.config?m.config.useComputedState:1;if((k?j.getComputedStyle("direction"):j.getStyle("direction")||j.hasAttribute("dir"))!=n){j.removeStyle("direction"),k?(j.removeAttribute("dir"),n!=j.getComputedStyle("direction")&&j.setAttribute("dir",n)):j.setAttribute("dir",n),m.forceNextSelectionCheck()}}}function i(j,n,m){var k=j.getCommonAncestor(!1,!0),j=j.clone();j.enlarge(m==CKEDITOR.ENTER_BR?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS);if(j.checkBoundaryOfElement(k,CKEDITOR.START)&&j.checkBoundaryOfElement(k,CKEDITOR.END)){for(var l;k&&k.type==CKEDITOR.NODE_ELEMENT&&(l=k.getParent())&&1==l.getChildCount()&&!(k.getName() in n);){k=l}return k.type==CKEDITOR.NODE_ELEMENT&&k.getName() in n&&k}}function d(j){return{context:"p",allowedContent:{"h1 h2 h3 h4 h5 h6 table ul ol blockquote div tr p div li td":{propertiesOnly:!0,attributes:"dir"}},requiredContent:"p[dir]",refresh:function(k,n){var l=k.config.useComputedState,m,l=void 0===l||l;if(!l){m=n.lastElement;for(var p=k.editable();m&&!(m.getName() in h||m.equals(p));){var o=m.getParent();if(!o){break}m=o}}m=m||n.block||n.blockLimit;m.equals(k.editable())&&(p=k.getSelection().getRanges()[0].getEnclosedNode())&&p.type==CKEDITOR.NODE_ELEMENT&&(m=p);m&&(l=l?m.getComputedStyle("direction"):m.getStyle("direction")||m.getAttribute("dir"),k.getCommand("bidirtl").setState("rtl"==l?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF),k.getCommand("bidiltr").setState("ltr"==l?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF));l=(n.block||n.blockLimit||k.editable()).getDirection(1);if(l!=(k._.selDir||k.lang.dir)){k._.selDir=l,k.fire("contentDirChanged",l)}},exec:function(r){var p=r.getSelection(),n=r.config.enterMode,o=p.getRanges();if(o&&o.length){for(var u={},q=p.createBookmarks(),o=o.createIterator(),s,w=0;s=o.getNextRange(1);){var v=s.getEnclosedNode();if(!v||v&&!(v.type==CKEDITOR.NODE_ELEMENT&&v.getName() in f)){v=i(s,g,n)}v&&e(v,j,r,u);var x=new CKEDITOR.dom.walker(s),y=q[w].startNode,z=q[w++].endNode;x.evaluator=function(k){return !!(k.type==CKEDITOR.NODE_ELEMENT&&k.getName() in g&&!(k.getName()==(n==CKEDITOR.ENTER_P?"p":"div")&&k.getParent().type==CKEDITOR.NODE_ELEMENT&&"blockquote"==k.getParent().getName())&&k.getPosition(y)&CKEDITOR.POSITION_FOLLOWING&&(k.getPosition(z)&CKEDITOR.POSITION_PRECEDING+CKEDITOR.POSITION_CONTAINS)==CKEDITOR.POSITION_PRECEDING)};for(;v=x.next();){e(v,j,r,u)}s=s.createIterator();for(s.enlargeBr=n!=CKEDITOR.ENTER_BR;v=s.getNextParagraph(n==CKEDITOR.ENTER_P?"p":"div");){e(v,j,r,u)}}CKEDITOR.dom.element.clearAllMarkers(u);r.forceNextSelectionCheck();p.selectBookmarks(q);r.focus()}}}}function t(j){var m=j==a.setAttribute,l=j==a.removeAttribute,k=/\bdirection\s*:\s*(.*?)\s*(:?$|;)/;return function(n,q){if(!this.isReadOnly()){var o;if(o=n==(m||l?"dir":"direction")||"style"==n&&(l||k.test(q))){j:{o=this;for(var p=o.getDocument().getBody().getParent();o;){if(o.equals(p)){o=!1;break j}o=o.getParent()}o=!0}o=!o}if(o&&(o=this.getDirection(1),p=j.apply(this,arguments),o!=this.getDirection(1))){return this.getDocument().fire("dirChanged",this),p}}return j.apply(this,arguments)}}var g={table:1,ul:1,ol:1,blockquote:1,div:1},f={},h={};CKEDITOR.tools.extend(f,g,{tr:1,p:1,div:1,li:1});CKEDITOR.tools.extend(h,f,{td:1});CKEDITOR.plugins.add("bidi",{init:function(j){function l(m,n,o,p,q){j.addCommand(o,new CKEDITOR.command(j,p));j.ui.addButton&&j.ui.addButton(m,{label:n,command:o,toolbar:"bidi,"+q})}if(!j.blockless){var k=j.lang.bidi;l("BidiLtr",k.ltr,"bidiltr",d("ltr"),10);l("BidiRtl",k.rtl,"bidirtl",d("rtl"),20);j.on("contentDom",function(){j.document.on("dirChanged",function(m){j.fire("dirChanged",{node:m.data,dir:m.data.getDirection(1)})})});j.on("contentDirChanged",function(m){var m=(j.lang.dir!=m.data?"add":"remove")+"Class",n=j.ui.space(j.config.toolbarLocation);if(n){n[m]("cke_mixed_dir_content")}})}}});for(var a=CKEDITOR.dom.element.prototype,c=["setStyle","removeStyle","setAttribute","removeAttribute"],b=0;b<c.length;b++){a[c[b]]=CKEDITOR.tools.override(a[c[b]],t)}})();(function(){var a={exec:function(r){var l=r.getCommand("blockquote").state,t=r.getSelection(),n=t&&t.getRanges()[0];if(n){var s=t.createBookmarks();if(CKEDITOR.env.ie){var p=s[0].startNode,m=s[0].endNode,o;if(p&&"blockquote"==p.getParent().getName()){for(o=p;o=o.getNext();){if(o.type==CKEDITOR.NODE_ELEMENT&&o.isBlockBoundary()){p.move(o,!0);break}}}if(m&&"blockquote"==m.getParent().getName()){for(o=m;o=o.getPrevious();){if(o.type==CKEDITOR.NODE_ELEMENT&&o.isBlockBoundary()){m.move(o);break}}}}var q=n.createIterator();q.enlargeBr=r.config.enterMode!=CKEDITOR.ENTER_BR;if(l==CKEDITOR.TRISTATE_OFF){for(p=[];l=q.getNextParagraph();){p.push(l)}1>p.length&&(l=r.document.createElement(r.config.enterMode==CKEDITOR.ENTER_P?"p":"div"),m=s.shift(),n.insertNode(l),l.append(new CKEDITOR.dom.text("",r.document)),n.moveToBookmark(m),n.selectNodeContents(l),n.collapse(!0),m=n.createBookmark(),p.push(l),s.unshift(m));o=p[0].getParent();n=[];for(m=0;m<p.length;m++){l=p[m],o=o.getCommonAncestor(l.getParent())}for(l={table:1,tbody:1,tr:1,ol:1,ul:1};l[o.getName()];){o=o.getParent()}for(m=null;0<p.length;){for(l=p.shift();!l.getParent().equals(o);){l=l.getParent()}l.equals(m)||n.push(l);m=l}for(;0<n.length;){if(l=n.shift(),"blockquote"==l.getName()){for(m=new CKEDITOR.dom.documentFragment(r.document);l.getFirst();){m.append(l.getFirst().remove()),p.push(m.getLast())}m.replace(l)}else{p.push(l)}}n=r.document.createElement("blockquote");for(n.insertBefore(p[0]);0<p.length;){l=p.shift(),n.append(l)}}else{if(l==CKEDITOR.TRISTATE_ON){m=[];for(o={};l=q.getNextParagraph();){for(p=n=null;l.getParent();){if("blockquote"==l.getParent().getName()){n=l.getParent();p=l;break}l=l.getParent()}n&&(p&&!p.getCustomData("blockquote_moveout"))&&(m.push(p),CKEDITOR.dom.element.setMarker(o,p,"blockquote_moveout",!0))}CKEDITOR.dom.element.clearAllMarkers(o);l=[];p=[];for(o={};0<m.length;){q=m.shift(),n=q.getParent(),q.getPrevious()?q.getNext()?(q.breakParent(q.getParent()),p.push(q.getNext())):q.remove().insertAfter(n):q.remove().insertBefore(n),n.getCustomData("blockquote_processed")||(p.push(n),CKEDITOR.dom.element.setMarker(o,n,"blockquote_processed",!0)),l.push(q)}CKEDITOR.dom.element.clearAllMarkers(o);for(m=p.length-1;0<=m;m--){n=p[m];l:{o=n;for(var q=0,v=o.getChildCount(),u=void 0;q<v&&(u=o.getChild(q));q++){if(u.type==CKEDITOR.NODE_ELEMENT&&u.isBlockBoundary()){o=!1;break l}}o=!0}o&&n.remove()}if(r.config.enterMode==CKEDITOR.ENTER_BR){for(n=!0;l.length;){if(q=l.shift(),"div"==q.getName()){m=new CKEDITOR.dom.documentFragment(r.document);n&&(q.getPrevious()&&!(q.getPrevious().type==CKEDITOR.NODE_ELEMENT&&q.getPrevious().isBlockBoundary()))&&m.append(r.document.createElement("br"));for(n=q.getNext()&&!(q.getNext().type==CKEDITOR.NODE_ELEMENT&&q.getNext().isBlockBoundary());q.getFirst();){q.getFirst().remove().appendTo(m)}n&&m.append(r.document.createElement("br"));m.replace(q);n=!1}}}}}t.selectBookmarks(s);r.focus()}},refresh:function(c,b){this.setState(c.elementPath(b.block||b.blockLimit).contains("blockquote",1)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)},context:"blockquote",allowedContent:"blockquote",requiredContent:"blockquote"};CKEDITOR.plugins.add("blockquote",{init:function(b){b.blockless||(b.addCommand("blockquote",a),b.ui.addButton&&b.ui.addButton("Blockquote",{label:b.lang.blockquote.toolbar,command:"blockquote",toolbar:"blocks,10"}))}})})();(function(){function b(v){function k(){var h=v.editable();h.on(H,function(i){(!CKEDITOR.env.ie||!F)&&M(i)});CKEDITOR.env.ie&&h.on("paste",function(i){I||(z(),i.data.preventDefault(),M(i),A("paste")||v.openDialog("paste"))});CKEDITOR.env.ie&&(h.on("contextmenu",B,null,null,0),h.on("beforepaste",function(i){i.data&&!i.data.$.ctrlKey&&B()},null,null,0));h.on("beforecut",function(){!F&&C(v)});var g;h.attachListener(CKEDITOR.env.ie?h:v.document.getDocumentElement(),"mouseup",function(){g=setTimeout(function(){J()},0)});v.on("destroy",function(){clearTimeout(g)});h.on("keyup",J)}function w(g){return{type:g,canUndo:"cut"==g,startDisabled:!0,exec:function(){"cut"==this.type&&C();var j;var h=this.type;if(CKEDITOR.env.ie){j=A(h)}else{try{j=v.document.$.execCommand(h,!1,null)}catch(i){j=!1}}j||alert(v.lang.clipboard[this.type+"Error"]);return j}}}function x(){return{canUndo:!1,async:!0,exec:function(h,g){var j=function(l,m){l&&y(l.type,l.dataValue,!!m);h.fire("afterCommandExec",{name:"paste",command:i,returnValue:!!l})},i=this;"string"==typeof g?j({type:"auto",dataValue:g},1):h.getClipboardData(j)}}}function z(){I=1;setTimeout(function(){I=0},100)}function B(){F=1;setTimeout(function(){F=0},10)}function A(l){var g=v.document,i=g.getBody(),h=!1,m=function(){h=!0};i.on(l,m);(7<CKEDITOR.env.version?g.$:g.$.selection.createRange()).execCommand(l);i.removeListener(l,m);return h}function y(i,g,h){i={type:i};if(h&&!1===v.fire("beforePaste",i)||!g){return !1}i.dataValue=g;return v.fire("paste",i)}function C(){if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var j=v.getSelection(),g,i,h;if(j.getType()==CKEDITOR.SELECTION_ELEMENT&&(g=j.getSelectedElement())){i=j.getRanges()[0],h=v.document.createText(""),h.insertBefore(g),i.setStartBefore(h),i.setEndAfter(g),j.selectRanges([i]),setTimeout(function(){g.getParent()&&(h.remove(),j.selectElement(g))},0)}}}function D(n,p){var o=v.document,N=v.editable(),P=function(g){g.cancel()},r;if(!o.getById("cke_pastebin")){var u=v.getSelection(),R=u.createBookmarks();CKEDITOR.env.ie&&u.root.fire("selectionchange");var O=new CKEDITOR.dom.element((CKEDITOR.env.webkit||N.is("body"))&&!CKEDITOR.env.ie?"body":"div",o);O.setAttributes({id:"cke_pastebin","data-cke-temp":"1"});var q=0,o=o.getWindow();CKEDITOR.env.webkit?(N.append(O),O.addClass("cke_editable"),N.is("body")||(q="static"!=N.getComputedStyle("position")?N:CKEDITOR.dom.element.get(N.$.offsetParent),q=q.getDocumentPosition().y)):N.getAscendant(CKEDITOR.env.ie?"body":"html",1).append(O);O.setStyles({position:"absolute",top:o.getScrollPosition().y-q+10+"px",width:"1px",height:Math.max(1,o.getViewPaneSize().height-20)+"px",overflow:"hidden",margin:0,padding:0});(q=O.getParent().isReadOnly())?(O.setOpacity(0),O.setAttribute("contenteditable",!0)):O.setStyle("ltr"==v.config.contentsLangDirection?"left":"right","-1000px");v.on("selectionChange",P,null,null,0);if(CKEDITOR.env.webkit||CKEDITOR.env.gecko){r=N.once("blur",P,null,null,-100)}q&&O.focus();q=new CKEDITOR.dom.range(O);q.selectNodeContents(O);var t=q.select();CKEDITOR.env.ie&&(r=N.once("blur",function(){v.lockSelection(t)}));var Q=CKEDITOR.document.getWindow().getScrollPosition().y;setTimeout(function(){if(CKEDITOR.env.webkit){CKEDITOR.document.getBody().$.scrollTop=Q}r&&r.removeListener();CKEDITOR.env.ie&&N.focus();u.selectBookmarks(R);O.remove();var g;if(CKEDITOR.env.webkit&&(g=O.getFirst())&&g.is&&g.hasClass("Apple-style-span")){O=g}v.removeListener("selectionChange",P);p(O.getHtml())},0)}}function K(){if(CKEDITOR.env.ie){v.focus();z();var g=v.focusManager;g.lock();if(v.editable().fire(H)&&!A("paste")){return g.unlock(),!1}g.unlock()}else{try{if(v.editable().fire(H)&&!v.document.$.execCommand("Paste",!1,null)){throw 0}}catch(h){return !1}}return !0}function G(g){if("wysiwyg"==v.mode){switch(g.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:g=v.editable();z();!CKEDITOR.env.ie&&g.fire("beforepaste");break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:v.fire("saveSnapshot"),setTimeout(function(){v.fire("saveSnapshot")},50)}}}function M(g){var i={type:"auto"},h=v.fire("beforePaste",i);D(g,function(j){j=j.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/ig,"");h&&y(i.type,j,0,1)})}function J(){if("wysiwyg"==v.mode){var g=E("paste");v.getCommand("cut").setState(E("cut"));v.getCommand("copy").setState(E("copy"));v.getCommand("paste").setState(g);v.fire("pasteState",g)}}function E(g){if(L&&g in {paste:1,cut:1}){return CKEDITOR.TRISTATE_DISABLED}if("paste"==g){return CKEDITOR.TRISTATE_OFF}var g=v.getSelection(),h=g.getRanges();return g.getType()==CKEDITOR.SELECTION_NONE||1==h.length&&h[0].collapsed?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF}var F=0,I=0,L=0,H=CKEDITOR.env.ie?"beforepaste":"paste";(function(){v.on("key",G);v.on("contentDom",k);v.on("selectionChange",function(g){L=g.data.selection.getRanges()[0].checkReadOnly();J()});v.contextMenu&&v.contextMenu.addListener(function(h,g){L=g.getRanges()[0].checkReadOnly();return{cut:E("cut"),copy:E("copy"),paste:E("paste")}})})();(function(){function g(i,h,o,m,p){var n=v.lang.clipboard[h];v.addCommand(h,o);v.ui.addButton&&v.ui.addButton(i,{label:n,command:h,toolbar:"clipboard,"+m});v.addMenuItems&&v.addMenuItem(h,{label:n,command:h,group:"clipboard",order:p})}g("Cut","cut",w("cut"),10,1);g("Copy","copy",w("copy"),20,4);g("Paste","paste",x(),30,8)})();v.getClipboardData=function(h,n){function m(g){g.removeListener();g.cancel();n(g.data)}function r(g){g.removeListener();g.cancel();q=!0;n({type:o,dataValue:g.data})}function s(){this.customTitle=h&&h.title}var p=!1,o="auto",q=!1;n||(n=h,h=null);v.on("paste",m,null,null,0);v.on("beforePaste",function(g){g.removeListener();p=true;o=g.data.type},null,null,1000);!1===K()&&(v.removeListener("paste",m),p&&v.fire("pasteDialog",s)?(v.on("pasteDialogCommit",r),v.on("dialogHide",function(g){g.removeListener();g.data.removeListener("pasteDialogCommit",r);setTimeout(function(){q||n(null)},10)})):n(null))}}function c(g){if(CKEDITOR.env.webkit){if(!g.match(/^[^<]*$/g)&&!g.match(/^(<div><br( ?\/)?><\/div>|<div>[^<]*<\/div>)*$/gi)){return"html"}}else{if(CKEDITOR.env.ie){if(!g.match(/^([^<]|<br( ?\/)?>)*$/gi)&&!g.match(/^(<p>([^<]|<br( ?\/)?>)*<\/p>|(\r\n))*$/gi)){return"html"}}else{if(CKEDITOR.env.gecko){if(!g.match(/^([^<]|<br( ?\/)?>)*$/gi)){return"html"}}else{return"html"}}}return"htmlifiedtext"}function d(h,g){function i(j){return CKEDITOR.tools.repeat("</p><p>",~~(j/2))+(1==j%2?"<br>":"")}g=g.replace(/\s+/g," ").replace(/> +</g,"><").replace(/<br ?\/>/gi,"<br>");g=g.replace(/<\/?[A-Z]+>/g,function(j){return j.toLowerCase()});if(g.match(/^[^<]$/)){return g}CKEDITOR.env.webkit&&-1<g.indexOf("<div>")&&(g=g.replace(/^(<div>(<br>|)<\/div>)(?!$|(<div>(<br>|)<\/div>))/g,"<br>").replace(/^(<div>(<br>|)<\/div>){2}(?!$)/g,"<div></div>"),g.match(/<div>(<br>|)<\/div>/)&&(g="<p>"+g.replace(/(<div>(<br>|)<\/div>)+/g,function(j){return i(j.split("</div><div>").length+1)})+"</p>"),g=g.replace(/<\/div><div>/g,"<br>"),g=g.replace(/<\/?div>/g,""));CKEDITOR.env.gecko&&h.enterMode!=CKEDITOR.ENTER_BR&&(CKEDITOR.env.gecko&&(g=g.replace(/^<br><br>$/,"<br>")),-1<g.indexOf("<br><br>")&&(g="<p>"+g.replace(/(<br>){2,}/g,function(j){return i(j.length/4)})+"</p>"));return a(h,g)}function e(){var k=new CKEDITOR.htmlParser.filter,j={blockquote:1,dl:1,fieldset:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ol:1,p:1,table:1,ul:1},l=CKEDITOR.tools.extend({br:0},CKEDITOR.dtd.$inline),m={p:1,br:1,"cke:br":1},o=CKEDITOR.dtd,q=CKEDITOR.tools.extend({area:1,basefont:1,embed:1,iframe:1,map:1,object:1,param:1},CKEDITOR.dtd.$nonBodyContent,CKEDITOR.dtd.$cdata),p=function(g){delete g.name;g.add(new CKEDITOR.htmlParser.text(" "))},n=function(g){for(var h=g,i;(h=h.next)&&h.name&&h.name.match(/^h\d$/);){i=new CKEDITOR.htmlParser.element("cke:br");i.isEmpty=!0;for(g.add(i);i=h.children.shift();){g.add(i)}}};k.addRules({elements:{h1:n,h2:n,h3:n,h4:n,h5:n,h6:n,img:function(g){var g=CKEDITOR.tools.trim(g.attributes.alt||""),h=" ";g&&!g.match(/(^http|\.(jpe?g|gif|png))/i)&&(h=" ["+g+"] ");return new CKEDITOR.htmlParser.text(h)},td:p,th:p,$:function(g){var i=g.name,r;if(q[i]){return !1}g.attributes={};if("br"==i){return g}if(j[i]){g.name="p"}else{if(l[i]){delete g.name}else{if(o[i]){r=new CKEDITOR.htmlParser.element("cke:br");r.isEmpty=!0;if(CKEDITOR.dtd.$empty[i]){return r}g.add(r,0);r=r.clone();r.isEmpty=!0;g.add(r);delete g.name}}}m[g.name]||delete g.name;return g}}},{applyToAll:!0});return k}function f(i,h,j){var h=new CKEDITOR.htmlParser.fragment.fromHtml(h),k=new CKEDITOR.htmlParser.basicWriter;h.writeHtml(k,j);var h=k.getHtml(),h=h.replace(/\s*(<\/?[a-z:]+ ?\/?>)\s*/g,"$1").replace(/(<cke:br \/>){2,}/g,"<cke:br />").replace(/(<cke:br \/>)(<\/?p>|<br \/>)/g,"$2").replace(/(<\/?p>|<br \/>)(<cke:br \/>)/g,"$1").replace(/<(cke:)?br( \/)?>/g,"<br>").replace(/<p><\/p>/g,""),l=0,h=h.replace(/<\/?p>/g,function(g){if("<p>"==g){if(1<++l){return"</p><p>"}}else{if(0<--l){return"</p><p>"}}return g}).replace(/<p><\/p>/g,"");return a(i,h)}function a(h,g){h.enterMode==CKEDITOR.ENTER_BR?g=g.replace(/(<\/p><p>)+/g,function(i){return CKEDITOR.tools.repeat("<br>",2*(i.length/7))}).replace(/<\/?p>/g,""):h.enterMode==CKEDITOR.ENTER_DIV&&(g=g.replace(/<(\/)?p>/g,"<$1div>"));return g}CKEDITOR.plugins.add("clipboard",{requires:"dialog",init:function(h){var g;b(h);CKEDITOR.dialog.add("paste",CKEDITOR.getUrl(this.path+"dialogs/paste.js"));h.on("paste",function(j){var k=j.data.dataValue,m=CKEDITOR.dtd.$block;-1<k.indexOf("Apple-")&&(k=k.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),"html"!=j.data.type&&(k=k.replace(/<span class="Apple-tab-span"[^>]*>([^<]*)<\/span>/gi,function(i,p){return p.replace(/\t/g,"&nbsp;&nbsp; &nbsp;")})),-1<k.indexOf('<br class="Apple-interchange-newline">')&&(j.data.startsWithEOL=1,j.data.preSniffing="html",k=k.replace(/<br class="Apple-interchange-newline">/,"")),k=k.replace(/(<[^>]+) class="Apple-[^"]*"/gi,"$1"));if(k.match(/^<[^<]+cke_(editable|contents)/i)){var o,n,l=new CKEDITOR.dom.element("div");for(l.setHtml(k);1==l.getChildCount()&&(o=l.getFirst())&&o.type==CKEDITOR.NODE_ELEMENT&&(o.hasClass("cke_editable")||o.hasClass("cke_contents"));){l=n=o}n&&(k=n.getHtml().replace(/<br>$/i,""))}CKEDITOR.env.ie?k=k.replace(/^&nbsp;(?: |\r\n)?<(\w+)/g,function(i,p){if(p.toLowerCase() in m){j.data.preSniffing="html";return"<"+p}return i}):CKEDITOR.env.webkit?k=k.replace(/<\/(\w+)><div><br><\/div>$/,function(i,p){if(p in m){j.data.endsWithEOL=1;return"</"+p+">"}return i}):CKEDITOR.env.gecko&&(k=k.replace(/(\s)<br>$/,"$1"));j.data.dataValue=k},null,null,3);h.on("paste",function(j){var j=j.data,k=j.type,l=j.dataValue,n,m=h.config.clipboard_defaultContentType||"html";n="html"==k||"html"==j.preSniffing?"html":c(l);"htmlifiedtext"==n?l=d(h.config,l):"text"==k&&"html"==n&&(l=f(h.config,l,g||(g=e(h))));j.startsWithEOL&&(l='<br data-cke-eol="1">'+l);j.endsWithEOL&&(l+='<br data-cke-eol="1">');"auto"==k&&(k="html"==n||"html"==m?"html":"text");j.type=k;j.dataValue=l;delete j.preSniffing;delete j.startsWithEOL;delete j.endsWithEOL},null,null,6);h.on("paste",function(i){i=i.data;h.insertHtml(i.dataValue,i.type);setTimeout(function(){h.fire("afterPaste")},0)},null,null,1000);h.on("pasteDialog",function(i){setTimeout(function(){h.openDialog("paste",i.data)},0)})}})})();(function(){var a='<a id="{id}" class="cke_button cke_button__{name} cke_button_{state} {cls}"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' title="{title}" tabindex="-1" hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="{hasArrow}" aria-disabled="{ariaDisabled}"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(a+=' onkeypress="return false;"');CKEDITOR.env.gecko&&(a+=' onblur="this.style.cssText = this.style.cssText;"');var a=a+(' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span class="cke_button_icon cke_button__{iconName}_icon" style="{style}"'),a=a+'>&nbsp;</span><span id="{id}_label" class="cke_button_label cke_button__{name}_label" aria-hidden="false">{label}</span>{arrowHtml}</a>',b=CKEDITOR.addTemplate("buttonArrow",'<span class="cke_button_arrow">'+(CKEDITOR.env.hc?"&#9660;":"")+"</span>"),d=CKEDITOR.addTemplate("button",a);CKEDITOR.plugins.add("button",{beforeInit:function(c){c.ui.addHandler(CKEDITOR.UI_BUTTON,CKEDITOR.ui.button.handler)}});CKEDITOR.UI_BUTTON="button";CKEDITOR.ui.button=function(c){CKEDITOR.tools.extend(this,c,{title:c.label,click:c.click||function(e){e.execCommand(c.command)}});this._={}};CKEDITOR.ui.button.handler={create:function(c){return new CKEDITOR.ui.button(c)}};CKEDITOR.ui.button.prototype={render:function(m,n){var q=CKEDITOR.env,w=this._.id=CKEDITOR.tools.getNextId(),t="",s=this.command,y;this._.editor=m;var r={id:w,button:this,editor:m,focus:function(){CKEDITOR.document.getById(w).focus()},execute:function(){this.button.click(m)},attach:function(c){this.button.attach(c)}},A=CKEDITOR.tools.addFunction(function(c){if(r.onkey){return c=new CKEDITOR.dom.event(c),!1!==r.onkey(r,c.getKeystroke())}}),B=CKEDITOR.tools.addFunction(function(c){var e;r.onfocus&&(e=!1!==r.onfocus(r,new CKEDITOR.dom.event(c)));return e}),z=0;r.clickFn=y=CKEDITOR.tools.addFunction(function(){z&&(m.unlockSelection(1),z=0);r.execute()});if(this.modes){var x={},u=function(){var c=m.mode;c&&(c=this.modes[c]?void 0!=x[c]?x[c]:CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,c=m.readOnly&&!this.readOnly?CKEDITOR.TRISTATE_DISABLED:c,this.setState(c),this.refresh&&this.refresh())};m.on("beforeModeUnload",function(){m.mode&&this._.state!=CKEDITOR.TRISTATE_DISABLED&&(x[m.mode]=this._.state)},this);m.on("activeFilterChange",u,this);m.on("mode",u,this);!this.readOnly&&m.on("readOnly",u,this)}else{if(s&&(s=m.getCommand(s))){s.on("state",function(){this.setState(s.state)},this),t+=s.state==CKEDITOR.TRISTATE_ON?"on":s.state==CKEDITOR.TRISTATE_DISABLED?"disabled":"off"}}if(this.directional){m.on("contentDirChanged",function(e){var f=CKEDITOR.document.getById(this._.id),g=f.getFirst(),e=e.data;e!=m.lang.dir?f.addClass("cke_"+e):f.removeClass("cke_ltr").removeClass("cke_rtl");g.setAttribute("style",CKEDITOR.skin.getIconStyle(v,"rtl"==e,this.icon,this.iconOffset))},this)}s||(t+="off");var v=u=this.name||this.command;this.icon&&!/\./.test(this.icon)&&(v=this.icon,this.icon=null);q={id:w,name:u,iconName:v,label:this.label,cls:this.className||"",state:t,ariaDisabled:"disabled"==t?"true":"false",title:this.title,titleJs:q.gecko&&!q.hc?"":(this.title||"").replace("'",""),hasArrow:this.hasArrow?"true":"false",keydownFn:A,focusFn:B,clickFn:y,style:CKEDITOR.skin.getIconStyle(v,"rtl"==m.lang.dir,this.icon,this.iconOffset),arrowHtml:this.hasArrow?b.output():""};d.output(q,n);if(this.onRender){this.onRender()}return r},setState:function(c){if(this._.state==c){return !1}this._.state=c;var e=CKEDITOR.document.getById(this._.id);return e?(e.setState(c,"cke_button"),c==CKEDITOR.TRISTATE_DISABLED?e.setAttribute("aria-disabled",!0):e.removeAttribute("aria-disabled"),this.hasArrow?(c=c==CKEDITOR.TRISTATE_ON?this._.editor.lang.button.selectedLabel.replace(/%1/g,this.label):this.label,CKEDITOR.document.getById(this._.id+"_label").setText(c)):c==CKEDITOR.TRISTATE_ON?e.setAttribute("aria-pressed",!0):e.removeAttribute("aria-pressed"),!0):!1},getState:function(){return this._.state},toFeature:function(c){if(this._.feature){return this._.feature}var e=this;!this.allowedContent&&(!this.requiredContent&&this.command)&&(e=c.getCommand(this.command)||e);return this._.feature=e}};CKEDITOR.ui.prototype.addButton=function(c,e){this.add(c,CKEDITOR.UI_BUTTON,e)}})();CKEDITOR.plugins.add("panelbutton",{requires:"button",onLoad:function(){function a(d){var b=this._;b.state!=CKEDITOR.TRISTATE_DISABLED&&(this.createPanel(d),b.on?b.panel.hide():b.panel.showBlock(this._.id,this.document.getById(this._.id),4))}CKEDITOR.ui.panelButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(d){var b=d.panel||{};delete d.panel;this.base(d);this.document=b.parent&&b.parent.getDocument()||CKEDITOR.document;b.block={attributes:b.attributes};this.hasArrow=b.toolbarRelated=!0;this.click=a;this._={panelDefinition:b}},statics:{handler:{create:function(b){return new CKEDITOR.ui.panelButton(b)}}},proto:{createPanel:function(j){var h=this._;if(!h.panel){var m=this._.panelDefinition,l=this._.panelDefinition.block,n=m.parent||CKEDITOR.document.getBody(),k=this._.panel=new CKEDITOR.ui.floatPanel(j,n,m),m=k.addBlock(h.id,l),i=this;k.onShow=function(){i.className&&this.element.addClass(i.className+"_panel");i.setState(CKEDITOR.TRISTATE_ON);h.on=1;i.editorFocus&&j.focus();if(i.onOpen){i.onOpen()}};k.onHide=function(b){i.className&&this.element.getFirst().removeClass(i.className+"_panel");i.setState(i.modes&&i.modes[j.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);h.on=0;if(!b&&i.onClose){i.onClose()}};k.onEscape=function(){k.hide(1);i.document.getById(h.id).focus()};if(this.onBlock){this.onBlock(k,m)}m.onHide=function(){h.on=0;i.setState(CKEDITOR.TRISTATE_OFF)}}}}})},beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_PANELBUTTON,CKEDITOR.ui.panelButton.handler)}});CKEDITOR.UI_PANELBUTTON="panelbutton";(function(){CKEDITOR.plugins.add("panel",{beforeInit:function(d){d.ui.addHandler(CKEDITOR.UI_PANEL,CKEDITOR.ui.panel.handler)}});CKEDITOR.UI_PANEL="panel";CKEDITOR.ui.panel=function(d,e){e&&CKEDITOR.tools.extend(this,e);CKEDITOR.tools.extend(this,{className:"",css:[]});this.id=CKEDITOR.tools.getNextId();this.document=d;this.isFramed=this.forceIFrame||this.css.length;this._={blocks:{}}};CKEDITOR.ui.panel.handler={create:function(d){return new CKEDITOR.ui.panel(d)}};var a=CKEDITOR.addTemplate("panel",'<div lang="{langCode}" id="{id}" dir={dir} class="cke cke_reset_all {editorId} cke_panel cke_panel {cls} cke_{dir}" style="z-index:{z-index}" role="presentation">{frame}</div>'),b=CKEDITOR.addTemplate("panel-frame",'<iframe id="{id}" class="cke_panel_frame" role="presentation" frameborder="0" src="{src}"></iframe>'),c=CKEDITOR.addTemplate("panel-frame-inner",'<!DOCTYPE html><html class="cke_panel_container {env}" dir="{dir}" lang="{langCode}"><head>{css}</head><body class="cke_{dir}" style="margin:0;padding:0" onload="{onload}"></body></html>');CKEDITOR.ui.panel.prototype={render:function(f,g){this.getHolderElement=function(){var d=this._.holder;if(!d){if(this.isFramed){var d=this.document.getById(this.id+"_frame"),e=d.getParent(),d=d.getFrameDocument();CKEDITOR.env.iOS&&e.setStyles({overflow:"scroll","-webkit-overflow-scrolling":"touch"});e=CKEDITOR.tools.addFunction(CKEDITOR.tools.bind(function(){this.isLoaded=!0;if(this.onLoad){this.onLoad()}},this));d.write(c.output(CKEDITOR.tools.extend({css:CKEDITOR.tools.buildStyleHtml(this.css),onload:"window.parent.CKEDITOR.tools.callFunction("+e+");"},h)));d.getWindow().$.CKEDITOR=CKEDITOR;d.on("keydown",function(j){var k=j.data.getKeystroke(),l=this.document.getById(this.id).getAttribute("dir");this._.onKeyDown&&!1===this._.onKeyDown(k)?j.data.preventDefault():(27==k||k==("rtl"==l?39:37))&&this.onEscape&&!1===this.onEscape(k)&&j.data.preventDefault()},this);d=d.getBody();d.unselectable();CKEDITOR.env.air&&CKEDITOR.tools.callFunction(e)}else{d=this.document.getById(this.id)}this._.holder=d}return d};var h={editorId:f.id,id:this.id,langCode:f.langCode,dir:f.lang.dir,cls:this.className,frame:"",env:CKEDITOR.env.cssClass,"z-index":f.config.baseFloatZIndex+1};if(this.isFramed){var i=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())":"";h.frame=b.output({id:this.id+"_frame",src:i})}i=a.output(h);g&&g.push(i);return i},addBlock:function(d,e){e=this._.blocks[d]=e instanceof CKEDITOR.ui.panel.block?e:new CKEDITOR.ui.panel.block(this.getHolderElement(),e);this._.currentBlock||this.showBlock(d);return e},getBlock:function(d){return this._.blocks[d]},showBlock:function(e){var e=this._.blocks[e],f=this._.currentBlock,g=!this.forceIFrame||CKEDITOR.env.ie?this._.holder:this.document.getById(this.id+"_frame");f&&f.hide();this._.currentBlock=e;CKEDITOR.fire("ariaWidget",g);e._.focusIndex=-1;this._.onKeyDown=e.onKeyDown&&CKEDITOR.tools.bind(e.onKeyDown,e);e.show();return e},destroy:function(){this.element&&this.element.remove()}};CKEDITOR.ui.panel.block=CKEDITOR.tools.createClass({$:function(d,e){this.element=d.append(d.getDocument().createElement("div",{attributes:{tabindex:-1,"class":"cke_panel_block"},styles:{display:"none"}}));e&&CKEDITOR.tools.extend(this,e);this.element.setAttributes({role:this.attributes.role||"presentation","aria-label":this.attributes["aria-label"],title:this.attributes.title||this.attributes["aria-label"]});this.keys={};this._.focusIndex=-1;this.element.disableContextMenu()},_:{markItem:function(d){-1!=d&&(d=this.element.getElementsByTag("a").getItem(this._.focusIndex=d),CKEDITOR.env.webkit&&d.getDocument().getWindow().focus(),d.focus(),this.onMark&&this.onMark(d))}},proto:{show:function(){this.element.setStyle("display","")},hide:function(){(!this.onHide||!0!==this.onHide.call(this))&&this.element.setStyle("display","none")},onKeyDown:function(f,g){var i=this.keys[f];switch(i){case"next":for(var j=this._.focusIndex,i=this.element.getElementsByTag("a"),h;h=i.getItem(++j);){if(h.getAttribute("_cke_focus")&&h.$.offsetWidth){this._.focusIndex=j;h.focus();break}}return !h&&!g?(this._.focusIndex=-1,this.onKeyDown(f,1)):!1;case"prev":j=this._.focusIndex;for(i=this.element.getElementsByTag("a");0<j&&(h=i.getItem(--j));){if(h.getAttribute("_cke_focus")&&h.$.offsetWidth){this._.focusIndex=j;h.focus();break}h=null}return !h&&!g?(this._.focusIndex=i.count(),this.onKeyDown(f,1)):!1;case"click":case"mouseup":return j=this._.focusIndex,(h=0<=j&&this.element.getElementsByTag("a").getItem(j))&&(h.$[i]?h.$[i]():h.$["on"+i]()),!1}return !0}}})})();CKEDITOR.plugins.add("floatpanel",{requires:"panel"});(function(){function b(d,e,g,l,j){var j=CKEDITOR.tools.genKey(e.getUniqueId(),g.getUniqueId(),d.lang.dir,d.uiColor||"",l.css||"",j||""),k=a[j];k||(k=a[j]=new CKEDITOR.ui.panel(e,l),k.element=g.append(CKEDITOR.dom.element.createFromHtml(k.render(d),e)),k.element.setStyles({display:"none",position:"absolute"}));return k}var a={};CKEDITOR.ui.floatPanel=CKEDITOR.tools.createClass({$:function(e,g,k,p){function n(){m.hide()}k.forceIFrame=1;k.toolbarRelated&&e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(g=CKEDITOR.document.getById("cke_"+e.name));var o=g.getDocument(),p=b(e,o,g,k,p||0),q=p.element,r=q.getFirst(),m=this;q.disableContextMenu();this.element=q;this._={editor:e,panel:p,parentElement:g,definition:k,document:o,iframe:r,children:[],dir:e.lang.dir};e.on("mode",n);e.on("resize",n);if(!CKEDITOR.env.iOS){o.getWindow().on("resize",n)}},proto:{addBlock:function(c,d){return this._.panel.addBlock(c,d)},addListBlock:function(c,d){return this._.panel.addListBlock(c,d)},getBlock:function(c){return this._.panel.getBlock(c)},showBlock:function(n,q,r,x,u,w){var y=this._.panel,A=y.showBlock(n);this.allowBlur(!1);n=this._.editor.editable();this._.returnFocus=n.hasFocus?n:new CKEDITOR.dom.element(CKEDITOR.document.$.activeElement);this._.hideTimeout=0;var s=this.element,n=this._.iframe,n=CKEDITOR.env.ie?n:new CKEDITOR.dom.window(n.$.contentWindow),v=s.getDocument(),C=this._.parentElement.getPositionedAncestor(),D=q.getDocumentPosition(v),v=C?C.getDocumentPosition(v):{x:0,y:0},B="rtl"==this._.dir,t=D.x+(x||0)-v.x,z=D.y+(u||0)-v.y;if(B&&(1==r||4==r)){t+=q.$.offsetWidth}else{if(!B&&(2==r||3==r)){t+=q.$.offsetWidth-1}}if(3==r||4==r){z+=q.$.offsetHeight-1}this._.panel._.offsetParentId=q.getId();s.setStyles({top:z+"px",left:0,display:""});s.setOpacity(0);s.getFirst().removeStyle("width");this._.editor.focusManager.add(n);this._.blurSet||(CKEDITOR.event.useCapture=!0,n.on("blur",function(c){function d(){delete this._.returnFocus;this.hide()}this.allowBlur()&&c.data.getPhase()==CKEDITOR.EVENT_PHASE_AT_TARGET&&(this.visible&&!this._.activeChild)&&(CKEDITOR.env.iOS?this._.hideTimeout||(this._.hideTimeout=CKEDITOR.tools.setTimeout(d,0,this)):d.call(this))},this),n.on("focus",function(){this._.focused=!0;this.hideChild();this.allowBlur(!0)},this),CKEDITOR.env.iOS&&(n.on("touchstart",function(){clearTimeout(this._.hideTimeout)},this),n.on("touchend",function(){this._.hideTimeout=0;this.focus()},this)),CKEDITOR.event.useCapture=!1,this._.blurSet=1);y.onEscape=CKEDITOR.tools.bind(function(c){if(this.onEscape&&this.onEscape(c)===false){return false}},this);CKEDITOR.tools.setTimeout(function(){var c=CKEDITOR.tools.bind(function(){s.removeStyle("width");if(A.autoSize){var d=A.element.getDocument(),d=(CKEDITOR.env.webkit?A.element:d.getBody()).$.scrollWidth;CKEDITOR.env.ie&&(CKEDITOR.env.quirks&&d>0)&&(d=d+((s.$.offsetWidth||0)-(s.$.clientWidth||0)+3));s.setStyle("width",d+10+"px");d=A.element.$.scrollHeight;CKEDITOR.env.ie&&(CKEDITOR.env.quirks&&d>0)&&(d=d+((s.$.offsetHeight||0)-(s.$.clientHeight||0)+3));s.setStyle("height",d+"px");y._.currentBlock.element.setStyle("display","none").removeStyle("display")}else{s.removeStyle("height")}B&&(t=t-s.$.offsetWidth);s.setStyle("left",t+"px");var e=y.element.getWindow(),d=s.$.getBoundingClientRect(),e=e.getViewPaneSize(),h=d.width||d.right-d.left,j=d.height||d.bottom-d.top,l=B?d.right:e.width-d.left,k=B?e.width-d.right:d.left;B?l<h&&(t=k>h?t+h:e.width>h?t-d.left:t-d.right+e.width):l<h&&(t=k>h?t-h:e.width>h?t-d.right+e.width:t-d.left);h=d.top;e.height-d.top<j&&(z=h>j?z-j:e.height>j?z-d.bottom+e.height:z-d.top);if(CKEDITOR.env.ie){e=d=new CKEDITOR.dom.element(s.$.offsetParent);e.getName()=="html"&&(e=e.getDocument().getBody());e.getComputedStyle("direction")=="rtl"&&(t=CKEDITOR.env.ie8Compat?t-s.getDocument().getDocumentElement().$.scrollLeft*2:t-(d.$.scrollWidth-d.$.clientWidth))}var d=s.getFirst(),m;(m=d.getCustomData("activePanel"))&&m.onHide&&m.onHide.call(this,1);d.setCustomData("activePanel",this);s.setStyles({top:z+"px",left:t+"px"});s.setOpacity(1);w&&w()},this);y.isLoaded?c():y.onLoad=c;CKEDITOR.tools.setTimeout(function(){var d=CKEDITOR.env.webkit&&CKEDITOR.document.getWindow().getScrollPosition().y;this.focus();A.element.focus();if(CKEDITOR.env.webkit){CKEDITOR.document.getBody().$.scrollTop=d}this.allowBlur(true);this._.editor.fire("panelShow",this)},0,this)},CKEDITOR.env.air?200:0,this);this.visible=1;this.onShow&&this.onShow.call(this)},focus:function(){if(CKEDITOR.env.webkit){var c=CKEDITOR.document.getActive();!c.equals(this._.iframe)&&c.$.blur()}(this._.lastFocused||this._.iframe.getFrameDocument().getWindow()).focus()},blur:function(){var c=this._.iframe.getFrameDocument().getActive();c.is("a")&&(this._.lastFocused=c)},hide:function(c){if(this.visible&&(!this.onHide||!0!==this.onHide.call(this))){this.hideChild();CKEDITOR.env.gecko&&this._.iframe.getFrameDocument().$.activeElement.blur();this.element.setStyle("display","none");this.visible=0;this.element.getFirst().removeCustomData("activePanel");if(c=c&&this._.returnFocus){CKEDITOR.env.webkit&&c.type&&c.getWindow().$.focus(),c.focus()}delete this._.lastFocused;this._.editor.fire("panelHide",this)}},allowBlur:function(c){var d=this._.panel;void 0!=c&&(d.allowBlur=c);return d.allowBlur},showAsChild:function(d,e,i,k,j,l){this._.activeChild==d&&d._.panel._.offsetParentId==i.getId()||(this.hideChild(),d.onHide=CKEDITOR.tools.bind(function(){CKEDITOR.tools.setTimeout(function(){this._.focused||this.hide()},0,this)},this),this._.activeChild=d,this._.focused=!1,d.showBlock(e,i,k,j,l),this.blur(),(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&setTimeout(function(){d.element.getChild(0).$.style.cssText+=""},100))},hideChild:function(c){var d=this._.activeChild;d&&(delete d.onHide,delete this._.activeChild,d.hide(),c&&this.focus())}}});CKEDITOR.on("instanceDestroyed",function(){var d=CKEDITOR.tools.isEmpty(CKEDITOR.instances),e;for(e in a){var f=a[e];d?f.destroy():f.element.hide()}d&&(a={})})})();CKEDITOR.plugins.add("colorbutton",{requires:"panelbutton,floatpanel",init:function(a){function e(o,f,c,i){var m=new CKEDITOR.style(d["colorButton_"+f+"Style"]),n=CKEDITOR.tools.getNextId()+"_colorBox";a.ui.add(o,CKEDITOR.UI_PANELBUTTON,{label:c,title:c,modes:{wysiwyg:1},editorFocus:0,toolbar:"colors,"+i,allowedContent:m,requiredContent:m,panel:{css:CKEDITOR.skin.getPath("editor"),attributes:{role:"listbox","aria-label":b.panelTitle}},onBlock:function(j,k){k.autoSize=!0;k.element.addClass("cke_colorblock");k.element.setHtml(h(j,f,n));k.element.getDocument().getBody().setStyle("overflow","hidden");CKEDITOR.ui.fire("ready",this);var l=k.keys,p="rtl"==a.lang.dir;l[p?37:39]="next";l[40]="next";l[9]="next";l[p?39:37]="prev";l[38]="prev";l[CKEDITOR.SHIFT+9]="prev";l[32]="click"},refresh:function(){a.activeFilter.check(m)||this.setState(CKEDITOR.TRISTATE_DISABLED)},onOpen:function(){var j=a.getSelection(),j=j&&j.getStartElement(),j=a.elementPath(j),k;if(j){j=j.block||j.blockLimit||a.document.getBody();do{k=j&&j.getComputedStyle("back"==f?"background-color":"color")||"transparent"}while("back"==f&&"transparent"==k&&j&&(j=j.getParent()));if(!k||"transparent"==k){k="#ffffff"}this._.panel._.iframe.getFrameDocument().getById(n).setStyle("background-color",k);return k}}})}function h(r,n,m){var o=[],p=d.colorButton_colors.split(","),q=CKEDITOR.tools.addFunction(function(j,k){if("?"==j){var s=arguments.callee,l=function(u){this.removeListener("ok",l);this.removeListener("cancel",l);"ok"==u.name&&s(this.getContentElement("picker","selectedColor").getValue(),k)};a.openDialog("colordialog",function(){this.on("ok",l);this.on("cancel",l)})}else{a.focus();r.hide();a.fire("saveSnapshot");a.removeStyle(new CKEDITOR.style(d["colorButton_"+k+"Style"],{color:"inherit"}));if(j){var t=d["colorButton_"+k+"Style"];t.childRule="back"==k?function(u){return g(u)}:function(u){return !(u.is("a")||u.getElementsByTag("a").count())||g(u)};a.applyStyle(new CKEDITOR.style(t,{color:j}))}a.fire("saveSnapshot")}});o.push('<a class="cke_colorauto" _cke_focus=1 hidefocus=true title="',b.auto,'" onclick="CKEDITOR.tools.callFunction(',q,",null,'",n,"');return false;\" href=\"javascript:void('",b.auto,'\')" role="option"><table role="presentation" cellspacing=0 cellpadding=0 width="100%"><tr><td><span class="cke_colorbox" id="',m,'"></span></td><td colspan=7 align=center>',b.auto,'</td></tr></table></a><table role="presentation" cellspacing=0 cellpadding=0 width="100%">');for(m=0;m<p.length;m++){0===m%8&&o.push("</tr><tr>");var c=p[m].split("/"),f=c[0],i=c[1]||f;c[1]||(f="#"+f.replace(/^(.)(.)(.)$/,"$1$1$2$2$3$3"));c=a.lang.colorbutton.colors[i]||i;o.push('<td><a class="cke_colorbox" _cke_focus=1 hidefocus=true title="',c,'" onclick="CKEDITOR.tools.callFunction(',q,",'",f,"','",n,"'); return false;\" href=\"javascript:void('",c,'\')" role="option"><span class="cke_colorbox" style="background-color:#',i,'"></span></a></td>')}(a.plugins.colordialog&&void 0===d.colorButton_enableMore||d.colorButton_enableMore)&&o.push('</tr><tr><td colspan=8 align=center><a class="cke_colormore" _cke_focus=1 hidefocus=true title="',b.more,'" onclick="CKEDITOR.tools.callFunction(',q,",'?','",n,"');return false;\" href=\"javascript:void('",b.more,"')\"",' role="option">',b.more,"</a></td>");o.push("</tr></table>");return o.join("")}function g(f){return"false"==f.getAttribute("contentEditable")||f.getAttribute("data-nostyle")}var d=a.config,b=a.lang.colorbutton;CKEDITOR.env.hc||(e("TextColor","fore",b.textColorTitle,10),e("BGColor","back",b.bgColorTitle,20))}});CKEDITOR.config.colorButton_colors="000,800000,8B4513,2F4F4F,008080,000080,4B0082,696969,B22222,A52A2A,DAA520,006400,40E0D0,0000CD,800080,808080,F00,FF8C00,FFD700,008000,0FF,00F,EE82EE,A9A9A9,FFA07A,FFA500,FFFF00,00FF00,AFEEEE,ADD8E6,DDA0DD,D3D3D3,FFF0F5,FAEBD7,FFFFE0,F0FFF0,F0FFFF,F0F8FF,E6E6FA,FFF";CKEDITOR.config.colorButton_foreStyle={element:"span",styles:{color:"#(color)"},overrides:[{element:"font",attributes:{color:null}}]};CKEDITOR.config.colorButton_backStyle={element:"span",styles:{"background-color":"#(color)"}};CKEDITOR.plugins.colordialog={requires:"dialog",init:function(a){var d=new CKEDITOR.dialogCommand("colordialog");d.editorFocus=!1;a.addCommand("colordialog",d);CKEDITOR.dialog.add("colordialog",this.path+"dialogs/colordialog.js");a.getColorFromDialog=function(b,i){var g=function(c){this.removeListener("ok",g);this.removeListener("cancel",g);c="ok"==c.name?this.getValueOf("picker","selectedColor"):null;b.call(i,c)},h=function(c){c.on("ok",g);c.on("cancel",g)};a.execCommand("colordialog");if(a._.storedDialogs&&a._.storedDialogs.colordialog){h(a._.storedDialogs.colordialog)}else{CKEDITOR.on("dialogDefinition",function(c){if("colordialog"==c.data.name){var e=c.data.definition;c.removeListener();e.onLoad=CKEDITOR.tools.override(e.onLoad,function(f){return function(){h(this);e.onLoad=f;"function"==typeof f&&f.call(this)}})}})}}}};CKEDITOR.plugins.add("colordialog",CKEDITOR.plugins.colordialog);(function(){CKEDITOR.plugins.add("templates",{requires:"dialog",init:function(c){CKEDITOR.dialog.add("templates",CKEDITOR.getUrl(this.path+"dialogs/templates.js"));c.addCommand("templates",new CKEDITOR.dialogCommand("templates"));c.ui.addButton&&c.ui.addButton("Templates",{label:c.lang.templates.button,command:"templates",toolbar:"doctools,10"})}});var a={},b={};CKEDITOR.addTemplates=function(c,e){a[c]=e};CKEDITOR.getTemplates=function(c){return a[c]};CKEDITOR.loadTemplates=function(f,i){for(var j=[],g=0,h=f.length;g<h;g++){b[f[g]]||(j.push(f[g]),b[f[g]]=1)}j.length?CKEDITOR.scriptLoader.load(j,i):setTimeout(i,0)}})();CKEDITOR.config.templates_files=[CKEDITOR.getUrl("plugins/templates/templates/default.js")];CKEDITOR.config.templates_replaceContent=!0;CKEDITOR.plugins.add("menu",{requires:"floatpanel",beforeInit:function(c){for(var d=c.config.menu_groups.split(","),f=c._.menuGroups={},e=c._.menuItems={},b=0;b<d.length;b++){f[d[b]]=b+1}c.addMenuGroup=function(h,g){f[h]=g||100};c.addMenuItem=function(g,h){f[h.group]&&(e[g]=new CKEDITOR.menuItem(this,g,h))};c.addMenuItems=function(g){for(var h in g){this.addMenuItem(h,g[h])}};c.getMenuItem=function(g){return e[g]};c.removeMenuItem=function(g){delete e[g]}}});(function(){function a(e){e.sort(function(f,g){return f.group<g.group?-1:f.group>g.group?1:f.order<g.order?-1:f.order>g.order?1:0})}var b='<span class="cke_menuitem"><a id="{id}" class="cke_menubutton cke_menubutton__{name} cke_menubutton_{state} {cls}" href="{href}" title="{title}" tabindex="-1"_cke_focus=1 hidefocus="true" role="{role}" aria-haspopup="{hasPopup}" aria-disabled="{disabled}" {ariaChecked}';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(b+=' onkeypress="return false;"');CKEDITOR.env.gecko&&(b+=' onblur="this.style.cssText = this.style.cssText;"');var b=b+(' onmouseover="CKEDITOR.tools.callFunction({hoverFn},{index});" onmouseout="CKEDITOR.tools.callFunction({moveOutFn},{index});" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},{index}); return false;">'),d=CKEDITOR.addTemplate("menuItem",b+'<span class="cke_menubutton_inner"><span class="cke_menubutton_icon"><span class="cke_button_icon cke_button__{iconName}_icon" style="{iconStyle}"></span></span><span class="cke_menubutton_label">{label}</span>{arrowHtml}</span></a></span>'),c=CKEDITOR.addTemplate("menuArrow",'<span class="cke_menuarrow"><span>{label}</span></span>');CKEDITOR.menu=CKEDITOR.tools.createClass({$:function(e,f){f=this._.definition=f||{};this.id=CKEDITOR.tools.getNextId();this.editor=e;this.items=[];this._.listeners=[];this._.level=f.level||1;var g=CKEDITOR.tools.extend({},f.panel,{css:[CKEDITOR.skin.getPath("editor")],level:this._.level-1,block:{}}),h=g.block.attributes=g.attributes||{};!h.role&&(h.role="menu");this._.panelDefinition=g},_:{onShow:function(){var g=this.editor.getSelection(),h=g&&g.getStartElement(),l=this.editor.elementPath(),q=this._.listeners;this.removeAll();for(var m=0;m<q.length;m++){var p=q[m](h,g,l);if(p){for(var o in p){var n=this.editor.getMenuItem(o);if(n&&(!n.command||this.editor.getCommand(n.command).state)){n.state=p[o],this.add(n)}}}}},onClick:function(e){this.hide();if(e.onClick){e.onClick()}else{e.command&&this.editor.execCommand(e.command)}},onEscape:function(e){var f=this.parent;f?f._.panel.hideChild(1):27==e&&this.hide(1);return !1},onHide:function(){this.onHide&&this.onHide()},showSubMenu:function(f){var g=this._.subMenu,h=this.items[f];if(h=h.getItems&&h.getItems()){g?g.removeAll():(g=this._.subMenu=new CKEDITOR.menu(this.editor,CKEDITOR.tools.extend({},this._.definition,{level:this._.level+1},!0)),g.parent=this,g._.onClick=CKEDITOR.tools.bind(this._.onClick,this));for(var m in h){var i=this.editor.getMenuItem(m);i&&(i.state=h[m],g.add(i))}var l=this._.panel.getBlock(this.id).element.getDocument().getById(this.id+(""+f));setTimeout(function(){g.show(l,2)},0)}else{this._.panel.hideChild(1)}}},proto:{add:function(e){e.order||(e.order=this.items.length);this.items.push(e)},removeAll:function(){this.items=[]},show:function(g,o,p,w){if(!this.parent&&(this._.onShow(),!this.items.length)){return}var o=o||("rtl"==this.editor.lang.dir?2:1),r=this.items,v=this.editor,u=this._.panel,s=this._.element;if(!u){u=this._.panel=new CKEDITOR.ui.floatPanel(this.editor,CKEDITOR.document.getBody(),this._.panelDefinition,this._.level);u.onEscape=CKEDITOR.tools.bind(function(e){if(!1===this._.onEscape(e)){return !1}},this);u.onShow=function(){u._.panel.getHolderElement().getParent().addClass("cke cke_reset_all")};u.onHide=CKEDITOR.tools.bind(function(){this._.onHide&&this._.onHide()},this);s=u.addBlock(this.id,this._.panelDefinition.block);s.autoSize=!0;var q=s.keys;q[40]="next";q[9]="next";q[38]="prev";q[CKEDITOR.SHIFT+9]="prev";q["rtl"==v.lang.dir?37:39]=CKEDITOR.env.ie?"mouseup":"click";q[32]=CKEDITOR.env.ie?"mouseup":"click";CKEDITOR.env.ie&&(q[13]="mouseup");s=this._.element=s.element;q=s.getDocument();q.getBody().setStyle("overflow","hidden");q.getElementsByTag("html").getItem(0).setStyle("overflow","hidden");this._.itemOverFn=CKEDITOR.tools.addFunction(function(e){clearTimeout(this._.showSubTimeout);this._.showSubTimeout=CKEDITOR.tools.setTimeout(this._.showSubMenu,v.config.menu_subMenuDelay||400,this,[e])},this);this._.itemOutFn=CKEDITOR.tools.addFunction(function(){clearTimeout(this._.showSubTimeout)},this);this._.itemClickFn=CKEDITOR.tools.addFunction(function(e){var f=this.items[e];if(f.state==CKEDITOR.TRISTATE_DISABLED){this.hide(1)}else{if(f.getItems){this._.showSubMenu(e)}else{this._.onClick(f)}}},this)}a(r);for(var q=v.elementPath(),q=['<div class="cke_menu'+(q&&q.direction()!=v.lang.dir?" cke_mixed_dir_content":"")+'" role="presentation">'],t=r.length,y=t&&r[0].group,x=0;x<t;x++){var z=r[x];y!=z.group&&(q.push('<div class="cke_menuseparator" role="separator"></div>'),y=z.group);z.render(this,x,q)}q.push("</div>");s.setHtml(q.join(""));CKEDITOR.ui.fire("ready",this);this.parent?this.parent._.panel.showAsChild(u,this.id,g,o,p,w):u.showBlock(this.id,g,o,p,w);v.fire("menuShow",[u])},addListener:function(e){this._.listeners.push(e)},hide:function(e){this._.onHide&&this._.onHide();this._.panel&&this._.panel.hide(e)}}});CKEDITOR.menuItem=CKEDITOR.tools.createClass({$:function(e,f,g){CKEDITOR.tools.extend(this,g,{order:0,className:"cke_menubutton__"+f});this.group=e._.menuGroups[this.group];this.editor=e;this.name=f},proto:{render:function(k,l,m){var r=k.id+(""+l),o="undefined"==typeof this.state?CKEDITOR.TRISTATE_OFF:this.state,t="",s=o==CKEDITOR.TRISTATE_ON?"on":o==CKEDITOR.TRISTATE_DISABLED?"disabled":"off";this.role in {menuitemcheckbox:1,menuitemradio:1}&&(t=' aria-checked="'+(o==CKEDITOR.TRISTATE_ON?"true":"false")+'"');var p=this.getItems,n="&#"+("rtl"==this.editor.lang.dir?"9668":"9658")+";",q=this.name;this.icon&&!/\./.test(this.icon)&&(q=this.icon);k={id:r,name:this.name,iconName:q,label:this.label,cls:this.className||"",state:s,hasPopup:p?"true":"false",disabled:o==CKEDITOR.TRISTATE_DISABLED,title:this.label,href:"javascript:void('"+(this.label||"").replace("'")+"')",hoverFn:k._.itemOverFn,moveOutFn:k._.itemOutFn,clickFn:k._.itemClickFn,index:l,iconStyle:CKEDITOR.skin.getIconStyle(q,"rtl"==this.editor.lang.dir,q==this.icon?null:this.icon,this.iconOffset),arrowHtml:p?c.output({label:n}):"",role:this.role?this.role:"menuitem",ariaChecked:t};d.output(k,m)}}})})();CKEDITOR.config.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div";CKEDITOR.plugins.add("contextmenu",{requires:"menu",onLoad:function(){CKEDITOR.plugins.contextMenu=CKEDITOR.tools.createClass({base:CKEDITOR.menu,$:function(b){this.base.call(this,b,{panel:{className:"cke_menu_panel",attributes:{"aria-label":b.lang.contextmenu.options}}})},proto:{addTarget:function(b,g){b.on("contextmenu",function(e){var e=e.data,i=CKEDITOR.env.webkit?h:CKEDITOR.env.mac?e.$.metaKey:e.$.ctrlKey;if(!g||!i){e.preventDefault();if(CKEDITOR.env.mac&&CKEDITOR.env.webkit){var i=this.editor,f=(new CKEDITOR.dom.elementPath(e.getTarget(),i.editable())).contains(function(d){return d.hasAttribute("contenteditable")},!0);f&&"false"==f.getAttribute("contenteditable")&&i.getSelection().fake(f)}var f=e.getTarget().getDocument(),j=e.getTarget().getDocument().getDocumentElement(),i=!f.equals(CKEDITOR.document),f=f.getWindow().getScrollPosition(),k=i?e.$.clientX:e.$.pageX||f.x+e.$.clientX,l=i?e.$.clientY:e.$.pageY||f.y+e.$.clientY;CKEDITOR.tools.setTimeout(function(){this.open(j,null,k,l)},CKEDITOR.env.ie?200:0,this)}},this);if(CKEDITOR.env.webkit){var h,c=function(){h=0};b.on("keydown",function(d){h=CKEDITOR.env.mac?d.data.$.metaKey:d.data.$.ctrlKey});b.on("keyup",c);b.on("contextmenu",c)}},open:function(b,g,h,c){this.editor.focus();b=b||CKEDITOR.document.getDocumentElement();this.editor.selectionChange(1);this.show(b,g,h,c)}}})},beforeInit:function(b){var c=b.contextMenu=new CKEDITOR.plugins.contextMenu(b);b.on("contentDom",function(){c.addTarget(b.editable(),!1!==b.config.browserContextMenuOnCtrl)});b.addCommand("contextMenu",{exec:function(){b.contextMenu.open(b.document.getBody())}});b.setKeystroke(CKEDITOR.SHIFT+121,"contextMenu");b.setKeystroke(CKEDITOR.CTRL+CKEDITOR.SHIFT+121,"contextMenu")}});(function(){CKEDITOR.plugins.add("div",{requires:"dialog",init:function(d){if(!d.blockless){var f=d.lang.div,e="div(*)";CKEDITOR.dialog.isTabEnabled(d,"editdiv","advanced")&&(e+=";div[dir,id,lang,title]{*}");d.addCommand("creatediv",new CKEDITOR.dialogCommand("creatediv",{allowedContent:e,requiredContent:"div",contextSensitive:!0,refresh:function(b,g){this.setState("div" in (b.config.div_wrapTable?g.root:g.blockLimit).getDtd()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}}));d.addCommand("editdiv",new CKEDITOR.dialogCommand("editdiv",{requiredContent:"div"}));d.addCommand("removediv",{requiredContent:"div",exec:function(i){function k(a){if((a=CKEDITOR.plugins.div.getSurroundDiv(i,a))&&!a.data("cke-div-added")){n.push(a),a.data("cke-div-added")}}for(var j=i.getSelection(),o=j&&j.getRanges(),m,p=j.createBookmarks(),n=[],l=0;l<o.length;l++){m=o[l],m.collapsed?k(j.getStartElement()):(m=new CKEDITOR.dom.walker(m),m.evaluator=k,m.lastForward())}for(l=0;l<n.length;l++){n[l].remove(!0)}j.selectBookmarks(p)}});d.ui.addButton&&d.ui.addButton("CreateDiv",{label:f.toolbar,command:"creatediv",toolbar:"blocks,50"});d.addMenuItems&&(d.addMenuItems({editdiv:{label:f.edit,command:"editdiv",group:"div",order:1},removediv:{label:f.remove,command:"removediv",group:"div",order:5}}),d.contextMenu&&d.contextMenu.addListener(function(a){return !a||a.isReadOnly()?null:CKEDITOR.plugins.div.getSurroundDiv(d)?{editdiv:CKEDITOR.TRISTATE_OFF,removediv:CKEDITOR.TRISTATE_OFF}:null}));CKEDITOR.dialog.add("creatediv",this.path+"dialogs/div.js");CKEDITOR.dialog.add("editdiv",this.path+"dialogs/div.js")}}});CKEDITOR.plugins.div={getSurroundDiv:function(d,f){var e=d.elementPath(f);return d.elementPath(e.blockLimit).contains(function(b){return b.is("div")&&!b.isReadOnly()},1)}}})();CKEDITOR.plugins.add("resize",{init:function(e){var r,s,y,z,d=e.config,B=e.ui.spaceId("resizer"),t=e.element?e.element.getDirection(1):"ltr";!d.resize_dir&&(d.resize_dir="vertical");void 0==d.resize_maxWidth&&(d.resize_maxWidth=3000);void 0==d.resize_maxHeight&&(d.resize_maxHeight=3000);void 0==d.resize_minWidth&&(d.resize_minWidth=750);void 0==d.resize_minHeight&&(d.resize_minHeight=250);if(!1!==d.resize_enabled){var m=null,u=("both"==d.resize_dir||"horizontal"==d.resize_dir)&&d.resize_minWidth!=d.resize_maxWidth,x=("both"==d.resize_dir||"vertical"==d.resize_dir)&&d.resize_minHeight!=d.resize_maxHeight,v=function(b){var f=r,g=s,a=f+(b.data.$.screenX-y)*("rtl"==t?-1:1),b=g+(b.data.$.screenY-z);u&&(f=Math.max(d.resize_minWidth,Math.min(a,d.resize_maxWidth)));x&&(g=Math.max(d.resize_minHeight,Math.min(b,d.resize_maxHeight)));e.resize(u?f:null,g)},w=function(){CKEDITOR.document.removeListener("mousemove",v);CKEDITOR.document.removeListener("mouseup",w);e.document&&(e.document.removeListener("mousemove",v),e.document.removeListener("mouseup",w))},A=CKEDITOR.tools.addFunction(function(a){m||(m=e.getResizable());r=m.$.offsetWidth||0;s=m.$.offsetHeight||0;y=a.screenX;z=a.screenY;d.resize_minWidth>r&&(d.resize_minWidth=r);d.resize_minHeight>s&&(d.resize_minHeight=s);CKEDITOR.document.on("mousemove",v);CKEDITOR.document.on("mouseup",w);e.document&&(e.document.on("mousemove",v),e.document.on("mouseup",w));a.preventDefault&&a.preventDefault()});e.on("destroy",function(){CKEDITOR.tools.removeFunction(A)});e.on("uiSpace",function(b){if("bottom"==b.data.space){var g="";u&&!x&&(g=" cke_resizer_horizontal");!u&&x&&(g=" cke_resizer_vertical");var f='<span id="'+B+'" class="cke_resizer'+g+" cke_resizer_"+t+'" title="'+CKEDITOR.tools.htmlEncode(e.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+A+', event)">'+("ltr"==t?"":"")+"</span>";"ltr"==t&&"ltr"==g?b.data.html+=f:b.data.html=f+b.data.html}},e,null,100);e.on("maximize",function(b){e.ui.space("resizer")[b.data==CKEDITOR.TRISTATE_ON?"hide":"show"]()})}}});(function(){function c(f){function k(){for(var g=m(),p=CKEDITOR.tools.clone(f.config.toolbarGroups)||a(f),q=0;q<p.length;q++){var t=p[q];if("/"!=t){"string"==typeof t&&(t=p[q]={name:t});var s,o=t.groups;if(o){for(var r=0;r<o.length;r++){s=o[r],(s=g[s])&&j(t,s)}}(s=g[t.name])&&j(t,s)}}return p}function m(){var g={},h,p,o;for(h in f.ui.items){p=f.ui.items[h],o=p.toolbar||"others",o=o.split(","),p=o[0],o=parseInt(o[1]||-1,10),g[p]||(g[p]=[]),g[p].push({name:h,order:o})}for(p in g){g[p]=g[p].sort(function(q,e){return q.order==e.order?0:0>e.order?-1:0>q.order?1:q.order<e.order?-1:1})}return g}function j(g,h){if(h.length){g.items?g.items.push(f.ui.create("-")):g.items=[];for(var o;o=h.shift();){if(o="string"==typeof o?o:o.name,!i||-1==CKEDITOR.tools.indexOf(i,o)){(o=f.ui.create(o))&&f.addFeature(o)&&g.items.push(o)}}}}function n(o){var g=[],q,p,r;for(q=0;q<o.length;++q){p=o[q],r={},"/"==p?g.push(p):CKEDITOR.tools.isArray(p)?(j(r,CKEDITOR.tools.clone(p)),g.push(r)):p.items&&(j(r,CKEDITOR.tools.clone(p.items)),r.name=p.name,g.push(r))}return g}var i=f.config.removeButtons,i=i&&i.split(","),l=f.config.toolbar;"string"==typeof l&&(l=f.config["toolbar_"+l]);return f.toolbar=l?n(l):k()}function a(e){return e._.toolbarGroups||(e._.toolbarGroups=[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"forms"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"links"},{name:"insert"},"/",{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}])}var b=function(){this.toolbars=[];this.focusCommandExecuted=!1};b.prototype.focus=function(){for(var e=0,h;h=this.toolbars[e++];){for(var i=0,f;f=h.items[i++];){if(f.focus){f.focus();return}}}};var d={modes:{wysiwyg:1,source:1},readOnly:1,exec:function(e){e.toolbox&&(e.toolbox.focusCommandExecuted=!0,CKEDITOR.env.ie||CKEDITOR.env.air?setTimeout(function(){e.toolbox.focus()},100):e.toolbox.focus())}};CKEDITOR.plugins.add("toolbar",{requires:"button",init:function(e){var f,h=function(i,l){var g,k="rtl"==e.lang.dir,m=e.config.toolbarGroupCycling,n=k?37:39,k=k?39:37,m=void 0===m||m;switch(l){case 9:case CKEDITOR.SHIFT+9:for(;!g||!g.items.length;){if(g=9==l?(g?g.next:i.toolbar.next)||e.toolbox.toolbars[0]:(g?g.previous:i.toolbar.previous)||e.toolbox.toolbars[e.toolbox.toolbars.length-1],g.items.length){for(i=g.items[f?g.items.length-1:0];i&&!i.focus;){(i=f?i.previous:i.next)||(g=0)}}}i&&i.focus();return !1;case n:g=i;do{g=g.next,!g&&m&&(g=i.toolbar.items[0])}while(g&&!g.focus);g?g.focus():h(i,9);return !1;case 40:return i.button&&i.button.hasArrow?(e.once("panelShow",function(j){j.data._.panel._.currentBlock.onKeyDown(40)}),i.execute()):h(i,40==l?n:k),!1;case k:case 38:g=i;do{g=g.previous,!g&&m&&(g=i.toolbar.items[i.toolbar.items.length-1])}while(g&&!g.focus);g?g.focus():(f=1,h(i,CKEDITOR.SHIFT+9),f=0);return !1;case 27:return e.focus(),!1;case 13:case 32:return i.execute(),!1}return !0};e.on("uiSpace",function(u){if(u.data.space==e.config.toolbarLocation){u.removeListener();e.toolbox=new b;var w=CKEDITOR.tools.getNextId(),g=['<span id="',w,'" class="cke_voice_label">',e.lang.toolbar.toolbars,"</span>",'<span id="'+e.ui.spaceId("toolbox")+'" class="cke_toolbox" role="group" aria-labelledby="',w,'" onmousedown="return false;">'],w=!1!==e.config.toolbarStartupExpanded,x,A;e.config.toolbarCanCollapse&&e.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&g.push('<span class="cke_toolbox_main"'+(w?">":' style="display:none">'));for(var F=e.toolbox.toolbars,y=c(e),B=0;B<y.length;B++){var z,C=0,I,D=y[B],J;if(D){if(x&&(g.push("</span>"),A=x=0),"/"===D){g.push('<span class="cke_toolbar_break"></span>')}else{J=D.items||D;for(var K=0;K<J.length;K++){var G=J[K],E;if(G){if(G.type==CKEDITOR.UI_SEPARATOR){A=x&&G}else{E=!1!==G.canGroup;if(!C){z=CKEDITOR.tools.getNextId();C={id:z,items:[]};I=D.name&&(e.lang.toolbar.toolbarGroups[D.name]||D.name);g.push('<span id="',z,'" class="cke_toolbar"',I?' aria-labelledby="'+z+'_label"':"",' role="toolbar">');I&&g.push('<span id="',z,'_label" class="cke_voice_label">',I,"</span>");g.push('<span class="cke_toolbar_start"></span>');var H=F.push(C)-1;0<H&&(C.previous=F[H-1],C.previous.next=C)}E?x||(g.push('<span class="cke_toolgroup" role="presentation">'),x=1):x&&(g.push("</span>"),x=0);z=function(i){i=i.render(e,g);H=C.items.push(i)-1;if(H>0){i.previous=C.items[H-1];i.previous.next=i}i.toolbar=C;i.onkey=h;i.onfocus=function(){e.toolbox.focusCommandExecuted||e.focus()}};A&&(z(A),A=0);z(G)}}}x&&(g.push("</span>"),A=x=0);C&&g.push('<span class="cke_toolbar_end"></span></span>')}}}e.config.toolbarCanCollapse&&g.push("</span>");if(e.config.toolbarCanCollapse&&e.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var L=CKEDITOR.tools.addFunction(function(){e.execCommand("toolbarCollapse")});e.on("destroy",function(){CKEDITOR.tools.removeFunction(L)});e.addCommand("toolbarCollapse",{readOnly:1,exec:function(j){var i=j.ui.space("toolbar_collapser"),k=i.getPrevious(),m=j.ui.space("contents"),l=k.getParent(),n=parseInt(m.$.style.height,10),p=l.$.offsetHeight,o=i.hasClass("cke_toolbox_collapser_min");o?(k.show(),i.removeClass("cke_toolbox_collapser_min"),i.setAttribute("title",j.lang.toolbar.toolbarCollapse)):(k.hide(),i.addClass("cke_toolbox_collapser_min"),i.setAttribute("title",j.lang.toolbar.toolbarExpand));i.getFirst().setText(o?"":"");m.setStyle("height",n-(l.$.offsetHeight-p)+"px");j.fire("resize")},modes:{wysiwyg:1,source:1}});e.setKeystroke(CKEDITOR.ALT+(CKEDITOR.env.ie||CKEDITOR.env.webkit?189:109),"toolbarCollapse");g.push('<a title="'+(w?e.lang.toolbar.toolbarCollapse:e.lang.toolbar.toolbarExpand)+'" id="'+e.ui.spaceId("toolbar_collapser")+'" tabIndex="-1" class="cke_toolbox_collapser');w||g.push(" cke_toolbox_collapser_min");g.push('" onclick="CKEDITOR.tools.callFunction('+L+')">','<span class="cke_arrow">&#9650;</span>',"</a>")}g.push("</span>");u.data.html+=g.join("")}});e.on("destroy",function(){if(this.toolbox){var i,k=0,j,l,m;for(i=this.toolbox.toolbars;k<i.length;k++){l=i[k].items;for(j=0;j<l.length;j++){m=l[j],m.clickFn&&CKEDITOR.tools.removeFunction(m.clickFn),m.keyDownFn&&CKEDITOR.tools.removeFunction(m.keyDownFn)}}}});e.on("uiReady",function(){var g=e.ui.space("toolbox");g&&e.focusManager.add(g,1)});e.addCommand("toolbarFocus",d);e.setKeystroke(CKEDITOR.ALT+121,"toolbarFocus");e.ui.add("-",CKEDITOR.UI_SEPARATOR,{});e.ui.addHandler(CKEDITOR.UI_SEPARATOR,{create:function(){return{render:function(g,i){i.push('<span class="cke_toolbar_separator" role="separator"></span>');return{}}}}})}});CKEDITOR.ui.prototype.addToolbarGroup=function(e,j,k){var i=a(this.editor),l=0===j,f={name:e};if(k){if(k=CKEDITOR.tools.search(i,function(g){return g.name==k})){!k.groups&&(k.groups=[]);if(j&&(j=CKEDITOR.tools.indexOf(k.groups,j),0<=j)){k.groups.splice(j+1,0,e);return}l?k.groups.splice(0,0,e):k.groups.push(e);return}j=null}j&&(j=CKEDITOR.tools.indexOf(i,function(g){return g.name==j}));l?i.splice(0,0,e):"number"==typeof j?i.splice(j+1,0,f):i.push(e)}})();CKEDITOR.UI_SEPARATOR="separator";CKEDITOR.config.toolbarLocation="top";(function(){var b;function d(g,h){function o(c){c=k.list[c];if(c.equals(g.editable())||"true"==c.getAttribute("contenteditable")){var i=g.createRange();i.selectNodeContents(c);i.select()}else{g.getSelection().selectElement(c)}g.focus()}function v(){p&&p.setHtml(e);delete k.list}var q=g.ui.spaceId("path"),p,k=g._.elementsPath,r=k.idBase;h.html+='<span id="'+q+'_label" class="cke_voice_label">'+g.lang.elementspath.eleLabel+'</span><span id="'+q+'" class="cke_path" role="group" aria-labelledby="'+q+'_label">'+e+"</span>";g.on("uiReady",function(){var c=g.ui.space("path");c&&g.focusManager.add(c,1)});k.onClick=o;var w=CKEDITOR.tools.addFunction(o),x=CKEDITOR.tools.addFunction(function(i,j){var l=k.idBase,c,j=new CKEDITOR.dom.event(j);c="rtl"==g.lang.dir;switch(j.getKeystroke()){case c?39:37:case 9:return(c=CKEDITOR.document.getById(l+(i+1)))||(c=CKEDITOR.document.getById(l+"0")),c.focus(),!1;case c?37:39:case CKEDITOR.SHIFT+9:return(c=CKEDITOR.document.getById(l+(i-1)))||(c=CKEDITOR.document.getById(l+(k.list.length-1))),c.focus(),!1;case 27:return g.focus(),!1;case 13:case 32:return o(i),!1}return !0});g.on("selectionChange",function(){g.editable();for(var m=[],n=k.list=[],t=[],i=k.filters,l=!0,y=g.elementPath().elements,s,z=y.length;z--;){var u=y[z],A=0;s=u.data("cke-display-name")?u.data("cke-display-name"):u.data("cke-real-element-type")?u.data("cke-real-element-type"):u.getName();l=u.hasAttribute("contenteditable")?"true"==u.getAttribute("contenteditable"):l;!l&&!u.hasAttribute("contenteditable")&&(A=1);for(var B=0;B<i.length;B++){var C=i[B](u,s);if(!1===C){A=1;break}s=C||s}A||(n.unshift(u),t.unshift(s))}n=n.length;for(i=0;i<n;i++){s=t[i],l=g.lang.elementspath.eleTitle.replace(/%1/,s),s=f.output({id:r+i,label:l,text:s,jsTitle:"javascript:void('"+s+"')",index:i,keyDownFn:x,clickFn:w}),m.unshift(s)}p||(p=CKEDITOR.document.getById(q));t=p;t.setHtml(m.join("")+e);g.fire("elementsPathUpdate",{space:t})});g.on("readOnly",v);g.on("contentDomUnload",v);g.addCommand("elementsPathFocus",b);g.setKeystroke(CKEDITOR.ALT+122,"elementsPathFocus")}b={editorFocus:!1,readOnly:1,exec:function(c){(c=CKEDITOR.document.getById(c._.elementsPath.idBase+"0"))&&c.focus(CKEDITOR.env.ie||CKEDITOR.env.air)}};var e='<span class="cke_path_empty">&nbsp;</span>',a="";CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(a+=' onkeypress="return false;"');CKEDITOR.env.gecko&&(a+=' onblur="this.style.cssText = this.style.cssText;"');var f=CKEDITOR.addTemplate("pathItem",'<a id="{id}" href="{jsTitle}" tabindex="-1" class="cke_path_item" title="{label}"'+a+' hidefocus="true"  onkeydown="return CKEDITOR.tools.callFunction({keyDownFn},{index}, event );" onclick="CKEDITOR.tools.callFunction({clickFn},{index}); return false;" role="button" aria-label="{label}">{text}</a>');CKEDITOR.plugins.add("elementspath",{init:function(c){c._.elementsPath={idBase:"cke_elementspath_"+CKEDITOR.tools.getNextNumber()+"_",filters:[]};c.on("uiSpace",function(g){"bottom"==g.data.space&&d(c,g.data)})}})})();(function(){function a(j,k,i){i=j.config.forceEnterMode||i;"wysiwyg"==j.mode&&(k||(k=j.activeEnterMode),j.elementPath().isContextFor("p")||(k=CKEDITOR.ENTER_BR,i=1),j.fire("saveSnapshot"),k==CKEDITOR.ENTER_BR?b(j,k,null,i):c(j,k,null,i),j.fire("saveSnapshot"))}function d(i){for(var i=i.getSelection().getRanges(!0),j=i.length-1;0<j;j--){i[j].deleteContents()}return i[0]}CKEDITOR.plugins.add("enterkey",{init:function(i){i.addCommand("enter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(j){a(j)}});i.addCommand("shiftEnter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(j){a(j,j.activeShiftEnterMode,1)}});i.setKeystroke([[13,"enter"],[CKEDITOR.SHIFT+13,"shiftEnter"]])}});var g=CKEDITOR.dom.walker.whitespaces(),h=CKEDITOR.dom.walker.bookmark();CKEDITOR.plugins.enterkey={enterBlock:function(r,t,q,w){if(q=q||d(r)){var u=q.document,x=q.checkStartOfBlock(),z=q.checkEndOfBlock(),y=r.elementPath(q.startContainer),p=y.block,A=t==CKEDITOR.ENTER_DIV?"div":"p",s;if(x&&z){if(p&&(p.is("li")||p.getParent().is("li"))){p.is("li")||(p=p.getParent());q=p.getParent();s=q.getParent();var w=!p.hasPrevious(),C=!p.hasNext(),A=r.getSelection(),v=A.createBookmarks(),x=p.getDirection(1),z=p.getAttribute("class"),D=p.getAttribute("style"),B=s.getDirection(1)!=x,r=r.enterMode!=CKEDITOR.ENTER_BR||B||D||z;if(s.is("li")){if(w||C){p[w?"insertBefore":"insertAfter"](s)}else{p.breakParent(s)}}else{if(r){if(y.block.is("li")?(s=u.createElement(t==CKEDITOR.ENTER_P?"p":"div"),B&&s.setAttribute("dir",x),D&&s.setAttribute("style",D),z&&s.setAttribute("class",z),p.moveChildren(s)):s=y.block,w||C){s[w?"insertBefore":"insertAfter"](q)}else{p.breakParent(q),s.insertAfter(q)}}else{if(p.appendBogus(!0),w||C){for(;u=p[w?"getFirst":"getLast"]();){u[w?"insertBefore":"insertAfter"](q)}}else{for(p.breakParent(q);u=p.getLast();){u.insertAfter(q)}}}p.remove()}A.selectBookmarks(v);return}if(p&&p.getParent().is("blockquote")){p.breakParent(p.getParent());p.getPrevious().getFirst(CKEDITOR.dom.walker.invisible(1))||p.getPrevious().remove();p.getNext().getFirst(CKEDITOR.dom.walker.invisible(1))||p.getNext().remove();q.moveToElementEditStart(p);q.select();return}}else{if(p&&p.is("pre")&&!z){b(r,t,q,w);return}}if(x=q.splitBlock(A)){t=x.previousBlock;p=x.nextBlock;y=x.wasStartOfBlock;r=x.wasEndOfBlock;if(p){v=p.getParent(),v.is("li")&&(p.breakParent(v),p.move(p.getNext(),1))}else{if(t&&(v=t.getParent())&&v.is("li")){t.breakParent(v),v=t.getNext(),q.moveToElementEditStart(v),t.move(t.getPrevious())}}if(!y&&!r){p.is("li")&&(s=q.clone(),s.selectNodeContents(p),s=new CKEDITOR.dom.walker(s),s.evaluator=function(i){return !(h(i)||g(i)||i.type==CKEDITOR.NODE_ELEMENT&&i.getName() in CKEDITOR.dtd.$inline&&!(i.getName() in CKEDITOR.dtd.$empty))},(v=s.next())&&(v.type==CKEDITOR.NODE_ELEMENT&&v.is("ul","ol"))&&(CKEDITOR.env.needsBrFiller?u.createElement("br"):u.createText("")).insertBefore(v)),p&&q.moveToElementEditStart(p)}else{if(t){if(t.is("li")||!e.test(t.getName())&&!t.is("pre")){s=t.clone()}}else{p&&(s=p.clone())}s?w&&!s.is("li")&&s.renameNode(A):v&&v.is("li")?s=v:(s=u.createElement(A),t&&(C=t.getDirection())&&s.setAttribute("dir",C));if(u=x.elementPath){w=0;for(A=u.elements.length;w<A;w++){v=u.elements[w];if(v.equals(u.block)||v.equals(u.blockLimit)){break}CKEDITOR.dtd.$removeEmpty[v.getName()]&&(v=v.clone(),s.moveChildren(v),s.append(v))}}s.appendBogus();s.getParent()||q.insertNode(s);s.is("li")&&s.removeAttribute("value");if(CKEDITOR.env.ie&&y&&(!r||!t.getChildCount())){q.moveToElementEditStart(r?t:s),q.select()}q.moveToElementEditStart(y&&!r?p:s)}q.select();q.scrollIntoView()}}},enterBr:function(n,o,m,q){if(m=m||d(n)){var p=m.document,r=m.checkEndOfBlock(),t=new CKEDITOR.dom.elementPath(n.getSelection().getStartElement()),s=t.block,l=s&&t.block.getName();!q&&"li"==l?c(n,o,m,q):(!q&&r&&e.test(l)?(r=s.getDirection())?(p=p.createElement("div"),p.setAttribute("dir",r),p.insertAfter(s),m.setStart(p,0)):(p.createElement("br").insertAfter(s),CKEDITOR.env.gecko&&p.createText("").insertAfter(s),m.setStartAt(s.getNext(),CKEDITOR.env.ie?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_START)):(n="pre"==l&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?p.createText("\r"):p.createElement("br"),m.deleteContents(),m.insertNode(n),CKEDITOR.env.needsBrFiller?(p.createText("").insertAfter(n),r&&(s||t.blockLimit).appendBogus(),n.getNext().$.nodeValue="",m.setStartAt(n.getNext(),CKEDITOR.POSITION_AFTER_START)):m.setStartAt(n,CKEDITOR.POSITION_AFTER_END)),m.collapse(!0),m.select(),m.scrollIntoView())}}};var f=CKEDITOR.plugins.enterkey,b=f.enterBr,c=f.enterBlock,e=/^h[1-6]$/})();(function(){function a(h,j){var l={},m=[],n={nbsp:"",shy:"",gt:">",lt:"<",amp:"&",apos:"'",quot:'"'},h=h.replace(/\b(nbsp|shy|gt|lt|amp|apos|quot)(?:,|$)/g,function(b,e){var d=j?"&"+e+";":n[e];l[d]=j?n[e]:"&"+e+";";m.push(d);return""});if(!j&&h){var h=h.split(","),k=document.createElement("div"),o;k.innerHTML="&"+h.join(";&")+";";o=k.innerHTML;k=null;for(k=0;k<o.length;k++){var p=o.charAt(k);l[p]="&"+h[k]+";";m.push(p)}}l.regex=m.join(j?"|":"");return l}CKEDITOR.plugins.add("entities",{afterInit:function(h){var j=h.config;if(h=(h=h.dataProcessor)&&h.htmlFilter){var m=[];!1!==j.basicEntities&&m.push("nbsp,gt,lt,amp");j.entities&&(m.length&&m.push("quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro"),j.entities_latin&&m.push("Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml"),j.entities_greek&&m.push("Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv"),j.entities_additional&&m.push(j.entities_additional));var n=a(m.join(",")),o=n.regex?"["+n.regex+"]":"a^";delete n.regex;j.entities&&j.entities_processNumerical&&(o="[^ -~]|"+o);var o=RegExp(o,"g"),l=function(b){return j.entities_processNumerical=="force"||!n[b]?"&#"+b.charCodeAt(0)+";":n[b]},p=a("nbsp,gt,lt,amp,shy",!0),q=RegExp(p.regex,"g"),r=function(b){return p[b]};h.addRules({text:function(b){return b.replace(q,r).replace(o,l)}},{applyToAll:!0,excludeNestedEditable:!0})}}})})();CKEDITOR.config.basicEntities=!0;CKEDITOR.config.entities=!0;CKEDITOR.config.entities_latin=!0;CKEDITOR.config.entities_greek=!0;CKEDITOR.config.entities_additional="#39";CKEDITOR.plugins.add("popup");CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{popup:function(m,i,j,l){i=i||"80%";j=j||"70%";"string"==typeof i&&(1<i.length&&"%"==i.substr(i.length-1,1))&&(i=parseInt(window.screen.width*parseInt(i,10)/100,10));"string"==typeof j&&(1<j.length&&"%"==j.substr(j.length-1,1))&&(j=parseInt(window.screen.height*parseInt(j,10)/100,10));640>i&&(i=640);420>j&&(j=420);var n=parseInt((window.screen.height-j)/2,10),o=parseInt((window.screen.width-i)/2,10),l=(l||"location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,scrollbars=yes")+",width="+i+",height="+j+",top="+n+",left="+o,k=window.open("",null,l,!0);if(!k){return !1}try{-1==navigator.userAgent.toLowerCase().indexOf(" chrome/")&&(k.moveTo(o,n),k.resizeTo(i,j)),k.focus(),k.location.href=m}catch(p){window.open(m,null,l,!0)}return !0}});(function(){function a(g,i){var j=[];if(i){for(var h in i){j.push(h+"="+encodeURIComponent(i[h]))}}else{return g}return g+(-1!=g.indexOf("?")?"&":"?")+j.join("&")}function c(g){g+="";return g.charAt(0).toUpperCase()+g.substr(1)}function e(){var g=this.getDialog(),i=g.getParentEditor();i._.filebrowserSe=this;var j=i.config["filebrowser"+c(g.getName())+"WindowWidth"]||i.config.filebrowserWindowWidth||"80%",g=i.config["filebrowser"+c(g.getName())+"WindowHeight"]||i.config.filebrowserWindowHeight||"70%",h=this.filebrowser.params||{};h.CKEditor=i.name;h.CKEditorFuncNum=i._.filebrowserFn;h.langCode||(h.langCode=i.langCode);h=a(this.filebrowser.url,h);i.popup(h,j,g,i.config.filebrowserWindowFeatures||i.config.fileBrowserWindowFeatures)}function f(){var g=this.getDialog();g.getParentEditor()._.filebrowserSe=this;return !g.getContentElement(this["for"][0],this["for"][1]).getInputElement().$.value||!g.getContentElement(this["for"][0],this["for"][1]).getAction()?!1:!0}function o(g,i,j){var h=j.params||{};h.CKEditor=g.name;h.CKEditorFuncNum=g._.filebrowserFn;h.langCode||(h.langCode=g.langCode);i.action=a(j.url,h);i.filebrowser=j}function d(i,k,l,j){if(j&&j.length){for(var m,q=j.length;q--;){if(m=j[q],("hbox"==m.type||"vbox"==m.type||"fieldset"==m.type)&&d(i,k,l,m.children),m.filebrowser){if("string"==typeof m.filebrowser&&(m.filebrowser={action:"fileButton"==m.type?"QuickUpload":"Browse",target:m.filebrowser}),"Browse"==m.filebrowser.action){var n=m.filebrowser.url;void 0===n&&(n=i.config["filebrowser"+c(k)+"BrowseUrl"],void 0===n&&(n=i.config.filebrowserBrowseUrl));n&&(m.onClick=e,m.filebrowser.url=n,m.hidden=!1)}else{if("QuickUpload"==m.filebrowser.action&&m["for"]&&(n=m.filebrowser.url,void 0===n&&(n=i.config["filebrowser"+c(k)+"UploadUrl"],void 0===n&&(n=i.config.filebrowserUploadUrl)),n)){var r=m.onClick;m.onClick=function(g){var h=g.sender;return r&&r.call(h,g)===false?false:f.call(h,g)};m.filebrowser.url=n;m.hidden=!1;o(i,l.getContents(m["for"][0]).get(m["for"][1]),m.filebrowser)}}}}}}function b(g,i,j){if(-1!==j.indexOf(";")){for(var j=j.split(";"),h=0;h<j.length;h++){if(b(g,i,j[h])){return !0}}return !1}return(g=g.getContents(i).get(j).filebrowser)&&g.url}function p(g,i){var j=this._.filebrowserSe.getDialog(),h=this._.filebrowserSe["for"],k=this._.filebrowserSe.filebrowser.onSelect;h&&j.getContentElement(h[0],h[1]).reset();if(!("function"==typeof i&&!1===i.call(this._.filebrowserSe))&&!(k&&!1===k.call(this._.filebrowserSe,g,i))&&("string"==typeof i&&i&&alert(i),g&&(h=this._.filebrowserSe,j=h.getDialog(),h=h.filebrowser.target||null))){if(h=h.split(":"),k=j.getContentElement(h[0],h[1])){k.setValue(g),j.selectPage(h[0])}}}CKEDITOR.plugins.add("filebrowser",{requires:"popup",init:function(g){g._.filebrowserFn=CKEDITOR.tools.addFunction(p,g);g.on("destroy",function(){CKEDITOR.tools.removeFunction(this._.filebrowserFn)})}});CKEDITOR.on("dialogDefinition",function(g){if(g.editor.plugins.filebrowser){for(var i=g.data.definition,j,h=0;h<i.contents.length;++h){if(j=i.contents[h]){d(g.editor,g.data.name,i,j.elements),j.hidden&&j.filebrowser&&(j.hidden=!b(i,j.id,j.filebrowser))}}}})})();CKEDITOR.plugins.add("find",{requires:"dialog",init:function(c){var d=c.addCommand("find",new CKEDITOR.dialogCommand("find"));d.canUndo=!1;d.readOnly=1;c.addCommand("replace",new CKEDITOR.dialogCommand("replace")).canUndo=!1;c.ui.addButton&&(c.ui.addButton("Find",{label:c.lang.find.find,command:"find",toolbar:"find,10"}),c.ui.addButton("Replace",{label:c.lang.find.replace,command:"replace",toolbar:"find,20"}));CKEDITOR.dialog.add("find",this.path+"dialogs/find.js");CKEDITOR.dialog.add("replace",this.path+"dialogs/find.js")}});CKEDITOR.config.find_highlight={element:"span",styles:{"background-color":"#004",color:"#fff"}};(function(){function a(f,g){var h=d.exec(f),i=d.exec(g);if(h){if(!h[2]&&"px"==i[2]){return i[1]}if("px"==h[2]&&!i[2]){return i[1]+"px"}}return g}var c=CKEDITOR.htmlParser.cssStyle,b=CKEDITOR.tools.cssLength,d=/^((?:\d*(?:\.\d+))|(?:\d+))(.*)?$/i,e={elements:{$:function(f){var g=f.attributes;if((g=(g=(g=g&&g["data-cke-realelement"])&&new CKEDITOR.htmlParser.fragment.fromHtml(decodeURIComponent(g)))&&g.children[0])&&f.attributes["data-cke-resizable"]){var h=(new c(f)).rules,f=g.attributes,i=h.width,h=h.height;i&&(f.width=a(f.width,i));h&&(f.height=a(f.height,h))}return g}}};CKEDITOR.plugins.add("fakeobjects",{init:function(f){f.filter.allow("img[!data-cke-realelement,src,alt,title](*){*}","fakeobjects")},afterInit:function(f){(f=(f=f.dataProcessor)&&f.htmlFilter)&&f.addRules(e,{applyToAll:!0})}});CKEDITOR.editor.prototype.createFakeElement=function(f,g,h,i){var j=this.lang.fakeobjects,j=j[h]||j.unknown,g={"class":g,"data-cke-realelement":encodeURIComponent(f.getOuterHtml()),"data-cke-real-node-type":f.type,alt:j,title:j,align:f.getAttribute("align")||""};CKEDITOR.env.hc||(g.src=CKEDITOR.tools.transparentImageData);h&&(g["data-cke-real-element-type"]=h);i&&(g["data-cke-resizable"]=i,h=new c,i=f.getAttribute("width"),f=f.getAttribute("height"),i&&(h.rules.width=b(i)),f&&(h.rules.height=b(f)),h.populate(g));return this.document.createElement("img",{attributes:g})};CKEDITOR.editor.prototype.createFakeParserElement=function(g,h,i,j){var k=this.lang.fakeobjects,k=k[i]||k.unknown,l;l=new CKEDITOR.htmlParser.basicWriter;g.writeHtml(l);l=l.getHtml();h={"class":h,"data-cke-realelement":encodeURIComponent(l),"data-cke-real-node-type":g.type,alt:k,title:k,align:g.attributes.align||""};CKEDITOR.env.hc||(h.src=CKEDITOR.tools.transparentImageData);i&&(h["data-cke-real-element-type"]=i);j&&(h["data-cke-resizable"]=j,j=g.attributes,g=new c,i=j.width,j=j.height,void 0!=i&&(g.rules.width=b(i)),void 0!=j&&(g.rules.height=b(j)),g.populate(h));return new CKEDITOR.htmlParser.element("img",h)};CKEDITOR.editor.prototype.restoreRealElement=function(f){if(f.data("cke-real-node-type")!=CKEDITOR.NODE_ELEMENT){return null}var g=CKEDITOR.dom.element.createFromHtml(decodeURIComponent(f.data("cke-realelement")),this.document);if(f.data("cke-resizable")){var h=f.getStyle("width"),f=f.getStyle("height");h&&g.setAttribute("width",a(g.getAttribute("width"),h));f&&g.setAttribute("height",a(g.getAttribute("height"),f))}return g}})();(function(){function a(d){d=d.attributes;return"application/x-shockwave-flash"==d.type||c.test(d.src||"")}function b(d,e){return d.createFakeParserElement(e,"cke_flash","flash",!0)}var c=/\.swf(?:$|\?)/i;CKEDITOR.plugins.add("flash",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss("img.cke_flash{background-image: url("+CKEDITOR.getUrl(this.path+"images/placeholder.png")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 80px;height: 80px;}")},init:function(d){var e="object[classid,codebase,height,hspace,vspace,width];param[name,value];embed[height,hspace,pluginspage,src,type,vspace,width]";CKEDITOR.dialog.isTabEnabled(d,"flash","properties")&&(e+=";object[align]; embed[allowscriptaccess,quality,scale,wmode]");CKEDITOR.dialog.isTabEnabled(d,"flash","advanced")&&(e+=";object[id]{*}; embed[bgcolor]{*}(*)");d.addCommand("flash",new CKEDITOR.dialogCommand("flash",{allowedContent:e,requiredContent:"embed"}));d.ui.addButton&&d.ui.addButton("Flash",{label:d.lang.common.flash,command:"flash",toolbar:"insert,20"});CKEDITOR.dialog.add("flash",this.path+"dialogs/flash.js");d.addMenuItems&&d.addMenuItems({flash:{label:d.lang.flash.properties,command:"flash",group:"flash"}});d.on("doubleclick",function(f){var g=f.data.element;g.is("img")&&"flash"==g.data("cke-real-element-type")&&(f.data.dialog="flash")});d.contextMenu&&d.contextMenu.addListener(function(f){if(f&&f.is("img")&&!f.isReadOnly()&&"flash"==f.data("cke-real-element-type")){return{flash:CKEDITOR.TRISTATE_OFF}}})},afterInit:function(d){var e=d.dataProcessor;(e=e&&e.dataFilter)&&e.addRules({elements:{"cke:object":function(f){var g=f.attributes;if((!g.classid||!(""+g.classid).toLowerCase())&&!a(f)){for(g=0;g<f.children.length;g++){if("cke:embed"==f.children[g].name){if(!a(f.children[g])){break}return b(d,f)}}return null}return b(d,f)},"cke:embed":function(f){return !a(f)?null:b(d,f)}}},5)}})})();CKEDITOR.tools.extend(CKEDITOR.config,{flashEmbedTagOnly:!1,flashAddEmbedTag:!0,flashConvertOnEdit:!1});(function(){function b(f){var j=f.config,k=f.fire("uiSpace",{space:"top",html:""}).html,m=function(){function t(l,p,q){g.setStyle(p,c(q));g.setStyle("position",l)}function o(e){var l=C.getDocumentPosition();switch(e){case"top":t("absolute","top",l.y-y-z);break;case"pin":t("fixed","top",B);break;case"bottom":t("absolute","top",l.y+(i.height||i.bottom-i.top)+z)}v=e}var v,C,w,i,u,y,D,x=j.floatSpaceDockedOffsetX||0,z=j.floatSpaceDockedOffsetY||0,A=j.floatSpacePinnedOffsetX||0,B=j.floatSpacePinnedOffsetY||0;return function(e){if(C=f.editable()){if(e&&"focus"==e.name&&g.show(),g.removeStyle("left"),g.removeStyle("right"),w=g.getClientRect(),i=C.getClientRect(),u=a.getViewPaneSize(),y=w.height,D="pageXOffset" in a.$?a.$.pageXOffset:CKEDITOR.document.$.documentElement.scrollLeft,v){y+z<=i.top?o("top"):y+z>u.height-i.bottom?o("pin"):o("bottom");var e=u.width/2,e=0<i.left&&i.right<u.width&&i.width>w.width?"rtl"==f.config.contentsLangDirection?"right":"left":e-i.left>i.right-e?"left":"right",l;w.width>u.width?(e="left",l=0):(l="left"==e?0<i.left?i.left:0:i.right<u.width?u.width-i.right:0,l+w.width>u.width&&(e="left"==e?"right":"left",l=0));g.setStyle(e,c(("pin"==v?A:x)+l+("pin"==v?0:"left"==e?D:-D)))}else{v="pin",o("pin"),m(e)}}}}();if(k){var g=CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml(d.output({content:k,id:f.id,langDir:f.lang.dir,langCode:f.langCode,name:f.name,style:"display:none;z-index:"+(j.baseFloatZIndex-1),topId:f.ui.spaceId("top"),voiceLabel:f.lang.editorPanel+", "+f.name}))),n=CKEDITOR.tools.eventsBuffer(500,m),h=CKEDITOR.tools.eventsBuffer(100,m);g.unselectable();g.on("mousedown",function(e){e=e.data;e.getTarget().hasAscendant("a",1)||e.preventDefault()});f.on("focus",function(e){m(e);f.on("change",n.input);a.on("scroll",h.input);a.on("resize",h.input)});f.on("blur",function(){g.hide();f.removeListener("change",n.input);a.removeListener("scroll",h.input);a.removeListener("resize",h.input)});f.on("destroy",function(){a.removeListener("scroll",h.input);a.removeListener("resize",h.input);g.clearCustomData();g.remove()});f.focusManager.hasFocus&&g.show();f.focusManager.add(g,1)}}var d=CKEDITOR.addTemplate("floatcontainer",'<div id="cke_{name}" class="cke {id} cke_reset_all cke_chrome cke_editor_{name} cke_float cke_{langDir} '+CKEDITOR.env.cssClass+'" dir="{langDir}" title="'+(CKEDITOR.env.gecko?" ":"")+'" lang="{langCode}" role="application" style="{style}" aria-labelledby="cke_{name}_arialbl"><span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span><div class="cke_inner"><div id="{topId}" class="cke_top" role="presentation">{content}</div></div></div>'),a=CKEDITOR.document.getWindow(),c=CKEDITOR.tools.cssLength;CKEDITOR.plugins.add("floatingspace",{init:function(e){e.on("loaded",function(){b(this)},null,null,20)}})})();CKEDITOR.plugins.add("listblock",{requires:"panel",onLoad:function(){var a=CKEDITOR.addTemplate("panel-list",'<ul role="presentation" class="cke_panel_list">{items}</ul>'),b=CKEDITOR.addTemplate("panel-list-item",'<li id="{id}" class="cke_panel_listItem" role=presentation><a id="{id}_option" _cke_focus=1 hidefocus=true title="{title}" href="javascript:void(\'{val}\')"  {onclick}="CKEDITOR.tools.callFunction({clickFn},\'{val}\'); return false;" role="option">{text}</a></li>'),c=CKEDITOR.addTemplate("panel-list-group",'<h1 id="{id}" class="cke_panel_grouptitle" role="presentation" >{label}</h1>'),d=/\'/g;CKEDITOR.ui.panel.prototype.addListBlock=function(e,f){return this.addBlock(e,new CKEDITOR.ui.listBlock(this.getHolderElement(),f))};CKEDITOR.ui.listBlock=CKEDITOR.tools.createClass({base:CKEDITOR.ui.panel.block,$:function(e,f){var f=f||{},g=f.attributes||(f.attributes={});(this.multiSelect=!!f.multiSelect)&&(g["aria-multiselectable"]=!0);!g.role&&(g.role="listbox");this.base.apply(this,arguments);this.element.setAttribute("role",g.role);g=this.keys;g[40]="next";g[9]="next";g[38]="prev";g[CKEDITOR.SHIFT+9]="prev";g[32]=CKEDITOR.env.ie?"mouseup":"click";CKEDITOR.env.ie&&(g[13]="mouseup");this._.pendingHtml=[];this._.pendingList=[];this._.items={};this._.groups={}},_:{close:function(){if(this._.started){var e=a.output({items:this._.pendingList.join("")});this._.pendingList=[];this._.pendingHtml.push(e);delete this._.started}},getClick:function(){this._.click||(this._.click=CKEDITOR.tools.addFunction(function(e){var f=this.toggle(e);if(this.onClick){this.onClick(e,f)}},this));return this._.click}},proto:{add:function(f,g,h){var i=CKEDITOR.tools.getNextId();this._.started||(this._.started=1,this._.size=this._.size||0);this._.items[f]=i;var j;j=CKEDITOR.tools.htmlEncodeAttr(f).replace(d,"\\'");f={id:i,val:j,onclick:CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick",clickFn:this._.getClick(),title:CKEDITOR.tools.htmlEncodeAttr(h||f),text:g||f};this._.pendingList.push(b.output(f))},startGroup:function(e){this._.close();var f=CKEDITOR.tools.getNextId();this._.groups[e]=f;this._.pendingHtml.push(c.output({id:f,label:e}))},commit:function(){this._.close();this.element.appendHtml(this._.pendingHtml.join(""));delete this._.size;this._.pendingHtml=[]},toggle:function(e){var f=this.isMarked(e);f?this.unmark(e):this.mark(e);return !f},hideGroup:function(e){var f=(e=this.element.getDocument().getById(this._.groups[e]))&&e.getNext();e&&(e.setStyle("display","none"),f&&"ul"==f.getName()&&f.setStyle("display","none"))},hideItem:function(e){this.element.getDocument().getById(this._.items[e]).setStyle("display","none")},showAll:function(){var f=this._.items,g=this._.groups,h=this.element.getDocument(),i;for(i in f){h.getById(f[i]).setStyle("display","")}for(var j in g){f=h.getById(g[j]),i=f.getNext(),f.setStyle("display",""),i&&"ul"==i.getName()&&i.setStyle("display","")}},mark:function(e){this.multiSelect||this.unmarkAll();var e=this._.items[e],f=this.element.getDocument().getById(e);f.addClass("cke_selected");this.element.getDocument().getById(e+"_option").setAttribute("aria-selected",!0);this.onMark&&this.onMark(f)},unmark:function(e){var f=this.element.getDocument(),e=this._.items[e],g=f.getById(e);g.removeClass("cke_selected");f.getById(e+"_option").removeAttribute("aria-selected");this.onUnmark&&this.onUnmark(g)},unmarkAll:function(){var e=this._.items,f=this.element.getDocument(),g;for(g in e){var h=e[g];f.getById(h).removeClass("cke_selected");f.getById(h+"_option").removeAttribute("aria-selected")}this.onUnmark&&this.onUnmark()},isMarked:function(e){return this.element.getDocument().getById(this._.items[e]).hasClass("cke_selected")},focus:function(e){this._.focusIndex=-1;var f=this.element.getElementsByTag("a"),g,h=-1;if(e){for(g=this.element.getDocument().getById(this._.items[e]).getFirst();e=f.getItem(++h);){if(e.equals(g)){this._.focusIndex=h;break}}}else{this.element.focus()}g&&setTimeout(function(){g.focus()},0)}}})}});CKEDITOR.plugins.add("richcombo",{requires:"floatpanel,listblock,button",beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_RICHCOMBO,CKEDITOR.ui.richCombo.handler)}});(function(){var a='<span id="{id}" class="cke_combo cke_combo__{name} {cls}" role="presentation"><span id="{id}_label" class="cke_combo_label">{label}</span><a class="cke_combo_button" hidefocus=true title="{title}" tabindex="-1"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":'" href="javascript:void(\'{titleJs}\')"')+' hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="true"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(a+=' onkeypress="return false;"');CKEDITOR.env.gecko&&(a+=' onblur="this.style.cssText = this.style.cssText;"');var a=a+(' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event,this);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span id="{id}_text" class="cke_combo_text cke_combo_inlinelabel">{label}</span><span class="cke_combo_open"><span class="cke_combo_arrow">'+(CKEDITOR.env.hc?"&#9660;":CKEDITOR.env.air?"&nbsp;":"")+"</span></span></a></span>"),b=CKEDITOR.addTemplate("combo",a);CKEDITOR.UI_RICHCOMBO="richcombo";CKEDITOR.ui.richCombo=CKEDITOR.tools.createClass({$:function(c){CKEDITOR.tools.extend(this,c,{canGroup:!1,title:c.label,modes:{wysiwyg:1},editorFocus:1});c=this.panel||{};delete this.panel;this.id=CKEDITOR.tools.getNextNumber();this.document=c.parent&&c.parent.getDocument()||CKEDITOR.document;c.className="cke_combopanel";c.block={multiSelect:c.multiSelect,attributes:c.attributes};c.toolbarRelated=!0;this._={panelDefinition:c,items:{}}},proto:{renderHtml:function(c){var d=[];this.render(c,d);return d.join("")},render:function(i,m){function r(){if(this.getState()!=CKEDITOR.TRISTATE_ON){var d=this.modes[i.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;i.readOnly&&!this.readOnly&&(d=CKEDITOR.TRISTATE_DISABLED);this.setState(d);this.setValue("");d!=CKEDITOR.TRISTATE_DISABLED&&this.refresh&&this.refresh()}}var o=CKEDITOR.env,s="cke_"+this.id,p=CKEDITOR.tools.addFunction(function(c){t&&(i.unlockSelection(1),t=0);n.execute(c)},this),q=this,n={id:s,combo:this,focus:function(){CKEDITOR.document.getById(s).getChild(1).focus()},execute:function(f){var e=q._;if(e.state!=CKEDITOR.TRISTATE_DISABLED){if(q.createPanel(i),e.on){e.panel.hide()}else{q.commit();var g=q.getValue();g?e.list.mark(g):e.list.unmarkAll();e.panel.showBlock(q.id,new CKEDITOR.dom.element(f),4)}}},clickFn:p};i.on("activeFilterChange",r,this);i.on("mode",r,this);i.on("selectionChange",r,this);!this.readOnly&&i.on("readOnly",r,this);var u=CKEDITOR.tools.addFunction(function(c,e){var c=new CKEDITOR.dom.event(c),f=c.getKeystroke();if(40==f){i.once("panelShow",function(d){d.data._.panel._.currentBlock.onKeyDown(40)})}switch(f){case 13:case 32:case 40:CKEDITOR.tools.callFunction(p,e);break;default:n.onkey(n,f)}c.preventDefault()}),v=CKEDITOR.tools.addFunction(function(){n.onfocus&&n.onfocus()}),t=0;n.keyDownFn=u;o={id:s,name:this.name||this.command,label:this.label,title:this.title,cls:this.className||"",titleJs:o.gecko&&!o.hc?"":(this.title||"").replace("'",""),keydownFn:u,focusFn:v,clickFn:p};b.output(o,m);if(this.onRender){this.onRender()}return n},createPanel:function(g){if(!this._.panel){var j=this._.panelDefinition,l=this._.panelDefinition.block,p=j.parent||CKEDITOR.document.getBody(),o="cke_combopanel__"+this.name,m=new CKEDITOR.ui.floatPanel(g,p,j),n=m.addListBlock(this.id,l),k=this;m.onShow=function(){this.element.addClass(o);k.setState(CKEDITOR.TRISTATE_ON);k._.on=1;k.editorFocus&&!g.focusManager.hasFocus&&g.focus();if(k.onOpen){k.onOpen()}g.once("panelShow",function(){n.focus(!n.multiSelect&&k.getValue())})};m.onHide=function(c){this.element.removeClass(o);k.setState(k.modes&&k.modes[g.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);k._.on=0;if(!c&&k.onClose){k.onClose()}};m.onEscape=function(){m.hide(1)};n.onClick=function(c,d){k.onClick&&k.onClick.call(k,c,d);m.hide()};this._.panel=m;this._.list=n;m.getBlock(this.id).onHide=function(){k._.on=0;k.setState(CKEDITOR.TRISTATE_OFF)};this.init&&this.init()}},setValue:function(c,e){this._.value=c;var f=this.document.getById("cke_"+this.id+"_text");f&&(!c&&!e?(e=this.label,f.addClass("cke_combo_inlinelabel")):f.removeClass("cke_combo_inlinelabel"),f.setText("undefined"!=typeof e?e:c))},getValue:function(){return this._.value||""},unmarkAll:function(){this._.list.unmarkAll()},mark:function(c){this._.list.mark(c)},hideItem:function(c){this._.list.hideItem(c)},hideGroup:function(c){this._.list.hideGroup(c)},showAll:function(){this._.list.showAll()},add:function(c,e,f){this._.items[c]=f||c;this._.list.add(c,e,f)},startGroup:function(c){this._.list.startGroup(c)},commit:function(){this._.committed||(this._.list.commit(),this._.committed=1,CKEDITOR.ui.fire("ready",this));this._.committed=1},setState:function(c){if(this._.state!=c){var d=this.document.getById("cke_"+this.id);d.setState(c,"cke_combo");c==CKEDITOR.TRISTATE_DISABLED?d.setAttribute("aria-disabled",!0):d.removeAttribute("aria-disabled");this._.state=c}},getState:function(){return this._.state},enable:function(){this._.state==CKEDITOR.TRISTATE_DISABLED&&this.setState(this._.lastState)},disable:function(){this._.state!=CKEDITOR.TRISTATE_DISABLED&&(this._.lastState=this._.state,this.setState(CKEDITOR.TRISTATE_DISABLED))}},statics:{handler:{create:function(c){return new CKEDITOR.ui.richCombo(c)}}}});CKEDITOR.ui.prototype.addRichCombo=function(c,d){this.add(c,CKEDITOR.UI_RICHCOMBO,d)}})();(function(){function a(r,q,u,x,z,D,B,E){for(var F=r.config,A=new CKEDITOR.style(B),s=z.split(";"),z=[],w={},t=0;t<s.length;t++){var v=s[t];if(v){var v=v.split("/"),C={},y=s[t]=v[0];C[u]=z[t]=v[1]||y;w[y]=new CKEDITOR.style(B,C);w[y]._.definition.name=y}else{s.splice(t--,1)}}r.ui.addRichCombo(q,{label:x.label,title:x.panelTitle,toolbar:"styles,"+E,allowedContent:A,requiredContent:A,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(F.contentsCss),multiSelect:!1,attributes:{"aria-label":x.panelTitle}},init:function(){this.startGroup(x.panelTitle);for(var d=0;d<s.length;d++){var c=s[d];this.add(c,w[c].buildPreview(),c)}},onClick:function(b){r.focus();r.fire("saveSnapshot");var d=w[b];r[this.getValue()==b?"removeStyle":"applyStyle"](d);r.fire("saveSnapshot")},onRender:function(){r.on("selectionChange",function(b){for(var g=this.getValue(),b=b.data.path.elements,h=0,j;h<b.length;h++){j=b[h];for(var i in w){if(w[i].checkElementMatch(j,!0,r)){i!=g&&this.setValue(i);return}}}this.setValue("",D)},this)},refresh:function(){r.activeFilter.check(A)||this.setState(CKEDITOR.TRISTATE_DISABLED)}})}CKEDITOR.plugins.add("font",{requires:"richcombo",init:function(d){var c=d.config;a(d,"Font","family",d.lang.font,c.font_names,c.font_defaultLabel,c.font_style,30);a(d,"FontSize","size",d.lang.font.fontSize,c.fontSize_sizes,c.fontSize_defaultLabel,c.fontSize_style,40)}})})();CKEDITOR.config.font_names="Arial/Arial, Helvetica, sans-serif;Comic Sans MS/Comic Sans MS, cursive;Courier New/Courier New, Courier, monospace;Georgia/Georgia, serif;Lucida Sans Unicode/Lucida Sans Unicode, Lucida Grande, sans-serif;Tahoma/Tahoma, Geneva, sans-serif;Times New Roman/Times New Roman, Times, serif;Trebuchet MS/Trebuchet MS, Helvetica, sans-serif;Verdana/Verdana, Geneva, sans-serif";CKEDITOR.config.font_defaultLabel="";CKEDITOR.config.font_style={element:"span",styles:{"font-family":"#(family)"},overrides:[{element:"font",attributes:{face:null}}]};CKEDITOR.config.fontSize_sizes="8/8px;9/9px;10/10px;11/11px;12/12px;14/14px;16/16px;18/18px;20/20px;22/22px;24/24px;26/26px;28/28px;36/36px;48/48px;72/72px";CKEDITOR.config.fontSize_defaultLabel="";CKEDITOR.config.fontSize_style={element:"span",styles:{"font-size":"#(size)"},overrides:[{element:"font",attributes:{size:null}}]};CKEDITOR.plugins.add("forms",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss(".cke_editable form{border: 1px dotted #FF0000;padding: 2px;}\n");CKEDITOR.addCss("img.cke_hidden{background-image: url("+CKEDITOR.getUrl(this.path+"images/hiddenfield.gif")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 16px !important;height: 16px !important;}")},init:function(c){var d=c.lang,n=0,o={email:1,password:1,search:1,tel:1,text:1,url:1},q={checkbox:"input[type,name,checked]",radio:"input[type,name,checked]",textfield:"input[type,name,value,size,maxlength]",textarea:"textarea[cols,rows,name]",select:"select[name,size,multiple]; option[value,selected]",button:"input[type,name,value]",form:"form[action,name,id,enctype,target,method]",hiddenfield:"input[type,name,value]",imagebutton:"input[type,alt,src]{width,height,border,border-width,border-style,margin,float}"},r={checkbox:"input",radio:"input",textfield:"input",textarea:"textarea",select:"select",button:"input",form:"form",hiddenfield:"input",imagebutton:"input"},l=function(b,a,f){var g={allowedContent:q[a],requiredContent:r[a]};"form"==a&&(g.context="form");c.addCommand(a,new CKEDITOR.dialogCommand(a,g));c.ui.addButton&&c.ui.addButton(b,{label:d.common[b.charAt(0).toLowerCase()+b.slice(1)],command:a,toolbar:"forms,"+(n+=10)});CKEDITOR.dialog.add(a,f)},m=this.path+"dialogs/";!c.blockless&&l("Form","form",m+"form.js");l("Checkbox","checkbox",m+"checkbox.js");l("Radio","radio",m+"radio.js");l("TextField","textfield",m+"textfield.js");l("Textarea","textarea",m+"textarea.js");l("Select","select",m+"select.js");l("Button","button",m+"button.js");var p=c.plugins.image;p&&!c.plugins.image2&&l("ImageButton","imagebutton",CKEDITOR.plugins.getPath("image")+"dialogs/image.js");l("HiddenField","hiddenfield",m+"hiddenfield.js");c.addMenuItems&&(l={checkbox:{label:d.forms.checkboxAndRadio.checkboxTitle,command:"checkbox",group:"checkbox"},radio:{label:d.forms.checkboxAndRadio.radioTitle,command:"radio",group:"radio"},textfield:{label:d.forms.textfield.title,command:"textfield",group:"textfield"},hiddenfield:{label:d.forms.hidden.title,command:"hiddenfield",group:"hiddenfield"},button:{label:d.forms.button.title,command:"button",group:"button"},select:{label:d.forms.select.title,command:"select",group:"select"},textarea:{label:d.forms.textarea.title,command:"textarea",group:"textarea"}},p&&(l.imagebutton={label:d.image.titleButton,command:"imagebutton",group:"imagebutton"}),!c.blockless&&(l.form={label:d.forms.form.menu,command:"form",group:"form"}),c.addMenuItems(l));c.contextMenu&&(!c.blockless&&c.contextMenu.addListener(function(f,e,b){if((f=b.contains("form",1))&&!f.isReadOnly()){return{form:CKEDITOR.TRISTATE_OFF}}}),c.contextMenu.addListener(function(f){if(f&&!f.isReadOnly()){var e=f.getName();if(e=="select"){return{select:CKEDITOR.TRISTATE_OFF}}if(e=="textarea"){return{textarea:CKEDITOR.TRISTATE_OFF}}if(e=="input"){var b=f.getAttribute("type")||"text";switch(b){case"button":case"submit":case"reset":return{button:CKEDITOR.TRISTATE_OFF};case"checkbox":return{checkbox:CKEDITOR.TRISTATE_OFF};case"radio":return{radio:CKEDITOR.TRISTATE_OFF};case"image":return p?{imagebutton:CKEDITOR.TRISTATE_OFF}:null}if(o[b]){return{textfield:CKEDITOR.TRISTATE_OFF}}}if(e=="img"&&f.data("cke-real-element-type")=="hiddenfield"){return{hiddenfield:CKEDITOR.TRISTATE_OFF}}}}));c.on("doubleclick",function(b){var a=b.data.element;if(!c.blockless&&a.is("form")){b.data.dialog="form"}else{if(a.is("select")){b.data.dialog="select"}else{if(a.is("textarea")){b.data.dialog="textarea"}else{if(a.is("img")&&a.data("cke-real-element-type")=="hiddenfield"){b.data.dialog="hiddenfield"}else{if(a.is("input")){a=a.getAttribute("type")||"text";switch(a){case"button":case"submit":case"reset":b.data.dialog="button";break;case"checkbox":b.data.dialog="checkbox";break;case"radio":b.data.dialog="radio";break;case"image":b.data.dialog="imagebutton"}if(o[a]){b.data.dialog="textfield"}}}}}}})},afterInit:function(c){var d=c.dataProcessor,e=d&&d.htmlFilter,d=d&&d.dataFilter;CKEDITOR.env.ie&&e&&e.addRules({elements:{input:function(f){var f=f.attributes,g=f.type;g||(f.type="text");("checkbox"==g||"radio"==g)&&"on"==f.value&&delete f.value}}},{applyToAll:!0});d&&d.addRules({elements:{input:function(a){if("hidden"==a.attributes.type){return c.createFakeParserElement(a,"cke_hidden","hiddenfield")}}}},{applyToAll:!0})}});CKEDITOR.plugins.add("format",{requires:"richcombo",init:function(b){if(!b.blockless){for(var n=b.config,e=b.lang.format,r=n.format_tags.split(";"),m={},s=0,t=[],o=0;o<r.length;o++){var p=r[o],q=new CKEDITOR.style(n["format_"+p]);if(!b.filter.customConfig||b.filter.check(q)){s++,m[p]=q,m[p]._.enterMode=b.config.enterMode,t.push(q)}}0!==s&&b.ui.addRichCombo("Format",{label:e.label,title:e.panelTitle,toolbar:"styles,20",allowedContent:t,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(n.contentsCss),multiSelect:!1,attributes:{"aria-label":e.panelTitle}},init:function(){this.startGroup(e.panelTitle);for(var c in m){var d=e["tag_"+c];this.add(c,m[c].buildPreview(d),d)}},onClick:function(a){b.focus();b.fire("saveSnapshot");var a=m[a],c=b.elementPath();b[a.checkActive(c,b)?"removeStyle":"applyStyle"](a);setTimeout(function(){b.fire("saveSnapshot")},0)},onRender:function(){b.on("selectionChange",function(a){var f=this.getValue(),a=a.data.path;this.refresh();for(var d in m){if(m[d].checkActive(a,b)){d!=f&&this.setValue(d,b.lang.format["tag_"+d]);return}}this.setValue("")},this)},onOpen:function(){this.showAll();for(var a in m){b.activeFilter.check(m[a])||this.hideItem(a)}},refresh:function(){var a=b.elementPath();if(a){if(a.isContextFor("p")){for(var d in m){if(b.activeFilter.check(m[d])){return}}}this.setState(CKEDITOR.TRISTATE_DISABLED)}}})}}});CKEDITOR.config.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div";CKEDITOR.config.format_p={element:"p"};CKEDITOR.config.format_div={element:"div"};CKEDITOR.config.format_pre={element:"pre"};CKEDITOR.config.format_address={element:"address"};CKEDITOR.config.format_h1={element:"h1"};CKEDITOR.config.format_h2={element:"h2"};CKEDITOR.config.format_h3={element:"h3"};CKEDITOR.config.format_h4={element:"h4"};CKEDITOR.config.format_h5={element:"h5"};CKEDITOR.config.format_h6={element:"h6"};(function(){var a={canUndo:!1,exec:function(c){var d=c.document.createElement("hr");c.insertElement(d)},allowedContent:"hr",requiredContent:"hr"};CKEDITOR.plugins.add("horizontalrule",{init:function(b){b.blockless||(b.addCommand("horizontalrule",a),b.ui.addButton&&b.ui.addButton("HorizontalRule",{label:b.lang.horizontalrule.toolbar,command:"horizontalrule",toolbar:"insert,40"}))}})})();CKEDITOR.plugins.add("htmlwriter",{init:function(d){var c=new CKEDITOR.htmlWriter;c.forceSimpleAmpersand=d.config.forceSimpleAmpersand;c.indentationChars=d.config.dataIndentationChars||"\t";d.dataProcessor.writer=c}});CKEDITOR.htmlWriter=CKEDITOR.tools.createClass({base:CKEDITOR.htmlParser.basicWriter,$:function(){this.base();this.indentationChars="\t";this.selfClosingEnd=" />";this.lineBreakChars="\n";this.sortAttributes=1;this._.indent=0;this._.indentation="";this._.inPre=0;this._.rules={};var d=CKEDITOR.dtd,c;for(c in CKEDITOR.tools.extend({},d.$nonBodyContent,d.$block,d.$listItem,d.$tableContent)){this.setRules(c,{indent:!d[c]["#"],breakBeforeOpen:1,breakBeforeClose:!d[c]["#"],breakAfterClose:1,needsSpace:c in d.$block&&!(c in {li:1,dt:1,dd:1})})}this.setRules("br",{breakAfterOpen:1});this.setRules("title",{indent:0,breakAfterOpen:0});this.setRules("style",{indent:0,breakBeforeClose:1});this.setRules("pre",{breakAfterOpen:1,indent:0})},proto:{openTag:function(d){var c=this._.rules[d];this._.afterCloser&&(c&&c.needsSpace&&this._.needsSpace)&&this._.output.push("\n");this._.indent?this.indentation():c&&c.breakBeforeOpen&&(this.lineBreak(),this.indentation());this._.output.push("<",d);this._.afterCloser=0},openTagClose:function(e,d){var f=this._.rules[e];d?(this._.output.push(this.selfClosingEnd),f&&f.breakAfterClose&&(this._.needsSpace=f.needsSpace)):(this._.output.push(">"),f&&f.indent&&(this._.indentation+=this.indentationChars));f&&f.breakAfterOpen&&this.lineBreak();"pre"==e&&(this._.inPre=1)},attribute:function(d,c){"string"==typeof c&&(this.forceSimpleAmpersand&&(c=c.replace(/&amp;/g,"&")),c=CKEDITOR.tools.htmlEncodeAttr(c));this._.output.push(" ",d,'="',c,'"')},closeTag:function(d){var c=this._.rules[d];c&&c.indent&&(this._.indentation=this._.indentation.substr(this.indentationChars.length));this._.indent?this.indentation():c&&c.breakBeforeClose&&(this.lineBreak(),this.indentation());this._.output.push("</",d,">");"pre"==d&&(this._.inPre=0);c&&c.breakAfterClose&&(this.lineBreak(),this._.needsSpace=c.needsSpace);this._.afterCloser=1},text:function(a){this._.indent&&(this.indentation(),!this._.inPre&&(a=CKEDITOR.tools.ltrim(a)));this._.output.push(a)},comment:function(a){this._.indent&&this.indentation();this._.output.push("<!--",a,"-->")},lineBreak:function(){!this._.inPre&&0<this._.output.length&&this._.output.push(this.lineBreakChars);this._.indent=1},indentation:function(){!this._.inPre&&this._.indentation&&this._.output.push(this._.indentation);this._.indent=0},reset:function(){this._.output=[];this._.indent=0;this._.indentation="";this._.afterCloser=0;this._.inPre=0},setRules:function(e,d){var f=this._.rules[e];f?CKEDITOR.tools.extend(f,d,!0):this._.rules[e]=d}}});(function(){CKEDITOR.plugins.add("iframe",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss("img.cke_iframe{background-image: url("+CKEDITOR.getUrl(this.path+"images/placeholder.png")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 80px;height: 80px;}")},init:function(d){var e=d.lang.iframe,f="iframe[align,longdesc,frameborder,height,name,scrolling,src,title,width]";d.plugins.dialogadvtab&&(f+=";iframe"+d.plugins.dialogadvtab.allowedContent({id:1,classes:1,styles:1}));CKEDITOR.dialog.add("iframe",this.path+"dialogs/iframe.js");d.addCommand("iframe",new CKEDITOR.dialogCommand("iframe",{allowedContent:f,requiredContent:"iframe"}));d.ui.addButton&&d.ui.addButton("Iframe",{label:e.toolbar,command:"iframe",toolbar:"insert,80"});d.on("doubleclick",function(c){var g=c.data.element;g.is("img")&&"iframe"==g.data("cke-real-element-type")&&(c.data.dialog="iframe")});d.addMenuItems&&d.addMenuItems({iframe:{label:e.title,command:"iframe",group:"image"}});d.contextMenu&&d.contextMenu.addListener(function(b){if(b&&b.is("img")&&"iframe"==b.data("cke-real-element-type")){return{iframe:CKEDITOR.TRISTATE_OFF}}})},afterInit:function(c){var d=c.dataProcessor;(d=d&&d.dataFilter)&&d.addRules({elements:{iframe:function(a){return c.createFakeParserElement(a,"cke_iframe","iframe",!0)}}})}})})();(function(){function b(f){var j=this.editor,h=f.document,i=h.body,k=h.getElementById("cke_actscrpt");k&&k.parentNode.removeChild(k);(k=h.getElementById("cke_shimscrpt"))&&k.parentNode.removeChild(k);(k=h.getElementById("cke_basetagscrpt"))&&k.parentNode.removeChild(k);CKEDITOR.env.gecko&&(i.contentEditable=!1,20000>CKEDITOR.env.version&&(i.innerHTML=i.innerHTML.replace(/^.*<\!-- cke-content-start --\>/,""),setTimeout(function(){var e=new CKEDITOR.dom.range(new CKEDITOR.dom.document(h));e.setStart(new CKEDITOR.dom.node(i),0);j.getSelection().selectRanges([e])},0)));i.contentEditable=!0;CKEDITOR.env.ie&&(i.hideFocus=!0,i.disabled=!0,i.removeAttribute("disabled"));delete this._.isLoadingData;this.$=i;h=new CKEDITOR.dom.document(h);this.setup();CKEDITOR.env.ie&&(h.getDocumentElement().addClass(h.$.compatMode),j.config.enterMode!=CKEDITOR.ENTER_P&&this.attachListener(h,"selectionchange",function(){var g=h.getBody(),m=j.getSelection(),n=m&&m.getRanges()[0];n&&(g.getHtml().match(/^<p>(?:&nbsp;|<br>)<\/p>$/i)&&n.startContainer.equals(g))&&setTimeout(function(){n=j.getSelection().getRanges()[0];if(!n.startContainer.equals("body")){g.getFirst().remove(1);n.moveToElementEditEnd(g);n.select()}},0)}));if(CKEDITOR.env.webkit||CKEDITOR.env.ie&&10<CKEDITOR.env.version){h.getDocumentElement().on("mousedown",function(e){e.data.getTarget().is("html")&&setTimeout(function(){j.editable().focus()})})}c(j);try{j.document.$.execCommand("2D-position",!1,!0)}catch(l){}(CKEDITOR.env.gecko||CKEDITOR.env.ie&&"CSS1Compat"==j.document.$.compatMode)&&this.attachListener(this,"keydown",function(e){var g=e.data.getKeystroke();if(g==33||g==34){if(CKEDITOR.env.ie){setTimeout(function(){j.getSelection().scrollIntoView()},0)}else{if(j.window.$.innerHeight>this.$.offsetHeight){var m=j.createRange();m[g==33?"moveToElementEditStart":"moveToElementEditEnd"](this);m.select();e.data.preventDefault()}}}});CKEDITOR.env.ie&&this.attachListener(h,"blur",function(){try{h.$.selection.empty()}catch(e){}});CKEDITOR.env.iOS&&this.attachListener(h,"touchend",function(){f.focus()});j.document.getElementsByTag("title").getItem(0).data("cke-title",j.document.$.title);CKEDITOR.env.ie&&(j.document.$.title=this._.docTitle);CKEDITOR.tools.setTimeout(function(){if(this.status=="unloaded"){this.status="ready"}j.fire("contentDom");if(this._.isPendingFocus){j.focus();this._.isPendingFocus=false}setTimeout(function(){j.fire("dataReady")},0);CKEDITOR.env.ie&&setTimeout(function(){if(j.document){var e=j.document.$.body;e.runtimeStyle.marginBottom="0px";e.runtimeStyle.marginBottom=""}},1000)},0,this)}function c(f){function i(){var e;f.editable().attachListener(f,"selectionChange",function(){var k=f.getSelection().getSelectedElement();k&&(e&&(e.detachEvent("onresizestart",g),e=null),k.$.attachEvent("onresizestart",g),e=k.$)})}function g(e){e.returnValue=!1}if(CKEDITOR.env.gecko){try{var h=f.document.$;h.execCommand("enableObjectResizing",!1,!f.config.disableObjectResizing);h.execCommand("enableInlineTableEditing",!1,!f.config.disableNativeTableHandles)}catch(j){}}else{CKEDITOR.env.ie&&(11>CKEDITOR.env.version&&f.config.disableObjectResizing)&&i(f)}}function d(){var e=[];if(8<=CKEDITOR.document.$.documentMode){e.push("html.CSS1Compat [contenteditable=false]{min-height:0 !important}");var g=[],f;for(f in CKEDITOR.dtd.$removeEmpty){g.push("html.CSS1Compat "+f+"[contenteditable=false]")}e.push(g.join(",")+"{display:inline-block}")}else{CKEDITOR.env.gecko&&(e.push("html{height:100% !important}"),e.push("img:-moz-broken{-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"))}e.push("html{cursor:text;*cursor:auto}");e.push("img,input,textarea{cursor:default}");return e.join("\n")}CKEDITOR.plugins.add("wysiwygarea",{init:function(e){e.config.fullPage&&e.addFeature({allowedContent:"html head title; style [media,type]; body (*)[id]; meta link [*]",requiredContent:"body"});e.addMode("wysiwyg",function(l){function j(f){f&&f.removeListener();e.editable(new a(e,m.$.contentWindow.document.body));e.setData(e.getData(1),l)}var k="document.open();"+(CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"")+"document.close();",k=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void(function(){"+encodeURIComponent(k)+"}())":"",m=CKEDITOR.dom.element.createFromHtml('<iframe src="'+k+'" frameBorder="0"></iframe>');m.setStyles({width:"100%",height:"100%"});m.addClass("cke_wysiwyg_frame cke_reset");var o=e.ui.space("contents");o.append(m);if(k=CKEDITOR.env.ie||CKEDITOR.env.gecko){m.on("load",j)}var n=e.title,p=e.fire("ariaEditorHelpLabel",{}).label;n&&(CKEDITOR.env.ie&&p&&(n+=", "+p),m.setAttribute("title",n));if(p){var n=CKEDITOR.tools.getNextId(),q=CKEDITOR.dom.element.createFromHtml('<span id="'+n+'" class="cke_voice_label">'+p+"</span>");o.append(q,1);m.setAttribute("aria-describedby",n)}e.on("beforeModeUnload",function(f){f.removeListener();q&&q.remove()});m.setAttributes({tabIndex:e.tabIndex,allowTransparency:"true"});!k&&j();CKEDITOR.env.webkit&&(k=function(){o.setStyle("width","100%");m.hide();m.setSize("width",o.getSize("width"));o.removeStyle("width");m.show()},m.setCustomData("onResize",k),CKEDITOR.document.getWindow().on("resize",k));e.fire("ariaWidget",m)})}});CKEDITOR.editor.prototype.addContentsCss=function(e){var g=this.config,f=g.contentsCss;CKEDITOR.tools.isArray(f)||(g.contentsCss=f?[f]:[]);g.contentsCss.push(e)};var a=CKEDITOR.tools.createClass({$:function(e){this.base.apply(this,arguments);this._.frameLoadedHandler=CKEDITOR.tools.addFunction(function(f){CKEDITOR.tools.setTimeout(b,0,this,f)},this);this._.docTitle=this.getWindow().getFrame().getAttribute("title")},base:CKEDITOR.editable,proto:{setData:function(k,n){var l=this.editor;if(n){this.setHtml(k),l.fire("dataReady")}else{this._.isLoadingData=!0;l._.dataStore={id:1};var m=l.config,o=m.fullPage,q=m.docType,p=CKEDITOR.tools.buildStyleHtml(d()).replace(/<style>/,'<style data-cke-temp="1">');o||(p+=CKEDITOR.tools.buildStyleHtml(l.config.contentsCss));var r=m.baseHref?'<base href="'+m.baseHref+'" data-cke-temp="1" />':"";o&&(k=k.replace(/<!DOCTYPE[^>]*>/i,function(e){l.docType=q=e;return""}).replace(/<\?xml\s[^\?]*\?>/i,function(e){l.xmlDeclaration=e;return""}));k=l.dataProcessor.toHtml(k);o?(/<body[\s|>]/.test(k)||(k="<body>"+k),/<html[\s|>]/.test(k)||(k="<html>"+k+"</html>"),/<head[\s|>]/.test(k)?/<title[\s|>]/.test(k)||(k=k.replace(/<head[^>]*>/,"$&<title></title>")):k=k.replace(/<html[^>]*>/,"$&<head><title></title></head>"),r&&(k=k.replace(/<head>/,"$&"+r)),k=k.replace(/<\/head\s*>/,p+"$&"),k=q+k):k=m.docType+'<html dir="'+m.contentsLangDirection+'" lang="'+(m.contentsLanguage||l.langCode)+'"><head><title>'+this._.docTitle+"</title>"+r+p+"</head><body"+(m.bodyId?' id="'+m.bodyId+'"':"")+(m.bodyClass?' class="'+m.bodyClass+'"':"")+">"+k+"</body></html>";CKEDITOR.env.gecko&&(k=k.replace(/<body/,'<body contenteditable="true" '),20000>CKEDITOR.env.version&&(k=k.replace(/<body[^>]*>/,"$&<!-- cke-content-start -->")));m='<script id="cke_actscrpt" type="text/javascript"'+(CKEDITOR.env.ie?' defer="defer" ':"")+">var wasLoaded=0;function onload(){if(!wasLoaded)window.parent.CKEDITOR.tools.callFunction("+this._.frameLoadedHandler+",window);wasLoaded=1;}"+(CKEDITOR.env.ie?"onload();":'document.addEventListener("DOMContentLoaded", onload, false );')+"</script>";CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(m+='<script id="cke_shimscrpt">window.parent.CKEDITOR.tools.enableHtml5Elements(document)</script>');r&&(CKEDITOR.env.ie&&10>CKEDITOR.env.version)&&(m+='<script id="cke_basetagscrpt">var baseTag = document.querySelector( "base" );baseTag.href = baseTag.href;</script>');k=k.replace(/(?=\s*<\/(:?head)>)/,m);this.clearCustomData();this.clearListeners();l.fire("contentDomUnload");var s=this.getDocument();try{s.write(k)}catch(t){setTimeout(function(){s.write(k)},0)}}},getData:function(f){if(f){return this.getHtml()}var f=this.editor,j=f.config,h=j.fullPage,i=h&&f.docType,k=h&&f.xmlDeclaration,l=this.getDocument(),h=h?l.getDocumentElement().getOuterHtml():l.getBody().getHtml();CKEDITOR.env.gecko&&j.enterMode!=CKEDITOR.ENTER_BR&&(h=h.replace(/<br>(?=\s*(:?$|<\/body>))/,""));h=f.dataProcessor.toDataFormat(h);k&&(h=k+"\n"+h);i&&(h=i+"\n"+h);return h},focus:function(){this._.isLoadingData?this._.isPendingFocus=!0:a.baseProto.focus.call(this)},detach:function(){var e=this.editor,f=e.document,e=e.window.getFrame();a.baseProto.detach.call(this);this.clearCustomData();f.getDocumentElement().clearCustomData();if(e){e.clearCustomData()}CKEDITOR.tools.removeFunction(this._.frameLoadedHandler);if(e){(f=e.removeCustomData("onResize"));if(f){f.removeListener()}e.remove()}}}})})();CKEDITOR.config.disableObjectResizing=!1;CKEDITOR.config.disableNativeTableHandles=!0;CKEDITOR.config.disableNativeSpellChecker=!0;CKEDITOR.config.contentsCss=CKEDITOR.getUrl("contents.css");(function(){function a(d,c){c||(c=d.getSelection().getSelectedElement());if(c&&c.is("img")&&!c.data("cke-realelement")&&!c.isReadOnly()){return c}}function b(d){var c=d.getStyle("float");if("inherit"==c||"none"==c){c=0}c||(c=d.getAttribute("align"));return c}CKEDITOR.plugins.add("image",{requires:"dialog",init:function(d){if(!d.plugins.image2){CKEDITOR.dialog.add("image",this.path+"dialogs/image.js");var c="img[alt,!src]{border-style,border-width,float,height,margin,margin-bottom,margin-left,margin-right,margin-top,width}";CKEDITOR.dialog.isTabEnabled(d,"image","advanced")&&(c="img[alt,dir,id,lang,longdesc,!src,title]{*}(*)");d.addCommand("image",new CKEDITOR.dialogCommand("image",{allowedContent:c,requiredContent:"img[alt,src]",contentTransformations:[["img{width}: sizeToStyle","img[width]: sizeToAttribute"],["img{float}: alignmentToStyle","img[align]: alignmentToAttribute"]]}));d.ui.addButton&&d.ui.addButton("Image",{label:d.lang.common.image,command:"image",toolbar:"insert,10"});d.on("doubleclick",function(f){var e=f.data.element;e.is("img")&&(!e.data("cke-realelement")&&!e.isReadOnly())&&(f.data.dialog="image")});d.addMenuItems&&d.addMenuItems({image:{label:d.lang.image.menu,command:"image",group:"image"}});d.contextMenu&&d.contextMenu.addListener(function(e){if(a(d,e)){return{image:CKEDITOR.TRISTATE_OFF}}})}},afterInit:function(d){function c(e){var f=d.getCommand("justify"+e);if(f){if("left"==e||"right"==e){f.on("exec",function(i){var h=a(d),j;h&&(j=b(h),j==e?(h.removeStyle("float"),e==b(h)&&h.removeAttribute("align")):h.setStyle("float",e),i.cancel())})}f.on("refresh",function(h){var g=a(d);g&&(g=b(g),this.setState(g==e?CKEDITOR.TRISTATE_ON:"right"==e||"left"==e?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),h.cancel())})}}d.plugins.image2||(c("left"),c("right"),c("center"),c("block"))}})})();CKEDITOR.config.image_removeLinkByEmptyURL=!0;(function(){function b(d,g){var h,i;g.on("refresh",function(e){var f=[a],j;for(j in e.data.states){f.push(e.data.states[j])}this.setState(CKEDITOR.tools.search(f,c)?c:a)},g,null,100);g.on("exec",function(e){h=d.getSelection();i=h.createBookmarks(1);e.data||(e.data={});e.data.done=!1},g,null,0);g.on("exec",function(){d.forceNextSelectionCheck();h.selectBookmarks(i)},g,null,100)}var a=CKEDITOR.TRISTATE_DISABLED,c=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indent",{init:function(d){var e=CKEDITOR.plugins.indent.genericDefinition;b(d,d.addCommand("indent",new e(!0)));b(d,d.addCommand("outdent",new e));d.ui.addButton&&(d.ui.addButton("Indent",{label:d.lang.indent.indent,command:"indent",directional:!0,toolbar:"indent,20"}),d.ui.addButton("Outdent",{label:d.lang.indent.outdent,command:"outdent",directional:!0,toolbar:"indent,10"}));d.on("dirChanged",function(i){var n=d.createRange(),q=i.data.node;n.setStartBefore(q);n.setEndAfter(q);for(var r=new CKEDITOR.dom.walker(n),k;k=r.next();){if(k.type==CKEDITOR.NODE_ELEMENT){if(!k.equals(q)&&k.getDirection()){n.setStartAfter(k);r=new CKEDITOR.dom.walker(n)}else{var m=d.config.indentClasses;if(m){for(var o=i.data.dir=="ltr"?["_rtl",""]:["","_rtl"],p=0;p<m.length;p++){if(k.hasClass(m[p]+o[0])){k.removeClass(m[p]+o[0]);k.addClass(m[p]+o[1])}}}m=k.getStyle("margin-right");o=k.getStyle("margin-left");m?k.setStyle("margin-left",m):k.removeStyle("margin-left");o?k.setStyle("margin-right",o):k.removeStyle("margin-right")}}}})}});CKEDITOR.plugins.indent={genericDefinition:function(d){this.isIndent=!!d;this.startDisabled=!this.isIndent},specificDefinition:function(d,f,g){this.name=f;this.editor=d;this.jobs={};this.enterBr=d.config.enterMode==CKEDITOR.ENTER_BR;this.isIndent=!!g;this.relatedGlobal=g?"indent":"outdent";this.indentKey=g?9:CKEDITOR.SHIFT+9;this.database={}},registerCommands:function(d,e){d.on("pluginsLoaded",function(){for(var f in e){(function(g,h){var j=g.getCommand(h.relatedGlobal),i;for(i in h.jobs){j.on("exec",function(k){k.data.done||(g.fire("lockSnapshot"),h.execJob(g,i)&&(k.data.done=!0),g.fire("unlockSnapshot"),CKEDITOR.dom.element.clearAllMarkers(h.database))},this,null,i),j.on("refresh",function(k){k.data.states||(k.data.states={});k.data.states[h.name+"@"+i]=h.refreshJob(g,i,k.data.path)},this,null,i)}g.addFeature(h)})(this,e[f])}})}};CKEDITOR.plugins.indent.genericDefinition.prototype={context:"p",exec:function(){}};CKEDITOR.plugins.indent.specificDefinition.prototype={execJob:function(d,f){var g=this.jobs[f];if(g.state!=a){return g.exec.call(this,d)}},refreshJob:function(d,f,g){f=this.jobs[f];f.state=d.activeFilter.checkFeature(this)?f.refresh.call(this,d,g):a;return f.state},getContext:function(d){return d.contains(this.context)}}})();(function(){function b(i,j,h){if(!i.getCustomData("indent_processed")){var k=this.editor,l=this.isIndent;if(j){k=i.$.className.match(this.classNameRegex);h=0;k&&(k=k[1],h=CKEDITOR.tools.indexOf(j,k)+1);if(0>(h+=l?1:-1)){return}h=Math.min(h,j.length);h=Math.max(h,0);i.$.className=CKEDITOR.tools.ltrim(i.$.className.replace(this.classNameRegex,""));0<h&&i.addClass(j[h-1])}else{var j=c(i,h),h=parseInt(i.getStyle(j),10),m=k.config.indentOffset||40;isNaN(h)&&(h=0);h+=(l?1:-1)*m;if(0>h){return}h=Math.max(h,0);h=Math.ceil(h/m)*m;i.setStyle(j,h?h+(k.config.indentUnit||"px"):"");""===i.getAttribute("style")&&i.removeAttribute("style")}CKEDITOR.dom.element.setMarker(this.database,i,"indent_processed",1)}}function c(f,h){return"ltr"==(h||f.getComputedStyle("direction"))?"margin-left":"margin-right"}var d=CKEDITOR.dtd.$listItem,g=CKEDITOR.dtd.$list,a=CKEDITOR.TRISTATE_DISABLED,e=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentblock",{requires:"indent",init:function(h){function i(k,l){f.specificDefinition.apply(this,arguments);this.allowedContent={"div h1 h2 h3 h4 h5 h6 ol p pre ul":{propertiesOnly:!0,styles:!j?"margin-left,margin-right":null,classes:j||null}};this.enterBr&&(this.allowedContent.div=!0);this.requiredContent=(this.enterBr?"div":"p")+(j?"("+j.join(",")+")":"{margin-left}");this.jobs={20:{refresh:function(m,n){var p=n.block||n.blockLimit;if(p.is(d)){p=p.getParent()}else{if(p.getAscendant(d)){return a}}if(!this.enterBr&&!this.getContext(n)){return a}if(j){var o;o=j;var p=p.$.className.match(this.classNameRegex),q=this.isIndent;o=p?q?p[1]!=o.slice(-1):true:q;return o?e:a}return this.isIndent?e:p?CKEDITOR[(parseInt(p.getStyle(c(p)),10)||0)<=0?"TRISTATE_DISABLED":"TRISTATE_OFF"]:a},exec:function(m){var n=m.getSelection(),n=n&&n.getRanges()[0],o;if(o=m.elementPath().contains(g)){b.call(this,o,j)}else{n=n.createIterator();m=m.config.enterMode;n.enforceRealBlocks=true;for(n.enlargeBr=m!=CKEDITOR.ENTER_BR;o=n.getNextParagraph(m==CKEDITOR.ENTER_P?"p":"div");){o.isReadOnly()||b.call(this,o,j)}}return true}}}}var f=CKEDITOR.plugins.indent,j=h.config.indentClasses;f.registerCommands(h,{indentblock:new i(h,"indentblock",!0),outdentblock:new i(h,"outdentblock")});CKEDITOR.tools.extend(i.prototype,f.specificDefinition.prototype,{context:{div:1,dl:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,p:1,pre:1,table:1},classNameRegex:j?RegExp("(?:^|\\s+)("+j.join("|")+")(?=$|\\s)"):null})}})})();(function(){function e(p){function q(n){for(var v=m.startContainer,k=m.endContainer;v&&!v.getParent().equals(n);){v=v.getParent()}for(;k&&!k.getParent().equals(n);){k=k.getParent()}if(!v||!k){return !1}for(var x=v,v=[],o=!1;!o;){x.equals(k)&&(o=!0),v.push(x),x=x.getNext()}if(1>v.length){return !1}x=n.getParents(!0);for(k=0;k<x.length;k++){if(x[k].getName&&r[x[k].getName()]){n=x[k];break}}for(var x=t.isIndent?1:-1,k=v[0],v=v[v.length-1],o=CKEDITOR.plugins.list.listToArray(n,u),w=o[v.getCustomData("listarray_index")].indent,k=k.getCustomData("listarray_index");k<=v.getCustomData("listarray_index");k++){if(o[k].indent+=x,0<x){var A=o[k].parent;o[k].parent=new CKEDITOR.dom.element(A.getName(),A.getDocument())}}for(k=v.getCustomData("listarray_index")+1;k<o.length&&o[k].indent>w;k++){o[k].indent+=x}v=CKEDITOR.plugins.list.arrayToList(o,u,null,p.config.enterMode,n.getDirection());if(!t.isIndent){var y;if((y=n.getParent())&&y.is("li")){for(var x=v.listNode.getChildren(),B=[],z,k=x.count()-1;0<=k;k--){(z=x.getItem(k))&&(z.is&&z.is("li"))&&B.push(z)}}}v&&v.listNode.replace(n);if(B&&B.length){for(k=0;k<B.length;k++){for(z=n=B[k];(z=z.getNext())&&z.is&&z.getName() in r;){CKEDITOR.env.needsNbspFiller&&!n.getFirst(f)&&n.append(m.document.createText("")),n.append(z)}n.insertAfter(y)}}v&&p.fire("contentDomInvalidated");return !0}for(var t=this,u=this.database,r=this.context,s=p.getSelection(),s=(s&&s.getRanges()).createIterator(),m;m=s.getNextRange();){for(var i=m.getCommonAncestor();i&&!(i.type==CKEDITOR.NODE_ELEMENT&&r[i.getName()]);){i=i.getParent()}i||(i=m.startPath().contains(r))&&m.setEndAt(i,CKEDITOR.POSITION_BEFORE_END);if(!i){var j=m.getEnclosedNode();j&&(j.type==CKEDITOR.NODE_ELEMENT&&j.getName() in r)&&(m.setStartAt(j,CKEDITOR.POSITION_AFTER_START),m.setEndAt(j,CKEDITOR.POSITION_BEFORE_END),i=j)}i&&(m.startContainer.type==CKEDITOR.NODE_ELEMENT&&m.startContainer.getName() in r)&&(j=new CKEDITOR.dom.walker(m),j.evaluator=a,m.startContainer=j.next());i&&(m.endContainer.type==CKEDITOR.NODE_ELEMENT&&m.endContainer.getName() in r)&&(j=new CKEDITOR.dom.walker(m),j.evaluator=a,m.endContainer=j.previous());if(i){return q(i)}}return 0}function b(i,j){j||(j=i.contains(this.context));return j&&i.block&&i.block.equals(j.getFirst(a))}function a(i){return i.type==CKEDITOR.NODE_ELEMENT&&i.is("li")}function f(i){return g(i)&&h(i)}var g=CKEDITOR.dom.walker.whitespaces(!0),h=CKEDITOR.dom.walker.bookmark(!1,!0),c=CKEDITOR.TRISTATE_DISABLED,d=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentlist",{requires:"indent",init:function(j){function k(i,m){l.specificDefinition.apply(this,arguments);this.requiredContent=["ul","ol"];i.on("key",function(o){if("wysiwyg"==i.mode&&o.data.keyCode==this.indentKey){var n=this.getContext(i.elementPath());if(n&&(!this.isIndent||!b.call(this,i.elementPath(),n))){i.execCommand(this.relatedGlobal),o.cancel()}}},this);this.jobs[this.isIndent?10:30]={refresh:this.isIndent?function(q,p){var n=this.getContext(p),o=b.call(this,p,n);return !n||!this.isIndent||o?c:d}:function(o,n){return !this.getContext(n)||this.isIndent?c:d},exec:CKEDITOR.tools.bind(e,this)}}var l=CKEDITOR.plugins.indent;l.registerCommands(j,{indentlist:new k(j,"indentlist",!0),outdentlist:new k(j,"outdentlist")});CKEDITOR.tools.extend(k.prototype,l.specificDefinition.prototype,{context:{ol:1,ul:1}})}})})();CKEDITOR.plugins.add("smiley",{requires:"dialog",init:function(b){b.config.smiley_path=b.config.smiley_path||this.path+"images/";b.addCommand("smiley",new CKEDITOR.dialogCommand("smiley",{allowedContent:"img[alt,height,!src,title,width]",requiredContent:"img"}));b.ui.addButton&&b.ui.addButton("Smiley",{label:b.lang.smiley.toolbar,command:"smiley",toolbar:"insert,50"});CKEDITOR.dialog.add("smiley",this.path+"dialogs/smiley.js")}});CKEDITOR.config.smiley_images="regular_smile.png sad_smile.png wink_smile.png teeth_smile.png confused_smile.png tongue_smile.png embarrassed_smile.png omg_smile.png whatchutalkingabout_smile.png angry_smile.png angel_smile.png shades_smile.png devil_smile.png cry_smile.png lightbulb.png thumbs_down.png thumbs_up.png heart.png broken_heart.png kiss.png envelope.png".split(" ");CKEDITOR.config.smiley_descriptions="smiley;sad;wink;laugh;frown;cheeky;blush;surprise;indecision;angry;angel;cool;devil;crying;enlightened;no;yes;heart;broken heart;kiss;mail".split(";");(function(){function c(d,f){var f=void 0===f||f,e;if(f){e=d.getComputedStyle("text-align")}else{for(;!d.hasAttribute||!d.hasAttribute("align")&&!d.getStyle("text-align");){e=d.getParent();if(!e){break}d=e}e=d.getStyle("text-align")||d.getAttribute("align")||""}e&&(e=e.replace(/(?:-(?:moz|webkit)-)?(?:start|auto)/i,""));!e&&f&&(e="rtl"==d.getComputedStyle("direction")?"right":"left");return e}function a(d,f,e){this.editor=d;this.name=f;this.value=e;this.context="p";var f=d.config.justifyClasses,g=d.config.enterMode==CKEDITOR.ENTER_P?"p":"div";if(f){switch(e){case"left":this.cssClassName=f[0];break;case"center":this.cssClassName=f[1];break;case"right":this.cssClassName=f[2];break;case"justify":this.cssClassName=f[3]}this.cssClassRegex=RegExp("(?:^|\\s+)(?:"+f.join("|")+")(?=$|\\s)");this.requiredContent=g+"("+this.cssClassName+")"}else{this.requiredContent=g+"{text-align}"}this.allowedContent={"caption div h1 h2 h3 h4 h5 h6 p pre td th li":{propertiesOnly:!0,styles:this.cssClassName?null:"text-align",classes:this.cssClassName||null}};d.config.enterMode==CKEDITOR.ENTER_BR&&(this.allowedContent.div=!0)}function b(f){var i=f.editor,g=i.createRange();g.setStartBefore(f.data.node);g.setEndAfter(f.data.node);for(var l=new CKEDITOR.dom.walker(g),j;j=l.next();){if(j.type==CKEDITOR.NODE_ELEMENT){if(!j.equals(f.data.node)&&j.getDirection()){g.setStartAfter(j),l=new CKEDITOR.dom.walker(g)}else{var k=i.config.justifyClasses;k&&(j.hasClass(k[0])?(j.removeClass(k[0]),j.addClass(k[2])):j.hasClass(k[2])&&(j.removeClass(k[2]),j.addClass(k[0])));k=j.getStyle("text-align");"left"==k?j.setStyle("text-align","right"):"right"==k&&j.setStyle("text-align","left")}}}}a.prototype={exec:function(l){var o=l.getSelection(),n=l.config.enterMode;if(o){for(var t=o.createBookmarks(),p=o.getRanges(),q=this.cssClassName,s,r,u=l.config.useComputedState,u=void 0===u||u,w=p.length-1;0<=w;w--){s=p[w].createIterator();for(s.enlargeBr=n!=CKEDITOR.ENTER_BR;r=s.getNextParagraph(n==CKEDITOR.ENTER_P?"p":"div");){if(!r.isReadOnly()){r.removeAttribute("align");r.removeStyle("text-align");var v=q&&(r.$.className=CKEDITOR.tools.ltrim(r.$.className.replace(this.cssClassRegex,""))),x=this.state==CKEDITOR.TRISTATE_OFF&&(!u||c(r,!0)!=this.value);q?x?r.addClass(q):v||r.removeAttribute("class"):x&&r.setStyle("text-align",this.value)}}}l.focus();l.forceNextSelectionCheck();o.selectBookmarks(t)}},refresh:function(d,f){var e=f.block||f.blockLimit;this.setState("body"!=e.getName()&&c(e,this.editor.config.useComputedState)==this.value?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}};CKEDITOR.plugins.add("justify",{init:function(e){if(!e.blockless){var g=new a(e,"justifyleft","left"),f=new a(e,"justifycenter","center"),j=new a(e,"justifyright","right"),i=new a(e,"justifyblock","justify");e.addCommand("justifyleft",g);e.addCommand("justifycenter",f);e.addCommand("justifyright",j);e.addCommand("justifyblock",i);e.ui.addButton&&(e.ui.addButton("JustifyLeft",{label:e.lang.justify.left,command:"justifyleft",toolbar:"align,10"}),e.ui.addButton("JustifyCenter",{label:e.lang.justify.center,command:"justifycenter",toolbar:"align,20"}),e.ui.addButton("JustifyRight",{label:e.lang.justify.right,command:"justifyright",toolbar:"align,30"}),e.ui.addButton("JustifyBlock",{label:e.lang.justify.block,command:"justifyblock",toolbar:"align,40"}));e.on("dirChanged",b)}}})})();CKEDITOR.plugins.add("menubutton",{requires:"button,menu",onLoad:function(){var a=function(f){var d=this._,e=d.menu;d.state!==CKEDITOR.TRISTATE_DISABLED&&(d.on&&e?e.hide():(d.previousState=d.state,e||(e=d.menu=new CKEDITOR.menu(f,{panel:{className:"cke_menu_panel",attributes:{"aria-label":f.lang.common.options}}}),e.onHide=CKEDITOR.tools.bind(function(){var c=this.command?f.getCommand(this.command).modes:this.modes;this.setState(!c||c[f.mode]?d.previousState:CKEDITOR.TRISTATE_DISABLED);d.on=0},this),this.onMenu&&e.addListener(this.onMenu)),this.setState(CKEDITOR.TRISTATE_ON),d.on=1,setTimeout(function(){e.show(CKEDITOR.document.getById(d.id),4)},0)))};CKEDITOR.ui.menuButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(b){delete b.panel;this.base(b);this.hasArrow=!0;this.click=a},statics:{handler:{create:function(b){return new CKEDITOR.ui.menuButton(b)}}}})},beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_MENUBUTTON,CKEDITOR.ui.menuButton.handler)}});CKEDITOR.UI_MENUBUTTON="menubutton";(function(){CKEDITOR.plugins.add("language",{requires:"menubutton",init:function(j){var k=j.config.language_list||["ar:Arabic:rtl","fr:French","es:Spanish"],l=this,m=j.lang.language,n={},p,q,r,o;j.addCommand("language",{allowedContent:"span[!lang,!dir]",requiredContent:"span[lang,dir]",contextSensitive:!0,exec:function(d,e){var f=n["language_"+e];if(f){d[f.style.checkActive(d.elementPath(),d)?"removeStyle":"applyStyle"](f.style)}},refresh:function(b){this.setState(l.getCurrentLangElement(b)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}});for(o=0;o<k.length;o++){p=k[o].split(":"),q=p[0],r="language_"+q,n[r]={label:p[1],langId:q,group:"language",order:o,ltr:"rtl"!=(""+p[2]).toLowerCase(),onClick:function(){j.execCommand("language",this.langId)},role:"menuitemcheckbox"},n[r].style=new CKEDITOR.style({element:"span",attributes:{lang:q,dir:n[r].ltr?"ltr":"rtl"}})}n.language_remove={label:m.remove,group:"language_remove",state:CKEDITOR.TRISTATE_DISABLED,order:n.length,onClick:function(){var a=l.getCurrentLangElement(j);a&&j.execCommand("language",a.getAttribute("lang"))}};j.addMenuGroup("language",1);j.addMenuGroup("language_remove");j.addMenuItems(n);j.ui.add("Language",CKEDITOR.UI_MENUBUTTON,{label:m.button,allowedContent:"span[!lang,!dir]",requiredContent:"span[lang,dir]",toolbar:"bidi,30",command:"language",onMenu:function(){var a={},c=l.getCurrentLangElement(j),e;for(e in n){a[e]=CKEDITOR.TRISTATE_OFF}a.language_remove=c?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;c&&(a["language_"+c.getAttribute("lang")]=CKEDITOR.TRISTATE_ON);return a}})},getCurrentLangElement:function(e){var f=e.elementPath(),e=f&&f.elements,g;if(f){for(var h=0;h<e.length;h++){f=e[h],!g&&("span"==f.getName()&&f.hasAttribute("dir")&&f.hasAttribute("lang"))&&(g=f)}}return g}})})();(function(){function c(j){return j.replace(/'/g,"\\$&")}function d(m){for(var l,j=m.length,o=[],n=0;n<j;n++){l=m.charCodeAt(n),o.push(l)}return"String.fromCharCode("+o.join(",")+")"}function e(m,l){var j=m.plugins.link,p=j.compiledProtectionFunction.params,o,n;n=[j.compiledProtectionFunction.name,"("];for(var q=0;q<p.length;q++){j=p[q].toLowerCase(),o=l[j],0<q&&n.push(","),n.push("'",o?c(encodeURIComponent(l[j])):"","'")}n.push(")");return n.join("")}function b(l){var l=l.config.emailProtection||"",j;l&&"encode"!=l&&(j={},l.replace(/^([^(]+)\(([^)]+)\)$/,function(m,n,o){j.name=n;j.params=[];o.replace(/[^,\s]+/g,function(p){j.params.push(p)})}));return j}CKEDITOR.plugins.add("link",{requires:"dialog,fakeobjects",onLoad:function(){function m(n){return j.replace(/%1/g,"rtl"==n?"right":"left").replace(/%2/g,"cke_contents_"+n)}var l="background:url("+CKEDITOR.getUrl(this.path+"images"+(CKEDITOR.env.hidpi?"/hidpi":"")+"/anchor.png")+") no-repeat %1 center;border:1px dotted #00f;background-size:16px;",j=".%2 a.cke_anchor,.%2 a.cke_anchor_empty,.cke_editable.%2 a[name],.cke_editable.%2 a[data-cke-saved-name]{"+l+"padding-%1:18px;cursor:auto;}.%2 img.cke_anchor{"+l+"width:16px;min-height:15px;height:1.15em;vertical-align:text-bottom;}";CKEDITOR.addCss(m("ltr")+m("rtl"))},init:function(l){var j="a[!href]";CKEDITOR.dialog.isTabEnabled(l,"link","advanced")&&(j=j.replace("]",",accesskey,charset,dir,id,lang,name,rel,tabindex,title,type]{*}(*)"));CKEDITOR.dialog.isTabEnabled(l,"link","target")&&(j=j.replace("]",",target,onclick]"));l.addCommand("link",new CKEDITOR.dialogCommand("link",{allowedContent:j,requiredContent:"a[href]"}));l.addCommand("anchor",new CKEDITOR.dialogCommand("anchor",{allowedContent:"a[!name,id]",requiredContent:"a[name]"}));l.addCommand("unlink",new CKEDITOR.unlinkCommand);l.addCommand("removeAnchor",new CKEDITOR.removeAnchorCommand);l.setKeystroke(CKEDITOR.CTRL+76,"link");l.ui.addButton&&(l.ui.addButton("Link",{label:l.lang.link.toolbar,command:"link",toolbar:"links,10"}),l.ui.addButton("Unlink",{label:l.lang.link.unlink,command:"unlink",toolbar:"links,20"}),l.ui.addButton("Anchor",{label:l.lang.link.anchor.toolbar,command:"anchor",toolbar:"links,30"}));CKEDITOR.dialog.add("link",this.path+"dialogs/link.js");CKEDITOR.dialog.add("anchor",this.path+"dialogs/anchor.js");l.on("doubleclick",function(m){var n=CKEDITOR.plugins.link.getSelectedLink(l)||m.data.element;if(!n.isReadOnly()){if(n.is("a")){m.data.dialog=n.getAttribute("name")&&(!n.getAttribute("href")||!n.getChildCount())?"anchor":"link";m.data.link=n}else{if(CKEDITOR.plugins.link.tryRestoreFakeAnchor(l,n)){m.data.dialog="anchor"}}}},null,null,0);l.on("doubleclick",function(m){m.data.link&&l.getSelection().selectElement(m.data.link)},null,null,20);l.addMenuItems&&l.addMenuItems({anchor:{label:l.lang.link.anchor.menu,command:"anchor",group:"anchor",order:1},removeAnchor:{label:l.lang.link.anchor.remove,command:"removeAnchor",group:"anchor",order:5},link:{label:l.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:l.lang.link.unlink,command:"unlink",group:"link",order:5}});l.contextMenu&&l.contextMenu.addListener(function(m){if(!m||m.isReadOnly()){return null}m=CKEDITOR.plugins.link.tryRestoreFakeAnchor(l,m);if(!m&&!(m=CKEDITOR.plugins.link.getSelectedLink(l))){return null}var n={};m.getAttribute("href")&&m.getChildCount()&&(n={link:CKEDITOR.TRISTATE_OFF,unlink:CKEDITOR.TRISTATE_OFF});if(m&&m.hasAttribute("name")){n.anchor=n.removeAnchor=CKEDITOR.TRISTATE_OFF}return n});this.compiledProtectionFunction=b(l)},afterInit:function(l){l.dataProcessor.dataFilter.addRules({elements:{a:function(m){return !m.attributes.name?null:!m.children.length?l.createFakeParserElement(m,"cke_anchor","anchor"):null}}});var j=l._.elementsPath&&l._.elementsPath.filters;j&&j.push(function(m,n){if("a"==n&&(CKEDITOR.plugins.link.tryRestoreFakeAnchor(l,m)||m.getAttribute("name")&&(!m.getAttribute("href")||!m.getChildCount()))){return"anchor"}})}});var f=/^javascript:/,g=/^mailto:([^?]+)(?:\?(.+))?$/,h=/subject=([^;?:@&=$,\/]*)/,i=/body=([^;?:@&=$,\/]*)/,k=/^#(.*)$/,A=/^((?:http|https|ftp|news):\/\/)?(.*)$/,B=/^(_(?:self|top|parent|blank))$/,C=/^javascript:void\(location\.href='mailto:'\+String\.fromCharCode\(([^)]+)\)(?:\+'(.*)')?\)$/,D=/^javascript:([^(]+)\(([^)]+)\)$/,E=/\s*window.open\(\s*this\.href\s*,\s*(?:'([^']*)'|null)\s*,\s*'([^']*)'\s*\)\s*;\s*return\s*false;*\s*/,F=/(?:^|,)([^=]+)=(\d+|yes|no)/gi,a={id:"advId",dir:"advLangDir",accessKey:"advAccessKey",name:"advName",lang:"advLangCode",tabindex:"advTabIndex",title:"advTitle",type:"advContentType","class":"advCSSClasses",charset:"advCharset",style:"advStyles",rel:"advRel"};CKEDITOR.plugins.link={getSelectedLink:function(m){var l=m.getSelection(),j=l.getSelectedElement();return j&&j.is("a")?j:(l=l.getRanges()[0])?(l.shrink(CKEDITOR.SHRINK_TEXT),m.elementPath(l.getCommonAncestor()).contains("a",1)):null},getEditorAnchors:function(m){for(var l=m.editable(),j=l.isInline()&&!m.plugins.divarea?m.document:l,l=j.getElementsByTag("a"),j=j.getElementsByTag("img"),p=[],o=0,n;n=l.getItem(o++);){if(n.data("cke-saved-name")||n.hasAttribute("name")){p.push({name:n.data("cke-saved-name")||n.getAttribute("name"),id:n.getAttribute("id")})}}for(o=0;n=j.getItem(o++);){(n=this.tryRestoreFakeAnchor(m,n))&&p.push({name:n.getAttribute("name"),id:n.getAttribute("id")})}return p},fakeAnchor:!0,tryRestoreFakeAnchor:function(m,l){if(l&&l.data("cke-real-element-type")&&"anchor"==l.data("cke-real-element-type")){var j=m.restoreRealElement(l);if(j.data("cke-saved-name")){return j}}},parseLinkAttributes:function(m,l){var j=l&&(l.data("cke-saved-href")||l.getAttribute("href"))||"",p=m.plugins.link.compiledProtectionFunction,o=m.config.emailProtection,n,q={};j.match(f)&&("encode"==o?j=j.replace(C,function(t,u,v){return"mailto:"+String.fromCharCode.apply(String,u.split(","))+(v&&v.replace(/\\'/g,"'"))}):o&&j.replace(D,function(t,u,v){if(u==p.name){q.type="email";for(var t=q.email={},u=/(^')|('$)/g,v=v.match(/[^,\s]+/g),w=v.length,x,y,z=0;z<w;z++){x=decodeURIComponent,y=v[z].replace(u,"").replace(/\\'/g,"'"),y=x(y),x=p.params[z].toLowerCase(),t[x]=y}t.address=[t.name,t.domain].join("@")}}));if(!q.type){if(o=j.match(k)){q.type="anchor",q.anchor={},q.anchor.name=q.anchor.id=o[1]}else{if(o=j.match(g)){n=j.match(h);j=j.match(i);q.type="email";var s=q.email={};s.address=o[1];n&&(s.subject=decodeURIComponent(n[1]));j&&(s.body=decodeURIComponent(j[1]))}else{if(j&&(n=j.match(A))){q.type="url",q.url={},q.url.protocol=n[1],q.url.url=n[2]}}}}if(l){if(j=l.getAttribute("target")){q.target={type:j.match(B)?j:"frame",name:j}}else{if(j=(j=l.data("cke-pa-onclick")||l.getAttribute("onclick"))&&j.match(E)){for(q.target={type:"popup",name:j[1]};o=F.exec(j[2]);){("yes"==o[2]||"1"==o[2])&&!(o[1] in {height:1,width:1,top:1,left:1})?q.target[o[1]]=!0:isFinite(o[2])&&(q.target[o[1]]=o[2])}}}var j={},r;for(r in a){(o=l.getAttribute(r))&&(j[a[r]]=o)}if(r=l.data("cke-saved-name")||j.advName){j.advName=r}CKEDITOR.tools.isEmpty(j)||(q.advanced=j)}return q},getLinkAttributes:function(n,m){var j=n.config.emailProtection||"",q={};switch(m.type){case"url":var j=m.url&&void 0!=m.url.protocol?m.url.protocol:"http://",p=m.url&&CKEDITOR.tools.trim(m.url.url)||"";q["data-cke-saved-href"]=0===p.indexOf("/")?p:j+p;break;case"anchor":j=m.anchor&&m.anchor.id;q["data-cke-saved-href"]="#"+(m.anchor&&m.anchor.name||j||"");break;case"email":var o=m.email,p=o.address;switch(j){case"":case"encode":var r=encodeURIComponent(o.subject||""),t=encodeURIComponent(o.body||""),o=[];r&&o.push("subject="+r);t&&o.push("body="+t);o=o.length?"?"+o.join("&"):"";"encode"==j?(j=["javascript:void(location.href='mailto:'+",d(p)],o&&j.push("+'",c(o),"'"),j.push(")")):j=["mailto:",p,o];break;default:j=p.split("@",2),o.name=j[0],o.domain=j[1],j=["javascript:",e(n,o)]}q["data-cke-saved-href"]=j.join("")}if(m.target){if("popup"==m.target.type){for(var j=["window.open(this.href, '",m.target.name||"","', '"],s="resizable status location toolbar menubar fullscreen scrollbars dependent".split(" "),p=s.length,r=function(l){m.target[l]&&s.push(l+"="+m.target[l])},o=0;o<p;o++){s[o]+=m.target[s[o]]?"=yes":"=no"}r("width");r("left");r("height");r("top");j.push(s.join(","),"'); return false;");q["data-cke-pa-onclick"]=j.join("")}else{"notSet"!=m.target.type&&m.target.name&&(q.target=m.target.name)}}if(m.advanced){for(var u in a){(j=m.advanced[a[u]])&&(q[u]=j)}q.name&&(q["data-cke-saved-name"]=q.name)}q["data-cke-saved-href"]&&(q.href=q["data-cke-saved-href"]);u=CKEDITOR.tools.extend({target:1,onclick:1,"data-cke-pa-onclick":1,"data-cke-saved-name":1},a);for(var v in q){delete u[v]}return{set:q,removed:CKEDITOR.tools.objectKeys(u)}}};CKEDITOR.unlinkCommand=function(){};CKEDITOR.unlinkCommand.prototype={exec:function(l){var j=new CKEDITOR.style({element:"a",type:CKEDITOR.STYLE_INLINE,alwaysRemoveElement:1});l.removeStyle(j)},refresh:function(m,l){var j=l.lastElement&&l.lastElement.getAscendant("a",!0);j&&"a"==j.getName()&&j.getAttribute("href")&&j.getChildCount()?this.setState(CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)},contextSensitive:1,startDisabled:1,requiredContent:"a[href]"};CKEDITOR.removeAnchorCommand=function(){};CKEDITOR.removeAnchorCommand.prototype={exec:function(m){var l=m.getSelection(),j=l.createBookmarks(),n;if(l&&(n=l.getSelectedElement())&&(!n.getChildCount()?CKEDITOR.plugins.link.tryRestoreFakeAnchor(m,n):n.is("a"))){n.remove(1)}else{if(n=CKEDITOR.plugins.link.getSelectedLink(m)){n.hasAttribute("href")?(n.removeAttributes({name:1,"data-cke-saved-name":1}),n.removeClass("cke_anchor")):n.remove(1)}}l.selectBookmarks(j)},requiredContent:"a[name]"};CKEDITOR.tools.extend(CKEDITOR.config,{linkShowAdvancedTab:!0,linkShowTargetTab:!0})})();(function(){function e(q,w,s){function p(z){if((r=o[z?"getFirst":"getLast"]())&&(!r.is||!r.isBlockBoundary())&&(y=w.root[z?"getPrevious":"getNext"](CKEDITOR.dom.walker.invisible(!0)))&&(!y.is||!y.isBlockBoundary({br:1}))){q.document.createElement("br")[z?"insertBefore":"insertAfter"](r)}}for(var x=CKEDITOR.plugins.list.listToArray(w.root,s),u=[],v=0;v<w.contents.length;v++){var t=w.contents[v];if((t=t.getAscendant("li",!0))&&!t.getCustomData("list_item_processed")){u.push(t),CKEDITOR.dom.element.setMarker(s,t,"list_item_processed",!0)}}t=null;for(v=0;v<u.length;v++){t=u[v].getCustomData("listarray_index"),x[t].indent=-1}for(v=t+1;v<x.length;v++){if(x[v].indent>x[v-1].indent+1){u=x[v-1].indent+1-x[v].indent;for(t=x[v].indent;x[v]&&x[v].indent>=t;){x[v].indent+=u,v++}v--}}var o=CKEDITOR.plugins.list.arrayToList(x,s,null,q.config.enterMode,w.root.getAttribute("dir")).listNode,r,y;p(!0);p();o.replace(w.root);q.fire("contentDomInvalidated")}function m(o,p){this.name=o;this.context=this.type=p;this.allowedContent=p+" li";this.requiredContent=p}function a(p,s,q,o){for(var t,r;t=p[o?"getLast":"getFirst"](f);){(r=t.getDirection(1))!==s.getDirection(1)&&t.setAttribute("dir",r),t.remove(),q?t[o?"insertBefore":"insertAfter"](q):s.append(t,o)}}function b(o){var p;(p=function(r){var q=o[r?"getPrevious":"getNext"](i);q&&(q.type==CKEDITOR.NODE_ELEMENT&&q.is(o.getName()))&&(a(o,q,null,!r),o.remove(),o=q)})();p(1)}function c(o){return o.type==CKEDITOR.NODE_ELEMENT&&(o.getName() in CKEDITOR.dtd.$block||o.getName() in CKEDITOR.dtd.$listItem)&&CKEDITOR.dtd[o.getName()]["#"]}function n(q,v,r){q.fire("saveSnapshot");r.enlarge(CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS);var p=r.extractContents();v.trim(!1,!0);var w=v.createBookmark(),t=new CKEDITOR.dom.elementPath(v.startContainer),u=t.block,t=t.lastElement.getAscendant("li",1)||u,s=new CKEDITOR.dom.elementPath(r.startContainer),o=s.contains(CKEDITOR.dtd.$listItem),s=s.contains(CKEDITOR.dtd.$list);u?(u=u.getBogus())&&u.remove():s&&(u=s.getPrevious(i))&&k(u)&&u.remove();(u=p.getLast())&&(u.type==CKEDITOR.NODE_ELEMENT&&u.is("br"))&&u.remove();(u=v.startContainer.getChild(v.startOffset))?p.insertBefore(u):v.startContainer.append(p);if(o&&(p=l(o))){t.contains(o)?(a(p,o.getParent(),o),p.remove()):t.append(p)}for(;r.checkStartOfBlock()&&r.checkEndOfBlock();){s=r.startPath();p=s.block;if(!p){break}p.is("li")&&(t=p.getParent(),p.equals(t.getLast(i))&&p.equals(t.getFirst(i))&&(p=t));r.moveToPosition(p,CKEDITOR.POSITION_BEFORE_START);p.remove()}r=r.clone();p=q.editable();r.setEndAt(p,CKEDITOR.POSITION_BEFORE_END);r=new CKEDITOR.dom.walker(r);r.evaluator=function(x){return i(x)&&!k(x)};(r=r.next())&&(r.type==CKEDITOR.NODE_ELEMENT&&r.getName() in CKEDITOR.dtd.$list)&&b(r);v.moveToBookmark(w);v.select();q.fire("saveSnapshot")}function l(o){return(o=o.getLast(i))&&o.type==CKEDITOR.NODE_ELEMENT&&o.getName() in j?o:null}var j={ol:1,ul:1},g=CKEDITOR.dom.walker.whitespaces(),d=CKEDITOR.dom.walker.bookmark(),i=function(o){return !(g(o)||d(o))},k=CKEDITOR.dom.walker.bogus();CKEDITOR.plugins.list={listToArray:function(q,x,s,p,y){if(!j[q.getName()]){return[]}p||(p=0);s||(s=[]);for(var u=0,v=q.getChildCount();u<v;u++){var t=q.getChild(u);t.type==CKEDITOR.NODE_ELEMENT&&t.getName() in CKEDITOR.dtd.$list&&CKEDITOR.plugins.list.listToArray(t,x,s,p+1);if("li"==t.$.nodeName.toLowerCase()){var o={parent:q,indent:p,element:t,contents:[]};y?o.grandparent=y:(o.grandparent=q.getParent(),o.grandparent&&"li"==o.grandparent.$.nodeName.toLowerCase()&&(o.grandparent=o.grandparent.getParent()));x&&CKEDITOR.dom.element.setMarker(x,t,"listarray_index",s.length);s.push(o);for(var r=0,z=t.getChildCount(),w;r<z;r++){w=t.getChild(r),w.type==CKEDITOR.NODE_ELEMENT&&j[w.getName()]?CKEDITOR.plugins.list.listToArray(w,x,s,p+1,o.grandparent):o.contents.push(w)}}}return s},arrayToList:function(A,H,C,r,I){C||(C=0);if(!A||A.length<C+1){return null}for(var E,F=A[C].parent.getDocument(),D=new CKEDITOR.dom.documentFragment(F),q=null,B=C,K=Math.max(A[C].indent,0),G=null,L,J,N=r==CKEDITOR.ENTER_P?"p":"div";;){var M=A[B];E=M.grandparent;L=M.element.getDirection(1);if(M.indent==K){if(!q||A[B].parent.getName()!=q.getName()){q=A[B].parent.clone(!1,1),I&&q.setAttribute("dir",I),D.append(q)}G=q.append(M.element.clone(0,1));L!=q.getDirection(1)&&G.setAttribute("dir",L);for(E=0;E<M.contents.length;E++){G.append(M.contents[E].clone(1,1))}B++}else{if(M.indent==Math.max(K,0)+1){M=A[B-1].element.getDirection(1),B=CKEDITOR.plugins.list.arrayToList(A,null,B,r,M!=L?L:null),!G.getChildCount()&&(CKEDITOR.env.needsNbspFiller&&!(7<F.$.documentMode))&&G.append(F.createText("")),G.append(B.listNode),B=B.nextIndex}else{if(-1==M.indent&&!C&&E){j[E.getName()]?(G=M.element.clone(!1,!0),L!=E.getDirection(1)&&G.setAttribute("dir",L)):G=new CKEDITOR.dom.documentFragment(F);var q=E.getDirection(1)!=L,Q=M.element,V=Q.getAttribute("class"),R=Q.getAttribute("style"),S=G.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&(r!=CKEDITOR.ENTER_BR||q||R||V),O,T=M.contents.length,P;for(E=0;E<T;E++){if(O=M.contents[E],d(O)&&1<T){S?P=O.clone(1,1):G.append(O.clone(1,1))}else{if(O.type==CKEDITOR.NODE_ELEMENT&&O.isBlockBoundary()){q&&!O.getDirection()&&O.setAttribute("dir",L);J=O;var U=Q.getAttribute("style");U&&J.setAttribute("style",U.replace(/([^;])$/,"$1;")+(J.getAttribute("style")||""));V&&O.addClass(V);J=null;P&&(G.append(P),P=null);G.append(O.clone(1,1))}else{S?(J||(J=F.createElement(N),G.append(J),q&&J.setAttribute("dir",L)),R&&J.setAttribute("style",R),V&&J.setAttribute("class",V),P&&(J.append(P),P=null),J.append(O.clone(1,1))):G.append(O.clone(1,1))}}}P&&((J||G).append(P),P=null);G.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&B!=A.length-1&&(CKEDITOR.env.needsBrFiller&&(L=G.getLast())&&(L.type==CKEDITOR.NODE_ELEMENT&&L.is("br"))&&L.remove(),L=G.getLast(i),(!L||!(L.type==CKEDITOR.NODE_ELEMENT&&L.is(CKEDITOR.dtd.$block)))&&G.append(F.createElement("br")));L=G.$.nodeName.toLowerCase();("div"==L||"p"==L)&&G.appendBogus();D.append(G);q=null;B++}else{return null}}}J=null;if(A.length<=B||Math.max(A[B].indent,0)<K){break}}if(H){for(A=D.getFirst();A;){if(A.type==CKEDITOR.NODE_ELEMENT&&(CKEDITOR.dom.element.clearMarkers(H,A),A.getName() in CKEDITOR.dtd.$listItem&&(C=A,F=I=r=void 0,r=C.getDirection()))){for(I=C.getParent();I&&!(F=I.getDirection());){I=I.getParent()}r==F&&C.removeAttribute("dir")}A=A.getNextSourceNode()}}return{listNode:D,nextIndex:B}}};var h=/^h[1-6]$/,f=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT);m.prototype={exec:function(s){this.refresh(s,s.elementPath());var A=s.config,v=s.getSelection(),r=v&&v.getRanges();if(this.state==CKEDITOR.TRISTATE_OFF){var B=s.editable();if(B.getFirst(i)){var x=1==r.length&&r[0];(A=x&&x.getEnclosedNode())&&(A.is&&this.type==A.getName())&&this.setState(CKEDITOR.TRISTATE_ON)}else{A.enterMode==CKEDITOR.ENTER_BR?B.appendBogus():r[0].fixBlock(1,A.enterMode==CKEDITOR.ENTER_P?"p":"div"),v.selectRanges(r)}}for(var A=v.createBookmarks(!0),B=[],y={},r=r.createIterator(),w=0;(x=r.getNextRange())&&++w;){var q=x.getBoundaryNodes(),t=q.startNode,D=q.endNode;t.type==CKEDITOR.NODE_ELEMENT&&"td"==t.getName()&&x.setStartAt(q.startNode,CKEDITOR.POSITION_AFTER_START);D.type==CKEDITOR.NODE_ELEMENT&&"td"==D.getName()&&x.setEndAt(q.endNode,CKEDITOR.POSITION_BEFORE_END);x=x.createIterator();for(x.forceBrBreak=this.state==CKEDITOR.TRISTATE_OFF;q=x.getNextParagraph();){if(!q.getCustomData("list_block")){CKEDITOR.dom.element.setMarker(y,q,"list_block",1);for(var z=s.elementPath(q),t=z.elements,D=0,z=z.blockLimit,E,C=t.length-1;0<=C&&(E=t[C]);C--){if(j[E.getName()]&&z.contains(E)){z.removeCustomData("list_group_object_"+w);(t=E.getCustomData("list_group_object"))?t.contents.push(q):(t={root:E,contents:[q]},B.push(t),CKEDITOR.dom.element.setMarker(y,E,"list_group_object",t));D=1;break}}D||(D=z,D.getCustomData("list_group_object_"+w)?D.getCustomData("list_group_object_"+w).contents.push(q):(t={root:D,contents:[q]},CKEDITOR.dom.element.setMarker(y,D,"list_group_object_"+w,t),B.push(t)))}}}for(E=[];0<B.length;){if(t=B.shift(),this.state==CKEDITOR.TRISTATE_OFF){if(j[t.root.getName()]){r=s;w=t;t=y;x=E;D=CKEDITOR.plugins.list.listToArray(w.root,t);z=[];for(q=0;q<w.contents.length;q++){if(C=w.contents[q],(C=C.getAscendant("li",!0))&&!C.getCustomData("list_item_processed")){z.push(C),CKEDITOR.dom.element.setMarker(t,C,"list_item_processed",!0)}}for(var C=w.root.getDocument(),G=void 0,F=void 0,q=0;q<z.length;q++){var H=z[q].getCustomData("listarray_index"),G=D[H].parent;G.is(this.type)||(F=C.createElement(this.type),G.copyAttributes(F,{start:1,type:1}),F.removeStyle("list-style-type"),D[H].parent=F)}t=CKEDITOR.plugins.list.arrayToList(D,t,null,r.config.enterMode);D=void 0;z=t.listNode.getChildCount();for(q=0;q<z&&(D=t.listNode.getChild(q));q++){D.getName()==this.type&&x.push(D)}t.listNode.replace(w.root);r.fire("contentDomInvalidated")}else{D=s;q=t;x=E;z=q.contents;r=q.root.getDocument();w=[];1==z.length&&z[0].equals(q.root)&&(t=r.createElement("div"),z[0].moveChildren&&z[0].moveChildren(t),z[0].append(t),z[0]=t);q=q.contents[0].getParent();for(C=0;C<z.length;C++){q=q.getCommonAncestor(z[C].getParent())}G=D.config.useComputedState;D=t=void 0;G=void 0===G||G;for(C=0;C<z.length;C++){for(F=z[C];H=F.getParent();){if(H.equals(q)){w.push(F);!D&&F.getDirection()&&(D=1);F=F.getDirection(G);null!==t&&(t=t&&t!=F?null:F);break}F=H}}if(!(1>w.length)){z=w[w.length-1].getNext();C=r.createElement(this.type);x.push(C);for(G=x=void 0;w.length;){x=w.shift(),G=r.createElement("li"),x.is("pre")||h.test(x.getName())||"false"==x.getAttribute("contenteditable")?x.appendTo(G):(x.copyAttributes(G),t&&x.getDirection()&&(G.removeStyle("direction"),G.removeAttribute("dir")),x.moveChildren(G),x.remove()),G.appendTo(C)}t&&D&&C.setAttribute("dir",t);z?C.insertBefore(z):C.appendTo(q)}}}else{this.state==CKEDITOR.TRISTATE_ON&&j[t.root.getName()]&&e.call(this,s,t,y)}}for(C=0;C<E.length;C++){b(E[C])}CKEDITOR.dom.element.clearAllMarkers(y);v.selectBookmarks(A);s.focus()},refresh:function(p,r){var q=r.contains(j,1),o=r.blockLimit||r.root;q&&o.contains(q)?this.setState(q.is(this.type)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_OFF)}};CKEDITOR.plugins.add("list",{requires:"indentlist",init:function(o){o.blockless||(o.addCommand("numberedlist",new m("numberedlist","ol")),o.addCommand("bulletedlist",new m("bulletedlist","ul")),o.ui.addButton&&(o.ui.addButton("NumberedList",{label:o.lang.list.numberedlist,command:"numberedlist",directional:!0,toolbar:"list,10"}),o.ui.addButton("BulletedList",{label:o.lang.list.bulletedlist,command:"bulletedlist",directional:!0,toolbar:"list,20"})),o.on("key",function(w){var s=w.data.domEvent.getKey();if(o.mode=="wysiwyg"&&s in {8:1,46:1}){var q=o.getSelection().getRanges()[0],x=q&&q.startPath();if(q&&q.collapsed){var u=s==8,v=o.editable(),t=new CKEDITOR.dom.walker(q.clone());t.evaluator=function(y){return i(y)&&!k(y)};t.guard=function(y,z){return !(z&&y.type==CKEDITOR.NODE_ELEMENT&&y.is("table"))};s=q.clone();if(u){var p,r;if((p=x.contains(j))&&q.checkBoundaryOfElement(p,CKEDITOR.START)&&(p=p.getParent())&&p.is("li")&&(p=l(p))){r=p;p=p.getPrevious(i);s.moveToPosition(p&&k(p)?p:r,CKEDITOR.POSITION_BEFORE_START)}else{t.range.setStartAt(v,CKEDITOR.POSITION_AFTER_START);t.range.setEnd(q.startContainer,q.startOffset);if((p=t.previous())&&p.type==CKEDITOR.NODE_ELEMENT&&(p.getName() in j||p.is("li"))){if(!p.is("li")){t.range.selectNodeContents(p);t.reset();t.evaluator=c;p=t.previous()}r=p;s.moveToElementEditEnd(r)}}if(r){n(o,s,q);w.cancel()}else{if((s=x.contains(j))&&q.checkBoundaryOfElement(s,CKEDITOR.START)){r=s.getFirst(i);if(q.checkBoundaryOfElement(r,CKEDITOR.START)){p=s.getPrevious(i);if(l(r)){if(p){q.moveToElementEditEnd(p);q.select()}}else{o.execCommand("outdent")}w.cancel()}}}}else{if(r=x.contains("li")){t.range.setEndAt(v,CKEDITOR.POSITION_BEFORE_END);v=(x=r.getLast(i))&&c(x)?x:r;r=0;if((p=t.next())&&p.type==CKEDITOR.NODE_ELEMENT&&p.getName() in j&&p.equals(x)){r=1;p=t.next()}else{q.checkBoundaryOfElement(v,CKEDITOR.END)&&(r=1)}if(r&&p){q=q.clone();q.moveToElementEditStart(p);n(o,s,q);w.cancel()}}else{t.range.setEndAt(v,CKEDITOR.POSITION_BEFORE_END);if((p=t.next())&&p.type==CKEDITOR.NODE_ELEMENT&&p.is(j)){p=p.getFirst(i);if(x.block&&q.checkStartOfBlock()&&q.checkEndOfBlock()){x.block.remove();q.moveToElementEditStart(p);q.select()}else{if(l(p)){q.moveToElementEditStart(p);q.select()}else{q=q.clone();q.moveToElementEditStart(p);n(o,s,q)}}w.cancel()}}}setTimeout(function(){o.selectionChange(1)})}}}))}})})();(function(){CKEDITOR.plugins.liststyle={requires:"dialog,contextmenu",init:function(c){if(!c.blockless){var d;d=new CKEDITOR.dialogCommand("numberedListStyle",{requiredContent:"ol",allowedContent:"ol{list-style-type}[start]"});d=c.addCommand("numberedListStyle",d);c.addFeature(d);CKEDITOR.dialog.add("numberedListStyle",this.path+"dialogs/liststyle.js");d=new CKEDITOR.dialogCommand("bulletedListStyle",{requiredContent:"ul",allowedContent:"ul{list-style-type}"});d=c.addCommand("bulletedListStyle",d);c.addFeature(d);CKEDITOR.dialog.add("bulletedListStyle",this.path+"dialogs/liststyle.js");c.addMenuGroup("list",108);c.addMenuItems({numberedlist:{label:c.lang.liststyle.numberedTitle,group:"list",command:"numberedListStyle"},bulletedlist:{label:c.lang.liststyle.bulletedTitle,group:"list",command:"bulletedListStyle"}});c.contextMenu.addListener(function(e){if(!e||e.isReadOnly()){return null}for(;e;){var f=e.getName();if("ol"==f){return{numberedlist:CKEDITOR.TRISTATE_OFF}}if("ul"==f){return{bulletedlist:CKEDITOR.TRISTATE_OFF}}e=e.getParent()}return null})}}};CKEDITOR.plugins.add("liststyle",CKEDITOR.plugins.liststyle)})();(function(){function aw(m,n,o){return am(n)&&am(o)&&o.equals(n.getNext(function(p){return !(aM(p)||b(p)||at(p))}))}function aC(m){this.upper=m[0];this.lower=m[1];this.set.apply(this,m.slice(2))}function ag(m){var n=m.element;if(n&&am(n)&&(n=n.getAscendant(m.triggers,!0))&&m.editable.contains(n)){var o=ai(n);if("true"==o.getAttribute("contenteditable")){return n}if(o.is(m.triggers)){return o}}return null}function ab(m,n,o){aq(m,n);aq(m,o);m=n.size.bottom;o=o.size.top;return m&&o?0|(m+o)/2:m||o}function ax(m,n,o){return n=n[o?"getPrevious":"getNext"](function(p){return p&&p.type==CKEDITOR.NODE_TEXT&&!aM(p)||am(p)&&!at(p)&&!aE(m,p)})}function ai(m,n){if(m.data("cke-editable")){return null}for(n||(m=m.getParent());m&&!m.data("cke-editable");){if(m.hasAttribute("contenteditable")){return m}m=m.getParent()}return null}function ad(m){var o=m.doc,p=d('<span contenteditable="false" style="'+ak+"position:absolute;border-top:1px dashed "+m.boxColor+'"></span>',o),n=this.path+"images/"+(ao.hidpi?"hidpi/":"")+"icon.png";av(p,{attach:function(){this.wrap.getParent()||this.wrap.appendTo(m.editable,!0);return this},lineChildren:[av(d('<span title="'+m.editor.lang.magicline.title+'" contenteditable="false">&#8629;</span>',o),{base:ak+"height:17px;width:17px;"+(m.rtl?"left":"right")+":17px;background:url("+n+") center no-repeat "+m.boxColor+";cursor:pointer;"+(ao.hc?"font-size: 15px;line-height:14px;border:1px solid #fff;text-align:center;":"")+(ao.hidpi?"background-size: 9px 10px;":""),looks:["top:-8px;"+CKEDITOR.tools.cssVendorPrefix("border-radius","2px",1),"top:-17px;"+CKEDITOR.tools.cssVendorPrefix("border-radius","2px 2px 0px 0px",1),"top:-1px;"+CKEDITOR.tools.cssVendorPrefix("border-radius","0px 0px 2px 2px",1)]}),av(d(ay,o),{base:aA+"left:0px;border-left-color:"+m.boxColor+";",looks:["border-width:8px 0 8px 8px;top:-8px","border-width:8px 0 0 8px;top:-8px","border-width:0 0 8px 8px;top:0px"]}),av(d(ay,o),{base:aA+"right:0px;border-right-color:"+m.boxColor+";",looks:["border-width:8px 8px 8px 0;top:-8px","border-width:8px 8px 0 0;top:-8px","border-width:0 8px 8px 0;top:0px"]})],detach:function(){this.wrap.getParent()&&this.wrap.remove();return this},mouseNear:function(){aq(m,this);var q=m.holdDistance,r=this.size;return r&&m.mouse.y>r.top-q&&m.mouse.y<r.bottom+q&&m.mouse.x>r.left-q&&m.mouse.x<r.right+q?!0:!1},place:function(){var q=m.view,r=m.editable,s=m.trigger,u=s.upper,t=s.lower,v=u||t,x=v.getParent(),w={};this.trigger=s;u&&aq(m,u,!0);t&&aq(m,t,!0);aq(m,x,!0);m.inInlineMode&&f(m,!0);x.equals(r)?(w.left=q.scroll.x,w.right=-q.scroll.x,w.width=""):(w.left=v.size.left-v.size.margin.left+q.scroll.x-(m.inInlineMode?q.editable.left+q.editable.border.left:0),w.width=v.size.outerWidth+v.size.margin.left+v.size.margin.right+q.scroll.x,w.right="");u&&t?w.top=u.size.margin.bottom===t.size.margin.top?0|u.size.bottom+u.size.margin.bottom/2:u.size.margin.bottom<t.size.margin.top?u.size.bottom+u.size.margin.bottom:u.size.bottom+u.size.margin.bottom-t.size.margin.top:u?t||(w.top=u.size.bottom+u.size.margin.bottom):w.top=t.size.top-t.size.margin.top;s.is(aI)||w.top>q.scroll.y-15&&w.top<q.scroll.y+5?(w.top=m.inInlineMode?0:q.scroll.y,this.look(aI)):s.is(aK)||w.top>q.pane.bottom-5&&w.top<q.pane.bottom+15?(w.top=m.inInlineMode?q.editable.height+q.editable.padding.top+q.editable.padding.bottom:q.pane.bottom-1,this.look(aK)):(m.inInlineMode&&(w.top-=q.editable.top+q.editable.border.top),this.look(az));m.inInlineMode&&(w.top--,w.top+=q.editable.scroll.top,w.left+=q.editable.scroll.left);for(var y in w){w[y]=CKEDITOR.tools.cssLength(w[y])}this.setStyles(w)},look:function(q){if(this.oldLook!=q){for(var r=this.lineChildren.length,s;r--;){(s=this.lineChildren[r]).setAttribute("style",s.base+s.looks[0|q/2])}this.oldLook=q}},wrap:new an("span",m.doc)});for(o=p.lineChildren.length;o--;){p.lineChildren[o].appendTo(p)}p.look(az);p.appendTo(p.wrap);p.unselectable();p.lineChildren[0].on("mouseup",function(q){p.detach();ap(m,function(r){var s=m.line.trigger;r[s.is(h)?"insertBefore":"insertAfter"](s.is(h)?s.lower:s.upper)},!0);m.editor.focus();!ao.ie&&m.enterMode!=CKEDITOR.ENTER_BR&&m.hotNode.scrollIntoView();q.data.preventDefault(!0)});p.on("mousedown",function(q){q.data.preventDefault(!0)});m.line=p}function ap(m,o,p){var n=new CKEDITOR.dom.range(m.doc),q=m.editor,r;ao.ie&&m.enterMode==CKEDITOR.ENTER_BR?r=m.doc.createText(j):(r=(r=ai(m.element,!0))&&r.data("cke-enter-mode")||m.enterMode,r=new an(l[r],m.doc),r.is("br")||m.doc.createText(j).appendTo(r));p&&q.fire("saveSnapshot");o(r);n.moveToPosition(r,CKEDITOR.POSITION_AFTER_START);q.getSelection().selectRanges([n]);m.hotNode=r;p&&q.fire("saveSnapshot")}function aD(m,n){return{canUndo:!0,modes:{wysiwyg:1},exec:function(){function o(p){var q=ao.ie&&9>ao.version?" ":j,r=m.hotNode&&m.hotNode.getText()==q&&m.element.equals(m.hotNode)&&m.lastCmdDirection===!!n;ap(m,function(s){r&&m.hotNode&&m.hotNode.remove();s[n?"insertAfter":"insertBefore"](p);s.setAttributes({"data-cke-magicline-hot":1,"data-cke-magicline-dir":!!n});m.lastCmdDirection=!!n});!ao.ie&&m.enterMode!=CKEDITOR.ENTER_BR&&m.hotNode.scrollIntoView();m.line.detach()}return function(p){var p=p.getSelection().getStartElement(),q,p=p.getAscendant(aF,1);if(!aH(m,p)&&p&&!p.equals(m.editable)&&!p.contains(m.editable)){if((q=ai(p))&&"false"==q.getAttribute("contenteditable")){p=q}m.element=p;q=ax(m,p,!n);var r;am(q)&&q.is(m.triggers)&&q.is(af)&&(!ax(m,q,!n)||(r=ax(m,q,!n))&&am(r)&&r.is(m.triggers))?o(q):(r=ag(m,p),am(r)&&(ax(m,r,!n)?(p=ax(m,r,!n))&&(am(p)&&p.is(m.triggers))&&o(r):o(r)))}}}()}}function aE(m,n){if(!n||!(n.type==CKEDITOR.NODE_ELEMENT&&n.$)){return !1}var o=m.line;return o.wrap.equals(n)||o.wrap.contains(n)}function am(m){return m&&m.type==CKEDITOR.NODE_ELEMENT&&m.$}function at(m){if(!am(m)){return !1}var n;if(!(n=aJ(m))){am(m)?(n={left:1,right:1,center:1},n=!(!n[m.getComputedStyle("float")]&&!n[m.getAttribute("align")])):n=!1}return n}function aJ(m){return !!{absolute:1,fixed:1}[m.getComputedStyle("position")]}function aa(m,n){return am(n)?n.is(m.triggers):null}function aH(m,o){if(!o){return !1}for(var p=o.getParents(1),n=p.length;n--;){for(var q=m.tabuList.length;q--;){if(p[n].hasAttribute(m.tabuList[q])){return !0}}}return !1}function ah(m,n,o){n=n[o?"getLast":"getFirst"](function(p){return m.isRelevant(p)&&!p.is(aj)});if(!n){return !1}aq(m,n);return o?n.size.top>m.mouse.y:n.size.bottom<m.mouse.y}function aL(m){var o=m.editable,p=m.mouse,n=m.view,q=m.triggerOffset;f(m);var r=p.y>(m.inInlineMode?n.editable.top+n.editable.height/2:Math.min(n.editable.height,n.pane.height)/2),o=o[r?"getLast":"getFirst"](function(s){return !(aM(s)||b(s))});if(!o){return null}aE(m,o)&&(o=m.line.wrap[r?"getPrevious":"getNext"](function(s){return !(aM(s)||b(s))}));if(!am(o)||at(o)||!aa(m,o)){return null}aq(m,o);return !r&&0<=o.size.top&&0<p.y&&p.y<o.size.top+q?(m=m.inInlineMode||0===n.scroll.y?aI:az,new aC([null,o,h,ac,m])):r&&o.size.bottom<=n.pane.height&&p.y>o.size.bottom-q&&p.y<n.pane.height?(m=m.inInlineMode||o.size.bottom>n.pane.height-q&&o.size.bottom<n.pane.height?aK:az,new aC([o,null,aN,ac,m])):null}function a(m){var o=m.mouse,p=m.view,n=m.triggerOffset,q=ag(m);if(!q){return null}aq(m,q);var n=Math.min(n,0|q.size.outerHeight/2),r=[],u,t;if(o.y>q.size.top-1&&o.y<q.size.top+n){t=!1}else{if(o.y>q.size.bottom-n&&o.y<q.size.bottom+1){t=!0}else{return null}}if(at(q)||ah(m,q,t)||q.getParent().is(c)){return null}var s=ax(m,q,!t);if(s){if(s&&s.type==CKEDITOR.NODE_TEXT){return null}if(am(s)){if(at(s)||!aa(m,s)||s.getParent().is(c)){return null}r=[s,q][t?"reverse":"concat"]().concat([ar,ac])}}else{q.equals(m.editable[t?"getLast":"getFirst"](m.isRelevant))?(f(m),t&&o.y>q.size.bottom-n&&o.y<p.pane.height&&q.size.bottom>p.pane.height-n&&q.size.bottom<p.pane.height?u=aK:0<o.y&&o.y<q.size.top+n&&(u=aI)):u=az,r=[null,q][t?"reverse":"concat"]().concat([t?aN:h,ac,u,q.equals(m.editable[t?"getLast":"getFirst"](m.isRelevant))?t?aK:aI:az])}return 0 in r?new aC(r):null}function au(m,o,p,n){for(var q=function(){var x=ao.ie?o.$.currentStyle:m.win.$.getComputedStyle(o.$,"");return ao.ie?function(y){return x[CKEDITOR.tools.cssStyleToDomStyle(y)]}:function(y){return x.getPropertyValue(y)}}(),r=o.getDocumentPosition(),u={},t={},s={},v={},w=aB.length;w--;){u[aB[w]]=parseInt(q("border-"+aB[w]+"-width"),10)||0,s[aB[w]]=parseInt(q("padding-"+aB[w]),10)||0,t[aB[w]]=parseInt(q("margin-"+aB[w]),10)||0}(!p||n)&&ae(m,n);v.top=r.y-(p?0:m.view.scroll.y);v.left=r.x-(p?0:m.view.scroll.x);v.outerWidth=o.$.offsetWidth;v.outerHeight=o.$.offsetHeight;v.height=v.outerHeight-(s.top+s.bottom+u.top+u.bottom);v.width=v.outerWidth-(s.left+s.right+u.left+u.right);v.bottom=v.top+v.outerHeight;v.right=v.left+v.outerWidth;m.inInlineMode&&(v.scroll={top:o.$.scrollTop,left:o.$.scrollLeft});return av({border:u,padding:s,margin:t,ignoreScroll:p},v,!0)}function aq(m,n,o){if(!am(n)){return n.size=null}if(n.size){if(n.size.ignoreScroll==o&&n.size.date>new Date-e){return null}}else{n.size={}}return av(n.size,au(m,n,o),{date:+new Date},!0)}function f(m,n){m.view.editable=au(m,m.editable,n,!0)}function ae(m,o){m.view||(m.view={});var p=m.view;if(o||!(p&&p.date>new Date-e)){var n=m.win,p=n.getScrollPosition(),n=n.getViewPaneSize();av(m.view,{scroll:{x:p.x,y:p.y,width:m.doc.$.documentElement.scrollWidth-n.width,height:m.doc.$.documentElement.scrollHeight-n.height},pane:{width:n.width,height:n.height,bottom:n.height+p.y},date:+new Date},!0)}}function al(m,o,p,n){for(var q=n,r=n,u=0,t=!1,s=!1,v=m.view.pane.height,w=m.mouse;w.y+u<v&&0<w.y-u;){t||(t=o(q,n));s||(s=o(r,n));!t&&0<w.y-u&&(q=p(m,{x:w.x,y:w.y-u}));!s&&w.y+u<v&&(r=p(m,{x:w.x,y:w.y+u}));if(t&&s){break}u+=2}return new aC([q,r,null,null])}CKEDITOR.plugins.add("magicline",{init:function(m){var o=m.config,p=o.magicline_triggerOffset||30,n={editor:m,enterMode:o.enterMode,triggerOffset:p,holdDistance:0|p*(o.magicline_holdDistance||0.5),boxColor:o.magicline_color||"#ff0000",rtl:"rtl"==o.contentsLangDirection,tabuList:["data-cke-hidden-sel"].concat(o.magicline_tabuList||[]),triggers:o.magicline_everywhere?aF:{table:1,hr:1,div:1,ul:1,ol:1,dl:1,form:1,blockquote:1}},q,r,s;n.isRelevant=function(t){return am(t)&&!aE(n,t)&&!at(t)};m.on("contentDom",function(){var t=m.editable(),u=m.document,v=m.window;av(n,{editable:t,inInlineMode:t.isInline(),doc:u,win:v,hotNode:null},!0);n.boundary=n.inInlineMode?n.editable:n.doc.getDocumentElement();t.is(aG.$inline)||(n.inInlineMode&&!aJ(t)&&t.setStyles({position:"relative",top:null,left:null}),ad.call(this,n),ae(n),t.attachListener(m,"beforeUndoImage",function(){n.line.detach()}),t.attachListener(m,"beforeGetData",function(){n.line.wrap.getParent()&&(n.line.detach(),m.once("getData",function(){n.line.attach()},null,null,1000))},null,null,0),t.attachListener(n.inInlineMode?u:u.getWindow().getFrame(),"mouseout",function(w){if("wysiwyg"==m.mode){if(n.inInlineMode){var x=w.data.$.clientX,w=w.data.$.clientY;ae(n);f(n,!0);var y=n.view.editable,z=n.view.scroll;if(!(x>y.left-z.x&&x<y.right-z.x)||!(w>y.top-z.y&&w<y.bottom-z.y)){clearTimeout(s),s=null,n.line.detach()}}else{clearTimeout(s),s=null,n.line.detach()}}}),t.attachListener(t,"keyup",function(){n.hiddenMode=0}),t.attachListener(t,"keydown",function(w){if("wysiwyg"==m.mode){switch(w=w.data.getKeystroke(),m.getSelection().getStartElement(),w){case 2228240:case 16:n.hiddenMode=1,n.line.detach()}}}),t.attachListener(n.inInlineMode?t:u,"mousemove",function(w){r=!0;if(!("wysiwyg"!=m.mode||m.readOnly||s)){var x={x:w.data.$.clientX,y:w.data.$.clientY};s=setTimeout(function(){n.mouse=x;s=n.trigger=null;ae(n);if(r&&!n.hiddenMode&&m.focusManager.hasFocus&&!n.line.mouseNear()&&(n.element=g(n,!0))){(n.trigger=aL(n)||a(n)||i(n))&&!aH(n,n.trigger.upper||n.trigger.lower)?n.line.attach().place():(n.trigger=null,n.line.detach()),r=!1}},30)}}),t.attachListener(v,"scroll",function(){"wysiwyg"==m.mode&&(n.line.detach(),ao.webkit&&(n.hiddenMode=1,clearTimeout(q),q=setTimeout(function(){n.mouseDown||(n.hiddenMode=0)},50)))}),t.attachListener(k?u:v,"mousedown",function(){"wysiwyg"==m.mode&&(n.line.detach(),n.hiddenMode=1,n.mouseDown=1)}),t.attachListener(k?u:v,"mouseup",function(){n.hiddenMode=0;n.mouseDown=0}),m.addCommand("accessPreviousSpace",aD(n)),m.addCommand("accessNextSpace",aD(n,!0)),m.setKeystroke([[o.magicline_keystrokePrevious,"accessPreviousSpace"],[o.magicline_keystrokeNext,"accessNextSpace"]]),m.on("loadSnapshot",function(){var w,x,y,z;for(z in {p:1,br:1,div:1}){w=m.document.getElementsByTag(z);for(y=w.count();y--;){if((x=w.getItem(y)).data("cke-magicline-hot")){n.hotNode=x;n.lastCmdDirection="true"===x.data("cke-magicline-dir")?!0:!1;return}}}}),this.backdoor={accessFocusSpace:ap,boxTrigger:aC,isLine:aE,getAscendantTrigger:ag,getNonEmptyNeighbour:ax,getSize:au,that:n,triggerEdge:a,triggerEditable:aL,triggerExpand:i})},this)}});var av=CKEDITOR.tools.extend,an=CKEDITOR.dom.element,d=an.createFromHtml,ao=CKEDITOR.env,k=CKEDITOR.env.ie&&9>CKEDITOR.env.version,aG=CKEDITOR.dtd,l={},h=128,aN=64,ar=32,ac=16,T=8,aI=4,aK=2,az=1,j="",c=aG.$listItem,aj=aG.$tableContent,af=av({},aG.$nonEditable,aG.$empty),aF=aG.$block,e=100,ak="width:0px;height:0px;padding:0px;margin:0px;display:block;z-index:9999;color:#fff;position:absolute;font-size: 0px;line-height:0px;",aA=ak+"border-color:transparent;display:block;border-style:solid;",ay="<span>"+j+"</span>";l[CKEDITOR.ENTER_BR]="br";l[CKEDITOR.ENTER_P]="p";l[CKEDITOR.ENTER_DIV]="div";aC.prototype={set:function(m,n,o){this.properties=m+n+(o||az);return this},is:function(m){return(this.properties&m)==m}};var g=function(){return function(m,o,p){if(!m.mouse){return null}var n=m.doc,q=m.line.wrap,p=p||m.mouse,r=new CKEDITOR.dom.element(n.$.elementFromPoint(p.x,p.y));o&&aE(m,r)&&(q.hide(),r=new CKEDITOR.dom.element(n.$.elementFromPoint(p.x,p.y)),q.show());return !r||!(r.type==CKEDITOR.NODE_ELEMENT&&r.$)||ao.ie&&9>ao.version&&!m.boundary.equals(r)&&!m.boundary.contains(r)?null:r}}(),aM=CKEDITOR.dom.walker.whitespaces(),b=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_COMMENT),i=function(){function m(o){var p=o.element,q,r,u;if(!am(p)||p.contains(o.editable)||p.isReadOnly()){return null}u=al(o,function(x,y){return !y.equals(x)},function(x,y){return g(x,!0,y)},p);q=u.upper;r=u.lower;if(aw(o,q,r)){return u.set(ar,T)}if(q&&p.contains(q)){for(;!q.getParent().equals(p);){q=q.getParent()}}else{q=p.getFirst(function(x){return n(o,x)})}if(r&&p.contains(r)){for(;!r.getParent().equals(p);){r=r.getParent()}}else{r=p.getLast(function(x){return n(o,x)})}if(!q||!r){return null}aq(o,q);aq(o,r);if(!(o.mouse.y>q.size.top&&o.mouse.y<r.size.bottom)){return null}for(var p=Number.MAX_VALUE,t,s,v,w;r&&!r.equals(q)&&(s=q.getNext(o.isRelevant));){t=Math.abs(ab(o,q,s)-o.mouse.y),t<p&&(p=t,v=q,w=s),q=s,aq(o,q)}if(!v||!w||!(o.mouse.y>v.size.top&&o.mouse.y<w.size.bottom)){return null}u.upper=v;u.lower=w;return u.set(ar,T)}function n(o,p){return !(p&&p.type==CKEDITOR.NODE_TEXT||b(p)||at(p)||aE(o,p)||p.type==CKEDITOR.NODE_ELEMENT&&p.$&&p.is("br"))}return function(p){var o=m(p),q;if(q=o){q=o.upper;var r=o.lower;q=!q||!r||at(r)||at(q)||r.equals(q)||q.equals(r)||r.contains(q)||q.contains(r)?!1:aa(p,q)&&aa(p,r)&&aw(p,q,r)?!0:!1}return q?o:null}}(),aB=["top","left","right","bottom"]})();CKEDITOR.config.magicline_keystrokePrevious=CKEDITOR.CTRL+CKEDITOR.SHIFT+51;CKEDITOR.config.magicline_keystrokeNext=CKEDITOR.CTRL+CKEDITOR.SHIFT+52;(function(){function a(g){if(!g||g.type!=CKEDITOR.NODE_ELEMENT||"form"!=g.getName()){return[]}for(var j=[],k=["style","className"],h=0;h<k.length;h++){var i=g.$.elements.namedItem(k[h]);i&&(i=new CKEDITOR.dom.element(i),j.push([i,i.nextSibling]),i.remove())}return j}function c(g,j){if(g&&!(g.type!=CKEDITOR.NODE_ELEMENT||"form"!=g.getName())&&0<j.length){for(var k=j.length-1;0<=k;k--){var h=j[k][0],i=j[k][1];i?h.insertBefore(i):h.appendTo(g)}}}function b(g,j){var k=a(g),h={},i=g.$;j||(h["class"]=i.className||"",i.className="");h.inline=i.style.cssText||"";j||(i.style.cssText="position: static; overflow: visible");c(k);return h}function d(g,i){var j=a(g),h=g.$;"class" in i&&(h.className=i["class"]);"inline" in i&&(h.style.cssText=i.inline);c(j)}function e(g){if(!g.editable().isInline()){var i=CKEDITOR.instances,j;for(j in i){var h=i[j];"wysiwyg"==h.mode&&!h.readOnly&&(h=h.document.getBody(),h.setAttribute("contentEditable",!1),h.setAttribute("contentEditable",!0))}g.editable().hasFocus&&(g.toolbox.focus(),g.focus())}}CKEDITOR.plugins.add("maximize",{init:function(g){function n(){var f=i.getViewPaneSize();g.resize(f.width,f.height,null,!0)}if(g.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var o=g.lang,h=CKEDITOR.document,i=h.getWindow(),p,q,s,r=CKEDITOR.TRISTATE_OFF;g.addCommand("maximize",{modes:{wysiwyg:!CKEDITOR.env.iOS,source:!CKEDITOR.env.iOS},readOnly:1,editorFocus:!1,exec:function(){var k=g.container.getChild(1),j=g.ui.space("contents");if("wysiwyg"==g.mode){var f=g.getSelection();p=f&&f.getRanges();q=i.getScrollPosition()}else{var l=g.editable().$;p=!CKEDITOR.env.ie&&[l.selectionStart,l.selectionEnd];q=[l.scrollLeft,l.scrollTop]}if(this.state==CKEDITOR.TRISTATE_OFF){i.on("resize",n);s=i.getScrollPosition();for(f=g.container;f=f.getParent();){f.setCustomData("maximize_saved_styles",b(f)),f.setStyle("z-index",g.config.baseFloatZIndex-5)}j.setCustomData("maximize_saved_styles",b(j,!0));k.setCustomData("maximize_saved_styles",b(k,!0));j={overflow:CKEDITOR.env.webkit?"":"hidden",width:0,height:0};h.getDocumentElement().setStyles(j);!CKEDITOR.env.gecko&&h.getDocumentElement().setStyle("position","fixed");(!CKEDITOR.env.gecko||!CKEDITOR.env.quirks)&&h.getBody().setStyles(j);CKEDITOR.env.ie?setTimeout(function(){i.$.scrollTo(0,0)},0):i.$.scrollTo(0,0);k.setStyle("position",CKEDITOR.env.gecko&&CKEDITOR.env.quirks?"fixed":"absolute");k.$.offsetLeft;k.setStyles({"z-index":g.config.baseFloatZIndex-5,left:"0px",top:"0px"});k.addClass("cke_maximized");n();j=k.getDocumentPosition();k.setStyles({left:-1*j.x+"px",top:-1*j.y+"px"});CKEDITOR.env.gecko&&e(g)}else{if(this.state==CKEDITOR.TRISTATE_ON){i.removeListener("resize",n);j=[j,k];for(f=0;f<j.length;f++){d(j[f],j[f].getCustomData("maximize_saved_styles")),j[f].removeCustomData("maximize_saved_styles")}for(f=g.container;f=f.getParent();){d(f,f.getCustomData("maximize_saved_styles")),f.removeCustomData("maximize_saved_styles")}CKEDITOR.env.ie?setTimeout(function(){i.$.scrollTo(s.x,s.y)},0):i.$.scrollTo(s.x,s.y);k.removeClass("cke_maximized");CKEDITOR.env.webkit&&(k.setStyle("display","inline"),setTimeout(function(){k.setStyle("display","block")},0));g.fire("resize")}}this.toggleState();if(f=this.uiItems[0]){j=this.state==CKEDITOR.TRISTATE_OFF?o.maximize.maximize:o.maximize.minimize,f=CKEDITOR.document.getById(f._.id),f.getChild(1).setHtml(j),f.setAttribute("title",j),f.setAttribute("href",'javascript:void("'+j+'");')}"wysiwyg"==g.mode?p?(CKEDITOR.env.gecko&&e(g),g.getSelection().selectRanges(p),(l=g.getSelection().getStartElement())&&l.scrollIntoView(!0)):i.$.scrollTo(q.x,q.y):(p&&(l.selectionStart=p[0],l.selectionEnd=p[1]),l.scrollLeft=q[0],l.scrollTop=q[1]);p=q=null;r=this.state;g.fire("maximize",this.state)},canUndo:!1});g.ui.addButton&&g.ui.addButton("Maximize",{label:o.maximize.maximize,command:"maximize",toolbar:"tools,10"});g.on("mode",function(){var f=g.getCommand("maximize");f.setState(f.state==CKEDITOR.TRISTATE_DISABLED?CKEDITOR.TRISTATE_DISABLED:r)},null,null,100)}}})})();CKEDITOR.plugins.add("newpage",{init:function(b){b.addCommand("newpage",{modes:{wysiwyg:1,source:1},exec:function(d){var c=this;d.setData(d.config.newpage_html||"",function(){d.focus();setTimeout(function(){d.fire("afterCommandExec",{name:"newpage",command:c});d.selectionChange()},200)})},async:!0});b.ui.addButton&&b.ui.addButton("NewPage",{label:b.lang.newpage.toolbar,command:"newpage",toolbar:"document,20"})}});(function(){function a(b){return{"aria-label":b,"class":"cke_pagebreak",contenteditable:"false","data-cke-display-name":"pagebreak","data-cke-pagebreak":1,style:"page-break-after: always",title:b}}CKEDITOR.plugins.add("pagebreak",{requires:"fakeobjects",onLoad:function(){var b=("background:url("+CKEDITOR.getUrl(this.path+"images/pagebreak.gif")+") no-repeat center center;clear:both;width:100%;border-top:#999 1px dotted;border-bottom:#999 1px dotted;padding:0;height:5px;cursor:default;").replace(/;/g," !important;");CKEDITOR.addCss("div.cke_pagebreak{"+b+"}")},init:function(b){b.blockless||(b.addCommand("pagebreak",CKEDITOR.plugins.pagebreakCmd),b.ui.addButton&&b.ui.addButton("PageBreak",{label:b.lang.pagebreak.toolbar,command:"pagebreak",toolbar:"insert,70"}),CKEDITOR.env.webkit&&b.on("contentDom",function(){b.document.on("click",function(c){c=c.data.getTarget();c.is("div")&&c.hasClass("cke_pagebreak")&&b.getSelection().selectElement(c)})}))},afterInit:function(d){function e(b){CKEDITOR.tools.extend(b.attributes,a(d.lang.pagebreak.alt),!0);b.children.length=0}var f=d.dataProcessor,j=f&&f.dataFilter,f=f&&f.htmlFilter,k=/page-break-after\s*:\s*always/i,l=/display\s*:\s*none/i;f&&f.addRules({attributes:{"class":function(g,h){var i=g.replace("cke_pagebreak","");if(i!=g){var m=CKEDITOR.htmlParser.fragment.fromHtml('<span style="display: none;">&nbsp;</span>').children[0];h.children.length=0;h.add(m);m=h.attributes;delete m["aria-label"];delete m.contenteditable;delete m.title}return i}}},{applyToAll:!0,priority:5});j&&j.addRules({elements:{div:function(b){if(b.attributes["data-cke-pagebreak"]){e(b)}else{if(k.test(b.attributes.style)){var g=b.children[0];g&&("span"==g.name&&l.test(g.attributes.style))&&e(b)}}}}})}});CKEDITOR.plugins.pagebreakCmd={exec:function(c){var d=c.document.createElement("div",{attributes:a(c.lang.pagebreak.alt)});c.insertElement(d)},context:"div",allowedContent:{div:{styles:"!page-break-after"},span:{match:function(b){return(b=b.parent)&&"div"==b.name&&b.styles["page-break-after"]},styles:"display"}},requiredContent:"div{page-break-after}"}})();(function(){var a={canUndo:!1,async:!0,exec:function(b){b.getClipboardData({title:b.lang.pastetext.title},function(c){c&&b.fire("paste",{type:"text",dataValue:c.dataValue});b.fire("afterCommandExec",{name:"pastetext",command:a,returnValue:!!c})})}};CKEDITOR.plugins.add("pastetext",{requires:"clipboard",init:function(b){b.addCommand("pastetext",a);b.ui.addButton&&b.ui.addButton("PasteText",{label:b.lang.pastetext.button,command:"pastetext",toolbar:"clipboard,40"});if(b.config.forcePasteAsPlainText){b.on("beforePaste",function(c){"html"!=c.data.type&&(c.data.type="text")})}b.on("pasteState",function(c){b.getCommand("pastetext").setState(c.data)})}})})();(function(){function a(c,g,h){var e=CKEDITOR.cleanWord;e?h():(c=CKEDITOR.getUrl(c.config.pasteFromWordCleanupFile||g+"filter/default.js"),CKEDITOR.scriptLoader.load(c,h,null,!0));return !e}function b(c){c.data.type="html"}CKEDITOR.plugins.add("pastefromword",{requires:"clipboard",init:function(c){var e=0,g=this.path;c.addCommand("pastefromword",{canUndo:!1,async:!0,exec:function(d){var f=this;e=1;d.once("beforePaste",b);d.getClipboardData({title:d.lang.pastefromword.title},function(h){h&&d.fire("paste",{type:"html",dataValue:h.dataValue});d.fire("afterCommandExec",{name:"pastefromword",command:f,returnValue:!!h})})}});c.ui.addButton&&c.ui.addButton("PasteFromWord",{label:c.lang.pastefromword.toolbar,command:"pastefromword",toolbar:"clipboard,50"});c.on("pasteState",function(d){c.getCommand("pastefromword").setState(d.data)});c.on("paste",function(d){var h=d.data,f=h.dataValue;if(f&&(e||/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument)/.test(f))){var i=a(c,g,function(){if(i){c.fire("paste",h)}else{if(!c.config.pasteFromWordPromptCleanup||e||confirm(c.lang.pastefromword.confirmCleanup)){h.dataValue=CKEDITOR.cleanWord(f,c)}}});i&&d.cancel()}},null,null,3)}})})();(function(){var a,b={modes:{wysiwyg:1,source:1},canUndo:!1,readOnly:1,exec:function(h){var o,j=h.config,n=j.baseHref?'<base href="'+j.baseHref+'"/>':"";if(j.fullPage){o=h.getData().replace(/<head>/,"$&"+n).replace(/[^>]*(?=<\/title>)/,"$& &mdash; "+h.lang.preview.preview)}else{var j="<body ",l=h.document&&h.document.getBody();l&&(l.getAttribute("id")&&(j+='id="'+l.getAttribute("id")+'" '),l.getAttribute("class")&&(j+='class="'+l.getAttribute("class")+'" '));o=h.config.docType+'<html dir="'+h.config.contentsLangDirection+'"><head>'+n+"<title>"+h.lang.preview.preview+"</title>"+CKEDITOR.tools.buildStyleHtml(h.config.contentsCss)+"</head>"+(j+">")+h.getData()+"</body></html>"}n=640;j=420;l=80;try{var k=window.screen,n=Math.round(0.8*k.width),j=Math.round(0.7*k.height),l=Math.round(0.1*k.width)}catch(p){}if(!1===h.fire("contentPreview",h={dataValue:o})){return !1}var k="",m;CKEDITOR.env.ie&&(window._cke_htmlToLoad=h.dataValue,m="javascript:void( (function(){document.open();"+("("+CKEDITOR.tools.fixDomain+")();").replace(/\/\/.*?\n/g,"").replace(/parent\./g,"window.opener.")+"document.write( window.opener._cke_htmlToLoad );document.close();window.opener._cke_htmlToLoad = null;})() )",k="");CKEDITOR.env.gecko&&(window._cke_htmlToLoad=h.dataValue,k=a+"preview.html");k=window.open(k,null,"toolbar=yes,location=no,status=yes,menubar=yes,scrollbars=yes,resizable=yes,width="+n+",height="+j+",left="+l);CKEDITOR.env.ie&&k&&(k.location=m);!CKEDITOR.env.ie&&!CKEDITOR.env.gecko&&(m=k.document,m.open(),m.write(h.dataValue),m.close());return !0}};CKEDITOR.plugins.add("preview",{init:function(c){c.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&(a=this.path,c.addCommand("preview",b),c.ui.addButton&&c.ui.addButton("Preview",{label:c.lang.preview.preview,command:"preview",toolbar:"document,40"}))}})})();CKEDITOR.plugins.add("print",{init:function(b){b.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&(b.addCommand("print",CKEDITOR.plugins.print),b.ui.addButton&&b.ui.addButton("Print",{label:b.lang.print.toolbar,command:"print",toolbar:"document,50"}))}});CKEDITOR.plugins.print={exec:function(b){CKEDITOR.env.gecko?b.window.$.print():b.document.$.execCommand("Print")},canUndo:!1,readOnly:1,modes:{wysiwyg:1}};CKEDITOR.plugins.add("removeformat",{init:function(b){b.addCommand("removeFormat",CKEDITOR.plugins.removeformat.commands.removeformat);b.ui.addButton&&b.ui.addButton("RemoveFormat",{label:b.lang.removeformat.toolbar,command:"removeFormat",toolbar:"cleanup,10"})}});CKEDITOR.plugins.removeformat={commands:{removeformat:{exec:function(g){for(var r=g._.removeFormatRegex||(g._.removeFormatRegex=RegExp("^(?:"+g.config.removeFormatTags.replace(/,/g,"|")+")$","i")),p=g._.removeAttributes||(g._.removeAttributes=g.config.removeFormatAttributes.split(",")),q=CKEDITOR.plugins.removeformat.filter,u=g.getSelection().getRanges(1),v=u.createIterator(),n;n=v.getNextRange();){n.collapsed||n.enlarge(CKEDITOR.ENLARGE_ELEMENT);var s=n.createBookmark(),m=s.startNode,t=s.endNode,o=function(a){for(var f=g.elementPath(a),i=f.elements,h=1,j;(j=i[h])&&!j.equals(f.block)&&!j.equals(f.blockLimit);h++){r.test(j.getName())&&q(g,j)&&a.breakParent(j)}};o(m);if(t){o(t);for(m=m.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT);m&&!m.equals(t);){o=m.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT),!("img"==m.getName()&&m.data("cke-realelement"))&&q(g,m)&&(r.test(m.getName())?m.remove(1):(m.removeAttributes(p),g.fire("removeFormatCleanup",m))),m=o}}n.moveToBookmark(s)}g.forceNextSelectionCheck();g.getSelection().selectRanges(u)}}},filter:function(b,g){for(var c=b._.removeFormatFilters||[],d=0;d<c.length;d++){if(!1===c[d](g)){return !1}}return !0}};CKEDITOR.editor.prototype.addRemoveFormatFilter=function(b){this._.removeFormatFilters||(this._.removeFormatFilters=[]);this._.removeFormatFilters.push(b)};CKEDITOR.config.removeFormatTags="b,big,code,del,dfn,em,font,i,ins,kbd,q,s,samp,small,span,strike,strong,sub,sup,tt,u,var";CKEDITOR.config.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign";(function(){var a={readOnly:1,exec:function(c){if(c.fire("save")&&(c=c.element.$.form)){try{c.submit()}catch(d){c.submit.click&&c.submit.click()}}}};CKEDITOR.plugins.add("save",{init:function(b){b.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(b.addCommand("save",a).modes={wysiwyg:!!b.element.$.form},b.ui.addButton&&b.ui.addButton("Save",{label:b.lang.save.toolbar,command:"save",toolbar:"document,10"}))}})})();(function(){CKEDITOR.plugins.add("selectall",{init:function(a){a.addCommand("selectAll",{modes:{wysiwyg:1,source:1},exec:function(d){var e=d.editable();if(e.is("textarea")){d=e.$,CKEDITOR.env.ie?d.createTextRange().execCommand("SelectAll"):(d.selectionStart=0,d.selectionEnd=d.value.length),d.focus()}else{if(e.is("body")){d.document.$.execCommand("SelectAll",!1,null)}else{var f=d.createRange();f.selectNodeContents(e);f.select()}d.forceNextSelectionCheck();d.selectionChange()}},canUndo:!1});a.ui.addButton&&a.ui.addButton("SelectAll",{label:a.lang.selectall.toolbar,command:"selectAll",toolbar:"selection,10"})}})})();(function(){var a={readOnly:1,preserveState:!0,editorFocus:!1,exec:function(b){this.toggleState();this.refresh(b)},refresh:function(b){if(b.document){var d=this.state==CKEDITOR.TRISTATE_ON&&(b.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE||b.focusManager.hasFocus)?"attachClass":"removeClass";b.editable()[d]("cke_show_blocks")}}};CKEDITOR.plugins.add("showblocks",{onLoad:function(){var k="p div pre address blockquote h1 h2 h3 h4 h5 h6".split(" "),m,l,o,p,s=CKEDITOR.getUrl(this.path),t=!(CKEDITOR.env.ie&&9>CKEDITOR.env.version),q=t?":not([contenteditable=false]):not(.cke_show_blocks_off)":"",n,r;for(m=l=o=p="";n=k.pop();){r=k.length?",":"",m+=".cke_show_blocks "+n+q+r,o+=".cke_show_blocks.cke_contents_ltr "+n+q+r,p+=".cke_show_blocks.cke_contents_rtl "+n+q+r,l+=".cke_show_blocks "+n+q+"{background-image:url("+s+"images/block_"+n+".png)}"}CKEDITOR.addCss((m+"{background-repeat:no-repeat;border:1px dotted gray;padding-top:8px}").concat(l,o+"{background-position:top left;padding-left:8px}",p+"{background-position:top right;padding-right:8px}"));t||CKEDITOR.addCss(".cke_show_blocks [contenteditable=false],.cke_show_blocks .cke_show_blocks_off{border:none;padding-top:0;background-image:none}.cke_show_blocks.cke_contents_rtl [contenteditable=false],.cke_show_blocks.cke_contents_rtl .cke_show_blocks_off{padding-right:0}.cke_show_blocks.cke_contents_ltr [contenteditable=false],.cke_show_blocks.cke_contents_ltr .cke_show_blocks_off{padding-left:0}")},init:function(d){function f(){e.refresh(d)}if(!d.blockless){var e=d.addCommand("showblocks",a);e.canUndo=!1;d.config.startupOutlineBlocks&&e.setState(CKEDITOR.TRISTATE_ON);d.ui.addButton&&d.ui.addButton("ShowBlocks",{label:d.lang.showblocks.toolbar,command:"showblocks",toolbar:"tools,20"});d.on("mode",function(){e.state!=CKEDITOR.TRISTATE_DISABLED&&e.refresh(d)});d.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(d.on("focus",f),d.on("blur",f));d.on("contentDom",function(){e.state!=CKEDITOR.TRISTATE_DISABLED&&e.refresh(d)})}}})})();(function(){var a={preserveState:!0,editorFocus:!1,readOnly:1,exec:function(b){this.toggleState();this.refresh(b)},refresh:function(c){if(c.document){var d=this.state==CKEDITOR.TRISTATE_ON?"attachClass":"removeClass";c.editable()[d]("cke_show_borders")}}};CKEDITOR.plugins.add("showborders",{modes:{wysiwyg:1},onLoad:function(){var b;b=(CKEDITOR.env.ie6Compat?[".%1 table.%2,",".%1 table.%2 td, .%1 table.%2 th","{","border : #d3d3d3 1px dotted","}"]:".%1 table.%2,;.%1 table.%2 > tr > td, .%1 table.%2 > tr > th,;.%1 table.%2 > tbody > tr > td, .%1 table.%2 > tbody > tr > th,;.%1 table.%2 > thead > tr > td, .%1 table.%2 > thead > tr > th,;.%1 table.%2 > tfoot > tr > td, .%1 table.%2 > tfoot > tr > th;{;border : #d3d3d3 1px dotted;}".split(";")).join("").replace(/%2/g,"cke_show_border").replace(/%1/g,"cke_show_borders ");CKEDITOR.addCss(b)},init:function(c){var d=c.addCommand("showborders",a);d.canUndo=!1;!1!==c.config.startupShowBorders&&d.setState(CKEDITOR.TRISTATE_ON);c.on("mode",function(){d.state!=CKEDITOR.TRISTATE_DISABLED&&d.refresh(c)},null,null,100);c.on("contentDom",function(){d.state!=CKEDITOR.TRISTATE_DISABLED&&d.refresh(c)});c.on("removeFormatCleanup",function(b){b=b.data;c.getCommand("showborders").state==CKEDITOR.TRISTATE_ON&&(b.is("table")&&(!b.hasAttribute("border")||0>=parseInt(b.getAttribute("border"),10)))&&b.addClass("cke_show_border")})},afterInit:function(c){var d=c.dataProcessor,c=d&&d.dataFilter,d=d&&d.htmlFilter;c&&c.addRules({elements:{table:function(e){var e=e.attributes,f=e["class"],g=parseInt(e.border,10);if((!g||0>=g)&&(!f||-1==f.indexOf("cke_show_border"))){e["class"]=(f||"")+" cke_show_border"}}}});d&&d.addRules({elements:{table:function(e){var e=e.attributes,f=e["class"];f&&(e["class"]=f.replace("cke_show_border","").replace(/\s{2}/," ").replace(/^\s+|\s+$/,""))}}})}});CKEDITOR.on("dialogDefinition",function(c){var d=c.data.name;if("table"==d||"tableProperties"==d){if(c=c.data.definition,d=c.getContents("info").get("txtBorder"),d.commit=CKEDITOR.tools.override(d.commit,function(b){return function(f,g){b.apply(this,arguments);var h=parseInt(this.getValue(),10);g[!h||0>=h?"addClass":"removeClass"]("cke_show_border")}}),c=(c=c.getContents("advanced"))&&c.get("advCSSClasses")){c.setup=CKEDITOR.tools.override(c.setup,function(b){return function(){b.apply(this,arguments);this.setValue(this.getValue().replace(/cke_show_border/,""))}}),c.commit=CKEDITOR.tools.override(c.commit,function(b){return function(e,f){b.apply(this,arguments);parseInt(f.getAttribute("border"),10)||f.addClass("cke_show_border")}})}}})})();(function(){CKEDITOR.plugins.add("sourcearea",{init:function(b){function c(){var d=g&&this.equals(CKEDITOR.document.getActive());this.hide();this.setStyle("height",this.getParent().$.clientHeight+"px");this.setStyle("width",this.getParent().$.clientWidth+"px");this.show();d&&this.focus()}if(b.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var h=CKEDITOR.plugins.sourcearea;b.addMode("source",function(f){var d=b.ui.space("contents").getDocument().createElement("textarea");d.setStyles(CKEDITOR.tools.extend({width:CKEDITOR.env.ie7Compat?"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"},CKEDITOR.tools.cssVendorPrefix("tab-size",b.config.sourceAreaTabSize||4)));d.setAttribute("dir","ltr");d.addClass("cke_source cke_reset cke_enable_context_menu");b.ui.space("contents").append(d);d=b.editable(new a(b,d));d.setData(b.getData(1));CKEDITOR.env.ie&&(d.attachListener(b,"resize",c,d),d.attachListener(CKEDITOR.document.getWindow(),"resize",c,d),CKEDITOR.tools.setTimeout(c,0,d));b.fire("ariaWidget",this);f()});b.addCommand("source",h.commands.source);b.ui.addButton&&b.ui.addButton("Source",{label:b.lang.sourcearea.toolbar,command:"source",toolbar:"mode,10"});b.on("mode",function(){b.getCommand("source").setState("source"==b.mode?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)});var g=CKEDITOR.env.ie&&9==CKEDITOR.env.version}}});var a=CKEDITOR.tools.createClass({base:CKEDITOR.editable,proto:{setData:function(b){this.setValue(b);this.status="ready";this.editor.fire("dataReady")},getData:function(){return this.getValue()},insertHtml:function(){},insertElement:function(){},insertText:function(){},setReadOnly:function(b){this[(b?"set":"remove")+"Attribute"]("readOnly","readonly")},detach:function(){a.baseProto.detach.call(this);this.clearCustomData();this.remove()}}})})();CKEDITOR.plugins.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function(a){"wysiwyg"==a.mode&&a.fire("saveSnapshot");a.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED);a.setMode("source"==a.mode?"wysiwyg":"source")},canUndo:!1}}};CKEDITOR.plugins.add("specialchar",{availableLangs:{ar:1,bg:1,ca:1,cs:1,cy:1,de:1,el:1,en:1,"en-gb":1,eo:1,es:1,et:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,he:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ku:1,lv:1,nb:1,nl:1,no:1,pl:1,pt:1,"pt-br":1,ru:1,si:1,sk:1,sl:1,sq:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},requires:"dialog",init:function(b){var d=this;CKEDITOR.dialog.add("specialchar",this.path+"dialogs/specialchar.js");b.addCommand("specialchar",{exec:function(){var a=b.langCode,a=d.availableLangs[a]?a:d.availableLangs[a.replace(/-.*/,"")]?a.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(d.path+"dialogs/lang/"+a+".js"),function(){CKEDITOR.tools.extend(b.lang.specialchar,d.langEntries[a]);b.openDialog("specialchar")})},modes:{wysiwyg:1},canUndo:!1});b.ui.addButton&&b.ui.addButton("SpecialChar",{label:b.lang.specialchar.toolbar,command:"specialchar",toolbar:"insert,50"})}});CKEDITOR.config.specialChars="! &quot; # $ % &amp; ' ( ) * + - . / 0 1 2 3 4 5 6 7 8 9 : ; &lt; = &gt; ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~ &euro; &lsquo; &rsquo; &ldquo; &rdquo; &ndash; &mdash; &iexcl; &cent; &pound; &curren; &yen; &brvbar; &sect; &uml; &copy; &ordf; &laquo; &not; &reg; &macr; &deg; &sup2; &sup3; &acute; &micro; &para; &middot; &cedil; &sup1; &ordm; &raquo; &frac14; &frac12; &frac34; &iquest; &Agrave; &Aacute; &Acirc; &Atilde; &Auml; &Aring; &AElig; &Ccedil; &Egrave; &Eacute; &Ecirc; &Euml; &Igrave; &Iacute; &Icirc; &Iuml; &ETH; &Ntilde; &Ograve; &Oacute; &Ocirc; &Otilde; &Ouml; &times; &Oslash; &Ugrave; &Uacute; &Ucirc; &Uuml; &Yacute; &THORN; &szlig; &agrave; &aacute; &acirc; &atilde; &auml; &aring; &aelig; &ccedil; &egrave; &eacute; &ecirc; &euml; &igrave; &iacute; &icirc; &iuml; &eth; &ntilde; &ograve; &oacute; &ocirc; &otilde; &ouml; &divide; &oslash; &ugrave; &uacute; &ucirc; &uuml; &yacute; &thorn; &yuml; &OElig; &oelig; &#372; &#374 &#373 &#375; &sbquo; &#8219; &bdquo; &hellip; &trade; &#9658; &bull; &rarr; &rArr; &hArr; &diams; &asymp;".split(" ");CKEDITOR.plugins.add("scayt",{requires:"menubutton,dialog",tabToOpen:null,dialogName:"scaytDialog",init:function(e){var i=this,h=CKEDITOR.plugins.scayt;this.bindEvents(e);this.parseConfig(e);this.addRule(e);CKEDITOR.dialog.add(this.dialogName,CKEDITOR.getUrl(this.path+"dialogs/options.js"));this.addMenuItems(e);var g=e.lang.scayt,j=CKEDITOR.env;e.ui.add("Scayt",CKEDITOR.UI_MENUBUTTON,{label:g.text_title,title:g.text_title,modes:{wysiwyg:!(j.ie&&(8>j.version||j.quirks))},toolbar:"spellchecker,20",refresh:function(){var a=e.ui.instances.Scayt.getState();e.scayt&&(a=h.state[e.name]?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF);e.fire("scaytButtonState",a)},onRender:function(){var a=this;e.on("scaytButtonState",function(b){void 0!==typeof b.data&&a.setState(b.data)})},onMenu:function(){var a=e.scayt;e.getMenuItem("scaytToggle").label=e.lang.scayt[a&&h.state[e.name]?"btn_disable":"btn_enable"];a={scaytToggle:CKEDITOR.TRISTATE_OFF,scaytOptions:a?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytLangs:a?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytDict:a?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytAbout:a?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,WSC:e.plugins.wsc?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED};e.config.scayt_uiTabs[0]||delete a.scaytOptions;e.config.scayt_uiTabs[1]||delete a.scaytLangs;e.config.scayt_uiTabs[2]||delete a.scaytDict;return a}});e.contextMenu&&e.addMenuItems&&(e.contextMenu.addListener(function(){var d=e.scayt,a;if(d){var f=d.getSelectionNode();if(f=f?f.getAttribute(d.getNodeAttribute()):f){a=i.menuGenerator(e,f,i),d.showBanner("."+e.contextMenu._.definition.panel.className.split(" ").join(" ."))}}return a}),e.contextMenu._.onHide=CKEDITOR.tools.override(e.contextMenu._.onHide,function(a){return function(){var c=e.scayt;c&&c.hideBanner();return a.apply(this)}}))},addMenuItems:function(e){var i=this,h=CKEDITOR.plugins.scayt;e.addMenuGroup("scaytButton");var g=e.config.scayt_contextMenuItemsOrder.split("|");if(g&&g.length){for(var j=0;j<g.length;j++){e.addMenuGroup("scayt_"+g[j],j-10)}}g={scaytToggle:{label:e.lang.scayt.btn_enable,group:"scaytButton",onClick:function(){var a=e.scayt;h.state[e.name]=!h.state[e.name];!0===h.state[e.name]?a||h.createScayt(e):a&&h.destroy(e)}},scaytAbout:{label:e.lang.scayt.btn_about,group:"scaytButton",onClick:function(){e.scayt.tabToOpen="about";e.lockSelection();e.openDialog(i.dialogName)}},scaytOptions:{label:e.lang.scayt.btn_options,group:"scaytButton",onClick:function(){e.scayt.tabToOpen="options";e.lockSelection();e.openDialog(i.dialogName)}},scaytLangs:{label:e.lang.scayt.btn_langs,group:"scaytButton",onClick:function(){e.scayt.tabToOpen="langs";e.lockSelection();e.openDialog(i.dialogName)}},scaytDict:{label:e.lang.scayt.btn_dictionaries,group:"scaytButton",onClick:function(){e.scayt.tabToOpen="dictionaries";e.lockSelection();e.openDialog(i.dialogName)}}};e.plugins.wsc&&(g.WSC={label:e.lang.wsc.toolbar,group:"scaytButton",onClick:function(){var f=CKEDITOR.plugins.scayt,a=e.scayt,k=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?e.container.getText():e.document.getBody().getText();(k=k.replace(/\s/g,""))?(a&&(f.state[e.name]&&a.setMarkupPaused)&&a.setMarkupPaused(!0),e.lockSelection(),e.execCommand("checkspell")):alert("Nothing to check!")}});e.addMenuItems(g)},bindEvents:function(e){var j=CKEDITOR.plugins.scayt,i=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE;CKEDITOR.on("dialogDefinition",function(b){if("scaytDialog"===b.data.name){b.data.definition.dialog.on("cancel",function(){return !1},this,null,-1)}});var h=function(){e.scayt&&j.destroy(e)},k=function(){j.state[e.name]&&!e.readOnly&&j.createScayt(e)},l=function(){i?(e.on("blur",h),e.on("focus",k),e.focusManager.hasFocus&&k()):k()};e.on("contentDom",l);e.on("beforeCommandExec",function(a){if(a.data.name in j.options.disablingCommandExec&&"wysiwyg"==e.mode){if(a=e.scayt){j.destroy(e),e.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED)}}else{if("bold"===a.data.name||"italic"===a.data.name||"underline"===a.data.name||"strike"===a.data.name||"subscript"===a.data.name||"superscript"===a.data.name){if(a=e.scayt){a.removeMarkupInSelectionNode(),a.fire("startSpellCheck")}}}});e.on("beforeSetMode",function(a){if("source"==a.data&&(a=e.scayt)){j.destroy(e),e.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED)}});e.on("afterCommandExec",function(d){var a;if("wysiwyg"==e.mode&&("undo"==d.data.name||"redo"==d.data.name)){(a=e.scayt)&&setTimeout(function(){a.fire("startSpellCheck")},250)}});e.on("readOnly",function(d){var a;d&&(a=e.scayt,!0===d.editor.readOnly?a&&a.fire("removeMarkupInDocument",{}):a?a.fire("startSpellCheck"):"wysiwyg"==d.editor.mode&&!0===j.state[d.editor.name]&&(j.createScayt(e),d.editor.fire("scaytButtonState",CKEDITOR.TRISTATE_ON)))});e.on("beforeDestroy",h);e.on("setData",function(){h();e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&l()},this,null,50);e.on("insertElement",function(){var a=e.scayt;a&&(a.removeMarkupInSelectionNode(),a.fire("startSpellCheck"))},this,null,50);e.on("insertHtml",function(){var a=e.scayt;a&&(a.removeMarkupInSelectionNode(),a.fire("startSpellCheck"))},this,null,50);e.on("scaytDialogShown",function(a){a.data.selectPage(e.scayt.tabToOpen)})},parseConfig:function(e){var h=CKEDITOR.plugins.scayt;h.replaceOldOptionsNames(e.config);"boolean"!==typeof e.config.scayt_autoStartup&&(e.config.scayt_autoStartup=!1);h.state[e.name]=e.config.scayt_autoStartup;e.config.scayt_contextCommands||(e.config.scayt_contextCommands="ignore|ignoreall|add");e.config.scayt_contextMenuItemsOrder||(e.config.scayt_contextMenuItemsOrder="suggest|moresuggest|control");e.config.scayt_sLang||(e.config.scayt_sLang="en_US");if(void 0===e.config.scayt_maxSuggestions||"number"!=typeof e.config.scayt_maxSuggestions||0>e.config.scayt_maxSuggestions){e.config.scayt_maxSuggestions=5}if(void 0===e.config.scayt_customDictionaryIds||"string"!==typeof e.config.scayt_customDictionaryIds){e.config.scayt_customDictionaryIds=""}if(void 0===e.config.scayt_userDictionaryName||"string"!==typeof e.config.scayt_userDictionaryName){e.config.scayt_userDictionaryName=null}if("string"===typeof e.config.scayt_uiTabs&&3===e.config.scayt_uiTabs.split(",").length){var g=[],f=[];e.config.scayt_uiTabs=e.config.scayt_uiTabs.split(",");CKEDITOR.tools.search(e.config.scayt_uiTabs,function(b){if(Number(b)===1||Number(b)===0){f.push(true);g.push(Number(b))}else{f.push(false)}});e.config.scayt_uiTabs=null===CKEDITOR.tools.search(f,!1)?g:[1,1,1]}else{e.config.scayt_uiTabs=[1,1,1]}"string"!=typeof e.config.scayt_serviceProtocol&&(e.config.scayt_serviceProtocol=null);"string"!=typeof e.config.scayt_serviceHost&&(e.config.scayt_serviceHost=null);"string"!=typeof e.config.scayt_servicePort&&(e.config.scayt_servicePort=null);"string"!=typeof e.config.scayt_servicePath&&(e.config.scayt_servicePath=null);e.config.scayt_moreSuggestions||(e.config.scayt_moreSuggestions="on");"string"!==typeof e.config.scayt_customerId&&(e.config.scayt_customerId="1:WvF0D4-UtPqN1-43nkD4-NKvUm2-daQqk3-LmNiI-z7Ysb4-mwry24-T8YrS3-Q2tpq2");"string"!==typeof e.config.scayt_srcUrl&&(h=document.location.protocol,h=-1!=h.search(/https?:/)?h:"http:",e.config.scayt_srcUrl=h+"//svc.webspellchecker.net/spellcheck31/lf/scayt3/ckscayt/ckscayt.js");"boolean"!==typeof CKEDITOR.config.scayt_handleCheckDirty&&(CKEDITOR.config.scayt_handleCheckDirty=!0);"boolean"!==typeof CKEDITOR.config.scayt_handleUndoRedo&&(CKEDITOR.config.scayt_handleUndoRedo=!0)},addRule:function(h){var k=h.dataProcessor,j=k&&k.htmlFilter,i=h._.elementsPath&&h._.elementsPath.filters,k=k&&k.dataFilter,m=h.addRemoveFormatFilter,n=function(d){var a=CKEDITOR.plugins.scayt;if(h.scayt&&d.hasAttribute(a.options.data_attribute_name)){return !1}},l=function(e){var a=CKEDITOR.plugins.scayt,f=!0;h.scayt&&e.hasAttribute(a.options.data_attribute_name)&&(f=!1);return f};i&&i.push(n);k&&k.addRules({elements:{span:function(d){var a=CKEDITOR.plugins.scayt;a&&(a.state[h.name]&&d.classes&&CKEDITOR.tools.search(d.classes,a.options.misspelled_word_class))&&(d.classes&&d.parent.type===CKEDITOR.NODE_DOCUMENT_FRAGMENT?(delete d.attributes.style,delete d.name):delete d.classes[CKEDITOR.tools.indexOf(d.classes,a.options.misspelled_word_class)]);return d}}});j&&j.addRules({elements:{span:function(d){var a=CKEDITOR.plugins.scayt;a&&(a.state[h.name]&&d.hasClass(a.options.misspelled_word_class)&&d.attributes[a.options.data_attribute_name])&&(d.removeClass(a.options.misspelled_word_class),delete d.attributes[a.options.data_attribute_name],delete d.name);return d}}});m&&m.call(h,l)},scaytMenuDefinition:function(b){var c=this,b=b.scayt;return{scayt_ignore:{label:b.getLocal("btn_ignore"),group:"scayt_control",order:1,exec:function(d){d.scayt.ignoreWord()}},scayt_ignoreall:{label:b.getLocal("btn_ignoreAll"),group:"scayt_control",order:2,exec:function(d){d.scayt.ignoreAllWords()}},scayt_add:{label:b.getLocal("btn_addWord"),group:"scayt_control",order:3,exec:function(d){var e=d.scayt;setTimeout(function(){e.addWordToUserDictionary()},10)}},option:{label:b.getLocal("btn_options"),group:"scayt_control",order:4,exec:function(d){d.scayt.tabToOpen="options";d.lockSelection();d.openDialog(c.dialogName)},verification:function(d){return 1==d.config.scayt_uiTabs[0]?!0:!1}},language:{label:b.getLocal("btn_langs"),group:"scayt_control",order:5,exec:function(d){d.scayt.tabToOpen="langs";d.lockSelection();d.openDialog(c.dialogName)},verification:function(d){return 1==d.config.scayt_uiTabs[1]?!0:!1}},dictionary:{label:b.getLocal("btn_dictionaries"),group:"scayt_control",order:6,exec:function(d){d.scayt.tabToOpen="dictionaries";d.lockSelection();d.openDialog(c.dialogName)},verification:function(d){return 1==d.config.scayt_uiTabs[2]?!0:!1}},about:{label:b.getLocal("btn_about"),group:"scayt_control",order:7,exec:function(d){d.scayt.tabToOpen="about";d.lockSelection();d.openDialog(c.dialogName)}}}},buildSuggestionMenuItems:function(h,k){var j={},i={},m=h.scayt;if(0<k.length&&"no_any_suggestions"!==k[0]){for(var n=0;n<k.length;n++){var l="scayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[n].replace(" ","_");h.addCommand(l,this.createCommand(CKEDITOR.plugins.scayt.suggestions[n]));n<h.config.scayt_maxSuggestions?(h.addMenuItem(l,{label:k[n],command:l,group:"scayt_suggest",order:n+1}),j[l]=CKEDITOR.TRISTATE_OFF):(h.addMenuItem(l,{label:k[n],command:l,group:"scayt_moresuggest",order:n+1}),i[l]=CKEDITOR.TRISTATE_OFF,"on"===h.config.scayt_moreSuggestions&&(h.addMenuItem("scayt_moresuggest",{label:m.getLocal("btn_moreSuggestions"),group:"scayt_moresuggest",order:10,getItems:function(){return i}}),j.scayt_moresuggest=CKEDITOR.TRISTATE_OFF))}}else{j.no_scayt_suggest=CKEDITOR.TRISTATE_DISABLED,h.addCommand("no_scayt_suggest",{exec:function(){}}),h.addMenuItem("no_scayt_suggest",{label:m.getLocal("btn_noSuggestions")||"no_scayt_suggest",command:"no_scayt_suggest",group:"scayt_suggest",order:0})}return j},menuGenerator:function(h,k){var j=h.scayt,i=this.scaytMenuDefinition(h),m={},n=h.config.scayt_contextCommands.split("|");j.fire("getSuggestionsList",{lang:j.getLang(),word:k});m=this.buildSuggestionMenuItems(h,CKEDITOR.plugins.scayt.suggestions);if("off"==h.config.scayt_contextCommands){return m}for(var l in i){-1==CKEDITOR.tools.indexOf(n,l.replace("scayt_",""))&&"all"!=h.config.scayt_contextCommands||(m[l]=CKEDITOR.TRISTATE_OFF,"function"===typeof i[l].verification&&!i[l].verification(h)&&delete m[l],h.addCommand(l,{exec:i[l].exec}),h.addMenuItem(l,{label:h.lang.scayt[i[l].label]||i[l].label,command:l,group:i[l].group,order:i[l].order}))}return m},createCommand:function(b){return{exec:function(a){a.scayt.replaceSelectionNode({word:b})}}}});CKEDITOR.plugins.scayt={state:{},suggestions:[],loadingHelper:{loadOrder:[]},isLoading:!1,options:{disablingCommandExec:{source:!0,newpage:!0,templates:!0},data_attribute_name:"data-scayt-word",misspelled_word_class:"scayt-misspell-word"},backCompatibilityMap:{scayt_service_protocol:"scayt_serviceProtocol",scayt_service_host:"scayt_serviceHost",scayt_service_port:"scayt_servicePort",scayt_service_path:"scayt_servicePath",scayt_customerid:"scayt_customerId"},replaceOldOptionsNames:function(b){for(var c in b){c in this.backCompatibilityMap&&(b[this.backCompatibilityMap[c]]=b[c],delete b[c])}},createScayt:function(b){var c=this;this.loadScaytLibrary(b,function(d){var e={lang:d.config.scayt_sLang,container:"BODY"==d.editable().$.nodeName?d.document.getWindow().$.frameElement:d.editable().$,customDictionary:d.config.scayt_customDictionaryIds,userDictionaryName:d.config.scayt_userDictionaryName,localization:d.langCode,customer_id:d.config.scayt_customerId,data_attribute_name:c.options.data_attribute_name,misspelled_word_class:c.options.misspelled_word_class};d.config.scayt_serviceProtocol&&(e.service_protocol=d.config.scayt_serviceProtocol);d.config.scayt_serviceHost&&(e.service_host=d.config.scayt_serviceHost);d.config.scayt_servicePort&&(e.service_port=d.config.scayt_servicePort);d.config.scayt_servicePath&&(e.service_path=d.config.scayt_servicePath);e=new SCAYT.CKSCAYT(e,function(){},function(){});e.subscribe("suggestionListSend",function(f){for(var g={},h=[],i=0;i<f.suggestionList.length;i++){if(!g[f.suggestionList[i]]){g[f.suggestionList[i]]=f.suggestionList[i];h.push(f.suggestionList[i])}}CKEDITOR.plugins.scayt.suggestions=h});d.scayt=e;d.fire("scaytButtonState",d.readOnly?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_ON)})},destroy:function(b){b.scayt&&b.scayt.destroy();delete b.scayt;b.fire("scaytButtonState",CKEDITOR.TRISTATE_OFF)},loadScaytLibrary:function(b,f){var e=this;"undefined"===typeof window.SCAYT||"function"!==typeof window.SCAYT.CKSCAYT?(this.loadingHelper[b.name]=f,this.loadingHelper.loadOrder.push(b.name),CKEDITOR.scriptLoader.load(b.config.scayt_srcUrl,function(){var c;CKEDITOR.fireOnce("scaytReady");for(var g=0;g<e.loadingHelper.loadOrder.length;g++){c=e.loadingHelper.loadOrder[g];if("function"===typeof e.loadingHelper[c]){e.loadingHelper[c](CKEDITOR.instances[c])}delete e.loadingHelper[c]}e.loadingHelper.loadOrder=[]})):window.SCAYT&&"function"===typeof window.SCAYT.CKSCAYT&&(CKEDITOR.fireOnce("scaytReady"),b.scayt||"function"===typeof f&&f(b))}};CKEDITOR.on("scaytReady",function(){if(!0===CKEDITOR.config.scayt_handleCheckDirty){var b=CKEDITOR.editor.prototype;b.checkDirty=CKEDITOR.tools.override(b.checkDirty,function(d){return function(){var a=null,e=this.scayt;if(!CKEDITOR.plugins.scayt||!CKEDITOR.plugins.scayt.state[this.name]||!this.scayt){a=d.call(this)}else{if(a="ready"==this.status){var f=e.removeMarkupFromString(this.getSnapshot()),e=e.removeMarkupFromString(this._.previousValue),a=a&&e!==f}}return a}});b.resetDirty=CKEDITOR.tools.override(b.resetDirty,function(d){return function(){var a=this.scayt;!CKEDITOR.plugins.scayt||!CKEDITOR.plugins.scayt.state[this.name]||!this.scayt?d.call(this):this._.previousValue=a.removeMarkupFromString(this.getSnapshot())}})}if(!0===CKEDITOR.config.scayt_handleUndoRedo){var b=CKEDITOR.plugins.undo.Image.prototype,c="function"==typeof b.equalsContent?"equalsContent":"equals";b[c]=CKEDITOR.tools.override(b[c],function(d){return function(a){var f=a.editor.scayt,j=this.contents,i=a.contents,k=null;CKEDITOR.plugins.scayt&&(CKEDITOR.plugins.scayt.state[a.editor.name]&&a.editor.scayt)&&(this.contents=f.removeMarkupFromString(j)||"",a.contents=f.removeMarkupFromString(i)||"");k=d.apply(this,arguments);this.contents=j;a.contents=i;return k}})}});(function(){CKEDITOR.plugins.add("stylescombo",{requires:"richcombo",init:function(a){var h=a.config,d=a.lang.stylescombo,b={},e=[],l=[];a.on("stylesSet",function(f){if(f=f.data.styles){for(var c,j,g,i=0,k=f.length;i<k;i++){if(c=f[i],!(a.blockless&&c.element in CKEDITOR.dtd.$block)&&(j=c.name,c=new CKEDITOR.style(c),!a.filter.customConfig||a.filter.check(c))){c._name=j,c._.enterMode=h.enterMode,c._.type=g=c.assignedTo||c.type,c._.weight=i+1000*(g==CKEDITOR.STYLE_OBJECT?1:g==CKEDITOR.STYLE_BLOCK?2:3),b[j]=c,e.push(c),l.push(c)}}e.sort(function(m,n){return m._.weight-n._.weight})}});a.ui.addRichCombo("Styles",{label:d.label,title:d.panelTitle,toolbar:"styles,10",allowedContent:l,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(h.contentsCss),multiSelect:!0,attributes:{"aria-label":d.panelTitle}},init:function(){var i,g,j,k,m,n;m=0;for(n=e.length;m<n;m++){i=e[m],g=i._name,k=i._.type,k!=j&&(this.startGroup(d["panelTitle"+k]),j=k),this.add(g,i.type==CKEDITOR.STYLE_OBJECT?g:i.buildPreview(),g)}this.commit()},onClick:function(f){a.focus();a.fire("saveSnapshot");var f=b[f],c=a.elementPath();a[f.checkActive(c,a)?"removeStyle":"applyStyle"](f);a.fire("saveSnapshot")},onRender:function(){a.on("selectionChange",function(f){for(var c=this.getValue(),f=f.data.path.elements,m=0,i=f.length,j;m<i;m++){j=f[m];for(var k in b){if(b[k].checkElementRemovable(j,!0,a)){k!=c&&this.setValue(k);return}}}this.setValue("")},this)},onOpen:function(){var f=a.getSelection().getSelectedElement(),f=a.elementPath(f),c=[0,0,0,0];this.showAll();this.unmarkAll();for(var j in b){var g=b[j],i=g._.type;g.checkApplicable(f,a,a.activeFilter)?c[i]++:this.hideItem(j);g.checkActive(f,a)&&this.mark(j)}c[CKEDITOR.STYLE_BLOCK]||this.hideGroup(d["panelTitle"+CKEDITOR.STYLE_BLOCK]);c[CKEDITOR.STYLE_INLINE]||this.hideGroup(d["panelTitle"+CKEDITOR.STYLE_INLINE]);c[CKEDITOR.STYLE_OBJECT]||this.hideGroup(d["panelTitle"+CKEDITOR.STYLE_OBJECT])},refresh:function(){var f=a.elementPath();if(f){for(var c in b){if(b[c].checkApplicable(f,a,a.activeFilter)){return}}this.setState(CKEDITOR.TRISTATE_DISABLED)}},reset:function(){b={};e=[]}})}})})();(function(){function d(e){return{editorFocus:!1,canUndo:!1,modes:{wysiwyg:1},exec:function(k){if(k.editable().hasFocus){var l=k.getSelection(),j;if(j=(new CKEDITOR.dom.elementPath(l.getCommonAncestor(),l.root)).contains({td:1,th:1},1)){var l=k.createRange(),i=CKEDITOR.tools.tryThese(function(){var f=j.getParent().$.cells[j.$.cellIndex+(e?-1:1)];f.parentNode.parentNode;return f},function(){var f=j.getParent(),f=f.getAscendant("table").$.rows[f.$.rowIndex+(e?-1:1)];return f.cells[e?f.cells.length-1:0]});if(!i&&!e){for(var m=j.getAscendant("table").$,i=j.getParent().$.cells,m=new CKEDITOR.dom.element(m.insertRow(-1),k.document),n=0,o=i.length;n<o;n++){m.append((new CKEDITOR.dom.element(i[n],k.document)).clone(!1,!1)).appendBogus()}l.moveToElementEditStart(m)}else{if(i){i=new CKEDITOR.dom.element(i),l.moveToElementEditStart(i),(!l.checkStartOfBlock()||!l.checkEndOfBlock())&&l.selectNodeContents(i)}else{return !0}}l.select(!0);return !0}}return !1}}}var c={editorFocus:!1,modes:{wysiwyg:1,source:1}},b={exec:function(e){e.container.focusNext(!0,e.tabIndex)}},a={exec:function(e){e.container.focusPrevious(!0,e.tabIndex)}};CKEDITOR.plugins.add("tab",{init:function(g){for(var h=!1!==g.config.enableTabKeyTools,i=g.config.tabSpaces||0,f="";i--;){f+=""}if(f){g.on("key",function(e){9==e.data.keyCode&&(g.insertHtml(f),e.cancel())})}if(h){g.on("key",function(e){(9==e.data.keyCode&&g.execCommand("selectNextCell")||e.data.keyCode==CKEDITOR.SHIFT+9&&g.execCommand("selectPreviousCell"))&&e.cancel()})}g.addCommand("blur",CKEDITOR.tools.extend(b,c));g.addCommand("blurBack",CKEDITOR.tools.extend(a,c));g.addCommand("selectNextCell",d());g.addCommand("selectPreviousCell",d(!0))}})})();CKEDITOR.dom.element.prototype.focusNext=function(r,q){var p=void 0===q?this.getTabIndex():q,o,l,m,n,k,j;if(0>=p){for(k=this.getNextSourceNode(r,CKEDITOR.NODE_ELEMENT);k;){if(k.isVisible()&&0===k.getTabIndex()){m=k;break}k=k.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT)}}else{for(k=this.getDocument().getBody().getFirst();k=k.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!o){if(!l&&k.equals(this)){if(l=!0,r){if(!(k=k.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT))){break}o=1}}else{l&&!this.contains(k)&&(o=1)}}if(k.isVisible()&&!(0>(j=k.getTabIndex()))){if(o&&j==p){m=k;break}j>p&&(!m||!n||j<n)?(m=k,n=j):!m&&0===j&&(m=k,n=j)}}}m&&m.focus()};CKEDITOR.dom.element.prototype.focusPrevious=function(r,q){for(var p=void 0===q?this.getTabIndex():q,o,l,m,n=0,k,j=this.getDocument().getBody().getLast();j=j.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!o){if(!l&&j.equals(this)){if(l=!0,r){if(!(j=j.getPreviousSourceNode(!0,CKEDITOR.NODE_ELEMENT))){break}o=1}}else{l&&!this.contains(j)&&(o=1)}}if(j.isVisible()&&!(0>(k=j.getTabIndex()))){if(0>=p){if(o&&0===k){m=j;break}k>n&&(m=j,n=k)}else{if(o&&k==p){m=j;break}if(k<p&&(!m||k>n)){m=j,n=k}}}}m&&m.focus()};CKEDITOR.plugins.add("table",{requires:"dialog",init:function(b){function f(c){return CKEDITOR.tools.extend(c||{},{contextSensitive:1,refresh:function(e,g){this.setState(g.contains("table",1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}if(!b.blockless){var d=b.lang.table;b.addCommand("table",new CKEDITOR.dialogCommand("table",{context:"table",allowedContent:"table{width,height}[align,border,cellpadding,cellspacing,summary];caption tbody thead tfoot;th td tr[scope];"+(b.plugins.dialogadvtab?"table"+b.plugins.dialogadvtab.allowedContent():""),requiredContent:"table",contentTransformations:[["table{width}: sizeToStyle","table[width]: sizeToAttribute"]]}));b.addCommand("tableProperties",new CKEDITOR.dialogCommand("tableProperties",f()));b.addCommand("tableDelete",f({exec:function(e){var g=e.elementPath().contains("table",1);if(g){var i=g.getParent(),h=e.editable();1==i.getChildCount()&&(!i.is("td","th")&&!i.equals(h))&&(g=i);e=e.createRange();e.moveToPosition(g,CKEDITOR.POSITION_BEFORE_START);g.remove();e.select()}}}));b.ui.addButton&&b.ui.addButton("Table",{label:d.toolbar,command:"table",toolbar:"insert,30"});CKEDITOR.dialog.add("table",this.path+"dialogs/table.js");CKEDITOR.dialog.add("tableProperties",this.path+"dialogs/table.js");b.addMenuItems&&b.addMenuItems({table:{label:d.menu,command:"tableProperties",group:"table",order:5},tabledelete:{label:d.deleteTable,command:"tableDelete",group:"table",order:1}});b.on("doubleclick",function(c){c.data.element.is("table")&&(c.data.dialog="tableProperties")});b.contextMenu&&b.contextMenu.addListener(function(){return{tabledelete:CKEDITOR.TRISTATE_OFF,table:CKEDITOR.TRISTATE_OFF}})}}});(function(){function d(q){function p(t){!(0<m.length)&&(t.type==CKEDITOR.NODE_ELEMENT&&z.test(t.getName())&&!t.getCustomData("selected_cell"))&&(CKEDITOR.dom.element.setMarker(o,t,"selected_cell",!0),m.push(t))}for(var q=q.getRanges(),m=[],o={},k=0;k<q.length;k++){var r=q[k];if(r.collapsed){r=r.getCommonAncestor(),(r=r.getAscendant("td",!0)||r.getAscendant("th",!0))&&m.push(r)}else{var r=new CKEDITOR.dom.walker(r),s;for(r.guard=p;s=r.next();){if(s.type!=CKEDITOR.NODE_ELEMENT||!s.is(CKEDITOR.dtd.table)){if((s=s.getAscendant("td",!0)||s.getAscendant("th",!0))&&!s.getCustomData("selected_cell")){CKEDITOR.dom.element.setMarker(o,s,"selected_cell",!0),m.push(s)}}}}}CKEDITOR.dom.element.clearAllMarkers(o);return m}function c(q,p){for(var m=d(q),o=m[0],k=o.getAscendant("table"),o=o.getDocument(),r=m[0].getParent(),s=r.$.rowIndex,m=m[m.length-1],t=m.getParent().$.rowIndex+m.$.rowSpan-1,m=new CKEDITOR.dom.element(k.$.rows[t]),s=p?s:t,r=p?r:m,m=CKEDITOR.tools.buildTableMap(k),k=m[s],s=p?m[s-1]:m[s+1],m=m[0].length,o=o.createElement("tr"),t=0;k[t]&&t<m;t++){var u;1<k[t].rowSpan&&s&&k[t]==s[t]?(u=k[t],u.rowSpan+=1):(u=(new CKEDITOR.dom.element(k[t])).clone(),u.removeAttribute("rowSpan"),u.appendBogus(),o.append(u),u=u.$);t+=u.colSpan-1}p?o.insertBefore(r):o.insertAfter(r)}function e(q){if(q instanceof CKEDITOR.dom.selection){for(var p=d(q),m=p[0].getAscendant("table"),o=CKEDITOR.tools.buildTableMap(m),q=p[0].getParent().$.rowIndex,p=p[p.length-1],k=p.getParent().$.rowIndex+p.$.rowSpan-1,p=[],r=q;r<=k;r++){for(var s=o[r],t=new CKEDITOR.dom.element(m.$.rows[r]),u=0;u<s.length;u++){var v=new CKEDITOR.dom.element(s[u]),w=v.getParent().$.rowIndex;1==v.$.rowSpan?v.remove():(v.$.rowSpan-=1,w==r&&(w=o[r+1],w[u-1]?v.insertAfter(new CKEDITOR.dom.element(w[u-1])):(new CKEDITOR.dom.element(m.$.rows[r+1])).append(v,1)));u+=v.$.colSpan-1}p.push(t)}o=m.$.rows;m=new CKEDITOR.dom.element(o[k+1]||(0<q?o[q-1]:null)||m.$.parentNode);for(r=p.length;0<=r;r--){e(p[r])}return m}q instanceof CKEDITOR.dom.element&&(m=q.getAscendant("table"),1==m.$.rows.length?m.remove():q.remove());return null}function f(q,p){for(var m=p?Infinity:0,o=0;o<q.length;o++){var k;k=q[o];for(var r=p,s=k.getParent().$.cells,t=0,u=0;u<s.length;u++){var v=s[u],t=t+(r?1:v.colSpan);if(v==k.$){break}}k=t-1;if(p?k<m:k>m){m=k}}return m}function a(q,p){for(var m=d(q),o=m[0].getAscendant("table"),k=f(m,1),m=f(m),k=p?k:m,r=CKEDITOR.tools.buildTableMap(o),o=[],m=[],s=r.length,t=0;t<s;t++){o.push(r[t][k]),m.push(p?r[t][k-1]:r[t][k+1])}for(t=0;t<s;t++){o[t]&&(1<o[t].colSpan&&m[t]==o[t]?(k=o[t],k.colSpan+=1):(k=(new CKEDITOR.dom.element(o[t])).clone(),k.removeAttribute("colSpan"),k.appendBogus(),k[p?"insertBefore":"insertAfter"].call(k,new CKEDITOR.dom.element(o[t])),k=k.$),t+=k.rowSpan-1)}}function i(p,o){var k=p.getStartElement();if(k=k.getAscendant("td",1)||k.getAscendant("th",1)){var m=k.clone();m.appendBogus();o?m.insertBefore(k):m.insertAfter(k)}}function h(q){if(q instanceof CKEDITOR.dom.selection){var q=d(q),p=q[0]&&q[0].getAscendant("table"),m;k:{var o=0;m=q.length-1;for(var k={},r,s;r=q[o++];){CKEDITOR.dom.element.setMarker(k,r,"delete_cell",!0)}for(o=0;r=q[o++];){if((s=r.getPrevious())&&!s.getCustomData("delete_cell")||(s=r.getNext())&&!s.getCustomData("delete_cell")){CKEDITOR.dom.element.clearAllMarkers(k);m=s;break k}}CKEDITOR.dom.element.clearAllMarkers(k);s=q[0].getParent();(s=s.getPrevious())?m=s.getLast():(s=q[m].getParent(),m=(s=s.getNext())?s.getChild(0):null)}for(s=q.length-1;0<=s;s--){h(q[s])}m?b(m,!0):p&&p.remove()}else{q instanceof CKEDITOR.dom.element&&(p=q.getParent(),1==p.getChildCount()?p.remove():q.remove())}}function b(p,o){var k=p.getDocument(),m=CKEDITOR.document;CKEDITOR.env.ie&&10==CKEDITOR.env.version&&(m.focus(),k.focus());k=new CKEDITOR.dom.range(k);if(!k["moveToElementEdit"+(o?"End":"Start")](p)){k.selectNodeContents(p),k.collapse(o?!1:!0)}k.select(!0)}function j(o,m,k){o=o[m];if("undefined"==typeof k){return o}for(m=0;o&&m<o.length;m++){if(k.is&&o[m]==k.$){return m}if(m==k){return new CKEDITOR.dom.element(o[m])}}return k.is?-1:null}function g(A,y,v){var x=d(A),p;if((y?1!=x.length:2>x.length)||(p=A.getCommonAncestor())&&p.type==CKEDITOR.NODE_ELEMENT&&p.is("table")){return !1}var B,A=x[0];p=A.getAscendant("table");var C=CKEDITOR.tools.buildTableMap(p),D=C.length,E=C[0].length,F=A.getParent().$.rowIndex,H=j(C,F,A);if(y){var J;try{var I=parseInt(A.getAttribute("rowspan"),10)||1;B=parseInt(A.getAttribute("colspan"),10)||1;J=C["up"==y?F-I:"down"==y?F+I:F]["left"==y?H-B:"right"==y?H+B:H]}catch(R){return !1}if(!J||A.$==J){return !1}x["up"==y||"left"==y?"unshift":"push"](new CKEDITOR.dom.element(J))}for(var y=A.getDocument(),K=F,I=J=0,L=!v&&new CKEDITOR.dom.documentFragment(y),N=0,y=0;y<x.length;y++){B=x[y];var G=B.getParent(),O=B.getFirst(),M=B.$.colSpan,P=B.$.rowSpan,G=G.$.rowIndex,Q=j(C,G,B),N=N+M*P,I=Math.max(I,Q-H+M);J=Math.max(J,G-F+P);if(!v){M=B;(P=M.getBogus())&&P.remove();M.trim();if(B.getChildren().count()){if(G!=K&&O&&(!O.isBlockBoundary||!O.isBlockBoundary({br:1}))){(K=L.getLast(CKEDITOR.dom.walker.whitespaces(!0)))&&(!K.is||!K.is("br"))&&L.append("br")}B.moveChildren(L)}y?B.remove():B.setHtml("")}K=G}if(v){return J*I==N}L.moveChildren(A);A.appendBogus();I>=E?A.removeAttribute("rowSpan"):A.$.rowSpan=J;J>=D?A.removeAttribute("colSpan"):A.$.colSpan=I;v=new CKEDITOR.dom.nodeList(p.$.rows);x=v.count();for(y=x-1;0<=y;y--){p=v.getItem(y),p.$.cells.length||(p.remove(),x++)}return A}function l(q,p){var m=d(q);if(1<m.length){return !1}if(p){return !0}var m=m[0],o=m.getParent(),k=o.getAscendant("table"),r=CKEDITOR.tools.buildTableMap(k),s=o.$.rowIndex,t=j(r,s,m),u=m.$.rowSpan,v;if(1<u){v=Math.ceil(u/2);for(var u=Math.floor(u/2),o=s+v,k=new CKEDITOR.dom.element(k.$.rows[o]),r=j(r,o),w,o=m.clone(),s=0;s<r.length;s++){if(w=r[s],w.parentNode==k.$&&s>t){o.insertBefore(new CKEDITOR.dom.element(w));break}else{w=null}}w||k.append(o)}else{u=v=1;k=o.clone();k.insertAfter(o);k.append(o=m.clone());w=j(r,s);for(t=0;t<w.length;t++){w[t].rowSpan++}}o.appendBogus();m.$.rowSpan=v;o.$.rowSpan=u;1==v&&m.removeAttribute("rowSpan");1==u&&o.removeAttribute("rowSpan");return o}function n(q,p){var m=d(q);if(1<m.length){return !1}if(p){return !0}var m=m[0],o=m.getParent(),k=o.getAscendant("table"),k=CKEDITOR.tools.buildTableMap(k),r=j(k,o.$.rowIndex,m),s=m.$.colSpan;if(1<s){o=Math.ceil(s/2),s=Math.floor(s/2)}else{for(var s=o=1,t=[],u=0;u<k.length;u++){var v=k[u];t.push(v[r]);1<v[r].rowSpan&&(u+=v[r].rowSpan-1)}for(k=0;k<t.length;k++){t[k].colSpan++}}k=m.clone();k.insertAfter(m);k.appendBogus();m.$.colSpan=o;k.$.colSpan=s;1==o&&m.removeAttribute("colSpan");1==s&&k.removeAttribute("colSpan");return k}var z=/^(?:td|th)$/;CKEDITOR.plugins.tabletools={requires:"table,dialog,contextmenu",init:function(p){function o(q){return CKEDITOR.tools.extend(q||{},{contextSensitive:1,refresh:function(r,s){this.setState(s.contains({td:1,th:1},1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}function k(q,r){var s=p.addCommand(q,r);p.addFeature(s)}var m=p.lang.table;k("cellProperties",new CKEDITOR.dialogCommand("cellProperties",o({allowedContent:"td th{width,height,border-color,background-color,white-space,vertical-align,text-align}[colspan,rowspan]",requiredContent:"table"})));CKEDITOR.dialog.add("cellProperties",this.path+"dialogs/tableCell.js");k("rowDelete",o({requiredContent:"table",exec:function(q){q=q.getSelection();b(e(q))}}));k("rowInsertBefore",o({requiredContent:"table",exec:function(q){q=q.getSelection();c(q,!0)}}));k("rowInsertAfter",o({requiredContent:"table",exec:function(q){q=q.getSelection();c(q)}}));k("columnDelete",o({requiredContent:"table",exec:function(r){for(var r=r.getSelection(),r=d(r),s=r[0],t=r[r.length-1],r=s.getAscendant("table"),u=CKEDITOR.tools.buildTableMap(r),v,w,y=[],A=0,B=u.length;A<B;A++){for(var x=0,C=u[A].length;x<C;x++){u[A][x]==s.$&&(v=x),u[A][x]==t.$&&(w=x)}}for(A=v;A<=w;A++){for(x=0;x<u.length;x++){t=u[x],s=new CKEDITOR.dom.element(r.$.rows[x]),t=new CKEDITOR.dom.element(t[A]),t.$&&(1==t.$.colSpan?t.remove():t.$.colSpan-=1,x+=t.$.rowSpan-1,s.$.cells.length||y.push(s))}}w=r.$.rows[0]&&r.$.rows[0].cells;v=new CKEDITOR.dom.element(w[v]||(v?w[v-1]:r.$.parentNode));y.length==B&&r.remove();v&&b(v,!0)}}));k("columnInsertBefore",o({requiredContent:"table",exec:function(q){q=q.getSelection();a(q,!0)}}));k("columnInsertAfter",o({requiredContent:"table",exec:function(q){q=q.getSelection();a(q)}}));k("cellDelete",o({requiredContent:"table",exec:function(q){q=q.getSelection();h(q)}}));k("cellMerge",o({allowedContent:"td[colspan,rowspan]",requiredContent:"td[colspan,rowspan]",exec:function(q){b(g(q.getSelection()),!0)}}));k("cellMergeRight",o({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(q){b(g(q.getSelection(),"right"),!0)}}));k("cellMergeDown",o({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(q){b(g(q.getSelection(),"down"),!0)}}));k("cellVerticalSplit",o({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(q){b(l(q.getSelection()))}}));k("cellHorizontalSplit",o({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(q){b(n(q.getSelection()))}}));k("cellInsertBefore",o({requiredContent:"table",exec:function(q){q=q.getSelection();i(q,!0)}}));k("cellInsertAfter",o({requiredContent:"table",exec:function(q){q=q.getSelection();i(q)}}));p.addMenuItems&&p.addMenuItems({tablecell:{label:m.cell.menu,group:"tablecell",order:1,getItems:function(){var q=p.getSelection(),r=d(q);return{tablecell_insertBefore:CKEDITOR.TRISTATE_OFF,tablecell_insertAfter:CKEDITOR.TRISTATE_OFF,tablecell_delete:CKEDITOR.TRISTATE_OFF,tablecell_merge:g(q,null,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_right:g(q,"right",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_down:g(q,"down",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_vertical:l(q,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_horizontal:n(q,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_properties:0<r.length?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED}}},tablecell_insertBefore:{label:m.cell.insertBefore,group:"tablecell",command:"cellInsertBefore",order:5},tablecell_insertAfter:{label:m.cell.insertAfter,group:"tablecell",command:"cellInsertAfter",order:10},tablecell_delete:{label:m.cell.deleteCell,group:"tablecell",command:"cellDelete",order:15},tablecell_merge:{label:m.cell.merge,group:"tablecell",command:"cellMerge",order:16},tablecell_merge_right:{label:m.cell.mergeRight,group:"tablecell",command:"cellMergeRight",order:17},tablecell_merge_down:{label:m.cell.mergeDown,group:"tablecell",command:"cellMergeDown",order:18},tablecell_split_horizontal:{label:m.cell.splitHorizontal,group:"tablecell",command:"cellHorizontalSplit",order:19},tablecell_split_vertical:{label:m.cell.splitVertical,group:"tablecell",command:"cellVerticalSplit",order:20},tablecell_properties:{label:m.cell.title,group:"tablecellproperties",command:"cellProperties",order:21},tablerow:{label:m.row.menu,group:"tablerow",order:1,getItems:function(){return{tablerow_insertBefore:CKEDITOR.TRISTATE_OFF,tablerow_insertAfter:CKEDITOR.TRISTATE_OFF,tablerow_delete:CKEDITOR.TRISTATE_OFF}}},tablerow_insertBefore:{label:m.row.insertBefore,group:"tablerow",command:"rowInsertBefore",order:5},tablerow_insertAfter:{label:m.row.insertAfter,group:"tablerow",command:"rowInsertAfter",order:10},tablerow_delete:{label:m.row.deleteRow,group:"tablerow",command:"rowDelete",order:15},tablecolumn:{label:m.column.menu,group:"tablecolumn",order:1,getItems:function(){return{tablecolumn_insertBefore:CKEDITOR.TRISTATE_OFF,tablecolumn_insertAfter:CKEDITOR.TRISTATE_OFF,tablecolumn_delete:CKEDITOR.TRISTATE_OFF}}},tablecolumn_insertBefore:{label:m.column.insertBefore,group:"tablecolumn",command:"columnInsertBefore",order:5},tablecolumn_insertAfter:{label:m.column.insertAfter,group:"tablecolumn",command:"columnInsertAfter",order:10},tablecolumn_delete:{label:m.column.deleteColumn,group:"tablecolumn",command:"columnDelete",order:15}});p.contextMenu&&p.contextMenu.addListener(function(q,r,s){return(q=s.contains({td:1,th:1},1))&&!q.isReadOnly()?{tablecell:CKEDITOR.TRISTATE_OFF,tablerow:CKEDITOR.TRISTATE_OFF,tablecolumn:CKEDITOR.TRISTATE_OFF}:null})},getSelectedCells:d};CKEDITOR.plugins.add("tabletools",CKEDITOR.plugins.tabletools)})();CKEDITOR.tools.buildTableMap=function(d){for(var d=d.$.rows,c=-1,e=[],f=0;f<d.length;f++){c++;!e[c]&&(e[c]=[]);for(var a=-1,i=0;i<d[f].cells.length;i++){var h=d[f].cells[i];for(a++;e[c][a];){a++}for(var b=isNaN(h.colSpan)?1:h.colSpan,h=isNaN(h.rowSpan)?1:h.rowSpan,j=0;j<h;j++){e[c+j]||(e[c+j]=[]);for(var g=0;g<b;g++){e[c+j][a+g]=d[f].cells[i]}}a+=b-1}}return e};(function(){function b(d){this.editor=d;this.reset()}CKEDITOR.plugins.add("undo",{init:function(g){function j(d){i.enabled&&!1!==d.data.command.canUndo&&i.save()}function k(){i.enabled=g.readOnly?!1:"wysiwyg"==g.mode;i.onChange()}var i=g.undoManager=new b(g),l=g.addCommand("undo",{exec:function(){i.undo()&&(g.selectionChange(),this.fire("afterUndo"))},startDisabled:!0,canUndo:!1}),m=g.addCommand("redo",{exec:function(){i.redo()&&(g.selectionChange(),this.fire("afterRedo"))},startDisabled:!0,canUndo:!1}),n=[CKEDITOR.CTRL+90,CKEDITOR.CTRL+89,CKEDITOR.CTRL+CKEDITOR.SHIFT+90];g.setKeystroke([[n[0],"undo"],[n[1],"redo"],[n[2],"redo"]]);g.on("contentDom",function(){var d=g.editable();d.attachListener(d,"keydown",function(e){-1<CKEDITOR.tools.indexOf(n,e.data.getKeystroke())&&e.data.preventDefault()})});i.onChange=function(){l.setState(i.undoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED);m.setState(i.redoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)};g.on("beforeCommandExec",j);g.on("afterCommandExec",j);g.on("saveSnapshot",function(d){i.save(d.data&&d.data.contentOnly)});g.on("contentDom",function(){g.editable().on("keydown",function(d){d=d.data.getKey();(8==d||46==d)&&i.type(d,0)});g.editable().on("keypress",function(d){i.type(d.data.getKey(),1)})});g.on("beforeModeUnload",function(){"wysiwyg"==g.mode&&i.save(!0)});g.on("mode",k);g.on("readOnly",k);g.ui.addButton&&(g.ui.addButton("Undo",{label:g.lang.undo.undo,command:"undo",toolbar:"undo,10"}),g.ui.addButton("Redo",{label:g.lang.undo.redo,command:"redo",toolbar:"undo,20"}));g.resetUndo=function(){i.reset();g.fire("saveSnapshot")};g.on("updateSnapshot",function(){i.currentImage&&i.update()});g.on("lockSnapshot",function(d){d=d.data;i.lock(d&&d.dontUpdate,d&&d.forceUpdate)});g.on("unlockSnapshot",i.unlock,i)}});CKEDITOR.plugins.undo={};var a=CKEDITOR.plugins.undo.Image=function(e,f){this.editor=e;e.fire("beforeUndoImage");var g=e.getSnapshot();CKEDITOR.env.ie&&g&&(g=g.replace(/\s+data-cke-expando=".*?"/g,""));this.contents=g;f||(this.bookmarks=(g=g&&e.getSelection())&&g.createBookmarks2(!0));e.fire("afterUndoImage")},c=/\b(?:href|src|name)="[^"]*?"/gi;a.prototype={equalsContent:function(d){var e=this.contents,d=d.contents;if(CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)){e=e.replace(c,""),d=d.replace(c,"")}return e!=d?!1:!0},equalsSelection:function(f){var h=this.bookmarks,f=f.bookmarks;if(h||f){if(!h||!f||h.length!=f.length){return !1}for(var i=0;i<h.length;i++){var g=h[i],j=f[i];if(g.startOffset!=j.startOffset||g.endOffset!=j.endOffset||!CKEDITOR.tools.arrayCompare(g.start,j.start)||!CKEDITOR.tools.arrayCompare(g.end,j.end)){return !1}}}return !0}};b.prototype={type:function(f,i){var j=!i&&f!=this.lastKeystroke,h=this.editor;if(!this.typing||i&&!this.wasCharacter||j){var k=new a(h),l=this.snapshots.length;CKEDITOR.tools.setTimeout(function(){var d=h.getSnapshot();CKEDITOR.env.ie&&(d=d.replace(/\s+data-cke-expando=".*?"/g,""));k.contents!=d&&l==this.snapshots.length&&(this.typing=!0,this.save(!1,k,!1)||this.snapshots.splice(this.index+1,this.snapshots.length-this.index-1),this.hasUndo=!0,this.hasRedo=!1,this.modifiersCount=this.typesCount=1,this.onChange())},0,this)}this.lastKeystroke=f;(this.wasCharacter=i)?(this.modifiersCount=0,this.typesCount++,25<this.typesCount?(this.save(!1,null,!1),this.typesCount=1):setTimeout(function(){h.fire("change")},0)):(this.typesCount=0,this.modifiersCount++,25<this.modifiersCount?(this.save(!1,null,!1),this.modifiersCount=1):setTimeout(function(){h.fire("change")},0))},reset:function(){this.lastKeystroke=0;this.snapshots=[];this.index=-1;this.limit=this.editor.config.undoStackSize||20;this.currentImage=null;this.hasRedo=this.hasUndo=!1;this.locked=null;this.resetType()},resetType:function(){this.typing=!1;delete this.lastKeystroke;this.modifiersCount=this.typesCount=0},fireChange:function(){this.hasUndo=!!this.getNextImage(!0);this.hasRedo=!!this.getNextImage(!1);this.resetType();this.onChange()},save:function(f,h,i){var g=this.editor;if(this.locked||"ready"!=g.status||"wysiwyg"!=g.mode){return !1}var j=g.editable();if(!j||"ready"!=j.status){return !1}j=this.snapshots;h||(h=new a(g));if(!1===h.contents){return !1}if(this.currentImage){if(h.equalsContent(this.currentImage)){if(f||h.equalsSelection(this.currentImage)){return !1}}else{g.fire("change")}}j.splice(this.index+1,j.length-this.index-1);j.length==this.limit&&j.shift();this.index=j.push(h)-1;this.currentImage=h;!1!==i&&this.fireChange();return !0},restoreImage:function(e){var f=this.editor,g;e.bookmarks&&(f.focus(),g=f.getSelection());this.locked=1;this.editor.loadSnapshot(e.contents);e.bookmarks?g.selectBookmarks(e.bookmarks):CKEDITOR.env.ie&&(g=this.editor.document.getBody().$.createTextRange(),g.collapse(!0),g.select());this.locked=0;this.index=e.index;this.currentImage=this.snapshots[this.index];this.update();this.fireChange();f.fire("change")},getNextImage:function(e){var g=this.snapshots,h=this.currentImage,f;if(h){if(e){for(f=this.index-1;0<=f;f--){if(e=g[f],!h.equalsContent(e)){return e.index=f,e}}}else{for(f=this.index+1;f<g.length;f++){if(e=g[f],!h.equalsContent(e)){return e.index=f,e}}}}return null},redoable:function(){return this.enabled&&this.hasRedo},undoable:function(){return this.enabled&&this.hasUndo},undo:function(){if(this.undoable()){this.save(!0);var d=this.getNextImage(!0);if(d){return this.restoreImage(d),!0}}return !1},redo:function(){if(this.redoable()&&(this.save(!0),this.redoable())){var d=this.getNextImage(!1);if(d){return this.restoreImage(d),!0}}return !1},update:function(e){if(!this.locked){e||(e=new a(this.editor));for(var f=this.index,g=this.snapshots;0<f&&this.currentImage.equalsContent(g[f-1]);){f-=1}g.splice(f,this.index-f+1,e);this.index=f;this.currentImage=e}},lock:function(e,g){if(this.locked){this.locked.level++}else{if(e){this.locked={level:1}}else{var h=null;if(g){h=!0}else{var f=new a(this.editor,!0);this.currentImage&&this.currentImage.equalsContent(f)&&(h=f)}this.locked={update:h,level:1}}}},unlock:function(){if(this.locked&&!--this.locked.level){var d=this.locked.update;this.locked=null;if(!0===d){this.update()}else{if(d){var e=new a(this.editor,!0);d.equalsContent(e)||this.update()}}}}}})();CKEDITOR.config.wsc_removeGlobalVariable=!0;CKEDITOR.plugins.add("wsc",{requires:"dialog",parseApi:function(b){b.config.wsc_onFinish="function"===typeof b.config.wsc_onFinish?b.config.wsc_onFinish:function(){};b.config.wsc_onClose="function"===typeof b.config.wsc_onClose?b.config.wsc_onClose:function(){}},parseConfig:function(b){b.config.wsc_customerId=b.config.wsc_customerId||CKEDITOR.config.wsc_customerId||"1:ua3xw1-2XyGJ3-GWruD3-6OFNT1-oXcuB1-nR6Bp4-hgQHc-EcYng3-sdRXG3-NOfFk";b.config.wsc_customDictionaryIds=b.config.wsc_customDictionaryIds||CKEDITOR.config.wsc_customDictionaryIds||"";b.config.wsc_userDictionaryName=b.config.wsc_userDictionaryName||CKEDITOR.config.wsc_userDictionaryName||"";b.config.wsc_customLoaderScript=b.config.wsc_customLoaderScript||CKEDITOR.config.wsc_customLoaderScript;CKEDITOR.config.wsc_cmd=b.config.wsc_cmd||CKEDITOR.config.wsc_cmd||"spell";CKEDITOR.config.wsc_version=CKEDITOR.version+" | %Rev%"},init:function(c){var d=CKEDITOR.env;this.parseConfig(c);this.parseApi(c);c.addCommand("checkspell",new CKEDITOR.dialogCommand("checkspell")).modes={wysiwyg:!CKEDITOR.env.opera&&!CKEDITOR.env.air&&document.domain==window.location.hostname&&!(d.ie&&(8>d.version||d.quirks))};"undefined"==typeof c.plugins.scayt&&c.ui.addButton&&c.ui.addButton("SpellChecker",{label:c.lang.wsc.toolbar,click:function(e){var f=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?e.container.getText():e.document.getBody().getText();(f=f.replace(/\s/g,""))?e.execCommand("checkspell"):alert("Nothing to check!")},toolbar:"spellchecker,10"});CKEDITOR.dialog.add("checkspell",this.path+(CKEDITOR.env.ie&&7>=CKEDITOR.env.version?"dialogs/wsc_ie.js":window.postMessage?"dialogs/wsc.js":"dialogs/wsc_ie.js"))}});CKEDITOR.config.plugins="dialogui,dialog,about,a11yhelp,dialogadvtab,basicstyles,bidi,blockquote,clipboard,button,panelbutton,panel,floatpanel,colorbutton,colordialog,templates,menu,contextmenu,div,resize,toolbar,elementspath,enterkey,entities,popup,filebrowser,find,fakeobjects,flash,floatingspace,listblock,richcombo,font,forms,format,horizontalrule,htmlwriter,iframe,wysiwygarea,image,indent,indentblock,indentlist,smiley,justify,menubutton,language,link,list,liststyle,magicline,maximize,newpage,pagebreak,pastetext,pastefromword,preview,print,removeformat,save,selectall,showblocks,showborders,sourcearea,specialchar,scayt,stylescombo,tab,table,tabletools,undo,wsc";CKEDITOR.config.skin="moono";(function(){var a=function(c,e){var d=CKEDITOR.getUrl("plugins/"+e);c=c.split(",");for(var b=0;b<c.length;b++){CKEDITOR.skin.icons[c[b]]={path:d,offset:-c[++b],bgsize:c[++b]}}};if(CKEDITOR.env.hidpi){a("about,0,,bold,24,,italic,48,,strike,72,,subscript,96,,superscript,120,,underline,144,,bidiltr,168,,bidirtl,192,,blockquote,216,,copy-rtl,240,,copy,264,,cut-rtl,288,,cut,312,,paste-rtl,336,,paste,360,,bgcolor,384,,textcolor,408,,templates-rtl,432,,templates,456,,creatediv,480,,find-rtl,504,,find,528,,replace,552,,flash,576,,button,600,,checkbox,624,,form,648,,hiddenfield,672,,imagebutton,696,,radio,720,,select-rtl,744,,select,768,,textarea-rtl,792,,textarea,816,,textfield-rtl,840,,textfield,864,,horizontalrule,888,,iframe,912,,image,936,,indent-rtl,960,,indent,984,,outdent-rtl,1008,,outdent,1032,,smiley,1056,,justifyblock,1080,,justifycenter,1104,,justifyleft,1128,,justifyright,1152,,language,1176,,anchor-rtl,1200,,anchor,1224,,link,1248,,unlink,1272,,bulletedlist-rtl,1296,,bulletedlist,1320,,numberedlist-rtl,1344,,numberedlist,1368,,maximize,1392,,newpage-rtl,1416,,newpage,1440,,pagebreak-rtl,1464,,pagebreak,1488,,pastetext-rtl,1512,,pastetext,1536,,pastefromword-rtl,1560,,pastefromword,1584,,preview-rtl,1608,,preview,1632,,print,1656,,removeformat,1680,,save,1704,,selectall,1728,,showblocks-rtl,1752,,showblocks,1776,,source-rtl,1800,,source,1824,,specialchar,1848,,scayt,1872,,table,1896,,redo-rtl,1920,,redo,1944,,undo-rtl,1968,,undo,1992,,spellchecker,2016,","icons_hidpi.png")}else{a("about,0,auto,bold,24,auto,italic,48,auto,strike,72,auto,subscript,96,auto,superscript,120,auto,underline,144,auto,bidiltr,168,auto,bidirtl,192,auto,blockquote,216,auto,copy-rtl,240,auto,copy,264,auto,cut-rtl,288,auto,cut,312,auto,paste-rtl,336,auto,paste,360,auto,bgcolor,384,auto,textcolor,408,auto,templates-rtl,432,auto,templates,456,auto,creatediv,480,auto,find-rtl,504,auto,find,528,auto,replace,552,auto,flash,576,auto,button,600,auto,checkbox,624,auto,form,648,auto,hiddenfield,672,auto,imagebutton,696,auto,radio,720,auto,select-rtl,744,auto,select,768,auto,textarea-rtl,792,auto,textarea,816,auto,textfield-rtl,840,auto,textfield,864,auto,horizontalrule,888,auto,iframe,912,auto,image,936,auto,indent-rtl,960,auto,indent,984,auto,outdent-rtl,1008,auto,outdent,1032,auto,smiley,1056,auto,justifyblock,1080,auto,justifycenter,1104,auto,justifyleft,1128,auto,justifyright,1152,auto,language,1176,auto,anchor-rtl,1200,auto,anchor,1224,auto,link,1248,auto,unlink,1272,auto,bulletedlist-rtl,1296,auto,bulletedlist,1320,auto,numberedlist-rtl,1344,auto,numberedlist,1368,auto,maximize,1392,auto,newpage-rtl,1416,auto,newpage,1440,auto,pagebreak-rtl,1464,auto,pagebreak,1488,auto,pastetext-rtl,1512,auto,pastetext,1536,auto,pastefromword-rtl,1560,auto,pastefromword,1584,auto,preview-rtl,1608,auto,preview,1632,auto,print,1656,auto,removeformat,1680,auto,save,1704,auto,selectall,1728,auto,showblocks-rtl,1752,auto,showblocks,1776,auto,source-rtl,1800,auto,source,1824,auto,specialchar,1848,auto,scayt,1872,auto,table,1896,auto,redo-rtl,1920,auto,redo,1944,auto,undo-rtl,1968,auto,undo,1992,auto,spellchecker,2016,auto","icons.png")}})();CKEDITOR.lang.languages={af:1,sq:1,ar:1,eu:1,bn:1,bs:1,bg:1,ca:1,"zh-cn":1,zh:1,hr:1,cs:1,da:1,nl:1,en:1,"en-au":1,"en-ca":1,"en-gb":1,eo:1,et:1,fo:1,fi:1,fr:1,"fr-ca":1,gl:1,ka:1,de:1,el:1,gu:1,he:1,hi:1,hu:1,is:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lv:1,lt:1,mk:1,ms:1,mn:1,no:1,nb:1,fa:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,sr:1,"sr-latn":1,si:1,sk:1,sl:1,es:1,sv:1,tt:1,th:1,tr:1,ug:1,uk:1,vi:1,cy:1}}());