CKEDITOR.lang.en={editor:"Rich Text Editor",editorPanel:"Rich Text Editor panel",common:{editorHelp:"Press ALT 0 for help",browseServer:"Browse Server",url:"URL",protocol:"Protocol",upload:"Upload",uploadSubmit:"Send it to the Server",image:"Image",flash:"Flash",form:"Form",checkbox:"Checkbox",radio:"Radio Button",textField:"Text Field",textarea:"Textarea",hiddenField:"Hidden Field",button:"Button",select:"Selection Field",imageButton:"Image Button",notSet:"<not set>",id:"Id",name:"Name",langDir:"Language Direction",langDirLtr:"Left to Right (LTR)",langDirRtl:"Right to Left (RTL)",langCode:"Language Code",longDescr:"Long Description URL",cssClass:"Stylesheet Classes",advisoryTitle:"Advisory Title",cssStyle:"Style",ok:"OK",cancel:"Cancel",close:"Close",preview:"Preview",resize:"Resize",generalTab:"General",advancedTab:"Advanced",validateNumberFailed:"This value is not a number.",confirmNewPage:"Any unsaved changes to this content will be lost. Are you sure you want to load new page?",confirmCancel:"You have changed some options. Are you sure you want to close the dialog window?",options:"Options",target:"Target",targetNew:"New Window (_blank)",targetTop:"Topmost Window (_top)",targetSelf:"Same Window (_self)",targetParent:"Parent Window (_parent)",langDirLTR:"Left to Right (LTR)",langDirRTL:"Right to Left (RTL)",styles:"Style",cssClasses:"Stylesheet Classes",width:"Width",height:"Height",align:"Alignment",alignLeft:"Left",alignRight:"Right",alignCenter:"Center",alignJustify:"Justify",alignTop:"Top",alignMiddle:"Middle",alignBottom:"Bottom",alignNone:"None",invalidValue:"Invalid value.",invalidHeight:"Height must be a number.",invalidWidth:"Width must be a number.",invalidCssLength:'Value specified for the "%1" field must be a positive number with or without a valid CSS measurement unit (px, %, in, cm, mm, em, ex, pt, or pc).',invalidHtmlLength:'Value specified for the "%1" field must be a positive number with or without a valid HTML measurement unit (px or %).',invalidInlineStyle:'Value specified for the inline style must consist of one or more tuples with the format of "name : value", separated by semi-colons.',cssLengthTooltip:"Enter a number for a value in pixels or a number with a valid CSS unit (px, %, in, cm, mm, em, ex, pt, or pc).",unavailable:'%1<span class="cke_accessibility">, unavailable</span>'},about:{copy:"Copyright &copy; $1. All rights reserved.",dlgTitle:"About CKEditor",help:"Check $1 for help.",moreInfo:"For licensing information please visit our web site:",title:"About CKEditor",userGuide:"CKEditor User's Guide"},basicstyles:{bold:"Bold",italic:"Italic",strike:"Strikethrough",subscript:"Subscript",superscript:"Superscript",underline:"Underline"},bidi:{ltr:"Text direction from left to right",rtl:"Text direction from right to left"},blockquote:{toolbar:"Block Quote"},clipboard:{copy:"Copy",copyError:"Your browser security settings don't permit the editor to automatically execute copying operations. Please use the keyboard for that (Ctrl/Cmd+C).",cut:"Cut",cutError:"Your browser security settings don't permit the editor to automatically execute cutting operations. Please use the keyboard for that (Ctrl/Cmd+X).",paste:"Paste",pasteArea:"Paste Area",pasteMsg:"Please paste inside the following box using the keyboard (<strong>Ctrl/Cmd+V</strong>) and hit OK",securityMsg:"Because of your browser security settings, the editor is not able to access your clipboard data directly. You are required to paste it again in this window.",title:"Paste"},button:{selectedLabel:"%1 (Selected)"},colorbutton:{auto:"Automatic",bgColorTitle:"Background Color",colors:{"000":"Black","800000":"Maroon","8B4513":"Saddle Brown","2F4F4F":"Dark Slate Gray","008080":"Teal","000080":"Navy","4B0082":"Indigo","696969":"Dark Gray",B22222:"Fire Brick",A52A2A:"Brown",DAA520:"Golden Rod","006400":"Dark Green","40E0D0":"Turquoise","0000CD":"Medium Blue","800080":"Purple","808080":"Gray",F00:"Red",FF8C00:"Dark Orange",FFD700:"Gold","008000":"Green","0FF":"Cyan","00F":"Blue",EE82EE:"Violet",A9A9A9:"Dim Gray",FFA07A:"Light Salmon",FFA500:"Orange",FFFF00:"Yellow","00FF00":"Lime",AFEEEE:"Pale Turquoise",ADD8E6:"Light Blue",DDA0DD:"Plum",D3D3D3:"Light Grey",FFF0F5:"Lavender Blush",FAEBD7:"Antique White",FFFFE0:"Light Yellow",F0FFF0:"Honeydew",F0FFFF:"Azure",F0F8FF:"Alice Blue",E6E6FA:"Lavender",FFF:"White"},more:"More Colors...",panelTitle:"Colors",textColorTitle:"Text Color"},colordialog:{clear:"Clear",highlight:"Highlight",options:"Color Options",selected:"Selected Color",title:"Select color"},templates:{button:"Templates",emptyListMsg:"(No templates defined)",insertOption:"Replace actual contents",options:"Template Options",selectPromptMsg:"Please select the template to open in the editor",title:"Content Templates"},contextmenu:{options:"Context Menu Options"},div:{IdInputLabel:"Id",advisoryTitleInputLabel:"Advisory Title",cssClassInputLabel:"Stylesheet Classes",edit:"Edit Div",inlineStyleInputLabel:"Inline Style",langDirLTRLabel:"Left to Right (LTR)",langDirLabel:"Language Direction",langDirRTLLabel:"Right to Left (RTL)",languageCodeInputLabel:" Language Code",remove:"Remove Div",styleSelectLabel:"Style",title:"Create Div Container",toolbar:"Create Div Container"},toolbar:{toolbarCollapse:"Collapse Toolbar",toolbarExpand:"Expand Toolbar",toolbarGroups:{document:"Document",clipboard:"Clipboard/Undo",editing:"Editing",forms:"Forms",basicstyles:"Basic Styles",paragraph:"Paragraph",links:"Links",insert:"Insert",styles:"Styles",colors:"Colors",tools:"Tools"},toolbars:"Editor toolbars"},elementspath:{eleLabel:"Elements path",eleTitle:"%1 element"},find:{find:"Find",findOptions:"Find Options",findWhat:"Find what:",matchCase:"Match case",matchCyclic:"Match cyclic",matchWord:"Match whole word",notFoundMsg:"The specified text was not found.",replace:"Replace",replaceAll:"Replace All",replaceSuccessMsg:"%1 occurrence(s) replaced.",replaceWith:"Replace with:",title:"Find and Replace"},fakeobjects:{anchor:"Anchor",flash:"Flash Animation",hiddenfield:"Hidden Field",iframe:"IFrame",unknown:"Unknown Object"},flash:{access:"Script Access",accessAlways:"Always",accessNever:"Never",accessSameDomain:"Same domain",alignAbsBottom:"Abs Bottom",alignAbsMiddle:"Abs Middle",alignBaseline:"Baseline",alignTextTop:"Text Top",bgcolor:"Background color",chkFull:"Allow Fullscreen",chkLoop:"Loop",chkMenu:"Enable Flash Menu",chkPlay:"Auto Play",flashvars:"Variables for Flash",hSpace:"HSpace",properties:"Flash Properties",propertiesTab:"Properties",quality:"Quality",qualityAutoHigh:"Auto High",qualityAutoLow:"Auto Low",qualityBest:"Best",qualityHigh:"High",qualityLow:"Low",qualityMedium:"Medium",scale:"Scale",scaleAll:"Show all",scaleFit:"Exact Fit",scaleNoBorder:"No Border",title:"Flash Properties",vSpace:"VSpace",validateHSpace:"HSpace must be a number.",validateSrc:"URL must not be empty.",validateVSpace:"VSpace must be a number.",windowMode:"Window mode",windowModeOpaque:"Opaque",windowModeTransparent:"Transparent",windowModeWindow:"Window"},font:{fontSize:{label:"Size",voiceLabel:"Font Size",panelTitle:"Font Size"},label:"Font",panelTitle:"Font Name",voiceLabel:"Font"},forms:{button:{title:"Button Properties",text:"Text (Value)",type:"Type",typeBtn:"Button",typeSbm:"Submit",typeRst:"Reset"},checkboxAndRadio:{checkboxTitle:"Checkbox Properties",radioTitle:"Radio Button Properties",value:"Value",selected:"Selected"},form:{title:"Form Properties",menu:"Form Properties",action:"Action",method:"Method",encoding:"Encoding"},hidden:{title:"Hidden Field Properties",name:"Name",value:"Value"},select:{title:"Selection Field Properties",selectInfo:"Select Info",opAvail:"Available Options",value:"Value",size:"Size",lines:"lines",chkMulti:"Allow multiple selections",opText:"Text",opValue:"Value",btnAdd:"Add",btnModify:"Modify",btnUp:"Up",btnDown:"Down",btnSetValue:"Set as selected value",btnDelete:"Delete"},textarea:{title:"Textarea Properties",cols:"Columns",rows:"Rows"},textfield:{title:"Text Field Properties",name:"Name",value:"Value",charWidth:"Character Width",maxChars:"Maximum Characters",type:"Type",typeText:"Text",typePass:"Password",typeEmail:"Email",typeSearch:"Search",typeTel:"Telephone Number",typeUrl:"URL"}},format:{label:"Format",panelTitle:"Paragraph Format",tag_address:"Address",tag_div:"Normal (DIV)",tag_h1:"Heading 1",tag_h2:"Heading 2",tag_h3:"Heading 3",tag_h4:"Heading 4",tag_h5:"Heading 5",tag_h6:"Heading 6",tag_p:"Normal",tag_pre:"Formatted"},horizontalrule:{toolbar:"Insert Horizontal Line"},iframe:{border:"Show frame border",noUrl:"Please type the iframe URL",scrolling:"Enable scrollbars",title:"IFrame Properties",toolbar:"IFrame"},image:{alertUrl:"Please type the image URL",alt:"Alternative Text",border:"Border",btnUpload:"Send it to the Server",button2Img:"Do you want to transform the selected image button on a simple image?",hSpace:"HSpace",img2Button:"Do you want to transform the selected image on a image button?",infoTab:"Image Info",linkTab:"Link",lockRatio:"Lock Ratio",menu:"Image Properties",resetSize:"Reset Size",title:"Image Properties",titleButton:"Image Button Properties",upload:"Upload",urlMissing:"Image source URL is missing.",vSpace:"VSpace",validateBorder:"Border must be a whole number.",validateHSpace:"HSpace must be a whole number.",validateVSpace:"VSpace must be a whole number."},indent:{indent:"Increase Indent",outdent:"Decrease Indent"},smiley:{options:"Smiley Options",title:"Insert a Smiley",toolbar:"Smiley"},justify:{block:"Justify",center:"Center",left:"Align Left",right:"Align Right"},language:{button:"Set language",remove:"Remove language"},link:{acccessKey:"Access Key",advanced:"Advanced",advisoryContentType:"Advisory Content Type",advisoryTitle:"Advisory Title",anchor:{toolbar:"Anchor",menu:"Edit Anchor",title:"Anchor Properties",name:"Anchor Name",errorName:"Please type the anchor name",remove:"Remove Anchor"},anchorId:"By Element Id",anchorName:"By Anchor Name",charset:"Linked Resource Charset",cssClasses:"Stylesheet Classes",emailAddress:"E-Mail Address",emailBody:"Message Body",emailSubject:"Message Subject",id:"Id",info:"Link Info",langCode:"Language Code",langDir:"Language Direction",langDirLTR:"Left to Right (LTR)",langDirRTL:"Right to Left (RTL)",menu:"Edit Link",name:"Name",noAnchors:"(No anchors available in the document)",noEmail:"Please type the e-mail address",noUrl:"Please type the link URL",other:"<other>",popupDependent:"Dependent (Netscape)",popupFeatures:"Popup Window Features",popupFullScreen:"Full Screen (IE)",popupLeft:"Left Position",popupLocationBar:"Location Bar",popupMenuBar:"Menu Bar",popupResizable:"Resizable",popupScrollBars:"Scroll Bars",popupStatusBar:"Status Bar",popupToolbar:"Toolbar",popupTop:"Top Position",rel:"Relationship",selectAnchor:"Select an Anchor",styles:"Style",tabIndex:"Tab Index",target:"Target",targetFrame:"<frame>",targetFrameName:"Target Frame Name",targetPopup:"<popup window>",targetPopupName:"Popup Window Name",title:"Link",toAnchor:"Link to anchor in the text",toEmail:"E-mail",toUrl:"URL",toolbar:"Link",type:"Link Type",unlink:"Unlink",upload:"Upload"},list:{bulletedlist:"Insert/Remove Bulleted List",numberedlist:"Insert/Remove Numbered List"},liststyle:{armenian:"Armenian numbering",bulletedTitle:"Bulleted List Properties",circle:"Circle",decimal:"Decimal (1, 2, 3, etc.)",decimalLeadingZero:"Decimal leading zero (01, 02, 03, etc.)",disc:"Disc",georgian:"Georgian numbering (an, ban, gan, etc.)",lowerAlpha:"Lower Alpha (a, b, c, d, e, etc.)",lowerGreek:"Lower Greek (alpha, beta, gamma, etc.)",lowerRoman:"Lower Roman (i, ii, iii, iv, v, etc.)",none:"None",notset:"<not set>",numberedTitle:"Numbered List Properties",square:"Square",start:"Start",type:"Type",upperAlpha:"Upper Alpha (A, B, C, D, E, etc.)",upperRoman:"Upper Roman (I, II, III, IV, V, etc.)",validateStartNumber:"List start number must be a whole number."},magicline:{title:"Insert paragraph here"},maximize:{maximize:"Maximize",minimize:"Minimize"},newpage:{toolbar:"New Page"},pagebreak:{alt:"Page Break",toolbar:"Insert Page Break for Printing"},pastetext:{button:"Paste as plain text",title:"Paste as Plain Text"},pastefromword:{confirmCleanup:"The text you want to paste seems to be copied from Word. Do you want to clean it before pasting?",error:"It was not possible to clean up the pasted data due to an internal error",title:"Paste from Word",toolbar:"Paste from Word"},preview:{preview:"Preview"},print:{toolbar:"Print"},removeformat:{toolbar:"Remove Format"},save:{toolbar:"Save"},selectall:{toolbar:"Select All"},showblocks:{toolbar:"Show Blocks"},sourcearea:{toolbar:"Source"},specialchar:{options:"Special Character Options",title:"Select Special Character",toolbar:"Insert Special Character"},scayt:{btn_about:"About SCAYT",btn_dictionaries:"Dictionaries",btn_disable:"Disable SCAYT",btn_enable:"Enable SCAYT",btn_langs:"Languages",btn_options:"Options",text_title:"Spell Check As You Type"},stylescombo:{label:"Styles",panelTitle:"Formatting Styles",panelTitle1:"Block Styles",panelTitle2:"Inline Styles",panelTitle3:"Object Styles"},table:{border:"Border size",caption:"Caption",cell:{menu:"Cell",insertBefore:"Insert Cell Before",insertAfter:"Insert Cell After",deleteCell:"Delete Cells",merge:"Merge Cells",mergeRight:"Merge Right",mergeDown:"Merge Down",splitHorizontal:"Split Cell Horizontally",splitVertical:"Split Cell Vertically",title:"Cell Properties",cellType:"Cell Type",rowSpan:"Rows Span",colSpan:"Columns Span",wordWrap:"Word Wrap",hAlign:"Horizontal Alignment",vAlign:"Vertical Alignment",alignBaseline:"Baseline",bgColor:"Background Color",borderColor:"Border Color",data:"Data",header:"Header",yes:"Yes",no:"No",invalidWidth:"Cell width must be a number.",invalidHeight:"Cell height must be a number.",invalidRowSpan:"Rows span must be a whole number.",invalidColSpan:"Columns span must be a whole number.",chooseColor:"Choose"},cellPad:"Cell padding",cellSpace:"Cell spacing",column:{menu:"Column",insertBefore:"Insert Column Before",insertAfter:"Insert Column After",deleteColumn:"Delete Columns"},columns:"Columns",deleteTable:"Delete Table",headers:"Headers",headersBoth:"Both",headersColumn:"First column",headersNone:"None",headersRow:"First Row",invalidBorder:"Border size must be a number.",invalidCellPadding:"Cell padding must be a positive number.",invalidCellSpacing:"Cell spacing must be a positive number.",invalidCols:"Number of columns must be a number greater than 0.",invalidHeight:"Table height must be a number.",invalidRows:"Number of rows must be a number greater than 0.",invalidWidth:"Table width must be a number.",menu:"Table Properties",row:{menu:"Row",insertBefore:"Insert Row Before",insertAfter:"Insert Row After",deleteRow:"Delete Rows"},rows:"Rows",summary:"Summary",title:"Table Properties",toolbar:"Table",widthPc:"percent",widthPx:"pixels",widthUnit:"width unit"},undo:{redo:"Redo",undo:"Undo"},wsc:{btnIgnore:"Ignore",btnIgnoreAll:"Ignore All",btnReplace:"Replace",btnReplaceAll:"Replace All",btnUndo:"Undo",changeTo:"Change to",errorLoading:"Error loading application service host: %s.",ieSpellDownload:"Spell checker not installed. Do you want to download it now?",manyChanges:"Spell check complete: %1 words changed",noChanges:"Spell check complete: No words changed",noMispell:"Spell check complete: No misspellings found",noSuggestions:"- No suggestions -",notAvailable:"Sorry, but service is unavailable now.",notInDic:"Not in dictionary",oneChange:"Spell check complete: One word changed",progress:"Spell check in progress...",title:"Spell Checker",toolbar:"Check Spelling"}};
CKEDITOR.editorConfig=function(a){a.contentsCss=CKEDITOR.basePath+"contents.css";a.language="en";a.ignoreEmptyParagraph=true;a.removePlugins="scayt,tabletools,contextmenu,liststyle";a.disableNativeSpellChecker=false;a.pasteFromWordRemoveStyles=true;a.pasteFromWordRemoveFontStyles=true;a.forcePasteAsPlainText=false;a.linkShowAdvancedTab=false;a.linkShowTargetTab=false};
CKEDITOR.stylesSet.add("default",[{name:"Italic Title",element:"h2",styles:{"font-style":"italic"}},{name:"Subtitle",element:"h3",styles:{color:"#aaa","font-style":"italic"}},{name:"Special Container",element:"div",styles:{padding:"5px 10px",background:"#eee",border:"1px solid #ccc"}},{name:"Marker",element:"span",attributes:{"class":"marker"}},{name:"Big",element:"big"},{name:"Small",element:"small"},{name:"Typewriter",element:"tt"},{name:"Computer Code",element:"code"},{name:"Keyboard Phrase",element:"kbd"},{name:"Sample Text",element:"samp"},{name:"Variable",element:"var"},{name:"Deleted Text",element:"del"},{name:"Inserted Text",element:"ins"},{name:"Cited Work",element:"cite"},{name:"Inline Quotation",element:"q"},{name:"Language: RTL",element:"span",attributes:{dir:"rtl"}},{name:"Language: LTR",element:"span",attributes:{dir:"ltr"}},{name:"Styled image (left)",element:"img",attributes:{"class":"left"}},{name:"Styled image (right)",element:"img",attributes:{"class":"right"}},{name:"Compact table",element:"table",attributes:{cellpadding:"5",cellspacing:"0",border:"1",bordercolor:"#ccc"},styles:{"border-collapse":"collapse"}},{name:"Borderless Table",element:"table",styles:{"border-style":"hidden","background-color":"#E6E6FA"}},{name:"Square Bulleted List",element:"ul",styles:{"list-style-type":"square"}}]);
CKEDITOR.dialog.add("anchor",function(a){var b=function(c){this._.selectedElement=c;this.setValueOf("info","txtName",c.data("cke-saved-name")||"")};return{title:a.lang.link.anchor.title,minWidth:300,minHeight:60,onOk:function(){var c=CKEDITOR.tools.trim(this.getValueOf("info","txtName")),c={id:c,name:c,"data-cke-saved-name":c};if(this._.selectedElement){this._.selectedElement.data("cke-realelement")?(c=a.document.createElement("a",{attributes:c}),a.createFakeElement(c,"cke_anchor","anchor").replace(this._.selectedElement)):this._.selectedElement.setAttributes(c)}else{var d=a.getSelection(),d=d&&d.getRanges()[0];d.collapsed?(CKEDITOR.plugins.link.synAnchorSelector&&(c["class"]="cke_anchor_empty"),CKEDITOR.plugins.link.emptyAnchorFix&&(c.contenteditable="false",c["data-cke-editable"]=1),c=a.document.createElement("a",{attributes:c}),CKEDITOR.plugins.link.fakeAnchor&&(c=a.createFakeElement(c,"cke_anchor","anchor")),d.insertNode(c)):(CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(c["class"]="cke_anchor"),c=new CKEDITOR.style({element:"a",attributes:c}),c.type=CKEDITOR.STYLE_INLINE,a.applyStyle(c))}},onHide:function(){delete this._.selectedElement},onShow:function(){var c=a.getSelection(),d=c.getSelectedElement();if(d){CKEDITOR.plugins.link.fakeAnchor?((c=CKEDITOR.plugins.link.tryRestoreFakeAnchor(a,d))&&b.call(this,c),this._.selectedElement=d):d.is("a")&&d.hasAttribute("name")&&b.call(this,d)}else{if(d=CKEDITOR.plugins.link.getSelectedLink(a)){b.call(this,d),c.selectElement(d)}}this.getContentElement("info","txtName").focus()},contents:[{id:"info",label:a.lang.link.anchor.title,accessKey:"I",elements:[{type:"text",id:"txtName",label:a.lang.link.anchor.name,required:!0,validate:function(){return !this.getValue()?(alert(a.lang.link.anchor.errorName),!1):!0}}]}]}});
CKEDITOR.dialog.add("link",function(R){var T,U;function V(b){return b.replace(/'/g,"\\$&")}function X(i){var n,k=T,l,m;n=[U,"("];for(var j=0;j<k.length;j++){l=k[j].toLowerCase(),m=i[l],0<j&&n.push(","),n.push("'",m?V(encodeURIComponent(i[l])):"","'")}n.push(")");return n.join("")}function Y(b){for(var l,i=b.length,j=[],k=0;k<i;k++){l=b.charCodeAt(k),j.push(l)}return"String.fromCharCode("+j.join(",")+")"}function Z(b){return(b=b.getAttribute("class"))?b.replace(/\s*(?:cke_anchor_empty|cke_anchor)(?:\s*$)?/g,""):""}var aa=CKEDITOR.plugins.link,W=function(){var b=this.getDialog(),j=b.getContentElement("target","popupFeatures"),b=b.getContentElement("target","linkTargetName"),i=this.getValue();if(j&&b){switch(j=j.getElement(),j.hide(),b.setValue(""),i){case"frame":b.setLabel(R.lang.link.targetFrameName);b.getElement().show();break;case"popup":j.show();b.setLabel(R.lang.link.targetPopupName);b.getElement().show();break;default:b.setValue(i),b.getElement().hide()}}},ab=/^javascript:/,ac=/^mailto:([^?]+)(?:\?(.+))?$/,ad=/subject=([^;?:@&=$,\/]*)/,a=/body=([^;?:@&=$,\/]*)/,d=/^#(.*)$/,e=/^((?:http|https|ftp|news):\/\/)?(.*)$/,f=/^(_(?:self|top|parent|blank))$/,g=/^javascript:void\(location\.href='mailto:'\+String\.fromCharCode\(([^)]+)\)(?:\+'(.*)')?\)$/,h=/^javascript:([^(]+)\(([^)]+)\)$/,J=/\s*window.open\(\s*this\.href\s*,\s*(?:'([^']*)'|null)\s*,\s*'([^']*)'\s*\)\s*;\s*return\s*false;*\s*/,K=/(?:^|,)([^=]+)=(\d+|yes|no)/gi,M=function(i,o){var k=o&&(o.data("cke-saved-href")||o.getAttribute("href"))||"",l,m,j={};k.match(ab)&&("encode"==S?k=k.replace(g,function(q,s,r){return"mailto:"+String.fromCharCode.apply(String,s.split(","))+(r&&r.replace(/\\'/g,"'"))}):S&&k.replace(h,function(b,q,r){if(q==U){j.type="email";for(var b=j.email={},q=/(^')|('$)/g,r=r.match(/[^,\s]+/g),s=r.length,u,t,v=0;v<s;v++){u=decodeURIComponent,t=r[v].replace(q,"").replace(/\\'/g,"'"),t=u(t),u=T[v].toLowerCase(),b[u]=t}b.address=[b.name,b.domain].join("@")}}));if(!j.type){if(l=k.match(d)){j.type="anchor",j.anchor={},j.anchor.name=j.anchor.id=l[1]}else{if(l=k.match(ac)){m=k.match(ad);k=k.match(a);j.type="email";var n=j.email={};n.address=l[1];m&&(n.subject=decodeURIComponent(m[1]));k&&(n.body=decodeURIComponent(k[1]))}else{k&&(m=k.match(e))?(j.type="url",j.url={},j.url.protocol=m[1],j.url.url=m[2]):j.type="url"}}}if(o){l=o.getAttribute("target");j.target={};j.adv={};if(l){l.match(f)?j.target.type=j.target.name=l:(j.target.type="frame",j.target.name=l)}else{if(l=(l=o.data("cke-pa-onclick")||o.getAttribute("onclick"))&&l.match(J)){j.target.type="popup";for(j.target.name=l[1];k=K.exec(l[2]);){("yes"==k[2]||"1"==k[2])&&!(k[1] in {height:1,width:1,top:1,left:1})?j.target[k[1]]=!0:isFinite(k[2])&&(j.target[k[1]]=k[2])}}}l=function(b,q){var r=o.getAttribute(q);null!==r&&(j.adv[b]=r||"")};l("advId","id");l("advLangDir","dir");l("advAccessKey","accessKey");j.adv.advName=o.data("cke-saved-name")||o.getAttribute("name")||"";l("advLangCode","lang");l("advTabIndex","tabindex");l("advTitle","title");l("advContentType","type");CKEDITOR.plugins.link.synAnchorSelector?j.adv.advCSSClasses=Z(o):l("advCSSClasses","class");l("advCharset","charset");l("advStyles","style");l("advRel","rel")}l=j.anchors=[];var p;if(CKEDITOR.plugins.link.emptyAnchorFix){n=i.document.getElementsByTag("a");k=0;for(m=n.count();k<m;k++){if(p=n.getItem(k),p.data("cke-saved-name")||p.hasAttribute("name")){l.push({name:p.data("cke-saved-name")||p.getAttribute("name"),id:p.getAttribute("id")})}}}else{n=new CKEDITOR.dom.nodeList(i.document.$.anchors);k=0;for(m=n.count();k<m;k++){p=n.getItem(k),l[k]={name:p.getAttribute("name"),id:p.getAttribute("id")}}}if(CKEDITOR.plugins.link.fakeAnchor){n=i.document.getElementsByTag("img");k=0;for(m=n.count();k<m;k++){(p=CKEDITOR.plugins.link.tryRestoreFakeAnchor(i,n.getItem(k)))&&l.push({name:p.getAttribute("name"),id:p.getAttribute("id")})}}this._.selectedElement=o;return j},N=function(b){b.target&&this.setValue(b.target[this.id]||"")},O=function(b){b.adv&&this.setValue(b.adv[this.id]||"")},P=function(b){b.target||(b.target={});b.target[this.id]=this.getValue()||""},Q=function(b){b.adv||(b.adv={});b.adv[this.id]=this.getValue()||""},S=R.config.emailProtection||"";S&&"encode"!=S&&(U=T=void 0,S.replace(/^([^(]+)\(([^)]+)\)$/,function(i,j,k){U=j;T=[];k.replace(/[^,\s]+/g,function(b){T.push(b)})}));var L=R.lang.common,c=R.lang.link;return{title:c.title,minWidth:350,minHeight:230,contents:[{id:"info",label:c.info,title:c.info,elements:[{id:"linkType",type:"select",label:c.type,"default":"url",items:[[c.toUrl,"url"],[c.toAnchor,"anchor"],[c.toEmail,"email"]],onChange:function(){var i=this.getDialog(),j=["urlOptions","anchorOptions","emailOptions"],k=this.getValue(),l=i.definition.getContents("upload"),l=l&&l.hidden;if(k=="url"){R.config.linkShowTargetTab&&i.showPage("target");l||i.showPage("upload")}else{i.hidePage("target");l||i.hidePage("upload")}for(l=0;l<j.length;l++){var m=i.getContentElement("info",j[l]);if(m){m=m.getElement().getParent().getParent();j[l]==k+"Options"?m.show():m.hide()}}i.layout()},setup:function(b){b.type&&this.setValue(b.type)},commit:function(b){b.type=this.getValue()}},{type:"vbox",id:"urlOptions",children:[{type:"hbox",widths:["25%","75%"],children:[{id:"protocol",type:"select",label:L.protocol,"default":"http://",items:[["http://","http://"],["https://","https://"],["ftp://","ftp://"],["news://","news://"],[c.other,""]],setup:function(b){b.url&&this.setValue(b.url.protocol||"")},commit:function(b){if(!b.url){b.url={}}b.url.protocol=this.getValue()}},{type:"text",id:"url",label:L.url,required:!0,onLoad:function(){this.allowOnChange=true},onKeyUp:function(){this.allowOnChange=false;var i=this.getDialog().getContentElement("info","protocol"),j=this.getValue(),k=/^((javascript:)|[#\/\.\?])/i,l=/^(http|https|ftp|news):\/\/(?=.)/i.exec(j);if(l){this.setValue(j.substr(l[0].length));i.setValue(l[0].toLowerCase())}else{k.test(j)&&i.setValue("")}this.allowOnChange=true},onChange:function(){if(this.allowOnChange){this.onKeyUp()}},validate:function(){var b=this.getDialog();if(b.getContentElement("info","linkType")&&b.getValueOf("info","linkType")!="url"){return true}if(/javascript\:/.test(this.getValue())){alert(L.invalidValue);return false}return this.getDialog().fakeObj?true:CKEDITOR.dialog.validate.notEmpty(c.noUrl).apply(this)},setup:function(b){this.allowOnChange=false;b.url&&this.setValue(b.url.url);this.allowOnChange=true},commit:function(b){this.onChange();if(!b.url){b.url={}}b.url.url=this.getValue();this.allowOnChange=false}}],setup:function(){this.getDialog().getContentElement("info","linkType")||this.getElement().show()}},{type:"button",id:"browse",hidden:"true",filebrowser:"info:url",label:L.browseServer}]},{type:"vbox",id:"anchorOptions",width:260,align:"center",padding:0,children:[{type:"fieldset",id:"selectAnchorText",label:c.selectAnchor,setup:function(b){b.anchors.length>0?this.getElement().show():this.getElement().hide()},children:[{type:"hbox",id:"selectAnchor",children:[{type:"select",id:"anchorName","default":"",label:c.anchorName,style:"width: 100%;",items:[[""]],setup:function(i){this.clear();this.add("");for(var j=0;j<i.anchors.length;j++){i.anchors[j].name&&this.add(i.anchors[j].name)}i.anchor&&this.setValue(i.anchor.name);(i=this.getDialog().getContentElement("info","linkType"))&&i.getValue()=="email"&&this.focus()},commit:function(b){if(!b.anchor){b.anchor={}}b.anchor.name=this.getValue()}},{type:"select",id:"anchorId","default":"",label:c.anchorId,style:"width: 100%;",items:[[""]],setup:function(i){this.clear();this.add("");for(var j=0;j<i.anchors.length;j++){i.anchors[j].id&&this.add(i.anchors[j].id)}i.anchor&&this.setValue(i.anchor.id)},commit:function(b){if(!b.anchor){b.anchor={}}b.anchor.id=this.getValue()}}],setup:function(b){b.anchors.length>0?this.getElement().show():this.getElement().hide()}}]},{type:"html",id:"noAnchors",style:"text-align: center;",html:'<div role="note" tabIndex="-1">'+CKEDITOR.tools.htmlEncode(c.noAnchors)+"</div>",focus:!0,setup:function(b){b.anchors.length<1?this.getElement().show():this.getElement().hide()}}],setup:function(){this.getDialog().getContentElement("info","linkType")||this.getElement().hide()}},{type:"vbox",id:"emailOptions",padding:1,children:[{type:"text",id:"emailAddress",label:c.emailAddress,required:!0,validate:function(){var b=this.getDialog();return !b.getContentElement("info","linkType")||b.getValueOf("info","linkType")!="email"?true:CKEDITOR.dialog.validate.notEmpty(c.noEmail).apply(this)},setup:function(b){b.email&&this.setValue(b.email.address);(b=this.getDialog().getContentElement("info","linkType"))&&b.getValue()=="email"&&this.select()},commit:function(b){if(!b.email){b.email={}}b.email.address=this.getValue()}},{type:"text",id:"emailSubject",label:c.emailSubject,setup:function(b){b.email&&this.setValue(b.email.subject)},commit:function(b){if(!b.email){b.email={}}b.email.subject=this.getValue()}},{type:"textarea",id:"emailBody",label:c.emailBody,rows:3,"default":"",setup:function(b){b.email&&this.setValue(b.email.body)},commit:function(b){if(!b.email){b.email={}}b.email.body=this.getValue()}}],setup:function(){this.getDialog().getContentElement("info","linkType")||this.getElement().hide()}}]},{id:"target",label:c.target,title:c.target,elements:[{type:"hbox",widths:["50%","50%"],children:[{type:"select",id:"linkTargetType",label:L.target,"default":"notSet",style:"width : 100%;",items:[[L.notSet,"notSet"],[c.targetFrame,"frame"],[c.targetPopup,"popup"],[L.targetNew,"_blank"],[L.targetTop,"_top"],[L.targetSelf,"_self"],[L.targetParent,"_parent"]],onChange:W,setup:function(b){b.target&&this.setValue(b.target.type||"notSet");W.call(this)},commit:function(b){if(!b.target){b.target={}}b.target.type=this.getValue()}},{type:"text",id:"linkTargetName",label:c.targetFrameName,"default":"",setup:function(b){b.target&&this.setValue(b.target.name)},commit:function(b){if(!b.target){b.target={}}b.target.name=this.getValue().replace(/\W/gi,"")}}]},{type:"vbox",width:"100%",align:"center",padding:2,id:"popupFeatures",children:[{type:"fieldset",label:c.popupFeatures,children:[{type:"hbox",children:[{type:"checkbox",id:"resizable",label:c.popupResizable,setup:N,commit:P},{type:"checkbox",id:"status",label:c.popupStatusBar,setup:N,commit:P}]},{type:"hbox",children:[{type:"checkbox",id:"location",label:c.popupLocationBar,setup:N,commit:P},{type:"checkbox",id:"toolbar",label:c.popupToolbar,setup:N,commit:P}]},{type:"hbox",children:[{type:"checkbox",id:"menubar",label:c.popupMenuBar,setup:N,commit:P},{type:"checkbox",id:"fullscreen",label:c.popupFullScreen,setup:N,commit:P}]},{type:"hbox",children:[{type:"checkbox",id:"scrollbars",label:c.popupScrollBars,setup:N,commit:P},{type:"checkbox",id:"dependent",label:c.popupDependent,setup:N,commit:P}]},{type:"hbox",children:[{type:"text",widths:["50%","50%"],labelLayout:"horizontal",label:L.width,id:"width",setup:N,commit:P},{type:"text",labelLayout:"horizontal",widths:["50%","50%"],label:c.popupLeft,id:"left",setup:N,commit:P}]},{type:"hbox",children:[{type:"text",labelLayout:"horizontal",widths:["50%","50%"],label:L.height,id:"height",setup:N,commit:P},{type:"text",labelLayout:"horizontal",label:c.popupTop,widths:["50%","50%"],id:"top",setup:N,commit:P}]}]}]}]},{id:"upload",label:c.upload,title:c.upload,hidden:!0,filebrowser:"uploadButton",elements:[{type:"file",id:"upload",label:L.upload,style:"height:40px",size:29},{type:"fileButton",id:"uploadButton",label:L.uploadSubmit,filebrowser:"info:url","for":["upload","upload"]}]},{id:"advanced",label:c.advanced,title:c.advanced,elements:[{type:"vbox",padding:1,children:[{type:"hbox",widths:["45%","35%","20%"],children:[{type:"text",id:"advId",label:c.id,setup:O,commit:Q},{type:"select",id:"advLangDir",label:c.langDir,"default":"",style:"width:110px",items:[[L.notSet,""],[c.langDirLTR,"ltr"],[c.langDirRTL,"rtl"]],setup:O,commit:Q},{type:"text",id:"advAccessKey",width:"80px",label:c.acccessKey,maxLength:1,setup:O,commit:Q}]},{type:"hbox",widths:["45%","35%","20%"],children:[{type:"text",label:c.name,id:"advName",setup:O,commit:Q},{type:"text",label:c.langCode,id:"advLangCode",width:"110px","default":"",setup:O,commit:Q},{type:"text",label:c.tabIndex,id:"advTabIndex",width:"80px",maxLength:5,setup:O,commit:Q}]}]},{type:"vbox",padding:1,children:[{type:"hbox",widths:["45%","55%"],children:[{type:"text",label:c.advisoryTitle,"default":"",id:"advTitle",setup:O,commit:Q},{type:"text",label:c.advisoryContentType,"default":"",id:"advContentType",setup:O,commit:Q}]},{type:"hbox",widths:["45%","55%"],children:[{type:"text",label:c.cssClasses,"default":"",id:"advCSSClasses",setup:O,commit:Q},{type:"text",label:c.charset,"default":"",id:"advCharset",setup:O,commit:Q}]},{type:"hbox",widths:["45%","55%"],children:[{type:"text",label:c.rel,"default":"",id:"advRel",setup:O,commit:Q},{type:"text",label:c.styles,"default":"",id:"advStyles",validate:CKEDITOR.dialog.validate.inlineStyle(R.lang.common.invalidInlineStyle),setup:O,commit:Q}]}]}]}],onShow:function(){var i=this.getParentEditor(),j=i.getSelection(),k=null;(k=aa.getSelectedLink(i))&&k.hasAttribute("href")?j.selectElement(k):k=null;this.setupContent(M.apply(this,[i,k]))},onOk:function(){var k={},l=[],m={},n=this.getParentEditor();this.commitContent(m);switch(m.type||"url"){case"url":var o=m.url&&m.url.protocol!=void 0?m.url.protocol:"http://",r=m.url&&CKEDITOR.tools.trim(m.url.url)||"";k["data-cke-saved-href"]=r.indexOf("/")===0?r:o+r;break;case"anchor":o=m.anchor&&m.anchor.id;k["data-cke-saved-href"]="#"+(m.anchor&&m.anchor.name||o||"");break;case"email":var p=m.email,o=p.address;switch(S){case"":case"encode":var r=encodeURIComponent(p.subject||""),q=encodeURIComponent(p.body||""),p=[];r&&p.push("subject="+r);q&&p.push("body="+q);p=p.length?"?"+p.join("&"):"";if(S=="encode"){o=["javascript:void(location.href='mailto:'+",Y(o)];p&&o.push("+'",V(p),"'");o.push(")")}else{o=["mailto:",o,p]}break;default:o=o.split("@",2);p.name=o[0];p.domain=o[1];o=["javascript:",X(p)]}k["data-cke-saved-href"]=o.join("")}if(m.target){if(m.target.type=="popup"){for(var o=["window.open(this.href, '",m.target.name||"","', '"],s=["resizable","status","location","toolbar","menubar","fullscreen","scrollbars","dependent"],r=s.length,p=function(b){m.target[b]&&s.push(b+"="+m.target[b])},q=0;q<r;q++){s[q]=s[q]+(m.target[s[q]]?"=yes":"=no")}p("width");p("left");p("height");p("top");o.push(s.join(","),"'); return false;");k["data-cke-pa-onclick"]=o.join("");l.push("target")}else{m.target.type!="notSet"&&m.target.name?k.target=m.target.name:l.push("target");l.push("data-cke-pa-onclick","onclick")}}if(m.adv){o=function(b,i){var j=m.adv[b];j?k[i]=j:l.push(i)};o("advId","id");o("advLangDir","dir");o("advAccessKey","accessKey");m.adv.advName?k.name=k["data-cke-saved-name"]=m.adv.advName:l=l.concat(["data-cke-saved-name","name"]);o("advLangCode","lang");o("advTabIndex","tabindex");o("advTitle","title");o("advContentType","type");o("advCSSClasses","class");o("advCharset","charset");o("advStyles","style");o("advRel","rel")}o=n.getSelection();k.href=k["data-cke-saved-href"];if(this._.selectedElement){n=this._.selectedElement;r=n.data("cke-saved-href");p=n.getHtml();n.setAttributes(k);n.removeAttributes(l);m.adv&&(m.adv.advName&&CKEDITOR.plugins.link.synAnchorSelector)&&n.addClass(n.getChildCount()?"cke_anchor":"cke_anchor_empty");if(r==p||m.type=="email"&&p.indexOf("@")!=-1){n.setHtml(m.type=="email"?m.email.address:k["data-cke-saved-href"])}o.selectElement(n);delete this._.selectedElement}else{o=o.getRanges(1)[0];if(o.collapsed){n=new CKEDITOR.dom.text(m.type=="email"?m.email.address:k["data-cke-saved-href"],n.document);o.insertNode(n);o.selectNodeContents(n)}n=new CKEDITOR.style({element:"a",attributes:k});n.type=CKEDITOR.STYLE_INLINE;n.applyToRange(o);o.select()}},onLoad:function(){R.config.linkShowAdvancedTab||this.hidePage("advanced");R.config.linkShowTargetTab||this.hidePage("target")},onFocus:function(){var b=this.getContentElement("info","linkType");if(b&&b.getValue()=="url"){b=this.getContentElement("info","url");b.select()}}}});
CKEDITOR.dialog.add("paste",function(a){function d(c){var e=new CKEDITOR.dom.document(c.document),h=e.getBody(),g=e.getById("cke_actscrpt");g&&g.remove();h.setAttribute("contenteditable",!0);if(CKEDITOR.env.ie&&8>CKEDITOR.env.version){e.getWindow().on("blur",function(){e.$.selection.empty()})}e.on("keydown",function(f){var f=f.data,i;switch(f.getKeystroke()){case 27:this.hide();i=1;break;case 9:case CKEDITOR.SHIFT+9:this.changeFocus(1),i=1}i&&f.preventDefault()},this);a.fire("ariaWidget",new CKEDITOR.dom.element(c.frameElement));e.getWindow().getFrame().removeCustomData("pendingFocus")&&h.focus()}var b=a.lang.clipboard;a.on("pasteDialogCommit",function(c){c.data&&a.fire("paste",{type:"auto",dataValue:c.data})},null,null,1000);return{title:b.title,minWidth:CKEDITOR.env.ie&&CKEDITOR.env.quirks?370:350,minHeight:CKEDITOR.env.quirks?250:245,onShow:function(){this.parts.dialog.$.offsetHeight;this.setupContent();this.parts.title.setHtml(this.customTitle||b.title);this.customTitle=null},onLoad:function(){(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&"rtl"==a.lang.dir&&this.parts.contents.setStyle("overflow","hidden")},onOk:function(){this.commitContent()},contents:[{id:"general",label:a.lang.common.generalTab,elements:[{type:"html",id:"securityMsg",html:'<div style="white-space:normal;width:340px">'+b.securityMsg+"</div>"},{type:"html",id:"pasteMsg",html:'<div style="white-space:normal;width:340px">'+b.pasteMsg+"</div>"},{type:"html",id:"editing_area",style:"width:100%;height:100%",html:"",focus:function(){var c=this.getInputElement(),e=c.getFrameDocument().getBody();!e||e.isReadOnly()?c.setCustomData("pendingFocus",1):e.focus()},setup:function(){var c=this.getDialog(),e='<html dir="'+a.config.contentsLangDirection+'" lang="'+(a.config.contentsLanguage||a.langCode)+'"><head><style>body{margin:3px;height:95%}</style></head><body><script id="cke_actscrpt" type="text/javascript">window.parent.CKEDITOR.tools.callFunction('+CKEDITOR.tools.addFunction(d,c)+",this);</script></body></html>",i=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void((function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+'})())"':"",h=CKEDITOR.dom.element.createFromHtml('<iframe class="cke_pasteframe" frameborder="0"  allowTransparency="true" src="'+i+'" role="region" aria-label="'+b.pasteArea+'" aria-describedby="'+c.getContentElement("general","pasteMsg").domId+'" aria-multiple="true"></iframe>');h.on("load",function(f){f.removeListener();f=h.getFrameDocument();f.write(e);a.focusManager.add(f.getBody());CKEDITOR.env.air&&d.call(this,f.getWindow().$)},c);h.setCustomData("dialog",c);c=this.getElement();c.setHtml("");c.append(h);if(CKEDITOR.env.ie){var j=CKEDITOR.dom.element.createFromHtml('<span tabindex="-1" style="position:absolute" role="presentation"></span>');j.on("focus",function(){setTimeout(function(){h.$.contentWindow.focus()})});c.append(j);this.focus=function(){j.focus();this.fire("focus")}}this.getInputElement=function(){return h};CKEDITOR.env.ie&&(c.setStyle("display","block"),c.setStyle("height",h.$.offsetHeight+2+"px"))},commit:function(){var e=this.getDialog().getParentEditor(),f=this.getInputElement().getFrameDocument().getBody(),g=f.getBogus(),h;g&&g.remove();h=f.getHtml();setTimeout(function(){e.fire("pasteDialogCommit",h)},0)}}]}]}});
(function(){function m(o){for(var o=o.toUpperCase(),q=n.length,p=0,t=0;t<q;++t){for(var r=n[t],s=r[1].length;o.substr(0,s)==r[1];o=o.substr(s)){p+=r[0]}}return p}function a(o){for(var o=o.toUpperCase(),q=b.length,p=1,r=1;0<o.length;r*=q){p+=b.indexOf(o.charAt(o.length-1))*r,o=o.substr(0,o.length-1)}return p}var c=CKEDITOR.htmlParser.fragment.prototype,h=CKEDITOR.htmlParser.element.prototype;c.onlyChild=h.onlyChild=function(){var o=this.children;return 1==o.length&&o[0]||null};h.removeAnyChildWithName=function(o){for(var q=this.children,p=[],s,r=0;r<q.length;r++){s=q[r],s.name&&(s.name==o&&(p.push(s),q.splice(r--,1)),p=p.concat(s.removeAnyChildWithName(o)))}return p};h.getAncestor=function(o){for(var p=this.parent;p&&(!p.name||!p.name.match(o));){p=p.parent}return p};c.firstChild=h.firstChild=function(o){for(var q,p=0;p<this.children.length;p++){if(q=this.children[p],o(q)||q.name&&(q=q.firstChild(o))){return q}}return null};h.addStyle=function(o,q,p){var s="";if("string"==typeof q){s+=o+":"+q+";"}else{if("object"==typeof o){for(var r in o){o.hasOwnProperty(r)&&(s+=r+":"+o[r]+";")}}else{s+=o}p=q}this.attributes||(this.attributes={});o=this.attributes.style||"";o=(p?[s,o]:[o,s]).join(";");this.attributes.style=o.replace(/^;+|;(?=;)/g,"")};h.getStyle=function(o){var p=this.attributes.style;if(p){return p=CKEDITOR.tools.parseCssText(p,1),p[o]}};CKEDITOR.dtd.parentOf=function(o){var q={},p;for(p in this){-1==p.indexOf("$")&&this[p][o]&&(q[p]=1)}return q};var g=/^([.\d]*)+(em|ex|px|gd|rem|vw|vh|vm|ch|mm|cm|in|pt|pc|deg|rad|ms|s|hz|khz){1}?/i,d=/^(?:\b0[^\s]*\s*){1,4}$/,l={ol:{decimal:/\d+/,"lower-roman":/^m{0,4}(cm|cd|d?c{0,3})(xc|xl|l?x{0,3})(ix|iv|v?i{0,3})$/,"upper-roman":/^M{0,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})$/,"lower-alpha":/^[a-z]+$/,"upper-alpha":/^[A-Z]+$/},ul:{disc:/[l\u00B7\u2002]/,circle:/[\u006F\u00D8]/,square:/[\u006E\u25C6]/}},n=[[1000,"M"],[900,"CM"],[500,"D"],[400,"CD"],[100,"C"],[90,"XC"],[50,"L"],[40,"XL"],[10,"X"],[9,"IX"],[5,"V"],[4,"IV"],[1,"I"]],b="ABCDEFGHIJKLMNOPQRSTUVWXYZ",i=0,j=null,k,e=CKEDITOR.plugins.pastefromword={utils:{createListBulletMarker:function(o,q){var p=new CKEDITOR.htmlParser.element("cke:listbullet");p.attributes={"cke:listsymbol":o[0]};p.add(new CKEDITOR.htmlParser.text(q));return p},isListBulletIndicator:function(o){if(/mso-list\s*:\s*Ignore/i.test(o.attributes&&o.attributes.style)){return !0}},isContainingOnlySpaces:function(o){var p;return(p=o.onlyChild())&&/^(:?\s|&nbsp;)+$/.test(p.value)},resolveList:function(o){var q=o.attributes,p;if((p=o.removeAnyChildWithName("cke:listbullet"))&&p.length&&(p=p[0])){return o.name="cke:li",q.style&&(q.style=e.filters.stylesFilter([["text-indent"],["line-height"],[/^margin(:?-left)?$/,null,function(r){r=r.split(" ");r=CKEDITOR.tools.convertToPx(r[3]||r[1]||r[0]);!i&&(null!==j&&r>j)&&(i=r-j);j=r;q["cke:indent"]=i&&Math.ceil(r/i)+1||1}],[/^mso-list$/,null,function(r){var r=r.split(" "),s=Number(r[0].match(/\d+/)),r=Number(r[1].match(/\d+/));1==r&&(s!==k&&(q["cke:reset"]=1),k=s);q["cke:indent"]=r}]])(q.style,o)||""),q["cke:indent"]||(j=0,q["cke:indent"]=1),CKEDITOR.tools.extend(q,p.attributes),!0}k=j=i=null;return !1},getStyleComponents:function(){var o=CKEDITOR.dom.element.createFromHtml('<div style="position:absolute;left:-9999px;top:-9999px;"></div>',CKEDITOR.document);CKEDITOR.document.getBody().append(o);return function(q,p,s){o.setStyle(q,p);for(var q={},p=s.length,r=0;r<p;r++){q[s[r]]=o.getStyle(s[r])}return q}}(),listDtdParents:CKEDITOR.dtd.parentOf("ol")},filters:{flattenList:function(o,q){var q="number"==typeof q?q:1,p=o.attributes,t;switch(p.type){case"a":t="lower-alpha";break;case"1":t="decimal"}for(var r=o.children,s,v=0;v<r.length;v++){if(s=r[v],s.name in CKEDITOR.dtd.$listItem){var w=s.attributes,u=s.children,x=u[u.length-1];x.name in CKEDITOR.dtd.$list&&(o.add(x,v+1),--u.length||r.splice(v--,1));s.name="cke:li";p.start&&!v&&(w.value=p.start);e.filters.stylesFilter([["tab-stops",null,function(y){(y=y.split(" ")[1].match(g))&&(j=CKEDITOR.tools.convertToPx(y[0]))}],1==q?["mso-list",null,function(y){y=y.split(" ");y=Number(y[0].match(/\d+/));y!==k&&(w["cke:reset"]=1);k=y}]:null])(w.style);w["cke:indent"]=q;w["cke:listtype"]=o.name;w["cke:list-style-type"]=t}else{if(s.name in CKEDITOR.dtd.$list){arguments.callee.apply(this,[s,q+1]);r=r.slice(0,v).concat(s.children).concat(r.slice(v+1));o.children=[];s=0;for(u=r.length;s<u;s++){o.add(r[s])}r=o.children}}}delete o.name;p["cke:list"]=1},assembleList:function(o){for(var t=o.children,s,x,v,w,z,B,o=[],y,E,A,D,C,G,F=0;F<t.length;F++){if(s=t[F],"cke:li"==s.name){if(s.name="li",x=s.attributes,A=(A=x["cke:listsymbol"])&&A.match(/^(?:[(]?)([^\s]+?)([.)]?)$/),D=C=G=null,x["cke:ignored"]){t.splice(F--,1)}else{x["cke:reset"]&&(B=w=z=null);v=Number(x["cke:indent"]);v!=w&&(E=y=null);if(A){if(E&&l[E][y].test(A[1])){D=E,C=y}else{for(var H in l){for(var J in l[H]){if(l[H][J].test(A[1])){if("ol"==H&&/alpha|roman/.test(J)){if(y=/roman/.test(J)?m(A[1]):a(A[1]),!G||y<G){G=y,D=H,C=J}}else{D=H;C=J;break}}}}}!D&&(D=A[2]?"ol":"ul")}else{D=x["cke:listtype"]||"ol",C=x["cke:list-style-type"]}E=D;y=C||("ol"==D?"decimal":"disc");C&&C!=("ol"==D?"decimal":"disc")&&s.addStyle("list-style-type",C);if("ol"==D&&A){switch(C){case"decimal":G=Number(A[1]);break;case"lower-roman":case"upper-roman":G=m(A[1]);break;case"lower-alpha":case"upper-alpha":G=a(A[1])}s.attributes.value=G}if(B){if(v>w){o.push(B=new CKEDITOR.htmlParser.element(D)),B.add(s),z.add(B)}else{if(v<w){w-=v;for(var I;w--&&(I=B.parent);){B=I.parent}}B.add(s)}t.splice(F--,1)}else{o.push(B=new CKEDITOR.htmlParser.element(D)),B.add(s),t[F]=B}z=s;w=v}}else{B&&(B=w=z=null)}}for(F=0;F<o.length;F++){if(B=o[F],H=B.children,y=y=void 0,J=B.children.length,I=y=void 0,t=/list-style-type:(.*?)(?:;|$)/,w=CKEDITOR.plugins.pastefromword.filters.stylesFilter,y=B.attributes,!t.exec(y.style)){for(z=0;z<J;z++){if(y=H[z],y.attributes.value&&Number(y.attributes.value)==z+1&&delete y.attributes.value,y=t.exec(y.attributes.style)){if(y[1]==I||!I){I=y[1]}else{I=null;break}}}if(I){for(z=0;z<J;z++){y=H[z].attributes,y.style&&(y.style=w([["list-style-type"]])(y.style)||"")}B.addStyle("list-style-type",I)}}}k=j=i=null},falsyFilter:function(){return !1},stylesFilter:function(o,p){return function(q,t){var r=[];(q||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(u,v,w){v=v.toLowerCase();"font-family"==v&&(w=w.replace(/["']/g,""));for(var A,x,z,y=0;y<o.length;y++){if(o[y]&&(u=o[y][0],A=o[y][1],x=o[y][2],z=o[y][3],v.match(u)&&(!A||w.match(A)))){v=z||v;p&&(x=x||w);"function"==typeof x&&(x=x(w,t,v));x&&x.push&&(v=x[0],x=x[1]);"string"==typeof x&&r.push([v,x]);return}}!p&&r.push([v,w])});for(var s=0;s<r.length;s++){r[s]=r[s].join(":")}return r.length?r.join(";")+";":!1}},elementMigrateFilter:function(o,p){return o?function(q){var r=p?(new CKEDITOR.style(o,p))._.definition:o;q.name=r.element;CKEDITOR.tools.extend(q.attributes,CKEDITOR.tools.clone(r.attributes));q.addStyle(CKEDITOR.style.getStyleText(r))}:function(){}},styleMigrateFilter:function(o,q){var p=this.elementMigrateFilter;return o?function(t,r){var s=new CKEDITOR.htmlParser.element(null),u={};u[q]=t;p(o,u)(s);s.children=r.children;r.children=[s];s.filter=function(){};s.parent=r}:function(){}},bogusAttrFilter:function(o,p){if(-1==p.name.indexOf("cke:")){return !1}},applyStyleFilter:null},getRules:function(v,x){var w=CKEDITOR.dtd,A=CKEDITOR.tools.extend({},w.$block,w.$listItem,w.$tableContent),y=v.config,z=this.filters,C=z.falsyFilter,E=z.stylesFilter,B=z.elementMigrateFilter,H=CKEDITOR.tools.bind(this.filters.styleMigrateFilter,this.filters),D=this.utils.createListBulletMarker,G=z.flattenList,F=z.assembleList,K=this.utils.isListBulletIndicator,I=this.utils.isContainingOnlySpaces,L=this.utils.resolveList,P=function(o){o=CKEDITOR.tools.convertToPx(o);return isNaN(o)?o:o+"px"},M=this.utils.getStyleComponents,O=this.utils.listDtdParents,J=!1!==y.pasteFromWordRemoveFontStyles,N=!1!==y.pasteFromWordRemoveStyles;return{elementNames:[[/meta|link|script/,""]],root:function(o){o.filterChildren(x);F(o)},elements:{"^":function(o){var p;CKEDITOR.env.gecko&&(p=z.applyStyleFilter)&&p(o)},$:function(o){var q=o.name||"",p=o.attributes;q in A&&p.style&&(p.style=E([[/^(:?width|height)$/,null,P]])(p.style)||"");if(q.match(/h\d/)){o.filterChildren(x);if(L(o)){return}B(y["format_"+q])(o)}else{if(q in w.$inline){o.filterChildren(x),I(o)&&delete o.name}else{if(-1!=q.indexOf(":")&&-1==q.indexOf("cke")){o.filterChildren(x);if("v:imagedata"==q){if(q=o.attributes["o:href"]){o.attributes.src=q}o.name="img";return}delete o.name}}}q in O&&(o.filterChildren(x),F(o))},style:function(o){if(CKEDITOR.env.gecko){var o=(o=o.onlyChild().value.match(/\/\* Style Definitions \*\/([\s\S]*?)\/\*/))&&o[1],p={};o&&(o.replace(/[\n\r]/g,"").replace(/(.+?)\{(.+?)\}/g,function(q,r,t){for(var r=r.split(","),q=r.length,s=0;s<q;s++){CKEDITOR.tools.trim(r[s]).replace(/^(\w+)(\.[\w-]+)?$/g,function(u,Q,R){Q=Q||"*";R=R.substring(1,R.length);R.match(/MsoNormal/)||(p[Q]||(p[Q]={}),R?p[Q][R]=t:p[Q]=t)})}}),z.applyStyleFilter=function(q){var r=p["*"]?"*":q.name,s=q.attributes&&q.attributes["class"];r in p&&(r=p[r],"object"==typeof r&&(r=r[s]),r&&q.addStyle(r,!0))})}return !1},p:function(o){if(/MsoListParagraph/i.exec(o.attributes["class"])||o.getStyle("mso-list")){var p=o.firstChild(function(q){return q.type==CKEDITOR.NODE_TEXT&&!I(q.parent)});(p=p&&p.parent)&&p.addStyle("mso-list","Ignore")}o.filterChildren(x);L(o)||(y.enterMode==CKEDITOR.ENTER_BR?(delete o.name,o.add(new CKEDITOR.htmlParser.element("br"))):B(y["format_"+(y.enterMode==CKEDITOR.ENTER_P?"p":"div")])(o))},div:function(o){var q=o.onlyChild();if(q&&"table"==q.name){var p=o.attributes;q.attributes=CKEDITOR.tools.extend(q.attributes,p);p.style&&q.addStyle(p.style);q=new CKEDITOR.htmlParser.element("div");q.addStyle("clear","both");o.add(q);delete o.name}},td:function(o){o.getAncestor("thead")&&(o.name="th")},ol:G,ul:G,dl:G,font:function(o){if(K(o.parent)){delete o.name}else{o.filterChildren(x);var p=o.attributes,q=p.style,r=o.parent;"font"==r.name?(CKEDITOR.tools.extend(r.attributes,o.attributes),q&&r.addStyle(q),delete o.name):(q=(q||"").split(";"),p.color&&("#000000"!=p.color&&q.push("color:"+p.color),delete p.color),p.face&&(q.push("font-family:"+p.face),delete p.face),p.size&&(q.push("font-size:"+(3<p.size?"large":3>p.size?"small":"medium")),delete p.size),o.name="span",o.addStyle(q.join(";")))}},span:function(o){if(K(o.parent)){return !1}o.filterChildren(x);if(I(o)){return delete o.name,null}if(K(o)){var p=o.firstChild(function(r){return r.value||"img"==r.name}),q=(p=p&&(p.value||"l."))&&p.match(/^(?:[(]?)([^\s]+?)([.)]?)$/);if(q){return p=D(q,p),(o=o.getAncestor("span"))&&/ mso-hide:\s*all|display:\s*none /.test(o.attributes.style)&&(p.attributes["cke:ignored"]=1),p}}if(q=(p=o.attributes)&&p.style){p.style=E([["line-height"],[/^font-family$/,null,!J?H(y.font_style,"family"):null],[/^font-size$/,null,!J?H(y.fontSize_style,"size"):null],[/^color$/,null,!J?H(y.colorButton_foreStyle,"color"):null],[/^background-color$/,null,!J?H(y.colorButton_backStyle,"color"):null]])(q,o)||""}p.style||delete p.style;CKEDITOR.tools.isEmpty(p)&&delete o.name;return null},b:B(y.coreStyles_bold),i:B(y.coreStyles_italic),u:B(y.coreStyles_underline),s:B(y.coreStyles_strike),sup:B(y.coreStyles_superscript),sub:B(y.coreStyles_subscript),a:function(o){o=o.attributes;o.href&&o.href.match(/^file:\/\/\/[\S]+#/i)&&(o.href=o.href.replace(/^file:\/\/\/[^#]+/i,""))},"cke:listbullet":function(o){o.getAncestor(/h\d/)&&!y.pasteFromWordNumberedHeadingToList&&delete o.name}},attributeNames:[[/^onmouse(:?out|over)/,""],[/^onload$/,""],[/(?:v|o):\w+/,""],[/^lang/,""]],attributes:{style:E(N?[[/^list-style-type$/,null],[/^margin$|^margin-(?!bottom|top)/,null,function(o,p,q){if(p.name in {p:1,div:1}){p="ltr"==y.contentsLangDirection?"margin-left":"margin-right";if("margin"==q){o=M(q,o,[p])[p]}else{if(q!=p){return null}}if(o&&!d.test(o)){return[p,o]}}return null}],[/^clear$/],[/^border.*|margin.*|vertical-align|float$/,null,function(o,p){if("img"==p.name){return o}}],[/^width|height$/,null,function(o,p){if(p.name in {table:1,td:1,th:1,img:1}){return o}}]]:[[/^mso-/],[/-color$/,null,function(o){if("transparent"==o){return !1}if(CKEDITOR.env.gecko){return o.replace(/-moz-use-text-color/g,"transparent")}}],[/^margin$/,d],["text-indent","0cm"],["page-break-before"],["tab-stops"],["display","none"],J?[/font-?/]:null],N),width:function(o,p){if(p.name in w.$tableContent){return !1}},border:function(o,p){if(p.name in w.$tableContent){return !1}},"class":C,bgcolor:C,valign:N?C:function(o,p){p.addStyle("vertical-align",o);return !1}},comment:!CKEDITOR.env.ie?function(o,p){var q=o.match(/<img.*?>/),r=o.match(/^\[if !supportLists\]([\s\S]*?)\[endif\]$/);return r?(r=(q=r[1]||q&&"l.")&&q.match(/>(?:[(]?)([^\s]+?)([.)]?)</),D(r,q)):CKEDITOR.env.gecko&&q?(q=CKEDITOR.htmlParser.fragment.fromHtml(q[0]).children[0],(r=(r=(r=p.previous)&&r.value.match(/<v:imagedata[^>]*o:href=['"](.*?)['"]/))&&r[1])&&(q.attributes.src=r),q):!1}:C}}},f=function(){this.dataFilter=new CKEDITOR.htmlParser.filter};f.prototype={toHtml:function(o){var o=CKEDITOR.htmlParser.fragment.fromHtml(o),p=new CKEDITOR.htmlParser.basicWriter;o.writeHtml(p,this.dataFilter);return p.getHtml(!0)}};CKEDITOR.cleanWord=function(o,q){CKEDITOR.env.gecko&&(o=o.replace(/(<\!--\[if[^<]*?\])--\>([\S\s]*?)<\!--(\[endif\]--\>)/gi,"$1$2$3"));CKEDITOR.env.webkit&&(o=o.replace(/(class="MsoListParagraph[^>]+><\!--\[if !supportLists\]--\>)([^<]+<span[^<]+<\/span>)(<\!--\[endif\]--\>)/gi,"$1<span>$2</span>$3"));var p=new f,s=p.dataFilter;s.addRules(CKEDITOR.plugins.pastefromword.getRules(q,s));q.fire("beforeCleanWord",{filter:s});try{o=p.toHtml(o)}catch(r){alert(q.lang.pastefromword.error)}o=o.replace(/cke:.*?".*?"/g,"");o=o.replace(/style=""/g,"");return o=o.replace(/<span>/g,"")}})();
(function(){function e(f){for(var n=0,q=0,p=0,r,o=f.$.rows.length;p<o;p++){r=f.$.rows[p];for(var j=n=0,i,h=r.cells.length;j<h;j++){i=r.cells[j],n+=i.colSpan}n>q&&(q=n)}return q}function c(f){return function(){var g=this.getValue(),g=!!(CKEDITOR.dialog.validate.integer()(g)&&0<g);g||(alert(f),this.select());return g}}function b(f,g){var h=function(k){return new CKEDITOR.dom.element(k,f.document)},j=f.editable(),i=f.plugins.dialogadvtab;return{title:f.lang.table.title,minWidth:310,minHeight:CKEDITOR.env.ie?310:280,onLoad:function(){var l=this,k=l.getContentElement("advanced","advStyles");if(k){k.on("change",function(){var m=this.getStyle("width",""),n=l.getContentElement("info","txtWidth");n&&n.setValue(m,!0);m=this.getStyle("height","");(n=l.getContentElement("info","txtHeight"))&&n.setValue(m,!0)})}},onShow:function(){var o=f.getSelection(),m=o.getRanges(),l,k=this.getContentElement("info","txtRows"),q=this.getContentElement("info","txtCols"),r=this.getContentElement("info","txtWidth"),n=this.getContentElement("info","txtHeight");"tableProperties"==g&&((o=o.getSelectedElement())&&o.is("table")?l=o:0<m.length&&(CKEDITOR.env.webkit&&m[0].shrink(CKEDITOR.NODE_ELEMENT),l=f.elementPath(m[0].getCommonAncestor(!0)).contains("table",1)),this._.selectedElement=l);l?(this.setupContent(l),k&&k.disable(),q&&q.disable()):(k&&k.enable(),q&&q.enable());r&&r.onChange();n&&n.onChange()},onOk:function(){var r=f.getSelection(),o=this._.selectedElement&&r.createBookmarks(),n=this._.selectedElement||h("table"),l={};this.commitContent(l,n);if(l.info){l=l.info;if(!this._.selectedElement){for(var s=n.append(h("tbody")),p=parseInt(l.txtRows,10)||0,q=parseInt(l.txtCols,10)||0,t=0;t<p;t++){for(var u=s.append(h("tr")),v=0;v<q;v++){u.append(h("td")).appendBogus()}}}p=l.selHeaders;if(!n.$.tHead&&("row"==p||"both"==p)){u=new CKEDITOR.dom.element(n.$.createTHead());s=n.getElementsByTag("tbody").getItem(0);s=s.getElementsByTag("tr").getItem(0);for(t=0;t<s.getChildCount();t++){q=s.getChild(t),q.type==CKEDITOR.NODE_ELEMENT&&!q.data("cke-bookmark")&&(q.renameNode("th"),q.setAttribute("scope","col"))}u.append(s.remove())}if(null!==n.$.tHead&&!("row"==p||"both"==p)){u=new CKEDITOR.dom.element(n.$.tHead);s=n.getElementsByTag("tbody").getItem(0);for(v=s.getFirst();0<u.getChildCount();){s=u.getFirst();for(t=0;t<s.getChildCount();t++){q=s.getChild(t),q.type==CKEDITOR.NODE_ELEMENT&&(q.renameNode("td"),q.removeAttribute("scope"))}s.insertBefore(v)}u.remove()}if(!this.hasColumnHeaders&&("col"==p||"both"==p)){for(u=0;u<n.$.rows.length;u++){q=new CKEDITOR.dom.element(n.$.rows[u].cells[0]),q.renameNode("th"),q.setAttribute("scope","row")}}if(this.hasColumnHeaders&&!("col"==p||"both"==p)){for(t=0;t<n.$.rows.length;t++){u=new CKEDITOR.dom.element(n.$.rows[t]),"tbody"==u.getParent().getName()&&(q=new CKEDITOR.dom.element(u.$.cells[0]),q.renameNode("td"),q.removeAttribute("scope"))}}l.txtHeight?n.setStyle("height",l.txtHeight):n.removeStyle("height");l.txtWidth?n.setStyle("width",l.txtWidth):n.removeStyle("width");n.getAttribute("style")||n.removeAttribute("style")}if(this._.selectedElement){try{r.selectBookmarks(o)}catch(w){}}else{f.insertElement(n),setTimeout(function(){var m=new CKEDITOR.dom.element(n.$.rows[0].cells[0]),k=f.createRange();k.moveToPosition(m,CKEDITOR.POSITION_AFTER_START);k.select()},0)}},contents:[{id:"info",label:f.lang.table.title,elements:[{type:"hbox",widths:[null,null],styles:["vertical-align:top"],children:[{type:"vbox",padding:0,children:[{type:"text",id:"txtRows","default":3,label:f.lang.table.rows,required:!0,controlStyle:"width:5em",validate:c(f.lang.table.invalidRows),setup:function(k){this.setValue(k.$.rows.length)},commit:a},{type:"text",id:"txtCols","default":2,label:f.lang.table.columns,required:!0,controlStyle:"width:5em",validate:c(f.lang.table.invalidCols),setup:function(k){this.setValue(e(k))},commit:a},{type:"html",html:"&nbsp;"},{type:"select",id:"selHeaders",requiredContent:"th","default":"",label:f.lang.table.headers,items:[[f.lang.table.headersNone,""],[f.lang.table.headersRow,"row"],[f.lang.table.headersColumn,"col"],[f.lang.table.headersBoth,"both"]],setup:function(k){var n=this.getDialog();n.hasColumnHeaders=!0;for(var m=0;m<k.$.rows.length;m++){var l=k.$.rows[m].cells[0];if(l&&"th"!=l.nodeName.toLowerCase()){n.hasColumnHeaders=!1;break}}null!==k.$.tHead?this.setValue(n.hasColumnHeaders?"both":"row"):this.setValue(n.hasColumnHeaders?"col":"")},commit:a},{type:"text",id:"txtBorder",requiredContent:"table[border]","default":f.filter.check("table[border]")?1:0,label:f.lang.table.border,controlStyle:"width:3em",validate:CKEDITOR.dialog.validate.number(f.lang.table.invalidBorder),setup:function(k){this.setValue(k.getAttribute("border")||"")},commit:function(k,l){this.getValue()?l.setAttribute("border",this.getValue()):l.removeAttribute("border")}},{id:"cmbAlign",type:"select",requiredContent:"table[align]","default":"",label:f.lang.common.align,items:[[f.lang.common.notSet,""],[f.lang.common.alignLeft,"left"],[f.lang.common.alignCenter,"center"],[f.lang.common.alignRight,"right"]],setup:function(k){this.setValue(k.getAttribute("align")||"")},commit:function(k,l){this.getValue()?l.setAttribute("align",this.getValue()):l.removeAttribute("align")}}]},{type:"vbox",padding:0,children:[{type:"hbox",widths:["5em"],children:[{type:"text",id:"txtWidth",requiredContent:"table{width}",controlStyle:"width:5em",label:f.lang.common.width,title:f.lang.common.cssLengthTooltip,"default":f.filter.check("table{width}")?500>j.getSize("width")?"100%":500:0,getValue:d,validate:CKEDITOR.dialog.validate.cssLength(f.lang.common.invalidCssLength.replace("%1",f.lang.common.width)),onChange:function(){var k=this.getDialog().getContentElement("advanced","advStyles");k&&k.updateStyle("width",this.getValue())},setup:function(k){this.setValue(k.getStyle("width"))},commit:a}]},{type:"hbox",widths:["5em"],children:[{type:"text",id:"txtHeight",requiredContent:"table{height}",controlStyle:"width:5em",label:f.lang.common.height,title:f.lang.common.cssLengthTooltip,"default":"",getValue:d,validate:CKEDITOR.dialog.validate.cssLength(f.lang.common.invalidCssLength.replace("%1",f.lang.common.height)),onChange:function(){var k=this.getDialog().getContentElement("advanced","advStyles");k&&k.updateStyle("height",this.getValue())},setup:function(k){(k=k.getStyle("height"))&&this.setValue(k)},commit:a}]},{type:"html",html:"&nbsp;"},{type:"text",id:"txtCellSpace",requiredContent:"table[cellspacing]",controlStyle:"width:3em",label:f.lang.table.cellSpace,"default":f.filter.check("table[cellspacing]")?1:0,validate:CKEDITOR.dialog.validate.number(f.lang.table.invalidCellSpacing),setup:function(k){this.setValue(k.getAttribute("cellSpacing")||"")},commit:function(k,l){this.getValue()?l.setAttribute("cellSpacing",this.getValue()):l.removeAttribute("cellSpacing")}},{type:"text",id:"txtCellPad",requiredContent:"table[cellpadding]",controlStyle:"width:3em",label:f.lang.table.cellPad,"default":f.filter.check("table[cellpadding]")?1:0,validate:CKEDITOR.dialog.validate.number(f.lang.table.invalidCellPadding),setup:function(k){this.setValue(k.getAttribute("cellPadding")||"")},commit:function(k,l){this.getValue()?l.setAttribute("cellPadding",this.getValue()):l.removeAttribute("cellPadding")}}]}]},{type:"html",align:"right",html:""},{type:"vbox",padding:0,children:[{type:"text",id:"txtCaption",requiredContent:"caption",label:f.lang.table.caption,setup:function(k){this.enable();k=k.getElementsByTag("caption");if(0<k.count()){var k=k.getItem(0),l=k.getFirst(CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT));l&&!l.equals(k.getBogus())?(this.disable(),this.setValue(k.getText())):(k=CKEDITOR.tools.trim(k.getText()),this.setValue(k))}},commit:function(n,m){if(this.isEnabled()){var l=this.getValue(),k=m.getElementsByTag("caption");if(l){0<k.count()?(k=k.getItem(0),k.setHtml("")):(k=new CKEDITOR.dom.element("caption",f.document),m.getChildCount()?k.insertBefore(m.getFirst()):k.appendTo(m)),k.append(new CKEDITOR.dom.text(l,f.document))}else{if(0<k.count()){for(l=k.count()-1;0<=l;l--){k.getItem(l).remove()}}}}}},{type:"text",id:"txtSummary",requiredContent:"table[summary]",label:f.lang.table.summary,setup:function(k){this.setValue(k.getAttribute("summary")||"")},commit:function(k,l){this.getValue()?l.setAttribute("summary",this.getValue()):l.removeAttribute("summary")}}]}]},i&&i.createAdvancedTab(f,null,"table")]}}var d=CKEDITOR.tools.cssLength,a=function(f){var g=this.id;f.info||(f.info={});f.info[g]=this.getValue()};CKEDITOR.dialog.add("table",function(f){return b(f,"table")});CKEDITOR.dialog.add("tableProperties",function(f){return b(f,"tableProperties")})})();
CKEDITOR.dialog.add("cellProperties",function(p){function b(c){return function(e){for(var f=c(e[0]),g=1;g<e.length;g++){if(c(e[g])!==f){f=null;break}}"undefined"!=typeof f&&(this.setValue(f),CKEDITOR.env.gecko&&("select"==this.type&&!f)&&(this.getInputElement().$.selectedIndex=-1))}}function s(c){if(c=u.exec(c.getStyle("width")||c.getAttribute("width"))){return c[2]}}var q=p.lang.table,a=q.cell,n=p.lang.common,r=CKEDITOR.dialog.validate,u=/^(\d+(?:\.\d+)?)(px|%)$/,o={type:"html",html:"&nbsp;"},v="rtl"==p.lang.dir,t=p.plugins.colordialog;return{title:a.title,minWidth:CKEDITOR.env.ie&&CKEDITOR.env.quirks?450:410,minHeight:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?230:220,contents:[{id:"info",label:a.title,accessKey:"I",elements:[{type:"hbox",widths:["40%","5%","40%"],children:[{type:"vbox",padding:0,children:[{type:"hbox",widths:["70%","30%"],children:[{type:"text",id:"width",width:"100px",label:n.width,validate:r.number(a.invalidWidth),onLoad:function(){var d=this.getDialog().getContentElement("info","widthType").getElement(),e=this.getInputElement(),f=e.getAttribute("aria-labelledby");e.setAttribute("aria-labelledby",[f,d.$.id].join(" "))},setup:b(function(c){var d=parseInt(c.getAttribute("width"),10),c=parseInt(c.getStyle("width"),10);return !isNaN(c)?c:!isNaN(d)?d:""}),commit:function(d){var e=parseInt(this.getValue(),10),f=this.getDialog().getValueOf("info","widthType")||s(d);isNaN(e)?d.removeStyle("width"):d.setStyle("width",e+f);d.removeAttribute("width")},"default":""},{type:"select",id:"widthType",label:p.lang.table.widthUnit,labelStyle:"visibility:hidden","default":"px",items:[[q.widthPx,"px"],[q.widthPc,"%"]],setup:b(s)}]},{type:"hbox",widths:["70%","30%"],children:[{type:"text",id:"height",label:n.height,width:"100px","default":"",validate:r.number(a.invalidHeight),onLoad:function(){var d=this.getDialog().getContentElement("info","htmlHeightType").getElement(),e=this.getInputElement(),f=e.getAttribute("aria-labelledby");e.setAttribute("aria-labelledby",[f,d.$.id].join(" "))},setup:b(function(c){var d=parseInt(c.getAttribute("height"),10),c=parseInt(c.getStyle("height"),10);return !isNaN(c)?c:!isNaN(d)?d:""}),commit:function(c){var d=parseInt(this.getValue(),10);isNaN(d)?c.removeStyle("height"):c.setStyle("height",CKEDITOR.tools.cssLength(d));c.removeAttribute("height")}},{id:"htmlHeightType",type:"html",html:"<br />"+q.widthPx}]},o,{type:"select",id:"wordWrap",label:a.wordWrap,"default":"yes",items:[[a.yes,"yes"],[a.no,"no"]],setup:b(function(c){var d=c.getAttribute("noWrap");if("nowrap"==c.getStyle("white-space")||d){return"no"}}),commit:function(c){"no"==this.getValue()?c.setStyle("white-space","nowrap"):c.removeStyle("white-space");c.removeAttribute("noWrap")}},o,{type:"select",id:"hAlign",label:a.hAlign,"default":"",items:[[n.notSet,""],[n.alignLeft,"left"],[n.alignCenter,"center"],[n.alignRight,"right"],[n.alignJustify,"justify"]],setup:b(function(c){var d=c.getAttribute("align");return c.getStyle("text-align")||d||""}),commit:function(c){var d=this.getValue();d?c.setStyle("text-align",d):c.removeStyle("text-align");c.removeAttribute("align")}},{type:"select",id:"vAlign",label:a.vAlign,"default":"",items:[[n.notSet,""],[n.alignTop,"top"],[n.alignMiddle,"middle"],[n.alignBottom,"bottom"],[a.alignBaseline,"baseline"]],setup:b(function(c){var d=c.getAttribute("vAlign"),c=c.getStyle("vertical-align");switch(c){case"top":case"middle":case"bottom":case"baseline":break;default:c=""}return c||d||""}),commit:function(c){var d=this.getValue();d?c.setStyle("vertical-align",d):c.removeStyle("vertical-align");c.removeAttribute("vAlign")}}]},o,{type:"vbox",padding:0,children:[{type:"select",id:"cellType",label:a.cellType,"default":"td",items:[[a.data,"td"],[a.header,"th"]],setup:b(function(c){return c.getName()}),commit:function(c){c.renameNode(this.getValue())}},o,{type:"text",id:"rowSpan",label:a.rowSpan,"default":"",validate:r.integer(a.invalidRowSpan),setup:b(function(c){if((c=parseInt(c.getAttribute("rowSpan"),10))&&1!=c){return c}}),commit:function(c){var d=parseInt(this.getValue(),10);d&&1!=d?c.setAttribute("rowSpan",this.getValue()):c.removeAttribute("rowSpan")}},{type:"text",id:"colSpan",label:a.colSpan,"default":"",validate:r.integer(a.invalidColSpan),setup:b(function(c){if((c=parseInt(c.getAttribute("colSpan"),10))&&1!=c){return c}}),commit:function(c){var d=parseInt(this.getValue(),10);d&&1!=d?c.setAttribute("colSpan",this.getValue()):c.removeAttribute("colSpan")}},o,{type:"hbox",padding:0,widths:["60%","40%"],children:[{type:"text",id:"bgColor",label:a.bgColor,"default":"",setup:b(function(c){var d=c.getAttribute("bgColor");return c.getStyle("background-color")||d}),commit:function(c){this.getValue()?c.setStyle("background-color",this.getValue()):c.removeStyle("background-color");c.removeAttribute("bgColor")}},t?{type:"button",id:"bgColorChoose","class":"colorChooser",label:a.chooseColor,onLoad:function(){this.getElement().getParent().setStyle("vertical-align","bottom")},onClick:function(){p.getColorFromDialog(function(c){c&&this.getDialog().getContentElement("info","bgColor").setValue(c);this.focus()},this)}}:o]},o,{type:"hbox",padding:0,widths:["60%","40%"],children:[{type:"text",id:"borderColor",label:a.borderColor,"default":"",setup:b(function(c){var d=c.getAttribute("borderColor");return c.getStyle("border-color")||d}),commit:function(c){this.getValue()?c.setStyle("border-color",this.getValue()):c.removeStyle("border-color");c.removeAttribute("borderColor")}},t?{type:"button",id:"borderColorChoose","class":"colorChooser",label:a.chooseColor,style:(v?"margin-right":"margin-left")+": 10px",onLoad:function(){this.getElement().getParent().setStyle("vertical-align","bottom")},onClick:function(){p.getColorFromDialog(function(c){c&&this.getDialog().getContentElement("info","borderColor").setValue(c);this.focus()},this)}}:o]}]}]}]}],onShow:function(){this.cells=CKEDITOR.plugins.tabletools.getSelectedCells(this._.editor.getSelection());this.setupContent(this.cells)},onOk:function(){for(var e=this._.editor.getSelection(),f=e.createBookmarks(),g=this.cells,h=0;h<g.length;h++){this.commitContent(g[h])}this._.editor.forceNextSelectionCheck();e.selectBookmarks(f);this._.editor.selectionChange()},onLoad:function(){var c={};this.foreach(function(d){d.setup&&d.commit&&(d.setup=CKEDITOR.tools.override(d.setup,function(e){return function(){e.apply(this,arguments);c[d.id]=d.getValue()}}),d.commit=CKEDITOR.tools.override(d.commit,function(e){return function(){c[d.id]!==d.getValue()&&e.apply(this,arguments)}}))})}}});
var ariaselect_counter=0;function ariaSelect(H,a){var E=$.extend({url:undefined,errorHandler:function(){},multiple:H.is("[multiple]"),delayBeforeAutocomplete:500,eagerLoad:true,getPostData:function(){return{}},global:false,limit:undefined,closeOnSelect:false,deselectAllowed:true,labelText:undefined,allowAjaxCache:true,},a);H.attr("multiple","multiple");var L="amc-"+ariaselect_counter+"-";++ariaselect_counter;var M=L+"selected-label";var K=L+"list";var J=[];var I=[];var n;var m=$("<div>").addClass("amc-aria-multi-complete");var F=$("<input>").attr("readonly","readonly").attr("type","text").attr("aria-label",E.labelText);var g=$("<div>").addClass("amc-box").attr("tabindex","0").attr("aria-expanded","false").attr("role","application");var j=(E.labelText==undefined)?"Selected values":"Selected values for autocomplete "+E.labelText+". Press enter to view list options.";var i=$("<span>").attr("id",M).addClass("reader-only").text(j);var h=$("<ul>").addClass("amc-selected-choices").attr("aria-labelledby",M);var u=$("<div>").addClass("amc-listbox").hide();var w=$("<div>").addClass("amc-list-substitute").attr("aria-hidden","true").text("Loading...");var A=$("<div>").addClass("amc-list-substitute").attr("aria-hidden","true").text("No matches");var p=$("<div>").addClass("amc-list-substitute").attr("aria-hidden","true").text("Error");var s=$("<input>").attr("type","text").attr("role","combobox").attr("aria-autocomplete","list").attr("aria-multiselectable",true).attr("aria-owns",K).attr("aria-activedescendant","").attr("aria-label",(E.labelText==undefined)?"Start typing then use tab key so access values":"Select "+E.labelText+", start typing then use tab key so access values");var t=$("<ul>").addClass("amc-all-choices").attr("id",K);var q=$("<div>").attr("tabindex","0").addClass("reader-only");var d=$("<div>").addClass("reader-only").attr("aria-live","assertive").attr("aria-relevant","additions");u.append(s).append(w).append(A).append(p).append(t).append(q);g.append(i).append(h);m.append(F).append(g).append(u).append(d);F.hide();H.after(m);function c(O){d.empty();d.append($("<span>").text(O))}function N(S,R,P){var O=t.find('[data-value="'+S+'"]').filter(".selected");if(O.length==1){O.find('input[type="checkbox"]').trigger("click",[R,P])}else{var Q=$.inArray(S,J);if(Q>-1){J.splice(Q,1);I.splice(Q,1);h.find('[data-value="'+S+'"]').remove();H.find('[value="'+S+'"]').removeAttr("selected");if(!R){H.trigger("change")}}}}var e=0;function z(S,R){var T=L+"c"+e;e++;var P=$("<li>").attr("data-value",S).attr("role","option").attr("id",T).append($("<span>").text(R));if(E.deselectAllowed){var U=$("<span>").attr("aria-hidden","true").html(" &times; ");var Q=$("<span>").addClass("reader-only").text("Remove "+R);var O=$("<button>").attr("type","button").append(U).append(Q);P.append(O);O.on("keydown.aria-multi-complete",function(V){V.stopPropagation()});O.on("focus.aria-multi-complete",l);O.on("click.aria-multi-complete",function(V){V.stopPropagation();V.preventDefault();var W=g.attr("aria-expanded")!="true";var X=undefined;if(P.next().length>0){X=P.next().find("button")}else{if(P.prev().length>0){X=P.prev().find("button")}}N(S);if(W&&X){X.focus()}else{g.focus()}})}else{P.on("click.aria-multi-complete",function(V){s.focus()})}h.append(P)}var f=0;function x(U,T,S){var V=L+"i"+f;f++;var Q=$("<li>").attr("role","option").attr("data-value",U);var P=$("<input>").attr("type","checkbox").attr("id",V).addClass("reader-only").appendTo(Q);if(S){Q.addClass("selected");P.attr("checked","checked")}var R=$("<label>").attr("for",V).text(T).appendTo(Q);R.on("click.aria-multi-complete",function(W){W.preventDefault();P.focus();P.trigger("click")});P.on("keydown.aria-multi-complete",function(W){if(W.which==13||W.which==10||W.which==32){W.preventDefault();P.trigger("click")}else{if(W.which==38){W.preventDefault();if(Q.prev().length>0){Q.prev().find('input[type="checkbox"]').focus()}}else{if(W.which==40){W.preventDefault();if(Q.next().length>0){Q.next().find('input[type="checkbox"]').focus()}}}}});P.on("focus",function(W){t.scrollTop(Math.min(t.scrollTop(),R.position().top+t.scrollTop()));t.scrollTop(Math.max(t.scrollTop(),(R.position().top+R.outerHeight()+t.scrollTop()-t.height())))});P.on("click",function(W,Y,X){W.preventDefault();P[0].checked=!P[0].checked;P.trigger("change",[Y,X])});var O=true;P.on("change.aria-multi-complete",function(Y,ab,Z){if(O){Y.preventDefault();if(!E.multiple&&J.length>0&&J[0]!=Q.attr("data-value")){N(J[0],true,true)}if(E.limit!=undefined&&J.length>=E.limit&&!Q.hasClass("selected")){return}var ac=$.inArray(Q.attr("data-value"),J)!=-1;if(E.deselectAllowed||!ac||Z){Q.toggleClass("selected");if(Q.hasClass("selected")){var X=Q.attr("data-value");var W=Q.text();J.push(X);I.push(W);H.find('[value="'+X+'"]').attr("selected","true");z(X,W);c(W+" selected")}else{var aa=$.inArray(Q.attr("data-value"),J);if(aa>-1){J.splice(aa,1);I.splice(aa,1);h.find('[data-value="'+Q.attr("data-value")+'"]').remove();H.find('[value="'+Q.attr("data-value")+'"]').removeAttr("selected")}}if(!ab){H.trigger("change")}}if(E.closeOnSelect){l();g.focus()}O=false;window.setTimeout(function(){O=true},10)}});P.on("blur.aria-multi-complete",B);t.append(Q);return Q}function o(R,Q,P){var O=H.find('[value="'+R+'"]');if(O.length==0){O=$("<option>").attr("value",R).text(Q);H.append(O)}if(P){O.attr("selected","selected")}else{O.removeAttr("selected")}}function y(R){var S=L+"i"+f;f++;var P=$("<li>").attr("role","option").attr("id",S).attr("tabindex",-1);var O=$("<input>").attr("type","checkbox").attr("id",S).addClass("reader-only").appendTo(P);var Q=$("<label>").attr("for",S).text("Load more options...").appendTo(P);Q.on("click.aria-multi-complete",function(T){T.preventDefault();O.focus();O.trigger("click")});O.on("keydown.aria-multi-complete",function(T){if(T.which==13||T.which==10||T.which==32){T.preventDefault();O.trigger("click")}else{if(T.which==38){T.preventDefault();if(P.prev().length>0){P.prev().find('input[type="checkbox"]').focus()}}}});O.on("click.aria-multi-complete",function(U,W){U.preventDefault();O.parent().prev().find('input[type="checkbox"]').focus();O.text("Loading...").off("click");v=$.Deferred();var T={url:E.url,type:"GET",dataType:"json",global:E.global,data:$.extend({page:R},E.getPostData()),cache:E.allowAjaxCache,success:function(X){P.remove();if(X==null||X==undefined){return}for(var Y=0;Y<X.result.length;++Y){var Z=X.result[Y];var aa=H.find('[value="'+Z.Value+'"]').attr("selected");o(Z.Value,Z.Text,aa);x(Z.Value,Z.Text,aa)}c(X.result.length+" new options");if(X.more){y(R+1)}},complete:function(X){m.attr("aria-busy","false");v.resolve()},error:function(X,Z,Y){b=jqXHR.status||"Unknown";E.errorHandler(jqXHR,Z,Y)},};var V=s.val();if(V!=undefined&&V!=""){T.data.text=V}m.attr("aria-busy","true");b=undefined;$.ajax(T)});O.on("blur.aria-multi-complete",B);t.append(P)}var v;var b=undefined;function G(){v=$.Deferred();var O=s.val();m.attr("aria-busy","true");if(E.url){ajaxOptions={url:E.url,type:"GET",dataType:"json",global:E.global,data:$.extend({page:1},E.getPostData()),cache:E.allowAjaxCache,success:function(P){t.empty();if(P==null||P==undefined){return}for(var Q=0;Q<P.result.length;++Q){var R=P.result[Q];var S=H.find('[value="'+R.Value+'"]').attr("selected");o(R.Value,R.Text,S);x(R.Value,R.Text,S)}if(P.more){y(2)}},complete:function(){m.attr("aria-busy","false");v.resolve()},error:function(P,R,Q){b=P.status||"Unknown";E.errorHandler(P,R,Q)},};if(O!=undefined&&O!=""){ajaxOptions.data.text=O}b=false;$.ajax(ajaxOptions)}else{window.setTimeout(function(){var P=H.children();if(O){P=P.filter(function(R,Q){return $(Q).text().toLowerCase().indexOf(O.toLowerCase())>=0})}t.empty();P.each(function(){x($(this).val(),$(this).text(),$(this).attr("selected"))});m.attr("aria-busy","false");v.resolve()},0)}}if(E.eagerLoad){G()}function D(){if(!E.eagerLoad&&g.attr("aria-expanded")=="false"){G()}C();u.show();g.attr("aria-expanded","true");s.focus()}function l(){u.hide();k();g.attr("aria-expanded","false");if(s.val()!=""){s.val("");if(E.eagerLoad){G()}}}function C(){w.show();var O=window.setTimeout(function(){c("Loading")},100);v.done(function(){window.clearTimeout(O);w.hide();if(b){var P="Error ("+b+") while loading results";p.text(P);p.show();c(P)}else{if(t.children().length==0){if(s.val().length>0){A.show();c("No matches")}}else{t.show();c(t.children().length+" results are available, use tab key to navigate.")}}})}function k(){w.hide();A.hide();p.hide();c();t.hide()}H.children().each(function(){if($(this).attr("selected")){var P=$(this).val();var O=$(this).text();J.push(P);I.push(O);z(P,O)}});q.on("focus.aria-multi-complete",function(){g.focus()});g.on("focus.aria-multi-complete",function(){l()});g.on("click.aria-multi-complete",function(){D()});g.on("keydown.aria-multi-complete",function(O){if(O.which==13||O.which==10||O.which==32){O.stopPropagation();O.preventDefault();if(g.attr("aria-expanded")=="false"){D()}else{l()}}});s.on("blur",B);$(document).on("click.aria-multi-complete",function(P){var O=$(P.target).closest(".amc-aria-multi-complete");if(O.length==0||O[0]!=m[0]){l()}});function B(){window.clearTimeout(n)}m.on("keydown.aria-multi-complete",function(O){if(O.which==27&&u.is(":visible")){O.stopPropagation();l();g.focus()}});s.on("keydown.aria-multi-complete",function(O){if(O.which==13||O.which==10){O.preventDefault();if(g.attr("aria-expanded")=="false"){return}if(t.children().length>0){t.children().first().find('input[type="checkbox"]').trigger("click")}}else{if(O.which==40){O.preventDefault();if(t.children().length>0){t.children().first().find('input[type="checkbox"]').focus()}}else{if((O.which==8||O.which>31)&&O.which!=37&&O.which!=39){r()}}}});s.unbind("paste");s.bind({paste:function(){r()}});function r(){window.clearTimeout(n);n=window.setTimeout(function(){k();G();C()},E.delayBeforeAutocomplete)}m.setEnabled=function(O){if(O){m.children().show();l();F.hide()}else{m.children().hide();F.val(I.join());F.show()}};m.clearAll=function(){F.val("");var P=[];for(var O in J){P.push(J[O])}for(var O in P){N(P[O])}};m.selectOrCreateChoice=function(U,T,R){var Q=t.find('[data-value="'+U+'"]');if(Q.length==0){o(U,T,R);var S=x(U,T,false);if(R){if(J.length>0&&(!E.multiple||J[0]==U)){N(J[0],true,true)}S.find('input[type="checkbox"]').trigger("click")}}else{var O=H.find('[value="'+U+'"]').attr("selected");var P=O!=undefined&&O!=null&&O!=""&&O!=false&&O!="false";if(P!=R){Q.find('input[type="checkbox"]').trigger("click")}}};m.setOption=function(O,P){E[O]=P};m.focus=function(){g.focus()};H.hide();H.data("ariaSelectReference",m);g.on("keydown",function(O){if(O.which!=9&&!O.shiftKey){D()}});return m};
$.fn.filterTable=function(a){$.fn.filterTable.defaultOptions={placeInsideTable:false,columnHeadingSelector:undefined,labelText:"Filter:",labelHiddenText:"Type search text and press Enter",searchResultText:" record(s) matched out of ",searchForComplexCells:false,hightlight:false,matchFirstOccurrenceOnly:true,escapeToClear:true,animation:false,ignoreHiddenElements:true,contentChangedEvent:"table-content-changed",filterCompletedEvent:"table-filtered",hiddenClass:"zeus-filter-hide",inputFieldCSS:"zeus-grid-filter",filterAction:undefined,filterActionParameters:undefined,headers:undefined,columnNameAttribute:undefined};if(!a){a=$.fn.filterTable.defaultOptions}else{a=$.extend($.fn.filterTable.defaultOptions,a)}if(a.searchForComplexCells){a.hightlight=false}var t=$(this);var y=t.find("thead");var u=t.find("tbody");var v=u.html();var j="filter-"+t.attr("id");var o=$("<label for="+j+">"+a.labelText+'<span class="sr-only">'+a.labelHiddenText+"</span></label>");var g=$("<input maxlength='50' placeholder='"+a.labelHiddenText+"' class='form-control "+a.inputFieldCSS+"' id=filter-"+j+" type=text  value=''>");var r="";var s=$("<span class='search-result-text'>");var l=$("<div class='form-group'>").prepend(s).prepend(g).prepend(o);var n=false;var f="zeus-filtered";var i=$("<div class='form-inline'>").prepend(l);var w=false;var e="";if(a.placeInsideTable){var x=y.find("tr").first();var b=x.find("th");if(m(a.columnHeadingSelector)){b=x.find(a.columnHeadingSelector)}l.find(s).remove();t.before(s);b.each(function(){var A=$(this);var B=i;var C=j+"-"+A.attr(a.columnNameAttribute);B.find("input").attr("id",C);B.find("label").attr("for",C);A.html(A.html()+B[0].outerHTML)})}else{i.insertBefore(t)}var k=a.placeInsideTable?t.find("input."+a.inputFieldCSS):g;k.off("keydown.zeus-grid-filter-enter");k.on("keydown.zeus-grid-filter-enter",function(A){var B=$(this);if(A.keyCode==13||A.keyCode==10){A.preventDefault();A.stopPropagation();var C=B.val();if(e!=C){c(C)}}else{if(a.escapeToClear&&A.keyCode==27){q();B.val("")}}});k.off("input.zeus-grid-filter-input");k.on("input.zeus-grid-filter-input",function(A){if(g.val()==""){q()}});if(m(a.contentChangedEvent)){t.off(a.contentChangedEvent);t.on(a.contentChangedEvent,c)}function c(){var A=g.val();if(m(A)){s.text("Filtering....");if(a.animation){t.hide()}setTimeout(function(){if(m(a.filterAction)){e=A;h(A);n=true}else{q();e=A;d(A);z();w=true;if(a.animation){t.fadeIn(300)}}},10)}}function z(){if(m($.fn.filterTable.defaultOptions.filterCompletedEvent)){t.trigger($.fn.filterTable.defaultOptions.filterCompletedEvent)}}function h(C){var B=undefined;var D=false;if(m(C)){if(a.placeInsideTable){B={};B.value=C;t.find("."+a.inputFieldCSS.split(" ")[0]).each(function(){var F=$(this);var G=F.val();var H=F.closest("th");var E=m(a.columnNameAttribute)?H.attr(a.columnNameAttribute):$.trim(H.text());B.column=G})}else{B=C}}else{B="restore";D=true}var A=$.extend(a.filterActionParameters,{filterValues:B});$.ajax({url:a.filterAction,data:A,cache:false,global:true,type:"GET",dataType:"html",headers:a.headers}).done(function(E){if(m(E)){var F=$(E);var H=t.find("tbody");H.empty();H.append(F);z();var G=($("<div>").append($(E))).find("tr:not(.hidden)").length;s.text(D?"":"Filter applied.");if(a.animation){t.fadeIn(300)}}if(!D){w=true}}).fail(function(G,F,E){console.log("filter failed (responseText:)"+G.responseText)})}function d(B){var A=0,C=0;u.find("tr").each(function(){var D=$(this);if(D.hasClass("hidden")&&a.ignoreHiddenElements){return true}C++;var E=true;D.find("td,th").each(function(){var G=$(this);if(p(G,B)){A++;if(a.hightlight){var F=G.text();G.html(F.replace(new RegExp($.zeusValidate.escapeRegex(B),"ig"),"<b>"+B.toUpperCase()+"</b>"));G.attr(f,true)}E=false;if(a.matchFirstOccurrenceOnly){return false}}});if(E){D.addClass($.fn.filterTable.defaultOptions.hiddenClass)}});s.text(A+a.searchResultText+C);console.log('"'+B+'" matched rows:'+A)}function p(C,G){var E=false;var K=C.text().toLowerCase();if(a.searchForComplexCells&&C.children().length){var F=C.find('input:not([type=hidden],[style*="display:none"],[style*="display: none"]):visible');F.each(function(){E=I($(this).val());return E?false:true});if(!E){var B=C.find('button:not(.hidden,[style*="display:none"],[style*="display: none"]):visible');B.each(function(){E=H($(this));return E?false:true})}if(!E){var A=C.find('a:not(.hidden,[style*="display:none"],[style*="display: none"])');A.each(function(){var L=$(this);if(!L.closest(".hidden").length){E=H(L)}return E?false:true})}if(!E){var J=C.find('span:not(.hidden,[style*="display:none"],[style*="display: none"]):visible');J.each(function(){E=H($(this));return E?false:true})}if(!E){var D=C.find('dl:not(.hidden,[style*="display:none"],[style*="display: none"]):visible');D.each(function(){E=I($(this).text());return E?false:true})}if(!E){E=H(C)}}else{E=I(K)}return E;function H(L){var M=L.contents().filter(function(){return this.nodeType==3});return I(M.text())}function I(L){if(typeof(L)=="string"&&typeof(G)=="string"){return L.toLowerCase().indexOf(G.toLowerCase())!=-1}return false}}function q(){if(w){s.text("");if(n){h("")}else{e="";u.find("tr").each(function(){var A=$(this);A.removeClass($.fn.filterTable.defaultOptions.hiddenClass);if(a.hightlight){A.find("td["+f+"=true]").each(function(){var B=$(this);B.removeAttr(f);B.html(B.text())})}})}w=false}}function m(A){return A!=undefined&&A!=""}};
Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}};Date.getMonthNumberFromName=function(d){var c=Date.CultureInfo.monthNames,b=Date.CultureInfo.abbreviatedMonthNames,e=d.toLowerCase();for(var a=0;a<c.length;a++){if(c[a].toLowerCase()==e||b[a].toLowerCase()==e){return a}}return -1};Date.getDayNumberFromName=function(d){var c=Date.CultureInfo.dayNames,b=Date.CultureInfo.abbreviatedDayNames,e=Date.CultureInfo.shortestDayNames,f=d.toLowerCase();for(var a=0;a<c.length;a++){if(c[a].toLowerCase()==f||b[a].toLowerCase()==f){return a}}return -1};Date.isLeapYear=function(a){return(((a%4===0)&&(a%100!==0))||(a%400===0))};Date.getDaysInMonth=function(b,a){return[31,(Date.isLeapYear(b)?29:28),31,30,31,30,31,31,30,31,30,31][a]};Date.getTimezoneOffset=function(b,a){return(a||false)?Date.CultureInfo.abbreviatedTimeZoneDST[b.toUpperCase()]:Date.CultureInfo.abbreviatedTimeZoneStandard[b.toUpperCase()]};Date.getTimezoneAbbreviation=function(c,a){var b=(a||false)?Date.CultureInfo.abbreviatedTimeZoneDST:Date.CultureInfo.abbreviatedTimeZoneStandard,d;for(d in b){if(b[d]===c){return d}}return null};Date.prototype.clone=function(){return new Date(this.getTime())};Date.prototype.compareTo=function(a){if(isNaN(this)){throw new Error(this)}if(a instanceof Date&&!isNaN(a)){return(this>a)?1:(this<a)?-1:0}else{throw new TypeError(a)}};Date.prototype.equals=function(a){return(this.compareTo(a)===0)};Date.prototype.between=function(b,a){var c=this.getTime();return c>=b.getTime()&&c<=a.getTime()};Date.prototype.addMilliseconds=function(a){this.setMilliseconds(this.getMilliseconds()+a);return this};Date.prototype.addSeconds=function(a){return this.addMilliseconds(a*1000)};Date.prototype.addMinutes=function(a){return this.addMilliseconds(a*60000)};Date.prototype.addHours=function(a){return this.addMilliseconds(a*3600000)};Date.prototype.addDays=function(a){return this.addMilliseconds(a*86400000)};Date.prototype.addWeeks=function(a){return this.addMilliseconds(a*604800000)};Date.prototype.addMonths=function(b){var a=this.getDate();this.setDate(1);this.setMonth(this.getMonth()+b);this.setDate(Math.min(a,this.getDaysInMonth()));return this};Date.prototype.addYears=function(a){return this.addMonths(a*12)};Date.prototype.add=function(a){if(typeof a=="number"){this._orient=a;return this}var b=a;if(b.millisecond||b.milliseconds){this.addMilliseconds(b.millisecond||b.milliseconds)}if(b.second||b.seconds){this.addSeconds(b.second||b.seconds)}if(b.minute||b.minutes){this.addMinutes(b.minute||b.minutes)}if(b.hour||b.hours){this.addHours(b.hour||b.hours)}if(b.month||b.months){this.addMonths(b.month||b.months)}if(b.year||b.years){this.addYears(b.year||b.years)}if(b.day||b.days){this.addDays(b.day||b.days)}return this};Date._validate=function(d,b,a,c){if(typeof d!="number"){throw new TypeError(d+" is not a Number.")}else{if(d<b||d>a){throw new RangeError(d+" is not a valid value for "+c+".")}}return true};Date.validateMillisecond=function(a){return Date._validate(a,0,999,"milliseconds")};Date.validateSecond=function(a){return Date._validate(a,0,59,"seconds")};Date.validateMinute=function(a){return Date._validate(a,0,59,"minutes")};Date.validateHour=function(a){return Date._validate(a,0,23,"hours")};Date.validateDay=function(b,c,a){return Date._validate(b,1,Date.getDaysInMonth(c,a),"days")};Date.validateMonth=function(a){return Date._validate(a,0,11,"months")};Date.validateYear=function(a){return Date._validate(a,1,9999,"seconds")};Date.prototype.set=function(a){var b=a;if(!b.millisecond&&b.millisecond!==0){b.millisecond=-1}if(!b.second&&b.second!==0){b.second=-1}if(!b.minute&&b.minute!==0){b.minute=-1}if(!b.hour&&b.hour!==0){b.hour=-1}if(!b.day&&b.day!==0){b.day=-1}if(!b.month&&b.month!==0){b.month=-1}if(!b.year&&b.year!==0){b.year=-1}if(b.millisecond!=-1&&Date.validateMillisecond(b.millisecond)){this.addMilliseconds(b.millisecond-this.getMilliseconds())}if(b.second!=-1&&Date.validateSecond(b.second)){this.addSeconds(b.second-this.getSeconds())}if(b.minute!=-1&&Date.validateMinute(b.minute)){this.addMinutes(b.minute-this.getMinutes())}if(b.hour!=-1&&Date.validateHour(b.hour)){this.addHours(b.hour-this.getHours())}if(b.month!==-1&&Date.validateMonth(b.month)){this.addMonths(b.month-this.getMonth())}if(b.year!=-1&&Date.validateYear(b.year)){this.addYears(b.year-this.getFullYear())}if(b.day!=-1&&Date.validateDay(b.day,this.getFullYear(),this.getMonth())){this.addDays(b.day-this.getDate())}if(b.timezone){this.setTimezone(b.timezone)}if(b.timezoneOffset){this.setTimezoneOffset(b.timezoneOffset)}return this};Date.prototype.clearTime=function(){this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);return this};Date.prototype.isLeapYear=function(){var a=this.getFullYear();return(((a%4===0)&&(a%100!==0))||(a%400===0))};Date.prototype.isWeekday=function(){return !(this.is().sat()||this.is().sun())};Date.prototype.getDaysInMonth=function(){return Date.getDaysInMonth(this.getFullYear(),this.getMonth())};Date.prototype.moveToFirstDayOfMonth=function(){return this.set({day:1})};Date.prototype.moveToLastDayOfMonth=function(){return this.set({day:this.getDaysInMonth()})};Date.prototype.moveToDayOfWeek=function(a,c){var b=(a-this.getDay()+7*(c||+1))%7;return this.addDays((b===0)?b+=7*(c||+1):b)};Date.prototype.moveToMonth=function(b,c){var a=(b-this.getMonth()+12*(c||+1))%12;return this.addMonths((a===0)?a+=12*(c||+1):a)};Date.prototype.getDayOfYear=function(){return Math.floor((this-new Date(this.getFullYear(),0,1))/86400000)};Date.prototype.getWeekOfYear=function(e){var j=this.getFullYear(),f=this.getMonth(),a=this.getDate();var c=e||Date.CultureInfo.firstDayOfWeek;var g=7+1-new Date(j,0,1).getDay();if(g==8){g=1}var b=((Date.UTC(j,f,a,0,0,0)-Date.UTC(j,0,1,0,0,0))/86400000)+1;var i=Math.floor((b-g+7)/7);if(i===c){j--;var h=7+1-new Date(j,0,1).getDay();if(h==2||h==8){i=53}else{i=52}}return i};Date.prototype.isDST=function(){console.log("isDST");return this.toString().match(/(E|C|M|P)(S|D)T/)[2]=="D"};Date.prototype.getTimezone=function(){return Date.getTimezoneAbbreviation(this.getUTCOffset,this.isDST())};Date.prototype.setTimezoneOffset=function(b){var a=this.getTimezoneOffset(),c=Number(b)*-6/10;this.addMinutes(c-a);return this};Date.prototype.setTimezone=function(a){return this.setTimezoneOffset(Date.getTimezoneOffset(a))};Date.prototype.getUTCOffset=function(){var a=this.getTimezoneOffset()*-10/6,b;if(a<0){b=(a-10000).toString();return b[0]+b.substr(2)}else{b=(a+10000).toString();return"+"+b.substr(1)}};Date.prototype.getDayName=function(a){return a?Date.CultureInfo.abbreviatedDayNames[this.getDay()]:Date.CultureInfo.dayNames[this.getDay()]};Date.prototype.getMonthName=function(a){return a?Date.CultureInfo.abbreviatedMonthNames[this.getMonth()]:Date.CultureInfo.monthNames[this.getMonth()]};Date.prototype._toString=Date.prototype.toString;Date.prototype.toString=function(a){var c=this;var b=function b(d){return(d.toString().length==1)?"0"+d:d};return a?a.replace(/dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?/g,function(d){switch(d){case"hh":return b(c.getHours()<13?c.getHours():(c.getHours()-12));case"h":return c.getHours()<13?c.getHours():(c.getHours()-12);case"HH":return b(c.getHours());case"H":return c.getHours();case"mm":return b(c.getMinutes());case"m":return c.getMinutes();case"ss":return b(c.getSeconds());case"s":return c.getSeconds();case"yyyy":return c.getFullYear();case"yy":return c.getFullYear().toString().substring(2,4);case"dddd":return c.getDayName();case"ddd":return c.getDayName(true);case"dd":return b(c.getDate());case"d":return c.getDate().toString();case"MMMM":return c.getMonthName();case"MMM":return c.getMonthName(true);case"MM":return b((c.getMonth()+1));case"M":return c.getMonth()+1;case"t":return c.getHours()<12?Date.CultureInfo.amDesignator.substring(0,1):Date.CultureInfo.pmDesignator.substring(0,1);case"tt":return c.getHours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator;case"zzz":case"zz":case"z":return""}}):this._toString()};Date.now=function(){return new Date()};Date.today=function(){return Date.now().clearTime()};Date.prototype._orient=+1;Date.prototype.next=function(){this._orient=+1;return this};Date.prototype.last=Date.prototype.prev=Date.prototype.previous=function(){this._orient=-1;return this};Date.prototype._is=false;Date.prototype.is=function(){this._is=true;return this};Number.prototype._dateElement="day";Number.prototype.fromNow=function(){var a={};a[this._dateElement]=this;return Date.now().add(a)};Number.prototype.ago=function(){var a={};a[this._dateElement]=this*-1;return Date.now().add(a)};(function(){var a=Date.prototype,b=Number.prototype;var e=("sunday monday tuesday wednesday thursday friday saturday").split(/\s/),n=("january february march april may june july august september october november december").split(/\s/),p=("Millisecond Second Minute Hour Day Week Month Year").split(/\s/),c;var d=function(i){return function(){if(this._is){this._is=false;return this.getDay()==i}return this.moveToDayOfWeek(i,this._orient)}};for(var g=0;g<e.length;g++){a[e[g]]=a[e[g].substring(0,3)]=d(g)}var m=function(i){return function(){if(this._is){this._is=false;return this.getMonth()===i}return this.moveToMonth(i,this._orient)}};for(var h=0;h<n.length;h++){a[n[h]]=a[n[h].substring(0,3)]=m(h)}var f=function(i){return function(){if(i.substring(i.length-1)!="s"){i+="s"}return this["add"+i](this._orient)}};var o=function(i){return function(){this._dateElement=i;return this}};for(var l=0;l<p.length;l++){c=p[l].toLowerCase();a[c]=a[c+"s"]=f(p[l]);b[c]=b[c+"s"]=o(c)}}());Date.prototype.toJSONString=function(){return this.toString("yyyy-MM-ddThh:mm:ssZ")};Date.prototype.toShortDateString=function(){return this.toString(Date.CultureInfo.formatPatterns.shortDatePattern)};Date.prototype.toLongDateString=function(){return this.toString(Date.CultureInfo.formatPatterns.longDatePattern)};Date.prototype.toShortTimeString=function(){return this.toString(Date.CultureInfo.formatPatterns.shortTimePattern)};Date.prototype.toLongTimeString=function(){return this.toString(Date.CultureInfo.formatPatterns.longTimePattern)};Date.prototype.getOrdinal=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};(function(){Date.Parsing={Exception:function(i){this.message="Parse error at '"+i.substring(0,10)+" ...'"}};var a=Date.Parsing;var b=a.Operators={rtoken:function(i){return function(k){var j=k.match(i);if(j){return([j[0],k.substring(j[0].length)])}else{throw new a.Exception(k)}}},token:function(i){return function(j){return b.rtoken(new RegExp("^s*"+j+"s*"))(j)}},stoken:function(i){return b.rtoken(new RegExp("^"+i))},until:function(i){return function(m){var k=[],l=null;while(m.length){try{l=i.call(this,m)}catch(j){k.push(l[0]);m=l[1];continue}break}return[k,m]}},many:function(i){return function(m){var l=[],k=null;while(m.length){try{k=i.call(this,m)}catch(j){return[l,m]}l.push(k[0]);m=k[1]}return[l,m]}},optional:function(i){return function(l){var k=null;try{k=i.call(this,l)}catch(j){return[null,l]}return[k[0],k[1]]}},not:function(i){return function(k){try{i.call(this,k)}catch(j){return[null,k]}throw new a.Exception(k)}},ignore:function(i){return i?function(k){var j=null;j=i.call(this,k);return[null,j[1]]}:null},product:function(){var k=arguments[0],l=Array.prototype.slice.call(arguments,1),m=[];for(var j=0;j<k.length;j++){m.push(b.each(k[j],l))}return m},cache:function(k){var i={},j=null;return function(m){try{j=i[m]=(i[m]||k.call(this,m))}catch(l){j=i[m]=l}if(j instanceof a.Exception){throw j}else{return j}}},any:function(){var i=arguments;return function(m){var l=null;for(var k=0;k<i.length;k++){if(i[k]==null){continue}try{l=(i[k].call(this,m))}catch(j){l=null}if(l){return l}}throw new a.Exception(m)}},each:function(){var i=arguments;return function(n){var m=[],l=null;for(var k=0;k<i.length;k++){if(i[k]==null){continue}try{l=(i[k].call(this,n))}catch(j){throw new a.Exception(n)}m.push(l[0]);n=l[1]}return[m,n]}},all:function(){var j=arguments,i=i;return i.each(i.optional(j))},sequence:function(k,j,i){j=j||b.rtoken(/^\s*/);i=i||null;if(k.length==1){return k[0]}return function(v){var t=null,p=null;var u=[];for(var o=0;o<k.length;o++){try{t=k[o].call(this,v)}catch(l){break}u.push(t[0]);try{p=j.call(this,t[1])}catch(m){p=null;break}v=p[1]}if(!t){throw new a.Exception(v)}if(p){throw new a.Exception(p[1])}if(i){try{t=i.call(this,t[1])}catch(n){throw new a.Exception(t[1])}}return[u,(t?t[1]:v)]}},between:function(j,l,k){k=k||j;var i=b.each(b.ignore(j),l,b.ignore(k));return function(n){var m=i.call(this,n);return[[m[0][0],r[0][2]],m[1]]}},list:function(k,j,i){j=j||b.rtoken(/^\s*/);i=i||null;return(k instanceof Array?b.each(b.product(k.slice(0,-1),b.ignore(j)),k.slice(-1),b.ignore(i)):b.each(b.many(b.each(k,b.ignore(j))),px,b.ignore(i)))},set:function(k,j,i){j=j||b.rtoken(/^\s*/);i=i||null;return function(B){var z=null,w=null,x=null,A=null,l=[[],B],v=false;for(var t=0;t<k.length;t++){x=null;w=null;z=null;v=(k.length==1);try{z=k[t].call(this,B)}catch(m){continue}A=[[z[0]],z[1]];if(z[1].length>0&&!v){try{x=j.call(this,z[1])}catch(n){v=true}}else{v=true}if(!v&&x[1].length===0){v=true}if(!v){var y=[];for(var u=0;u<k.length;u++){if(t!=u){y.push(k[u])}}w=b.set(y,j).call(this,x[1]);if(w[0].length>0){A[0]=A[0].concat(w[0]);A[1]=w[1]}}if(A[1].length<l[1].length){l=A}if(l[1].length===0){break}}if(l[0].length===0){return l}if(i){try{x=i.call(this,l[1])}catch(o){throw new a.Exception(l[1])}l[1]=x[1]}return l}},forward:function(j,i){return function(k){return j[i].call(this,k)}},replace:function(j,i){return function(l){var k=j.call(this,l);return[i,k[1]]}},process:function(j,i){return function(l){var k=j.call(this,l);return[i.call(this,k[0]),k[1]]}},min:function(i,j){return function(l){var k=j.call(this,l);if(k[0].length<i){throw new a.Exception(l)}return k}}};var c=function(i){return function(){var j=null,m=[];if(arguments.length>1){j=Array.prototype.slice.call(arguments)}else{if(arguments[0] instanceof Array){j=arguments[0]}}if(j){for(var k=0,l=j.shift();k<l.length;k++){j.unshift(l[k]);m.push(i.apply(null,j));j.shift();return m}}else{return i.apply(null,arguments)}}};var e="optional not ignore cache".split(/\s/);for(var f=0;f<e.length;f++){b[e[f]]=c(b[e[f]])}var d=function(i){return function(){if(arguments[0] instanceof Array){return i.apply(null,arguments[0])}else{return i.apply(null,arguments)}}};var h="each any all".split(/\s/);for(var g=0;g<h.length;g++){b[h[g]]=d(b[h[g]])}}());(function(){var f=function(g){var k=[];for(var j=0;j<g.length;j++){if(g[j] instanceof Array){k=k.concat(f(g[j]))}else{if(g[j]){k.push(g[j])}}}return k};Date.Grammar={};Date.Translator={hour:function(g){return function(){this.hour=Number(g)}},minute:function(g){return function(){this.minute=Number(g)}},second:function(g){return function(){this.second=Number(g)}},meridian:function(g){return function(){this.meridian=g.slice(0,1).toLowerCase()}},timezone:function(g){return function(){var j=g.replace(/[^\d\+\-]/g,"");if(j.length){this.timezoneOffset=Number(j)}else{this.timezone=g.toLowerCase()}}},day:function(j){var g=j[0];return function(){this.day=Number(g.match(/\d+/)[0])}},month:function(g){return function(){this.month=((g.length==3)?Date.getMonthNumberFromName(g):(Number(g)-1))}},year:function(g){return function(){var j=Number(g);this.year=((g.length>2)?j:(j+(((j+2000)<Date.CultureInfo.twoDigitYearMax)?2000:1900)))}},rday:function(g){return function(){switch(g){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0;this.now=true;break}}},finishExact:function(l){l=(l instanceof Array)?l:[l];var j=new Date();this.year=j.getFullYear();this.month=j.getMonth();this.day=1;this.hour=0;this.minute=0;this.second=0;for(var g=0;g<l.length;g++){if(l[g]){l[g].call(this)}}this.hour=(this.meridian=="p"&&this.hour<13)?this.hour+12:this.hour;if(this.day>Date.getDaysInMonth(this.year,this.month)){throw new RangeError(this.day+" is not a valid value for days.")}var k=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);if(this.timezone){k.set({timezone:this.timezone})}else{if(this.timezoneOffset){k.set({timezoneOffset:this.timezoneOffset})}}return k},finish:function(p){p=(p instanceof Array)?f(p):[p];if(p.length===0){return null}for(var k=0;k<p.length;k++){if(typeof p[k]=="function"){p[k].call(this)}}if(this.now){return new Date()}var o=Date.today();var l=null;var g=!!(this.days!=null||this.orient||this.operator);if(g){var j,m,n;n=((this.orient=="past"||this.operator=="subtract")?-1:1);if(this.weekday){this.unit="day";j=(Date.getDayNumberFromName(this.weekday)-o.getDay());m=7;this.days=j?((j+(n*m))%m):(n*m)}if(this.month){this.unit="month";j=(this.month-o.getMonth());m=12;this.months=j?((j+(n*m))%m):(n*m);this.month=null}if(!this.unit){this.unit="day"}if(this[this.unit+"s"]==null||this.operator!=null){if(!this.value){this.value=1}if(this.unit=="week"){this.unit="day";this.value=this.value*7}this[this.unit+"s"]=this.value*n}return o.add(this)}else{if(this.meridian&&this.hour){this.hour=(this.hour<13&&this.meridian=="p")?this.hour+12:this.hour}if(this.weekday&&!this.day){this.day=(o.addDays((Date.getDayNumberFromName(this.weekday)-o.getDay()))).getDate()}if(this.month&&!this.day){this.day=1}return o.set(this)}}};var a=Date.Parsing.Operators,h=Date.Grammar,i=Date.Translator,d;h.datePartDelimiter=a.rtoken(/^([\s\-\.\,\/\x27]+)/);h.timePartDelimiter=a.stoken(":");h.whiteSpace=a.rtoken(/^\s*/);h.generalDelimiter=a.rtoken(/^(([\s\,]|at|on)+)/);var b={};h.ctoken=function(l){var j=b[l];if(!j){var g=Date.CultureInfo.regexPatterns;var m=l.split(/\s+/),n=[];for(var k=0;k<m.length;k++){n.push(a.replace(a.rtoken(g[m[k]]),m[k]))}j=b[l]=a.any.apply(null,n)}return j};h.ctoken2=function(g){return a.rtoken(Date.CultureInfo.regexPatterns[g])};h.h=a.cache(a.process(a.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),i.hour));h.hh=a.cache(a.process(a.rtoken(/^(0[0-9]|1[0-2])/),i.hour));h.H=a.cache(a.process(a.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),i.hour));h.HH=a.cache(a.process(a.rtoken(/^([0-1][0-9]|2[0-3])/),i.hour));h.m=a.cache(a.process(a.rtoken(/^([0-5][0-9]|[0-9])/),i.minute));h.mm=a.cache(a.process(a.rtoken(/^[0-5][0-9]/),i.minute));h.s=a.cache(a.process(a.rtoken(/^([0-5][0-9]|[0-9])/),i.second));h.ss=a.cache(a.process(a.rtoken(/^[0-5][0-9]/),i.second));h.hms=a.cache(a.sequence([h.H,h.mm,h.ss],h.timePartDelimiter));h.t=a.cache(a.process(h.ctoken2("shortMeridian"),i.meridian));h.tt=a.cache(a.process(h.ctoken2("longMeridian"),i.meridian));h.z=a.cache(a.process(a.rtoken(/^(\+|\-)?\s*\d\d\d\d?/),i.timezone));h.zz=a.cache(a.process(a.rtoken(/^(\+|\-)\s*\d\d\d\d/),i.timezone));h.zzz=a.cache(a.process(h.ctoken2("timezone"),i.timezone));h.timeSuffix=a.each(a.ignore(h.whiteSpace),a.set([h.tt,h.zzz]));h.time=a.each(a.optional(a.ignore(a.stoken("T"))),h.hms,h.timeSuffix);h.d=a.cache(a.process(a.each(a.rtoken(/^([0-2]\d|3[0-1]|\d)/),a.optional(h.ctoken2("ordinalSuffix"))),i.day));h.dd=a.cache(a.process(a.each(a.rtoken(/^([0-2]\d|3[0-1])/),a.optional(h.ctoken2("ordinalSuffix"))),i.day));h.ddd=h.dddd=a.cache(a.process(h.ctoken("sun mon tue wed thu fri sat"),function(g){return function(){this.weekday=g}}));h.M=a.cache(a.process(a.rtoken(/^(1[0-2]|0\d|\d)/),i.month));h.MM=a.cache(a.process(a.rtoken(/^(1[0-2]|0\d)/),i.month));h.MMM=h.MMMM=a.cache(a.process(h.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),i.month));h.y=a.cache(a.process(a.rtoken(/^(\d\d?)/),i.year));h.yy=a.cache(a.process(a.rtoken(/^(\d\d)/),i.year));h.yyy=a.cache(a.process(a.rtoken(/^(\d\d?\d?\d?)/),i.year));h.yyyy=a.cache(a.process(a.rtoken(/^(\d\d\d\d)/),i.year));d=function(){return a.each(a.any.apply(null,arguments),a.not(h.ctoken2("timeContext")))};h.day=d(h.d,h.dd);h.month=d(h.M,h.MMM);h.year=d(h.yyyy,h.yy);h.orientation=a.process(h.ctoken("past future"),function(g){return function(){this.orient=g}});h.operator=a.process(h.ctoken("add subtract"),function(g){return function(){this.operator=g}});h.rday=a.process(h.ctoken("yesterday tomorrow today now"),i.rday);h.unit=a.process(h.ctoken("minute hour day week month year"),function(g){return function(){this.unit=g}});h.value=a.process(a.rtoken(/^\d\d?(st|nd|rd|th)?/),function(g){return function(){this.value=g.replace(/\D/g,"")}});h.expression=a.set([h.rday,h.operator,h.value,h.unit,h.orientation,h.ddd,h.MMM]);d=function(){return a.set(arguments,h.datePartDelimiter)};h.mdy=d(h.ddd,h.month,h.day,h.year);h.ymd=d(h.ddd,h.year,h.month,h.day);h.dmy=d(h.ddd,h.day,h.month,h.year);h.date=function(g){return((h[Date.CultureInfo.dateElementOrder]||h.mdy).call(this,g))};h.format=a.process(a.many(a.any(a.process(a.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(g){if(h[g]){return h[g]}else{throw Date.Parsing.Exception(g)}}),a.process(a.rtoken(/^[^dMyhHmstz]+/),function(g){return a.ignore(a.stoken(g))}))),function(g){return a.process(a.each.apply(null,g),i.finishExact)});var c={};var e=function(g){return c[g]=(c[g]||h.format(g)[0])};h.formats=function(g){if(g instanceof Array){var k=[];for(var j=0;j<g.length;j++){k.push(e(g[j]))}return a.any.apply(null,k)}else{return e(g)}};h._formats=h.formats(["yyyy-MM-ddTHH:mm:ss","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","d"]);h._start=a.process(a.set([h.date,h.time,h.expression],h.generalDelimiter,h.whiteSpace),i.finish);h.start=function(k){try{var j=h._formats.call({},k);if(j[1].length===0){return j}}catch(g){}return h._start.call({},k)}}());Date._parse=Date.parse;Date.parse=function(c){var b=null;if(!c){return null}try{b=Date.Grammar.start.call({},c)}catch(a){return null}return((b[1].length===0)?b[0]:null)};Date.getParseFunction=function(b){var a=Date.Grammar.formats(b);return function(f){var d=null;try{d=a.call({},f)}catch(c){return null}return((d[1].length===0)?d[0]:null)}};Date.parseExact=function(b,a){return Date.getParseFunction(a)(b)};
/*
 * FullCalendar v2.2.3
 * Docs & License: http://arshaw.com/fullcalendar/
 * (c) 2013 Adam Shaw
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery","moment"],a)}else{a(jQuery,moment)}})(function(a,aD){var J={lang:"en",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:false,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:true,weekNumbers:false,weekNumberTitle:"W",weekNumberCalculation:"local",lazyFetching:true,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:false,titleFormat:{month:"MMMM YYYY",week:"ll",day:"LL"},columnFormat:{month:"ddd",week:ad,day:"dddd"},timeFormat:{"default":ac},displayEventEnd:{month:false,basicWeek:false,"default":true},isRTL:false,defaultButtonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:false,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:0.75,dragRevertDuration:500,dragScroll:true,unselectAuto:true,dropAccept:"*",eventLimit:false,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:true,windowResizeDelay:200};function ac(a3,a2){return a2.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")}function ad(a4,a3){var a2=a3.longDateFormat("L");a2=a2.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,"");if(a4.isRTL){a2+=" ddd"}else{a2="ddd "+a2}return a2}var az={en:{columnFormat:{week:"ddd M/D"},dayPopoverFormat:"dddd, MMMM D"}};var aM={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}};var Q=a.fullCalendar={version:"2.2.3"};var R=Q.views={};a.fn.fullCalendar=function(a3){var a2=Array.prototype.slice.call(arguments,1);var a4=this;this.each(function(a8,a5){var a7=a(a5);var a6=a7.data("fullCalendar");var a9;if(typeof a3==="string"){if(a6&&a.isFunction(a6[a3])){a9=a6[a3].apply(a6,a2);if(!a8){a4=a9}if(a3==="destroy"){a7.removeData("fullCalendar")}}}else{if(!a6){a6=new p(a7,a3);a7.data("fullCalendar",a6);a6.render()}}});return a4};function aN(a2){aC(J,a2)}function aC(a4){function a3(a5,a6){if(a.isPlainObject(a6)&&a.isPlainObject(a4[a5])&&!at(a5)){a4[a5]=aC({},a4[a5],a6)}else{if(a6!==undefined){a4[a5]=a6}}}for(var a2=1;a2<arguments.length;a2++){a.each(arguments[a2],a3)}return a4}function at(a2){return/(Time|Duration)$/.test(a2)}Q.langs=az;Q.datepickerLang=function(a3,a2,a5){var a4=az[a3];if(!a4){a4=az[a3]={}}aC(a4,{isRTL:a5.isRTL,weekNumberTitle:a5.weekHeader,titleFormat:{month:a5.showMonthAfterYear?"YYYY["+a5.yearSuffix+"] MMMM":"MMMM YYYY["+a5.yearSuffix+"]"},defaultButtonText:{prev:aU(a5.prevText),next:aU(a5.nextText),today:aU(a5.currentText)}});if(a.datepicker){a.datepicker.regional[a2]=a.datepicker.regional[a3]=a5;a.datepicker.regional.en=a.datepicker.regional[""];a.datepicker.setDefaults(a5)}};Q.lang=function(a2,a4){var a3;if(a4){a3=az[a2];if(!a3){a3=az[a2]={}}aC(a3,a4||{})}J.lang=a2};function p(bc,bt){var bL=this;bt=bt||{};var bA=aC({},J,bt);var bv;if(bA.lang in az){bv=az[bA.lang]}else{bv=az[J.lang]}if(bv){bA=aC({},J,bv,bt)}if(bA.isRTL){bA=aC({},J,aM,bv||{},bt)}bL.options=bA;bL.render=bE;bL.destroy=ba;bL.refetchEvents=bD;bL.reportEvents=bI;bL.reportEventChange=bH;bL.rerenderEvents=bF;bL.changeView=a6;bL.select=bJ;bL.unselect=bQ;bL.prev=bB;bL.next=bx;bL.prevYear=bC;bL.nextYear=by;bL.today=bN;bL.gotoDate=bn;bL.incrementDate=br;bL.zoomTo=bW;bL.getDate=bk;bL.getCalendar=bj;bL.getView=bm;bL.option=bz;bL.trigger=bO;function bl(bY){var bX=aD.localeData||aD.langData;return bX.call(aD,bY)||bX.call(aD,"en")}var bw=E(bl(bA.lang));if(bA.monthNames){bw._months=bA.monthNames}if(bA.monthNamesShort){bw._monthsShort=bA.monthNamesShort}if(bA.dayNames){bw._weekdays=bA.dayNames}if(bA.dayNamesShort){bw._weekdaysShort=bA.dayNamesShort}if(bA.firstDay!=null){var a4=E(bw._week);a4.dow=bA.firstDay;bw._week=a4}bL.defaultAllDayEventDuration=aD.duration(bA.defaultAllDayEventDuration);bL.defaultTimedEventDuration=aD.duration(bA.defaultTimedEventDuration);bL.moment=function(){var bX;if(bA.timezone==="local"){bX=Q.moment.apply(null,arguments);if(bX.hasTime()){bX.local()}}else{if(bA.timezone==="UTC"){bX=Q.moment.utc.apply(null,arguments)}else{bX=Q.moment.parseZone.apply(null,arguments)}}if("_locale" in bX){bX._locale=bw}else{bX._lang=bw}return bX};bL.getIsAmbigTimezone=function(){return bA.timezone!=="local"&&bA.timezone!=="UTC"};bL.rezoneDate=function(bX){return bL.moment(bX.toArray())};bL.getNow=function(){var bX=bA.now;if(typeof bX==="function"){bX=bX()}return bL.moment(bX)};bL.calculateWeekNumber=function(bY){var bX=bA.weekNumberCalculation;if(typeof bX==="function"){return bX(bY)}else{if(bX==="local"){return bY.week()}else{if(bX.toUpperCase()==="ISO"){return bY.isoWeek()}}}};bL.getEventEnd=function(bX){if(bX.end){return bX.end.clone()}else{return bL.getDefaultEventEnd(bX.allDay,bX.start)}};bL.getDefaultEventEnd=function(bX,bZ){var bY=bZ.clone();if(bX){bY.stripTime().add(bL.defaultAllDayEventDuration)}else{bY.add(bL.defaultTimedEventDuration)}if(bL.getIsAmbigTimezone()){bY.stripZone()}return bY};bL.formatRange=function(bY,bZ,bX){if(typeof bX==="function"){bX=bX.call(bL,bA,bw)}return W(bY,bZ,bX,null,bA.isRTL)};bL.formatDate=function(bY,bX){if(typeof bX==="function"){bX=bX.call(bL,bA,bw)}return T(bY,bX)};P.call(bL,bA);var bu=bL.isFetchNeeded;var bg=bL.fetchEvents;var a3=bc[0];var bo;var bp;var a7;var bM;var a8;var bK;var bV;var bq=0;var a9;var be=[];if(bA.defaultDate!=null){a9=bL.moment(bA.defaultDate)}else{a9=bL.getNow()}function bE(bX){if(!a7){bs()}else{if(bd()){a5();bG(bX)}}}function bs(){bM=bA.theme?"ui":"fc";bc.addClass("fc");if(bA.isRTL){bc.addClass("fc-rtl")}else{bc.addClass("fc-ltr")}if(bA.theme){bc.addClass("ui-widget")}else{bc.addClass("fc-unthemed")}a7=a("<div class='fc-view-container'/>").prependTo(bc);bo=new am(bL,bA);bp=bo.render();if(bp){bc.prepend(bp)}a6(bA.defaultView);if(bA.handleWindowResize){bV=I(bU,bA.windowResizeDelay);a(window).resize(bV)}}function ba(){if(a8){a8.destroy()}bo.destroy();a7.remove();bc.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget");a(window).unbind("resize",bV)}function bd(){return bc.is(":visible")}function a6(bX){bG(0,bX)}function bG(bX,bY){bq++;if(a8&&bY&&a8.name!==bY){bo.deactivateButton(a8.name);bh();if(a8.start){a8.destroy()}a8.el.remove();a8=null}if(!a8&&bY){a8=new R[bY](bL);a8.el=a("<div class='fc-view fc-"+bY+"-view' />").appendTo(a7);bo.activateButton(bY)}if(a8){if(bX){a9=a8.incrementDate(a9,bX)}if(!a8.start||bX||!a9.isWithin(a8.intervalStart,a8.intervalEnd)){if(bd()){bh();if(a8.start){a8.destroy()}a8.render(a9);bP();bS();bT();bi()}}}bP();bq--}bL.getSuggestedViewHeight=function(){if(bK===undefined){a5()}return bK};bL.isHeightAuto=function(){return bA.contentHeight==="auto"||bA.height==="auto"};function bR(bX){if(bd()){if(bX){a2()}bq++;a8.updateSize(true);bq--;return true}}function a5(){if(bd()){a2()}}function a2(){if(typeof bA.contentHeight==="number"){bK=bA.contentHeight}else{if(typeof bA.height==="number"){bK=bA.height-(bp?bp.outerHeight(true):0)}else{bK=Math.round(a7.width()/Math.max(bA.aspectRatio,0.5))}}}function bU(bX){if(!bq&&bX.target===window&&a8.start){if(bR(true)){a8.trigger("windowResize",a3)}}}function bD(){bb();bf()}function bF(){if(bd()){bh();a8.destroyEvents();a8.renderEvents(be);bP()}}function bb(){bh();a8.destroyEvents();bP()}function bi(){if(!bA.lazyFetching||bu(a8.start,a8.end)){bf()}else{bF()}}function bf(){bg(a8.start,a8.end)}function bI(bX){be=bX;bF()}function bH(){bF()}function bS(){bo.updateTitle(a8.title)}function bT(){var bX=bL.getNow();if(bX.isWithin(a8.intervalStart,a8.intervalEnd)){bo.disableButton("today")}else{bo.enableButton("today")}}function bJ(bY,bX){bY=bL.moment(bY);if(bX){bX=bL.moment(bX)}else{if(bY.hasTime()){bX=bY.clone().add(bL.defaultTimedEventDuration)}else{bX=bY.clone().add(bL.defaultAllDayEventDuration)}}a8.select(bY,bX)}function bQ(){if(a8){a8.unselect()}}function bB(){bG(-1)}function bx(){bG(1)}function bC(){a9.add(-1,"years");bG()}function by(){a9.add(1,"years");bG()}function bN(){a9=bL.getNow();bG()}function bn(bX){a9=bL.moment(bX);bG()}function br(bX){a9.add(aD.duration(bX));bG()}function bW(bY,bZ){var b0;var bX;if(!bZ||R[bZ]===undefined){bZ=bZ||"day";b0=bo.getViewsWithButtons().join(" ");bX=b0.match(new RegExp("\\w+"+q(bZ)));if(!bX){bX=b0.match(/\w+Day/)}bZ=bX?bX[0]:"agendaDay"}a9=bY;a6(bZ)}function bk(){return a9.clone()}function bh(){a7.css({width:"100%",height:a7.height(),overflow:"hidden"})}function bP(){a7.css({width:"",height:"",overflow:""})}function bj(){return bL}function bm(){return a8}function bz(bX,bY){if(bY===undefined){return bA[bX]}if(bX=="height"||bX=="contentHeight"||bX=="aspectRatio"){bA[bX]=bY;bR(true)}}function bO(bX,bY){if(bA[bX]){return bA[bX].apply(bY||a3,Array.prototype.slice.call(arguments,2))}}}function am(a3,ba){var bd=this;bd.render=bb;bd.destroy=a5;bd.updateTitle=bf;bd.activateButton=a2;bd.deactivateButton=a4;bd.disableButton=a6;bd.enableButton=a8;bd.getViewsWithButtons=a9;var a7=a();var bg=[];var be;function bb(){var bh=ba.header;be=ba.theme?"ui":"fc";if(bh){a7=a("<div class='fc-toolbar'/>").append(bc("left")).append(bc("right")).append(bc("center")).append('<div class="fc-clear"/>');return a7}}function a5(){a7.remove()}function bc(bi){var bj=a('<div class="fc-'+bi+'"/>');var bh=ba.header[bi];if(bh){a.each(bh.split(" "),function(bm){var bk=a();var bn=true;var bl;a.each(this.split(","),function(bv,bq){var bp;var bx;var bw;var bt;var bs;var bu;var br;var bo;if(bq=="title"){bk=bk.add(a("<h2>&nbsp;</h2>"));bn=false}else{if(a3[bq]){bp=function(){a3[bq]()}}else{if(R[bq]){bp=function(){a3.changeView(bq)};bg.push(bq)}}if(bp){bx=aT(ba.themeButtonIcons,bq);bw=aT(ba.buttonIcons,bq);bt=aT(ba.defaultButtonText,bq);bs=aT(ba.buttonText,bq);if(bs){bu=an(bs)}else{if(bx&&ba.theme){bu="<span class='ui-icon ui-icon-"+bx+"'></span>"}else{if(bw&&!ba.theme){bu="<span class='fc-icon fc-icon-"+bw+"'></span>"}else{bu=an(bt||bq)}}}br=["fc-"+bq+"-button",be+"-button",be+"-state-default"];bo=a('<button type="button" class="'+br.join(" ")+'">'+bu+"</button>").click(function(){if(!bo.hasClass(be+"-state-disabled")){bp();if(bo.hasClass(be+"-state-active")||bo.hasClass(be+"-state-disabled")){bo.removeClass(be+"-state-hover")}}}).mousedown(function(){bo.not("."+be+"-state-active").not("."+be+"-state-disabled").addClass(be+"-state-down")}).mouseup(function(){bo.removeClass(be+"-state-down")}).hover(function(){bo.not("."+be+"-state-active").not("."+be+"-state-disabled").addClass(be+"-state-hover")},function(){bo.removeClass(be+"-state-hover").removeClass(be+"-state-down")});bk=bk.add(bo)}}});if(bn){bk.first().addClass(be+"-corner-left").end().last().addClass(be+"-corner-right").end()}if(bk.length>1){bl=a("<div/>");if(bn){bl.addClass("fc-button-group")}bl.append(bk);bj.append(bl)}else{bj.append(bk)}})}return bj}function bf(bh){a7.find("h2").text(bh)}function a2(bh){a7.find(".fc-"+bh+"-button").addClass(be+"-state-active")}function a4(bh){a7.find(".fc-"+bh+"-button").removeClass(be+"-state-active")}function a6(bh){a7.find(".fc-"+bh+"-button").attr("disabled","disabled").addClass(be+"-state-disabled")}function a8(bh){a7.find(".fc-"+bh+"-button").removeAttr("disabled").removeClass(be+"-state-disabled")}function a9(){return bg}}Q.sourceNormalizers=[];Q.sourceFetchers=[];var f={dataType:"json",cache:false};var O=1;function P(bu){var bH=this;bH.isFetchNeeded=bm;bH.fetchEvents=be;bH.addEventSource=a3;bH.removeEventSource=bC;bH.updateEvent=bJ;bH.renderEvent=bD;bH.removeEvents=bB;bH.clientEvents=a8;bH.mutateEvent=bs;var bI=bH.trigger;var bj=bH.getView;var bE=bH.reportEvents;var bh=bH.getEventEnd;var bG={events:[]};var bF=[bG];var bA,bz;var ba=0;var bv=0;var bq=0;var a7=[];a.each((bu.events?[bu.events]:[]).concat(bu.eventSources||[]),function(bK,bM){var bL=a6(bM);if(bL){bF.push(bL)}});function bm(bL,bK){return !bA||bL.clone().stripZone()<bA.clone().stripZone()||bK.clone().stripZone()>bz.clone().stripZone()}function be(bO,bK){bA=bO;bz=bK;a7=[];var bL=++ba;var bN=bF.length;bv=bN;for(var bM=0;bM<bN;bM++){bf(bF[bM],bL)}}function bf(bL,bK){a2(bL,function(bO){var bQ=a.isArray(bL.events);var bP,bN;var bM;if(bK==ba){if(bO){for(bP=0;bP<bO.length;bP++){bN=bO[bP];if(bQ){bM=bN}else{bM=a5(bN,bL)}if(bM){a7.push.apply(a7,bd(bM))}}}bv--;if(!bv){bE(a7)}}})}function a2(bU,bK){var bS;var bR=Q.sourceFetchers;var bT;for(bS=0;bS<bR.length;bS++){bT=bR[bS].call(bH,bU,bA.clone(),bz.clone(),bu.timezone,bK);if(bT===true){return}else{if(typeof bT=="object"){a2(bT,bK);return}}}var bQ=bU.events;if(bQ){if(a.isFunction(bQ)){by();bQ.call(bH,bA.clone(),bz.clone(),bu.timezone,function(bZ){bK(bZ);bw()})}else{if(a.isArray(bQ)){bK(bQ)}else{bK()}}}else{var bY=bU.url;if(bY){var bW=bU.success;var bP=bU.error;var bL=bU.complete;var bM;if(a.isFunction(bU.data)){bM=bU.data()}else{bM=bU.data}var bN=a.extend({},bM||{});var bV=S(bU.startParam,bu.startParam);var bO=S(bU.endParam,bu.endParam);var bX=S(bU.timezoneParam,bu.timezoneParam);if(bV){bN[bV]=bA.format()}if(bO){bN[bO]=bz.format()}if(bu.timezone&&bu.timezone!="local"){bN[bX]=bu.timezone}by();a.ajax(a.extend({},f,bU,{data:bN,success:function(bZ){bZ=bZ||[];var b0=j(bW,this,arguments);if(a.isArray(b0)){bZ=b0}bK(bZ)},error:function(){j(bP,this,arguments);bK()},complete:function(){j(bL,this,arguments);bw()}}))}else{bK()}}}function a3(bL){var bK=a6(bL);if(bK){bF.push(bK);bv++;bf(bK,ba)}}function a6(bN){var bL=Q.sourceNormalizers;var bM;var bK;if(a.isFunction(bN)||a.isArray(bN)){bM={events:bN}}else{if(typeof bN==="string"){bM={url:bN}}else{if(typeof bN==="object"){bM=a.extend({},bN)}}}if(bM){if(bM.className){if(typeof bM.className==="string"){bM.className=bM.className.split(/\s+/)}}else{bM.className=[]}if(a.isArray(bM.events)){bM.origArray=bM.events;bM.events=a.map(bM.events,function(bO){return a5(bO,bM)})}for(bK=0;bK<bL.length;bK++){bL[bK].call(bH,bM)}return bM}}function bC(bK){bF=a.grep(bF,function(bL){return !bp(bL,bK)});a7=a.grep(a7,function(bL){return !bp(bL.source,bK)});bE(a7)}function bp(bK,bL){return bK&&bL&&bi(bK)==bi(bL)}function bi(bK){return((typeof bK==="object")?(bK.origArray||bK.googleCalendarId||bK.url||bK.events):null)||bK}function bJ(bK){bK.start=bH.moment(bK.start);if(bK.end){bK.end=bH.moment(bK.end)}bs(bK);bx(bK);bE(a7)}var br=["title","url","allDay","className","editable","color","backgroundColor","borderColor","textColor"];function bx(bL){var bM;var bK;var bN;var bO;for(bM=0;bM<a7.length;bM++){bK=a7[bM];if(bK._id==bL._id&&bK!==bL){for(bN=0;bN<br.length;bN++){bO=br[bN];if(bL[bO]!==undefined){bK[bO]=bL[bO]}}}}}function bD(bM,bP){var bK=a5(bM);var bN;var bO,bL;if(bK){bN=bd(bK);for(bO=0;bO<bN.length;bO++){bL=bN[bO];if(!bL.source){if(bP){bG.events.push(bL);bL.source=bG}a7.push(bL)}}bE(a7);return bN}return[]}function bB(bL){var bK;var bM;if(bL==null){bL=function(){return true}}else{if(!a.isFunction(bL)){bK=bL+"";bL=function(bN){return bN._id==bK}}}a7=a.grep(a7,bL,true);for(bM=0;bM<bF.length;bM++){if(a.isArray(bF[bM].events)){bF[bM].events=a.grep(bF[bM].events,bL,true)}}bE(a7)}function a8(bK){if(a.isFunction(bK)){return a.grep(a7,bK)}else{if(bK!=null){bK+="";return a.grep(a7,function(bL){return bL._id==bK})}}return a7}function by(){if(!(bq++)){bI("loading",null,true,bj())}}function bw(){if(!(--bq)){bI("loading",null,false,bj())}}function a5(bN,bP){var bO={};var bQ,bM;var bK;var bL;if(bu.eventDataTransform){bN=bu.eventDataTransform(bN)}if(bP&&bP.eventDataTransform){bN=bP.eventDataTransform(bN)}a.extend(bO,bN);if(bP){bO.source=bP}bO._id=bN._id||(bN.id===undefined?"_fc"+O++:bN.id+"");if(bN.className){if(typeof bN.className=="string"){bO.className=bN.className.split(/\s+/)}else{bO.className=bN.className}}else{bO.className=[]}bQ=bN.start||bN.date;bM=bN.end;if(ay(bQ)){bQ=aD.duration(bQ)}if(ay(bM)){bM=aD.duration(bM)}if(bN.dow||aD.isDuration(bQ)||aD.isDuration(bM)){bO.start=bQ?aD.duration(bQ):null;bO.end=bM?aD.duration(bM):null;bO._recurring=true}else{if(bQ){bQ=bH.moment(bQ);if(!bQ.isValid()){return false}}if(bM){bM=bH.moment(bM);if(!bM.isValid()){bM=null}}bK=bN.allDay;if(bK===undefined){bL=S(bP?bP.allDayDefault:undefined,bu.allDayDefault);if(bL!==undefined){bK=bL}else{bK=!bQ.hasTime()&&(!bM||!bM.hasTime())}}a4(bQ,bM,bK,bO)}return bO}function a4(bN,bL,bK,bM){if(bK){if(bN.hasTime()){bN.stripTime()}if(bL&&bL.hasTime()){bL.stripTime()}}else{if(!bN.hasTime()){bN=bH.rezoneDate(bN)}if(bL&&!bL.hasTime()){bL=bH.rezoneDate(bL)}}if(bL&&bL<=bN){bL=null}bM.allDay=bK;bM.start=bN;bM.end=bL||null;if(bu.forceEventDuration&&!bM.end){bM.end=bh(bM)}k(bM)}function bd(bM,bL,bK){var bT=[];var bP;var bO;var bU;var bN;var bW,bR;var bV,bQ;var bS;bL=bL||bA;bK=bK||bz;if(bM){if(bM._recurring){if((bO=bM.dow)){bP={};for(bU=0;bU<bO.length;bU++){bP[bO[bU]]=true}}bN=bL.clone().stripTime();while(bN.isBefore(bK)){if(!bP||bP[bN.day()]){bW=bM.start;bR=bM.end;bV=bN.clone();bQ=null;if(bW){bV=bV.time(bW)}if(bR){bQ=bN.clone().time(bR)}bS=a.extend({},bM);a4(bV,bQ,!bW&&!bR,bS);bT.push(bS)}bN.add(1,"days")}}else{bT.push(bM)}}return bT}function bs(bN,bQ,bP){var bR=bN._allDay;var bT=bN._start;var bS=bN._end;var bK=false;var bO;var bL;var bM;var bU;if(!bQ&&!bP){bQ=bN.start;bP=bN.end}if(bN.allDay!=bR){bO=bN.allDay}else{bO=!(bQ||bP).hasTime()}if(bO){if(bQ){bQ=bQ.clone().stripTime()}if(bP){bP=bP.clone().stripTime()}}if(bQ){if(bO){bL=H(bQ,bT.clone().stripTime())}else{bL=H(bQ,bT)}}if(bO!=bR){bK=true}else{if(bP){bM=H(bP||bH.getDefaultEventEnd(bO,bQ||bT),bQ||bT).subtract(H(bS||bH.getDefaultEventEnd(bR,bT),bT))}}bU=bt(a8(bN._id),bK,bO,bL,bM);return{dateDelta:bL,durationDelta:bM,undo:bU}}function bt(bN,bK,bO,bL,bM){var bP=bH.getIsAmbigTimezone();var bQ=[];a.each(bN,function(bS,bR){var bW=bR._allDay;var bY=bR._start;var bX=bR._end;var bT=bO!=null?bO:bW;var bV=bY.clone();var bU=(!bK&&bX)?bX.clone():null;if(bT){bV.stripTime();if(bU){bU.stripTime()}}else{if(!bV.hasTime()){bV=bH.rezoneDate(bV)}if(bU&&!bU.hasTime()){bU=bH.rezoneDate(bU)}}if(!bU&&(bu.forceEventDuration||+bM)){bU=bH.getDefaultEventEnd(bT,bV)}bV.add(bL);if(bU){bU.add(bL).add(bM)}if(bP){if(+bL||+bM){bV.stripZone();if(bU){bU.stripZone()}}}bR.allDay=bT;bR.start=bV;bR.end=bU;k(bR);bQ.push(function(){bR.allDay=bW;bR.start=bY;bR.end=bX;k(bR)})});return function(){for(var bR=0;bR<bQ.length;bR++){bQ[bR]()}}}bH.getBusinessHoursEvents=bg;function bg(){var bM=bu.businessHours;var bK={className:"fc-nonbusiness",start:"09:00",end:"17:00",dow:[1,2,3,4,5],rendering:"inverse-background"};var bN=bH.getView();var bL;if(bM){if(typeof bM==="object"){bL=a.extend({},bK,bM)}else{bL=bK}}if(bL){return bd(a5(bL),bN.start,bN.end)}return[]}bH.isEventAllowedInRange=bk;bH.isSelectionAllowedInRange=bo;bH.isExternalDragAllowedInRange=bl;function bk(bM,bP,bL){var bO=bM.source||{};var bK=S(bM.constraint,bO.constraint,bu.eventConstraint);var bN=S(bM.overlap,bO.overlap,bu.eventOverlap);return bn(bP,bL,bK,bN,bM)}function bo(bL,bK){return bn(bL,bK,bu.selectConstraint,bu.selectOverlap)}function bl(bN,bK,bM){var bL;if(bM){bL=bd(a5(bM))[0];if(bL){return bk(bL,bN,bK)}}return bo(bN,bK)}function bn(bT,bN,bL,bS,bO){var bM;var bK;var bP,bQ;var bR;bT=bT.clone().stripZone();bN=bN.clone().stripZone();if(bL!=null){bM=a9(bL);bK=false;for(bP=0;bP<bM.length;bP++){if(bb(bM[bP],bT,bN)){bK=true;break}}if(!bK){return false}}for(bP=0;bP<a7.length;bP++){bQ=a7[bP];if(bO&&bO._id===bQ._id){continue}if(bc(bQ,bT,bN)){if(bS===false){return false}else{if(typeof bS==="function"&&!bS(bQ,bO)){return false}}if(bO){bR=S(bQ.overlap,(bQ.source||{}).overlap);if(bR===false){return false}if(typeof bR==="function"&&!bR(bO,bQ)){return false}}}}return true}function a9(bK){if(bK==="businessHours"){return bg()}if(typeof bK==="object"){return bd(a5(bK))}return a8(bK)}function bb(bL,bO,bK){var bN=bL.start.clone().stripZone();var bM=bH.getEventEnd(bL).stripZone();return bO>=bN&&bK<=bM}function bc(bL,bO,bK){var bN=bL.start.clone().stripZone();var bM=bH.getEventEnd(bL).stripZone();return bO<bM&&bK>bN}}function k(a2){a2._allDay=a2.allDay;a2._start=a2.start.clone();a2._end=a2.end?a2.end.clone():null}function z(a2,a3){if(a3.left){a2.css({"border-left-width":1,"margin-left":a3.left-1})}if(a3.right){a2.css({"border-right-width":1,"margin-right":a3.right-1})}}function aY(a2){a2.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function K(){a("body").addClass("fc-not-allowed")}function N(){a("body").removeClass("fc-not-allowed")}function L(a3,a2,a9){var a7=Math.floor(a2/a3.length);var a8=Math.floor(a2-a7*(a3.length-1));var a4=[];var a6=[];var a5=[];var ba=0;aZ(a3);a3.each(function(bc,bb){var bd=bc===a3.length-1?a8:a7;var be=a(bb).outerHeight(true);if(be<bd){a4.push(bb);a6.push(be);a5.push(a(bb).height())}else{ba+=be}});if(a9){a2-=ba;a7=Math.floor(a2/a4.length);a8=Math.floor(a2-a7*(a4.length-1))}a(a4).each(function(bc,bb){var bd=bc===a4.length-1?a8:a7;var bf=a6[bc];var be=a5[bc];var bg=bd-(bf-be);if(bf<bd){a(bb).height(bg)}})}function aZ(a2){a2.height("")}function aB(a2){var a3=0;a2.find("> *").each(function(a4,a5){var a6=a(a5).outerWidth();if(a6>a3){a3=a6}});a3++;a2.width(a3);return a3}function aQ(a2,a3){a2.height(a3).addClass("fc-scroller");if(a2[0].scrollHeight-1>a2[0].clientHeight){return true}a0(a2);return false}function a0(a2){a2.height("").removeClass("fc-scroller")}function ai(a2){var a3=a2.css("position"),a4=a2.parents().filter(function(){var a5=a(this);return(/(auto|scroll)/).test(a5.css("overflow")+a5.css("overflow-y")+a5.css("overflow-x"))}).eq(0);return a3==="fixed"||!a4.length?a(a2[0].ownerDocument||document):a4}function ah(a2){var a3=a2.offset().left;var a4=a3+a2.width();var a5=a2.children();var a6=a5.offset().left;var a7=a6+a5.outerWidth();return{left:a6-a3,right:a4-a7}}function aw(a2){return a2.which==1&&!a2.ctrlKey}function ao(a9,a8,a3,a2){var a7,a6;var a5,a4;if(a8>a3&&a9<a2){if(a9>=a3){a7=a9.clone();a5=true}else{a7=a3.clone();a5=false}if(a8<=a2){a6=a8.clone();a4=true}else{a6=a2.clone();a4=false}return{start:a7,end:a6,isStart:a5,isEnd:a4}}}function aT(a4,a3){a4=a4||{};if(a4[a3]!==undefined){return a4[a3]}var a5=a3.split(/(?=[A-Z])/),a2=a5.length-1,a6;for(;a2>=0;a2--){a6=a4[a5[a2].toLowerCase()];if(a6!==undefined){return a6}}return a4["default"]}var G=["sun","mon","tue","wed","thu","fri","sat"];function H(a2,a3){return aD.duration({days:a2.clone().stripTime().diff(a3.clone().stripTime(),"days"),ms:a2.time()-a3.time()})}function av(a2){return Object.prototype.toString.call(a2)==="[object Date]"||a2 instanceof Date}function ay(a2){return/^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(a2)}Q.applyAll=j;function E(a3){var a2=function(){};a2.prototype=a3;return new a2()}function j(a3,a6,a2){if(a.isFunction(a3)){a3=[a3]}if(a3){var a4;var a5;for(a4=0;a4<a3.length;a4++){a5=a3[a4].apply(a6,a2)||a5}return a5}}function S(){for(var a2=0;a2<arguments.length;a2++){if(arguments[a2]!==undefined){return arguments[a2]}}}function an(a2){return(a2+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function aU(a2){return a2.replace(/&.*?;/g,"")}function q(a2){return a2.charAt(0).toUpperCase()+a2.slice(1)}function x(a2,a3){return a2-a3}function I(a4,a8){var a6;var a2;var a3;var a7;var a5=function(){var a9=+new Date()-a7;if(a9<a8&&a9>0){a6=setTimeout(a5,a8-a9)}else{a6=null;a4.apply(a3,a2);if(!a6){a3=a2=null}}};return function(){a3=this;a2=arguments;a7=+new Date();if(!a6){a6=setTimeout(a5,a8)}}}var h=/^\s*\d{4}-\d\d$/;var i=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/;var aG=aD.fn;var aI=a.extend({},aG);var g;var aR;var aO;Q.moment=function(){return aA(arguments)};Q.moment.utc=function(){var a2=aA(arguments,true);if(a2.hasTime()){a2.utc()}return a2};Q.moment.parseZone=function(){return aA(arguments,true,true)};function aA(a3,a9,ba){var a4=a3[0];var a7=a3.length==1&&typeof a4==="string";var a5;var a6;var a2;var a8;if(aD.isMoment(a4)){a8=aD.apply(null,a3);aX(a4,a8)}else{if(av(a4)||a4===undefined){a8=aD.apply(null,a3)}else{a5=false;a6=false;if(a7){if(h.test(a4)){a4+="-01";a3=[a4];a5=true;a6=true}else{if((a2=i.exec(a4))){a5=!a2[5];a6=true}}}else{if(a.isArray(a4)){a6=true}}if(a9){a8=aD.utc.apply(aD,a3)}else{a8=aD.apply(null,a3)}if(a5){a8._ambigTime=true;a8._ambigZone=true}else{if(ba){if(a6){a8._ambigZone=true}else{if(a7){a8.zone(a4)}}}}}}a8._fullCalendar=true;return a8}aG.clone=function(){var a2=aI.clone.apply(this,arguments);aX(this,a2);if(this._fullCalendar){a2._fullCalendar=true}return a2};aG.time=function(a3){if(!this._fullCalendar){return aI.time.apply(this,arguments)}if(a3==null){return aD.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()})}else{this._ambigTime=false;if(!aD.isDuration(a3)&&!aD.isMoment(a3)){a3=aD.duration(a3)}var a2=0;if(aD.isDuration(a3)){a2=Math.floor(a3.asDays())*24}return this.hours(a2+a3.hours()).minutes(a3.minutes()).seconds(a3.seconds()).milliseconds(a3.milliseconds())}};aG.stripTime=function(){var a2=this.toArray();this.utc();aR(this,a2.slice(0,3));this._ambigTime=true;this._ambigZone=true;return this};aG.hasTime=function(){return !this._ambigTime};aG.stripZone=function(){var a2=this.toArray();var a3=this._ambigTime;this.utc();aR(this,a2);if(a3){this._ambigTime=true}this._ambigZone=true;return this};aG.hasZone=function(){return !this._ambigZone};aG.zone=function(a2){if(a2!=null){this._ambigTime=false;this._ambigZone=false}return aI.zone.apply(this,arguments)};aG.local=function(){var a2=this.toArray();var a3=this._ambigZone;aI.local.apply(this,arguments);if(a3){aO(this,a2)}return this};aG.format=function(){if(this._fullCalendar&&arguments[0]){return T(this,arguments[0])}if(this._ambigTime){return aH(this,"YYYY-MM-DD")}if(this._ambigZone){return aH(this,"YYYY-MM-DD[T]HH:mm:ss")}return aI.format.apply(this,arguments)};aG.toISOString=function(){if(this._ambigTime){return aH(this,"YYYY-MM-DD")}if(this._ambigZone){return aH(this,"YYYY-MM-DD[T]HH:mm:ss")}return aI.toISOString.apply(this,arguments)};aG.isWithin=function(a4,a3){var a2=t([this,a4,a3]);return a2[0]>=a2[1]&&a2[0]<a2[2]};aG.isSame=function(a3,a4){var a2;if(!this._fullCalendar){return aI.isSame.apply(this,arguments)}if(a4){a2=t([this,a3],true);return aI.isSame.call(a2[0],a2[1],a4)}else{a3=Q.moment.parseZone(a3);return aI.isSame.call(this,a3)&&Boolean(this._ambigTime)===Boolean(a3._ambigTime)&&Boolean(this._ambigZone)===Boolean(a3._ambigZone)}};a.each(["isBefore","isAfter"],function(a2,a3){aG[a3]=function(a5,a6){var a4;if(!this._fullCalendar){return aI[a3].apply(this,arguments)}a4=t([this,a5]);return aI[a3].call(a4[0],a4[1],a6)}});function t(a5,a7){var a6=[];var a2=false;var a3=false;var a4;for(a4=0;a4<a5.length;a4++){a6.push(Q.moment.parseZone(a5[a4]));a2=a2||a6[a4]._ambigTime;a3=a3||a6[a4]._ambigZone}for(a4=0;a4<a6.length;a4++){if(a2&&!a7){a6[a4].stripTime()}else{if(a3){a6[a4].stripZone()}}}return a6}function aX(a3,a2){if(a3._ambigTime){a2._ambigTime=true}else{if(a2._ambigTime){a2._ambigTime=false}}if(a3._ambigZone){a2._ambigZone=true}else{if(a2._ambigZone){a2._ambigZone=false}}}function aP(a3,a2){a3.year(a2[0]||0).month(a2[1]||0).date(a2[2]||0).hours(a2[3]||0).minutes(a2[4]||0).seconds(a2[5]||0).milliseconds(a2[6]||0)}g="_d" in aD()&&"updateOffset" in aD;aR=g?function(a3,a2){a3._d.setTime(Date.UTC.apply(Date,a2));aD.updateOffset(a3,false)}:aP;aO=g?function(a3,a2){a3._d.setTime(+new Date(a2[0]||0,a2[1]||0,a2[2]||0,a2[3]||0,a2[4]||0,a2[5]||0,a2[6]||0));aD.updateOffset(a3,false)}:aP;function aH(a3,a2){return aI.format.call(a3,a2)}function T(a2,a3){return V(a2,ag(a3))}function V(a3,a2){var a5="";var a4;for(a4=0;a4<a2.length;a4++){a5+=U(a3,a2[a4])}return a5}var aW={t:function(a2){return aH(a2,"a").charAt(0)},T:function(a2){return aH(a2,"A").charAt(0)}};function U(a3,a2){var a5;var a4;if(typeof a2==="string"){return a2}else{if((a5=a2.token)){if(aW[a5]){return aW[a5](a3)}return aH(a3,a5)}else{if(a2.maybe){a4=V(a3,a2.maybe);if(a4.match(/[1-9]/)){return a4}}}}return""}function W(a2,a3,a4,a7,a5){var a6;a2=Q.moment.parseZone(a2);a3=Q.moment.parseZone(a3);a6=(a2.localeData||a2.lang).call(a2);a4=a6.longDateFormat(a4)||a4;a7=a7||" - ";return X(a2,a3,ag(a4),a7,a5)}Q.formatRange=W;function X(a4,a5,a2,bf,a6){var a3;var a7;var a8="";var bd;var be="";var a9;var bb="";var bc="";var ba="";for(a7=0;a7<a2.length;a7++){a3=Y(a4,a5,a2[a7]);if(a3===false){break}a8+=a3}for(bd=a2.length-1;bd>a7;bd--){a3=Y(a4,a5,a2[bd]);if(a3===false){break}be=a3+be}for(a9=a7;a9<=bd;a9++){bb+=U(a4,a2[a9]);bc+=U(a5,a2[a9])}if(bb||bc){if(a6){ba=bc+bf+bb}else{ba=bb+bf+bc}}return a8+ba+be}var aS={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",t:"second",H:"second",h:"second",m:"second",s:"second"};function Y(a3,a4,a2){var a5;var a6;if(typeof a2==="string"){return a2}else{if((a5=a2.token)){a6=aS[a5.charAt(0)];if(a6&&a3.isSame(a4,a6)){return aH(a3,a5)}}}return false}var Z={};function ag(a2){if(a2 in Z){return Z[a2]}return(Z[a2]=r(a2))}function r(a4){var a3=[];var a2=/\[([^\]]*)\]|\(([^\)]*)\)|(LT|(\w)\4*o?)|([^\w\[\(]+)/g;var a5;while((a5=a2.exec(a4))){if(a5[1]){a3.push(a5[1])}else{if(a5[2]){a3.push({maybe:r(a5[2])})}else{if(a5[3]){a3.push({token:a5[3]})}else{if(a5[5]){a3.push(a5[5])}}}}}return a3}function aK(a2){this.options=a2||{}}aK.prototype={isHidden:true,options:null,el:null,documentMousedownProxy:null,margin:10,show:function(){if(this.isHidden){if(!this.el){this.render()}this.el.show();this.position();this.isHidden=false;this.trigger("show")}},hide:function(){if(!this.isHidden){this.el.hide();this.isHidden=true;this.trigger("hide")}},render:function(){var a2=this;var a3=this.options;this.el=a('<div class="fc-popover"/>').addClass(a3.className||"").css({top:0,left:0}).append(a3.content).appendTo(a3.parentEl);this.el.on("click",".fc-close",function(){a2.hide()});if(a3.autoHide){a(document).on("mousedown",this.documentMousedownProxy=a.proxy(this,"documentMousedown"))}},documentMousedown:function(a2){if(this.el&&!a(a2.target).closest(this.el).length){this.hide()}},destroy:function(){this.hide();if(this.el){this.el.remove();this.el=null}a(document).off("mousedown",this.documentMousedownProxy)},position:function(){var a4=this.options;var a5=this.el.offsetParent().offset();var bb=this.el.outerWidth();var a2=this.el.outerHeight();var bc=a(window);var a7=ai(this.el);var ba;var a8;var a9;var a6;var a3;a6=a4.top||0;if(a4.left!==undefined){a3=a4.left}else{if(a4.right!==undefined){a3=a4.right-bb}else{a3=0}}if(a7.is(window)||a7.is(document)){a7=bc;ba=0;a8=0}else{a9=a7.offset();ba=a9.top;a8=a9.left}ba+=bc.scrollTop();a8+=bc.scrollLeft();if(a4.viewportConstrain!==false){a6=Math.min(a6,ba+a7.outerHeight()-a2-this.margin);a6=Math.max(a6,ba+this.margin);a3=Math.min(a3,a8+a7.outerWidth()-bb-this.margin);a3=Math.max(a3,a8+this.margin)}this.el.css({top:a6-a5.top,left:a3-a5.left})},trigger:function(a2){if(this.options[a2]){this.options[a2].apply(this,Array.prototype.slice.call(arguments,1))}}};function ak(a2){this.grid=a2}ak.prototype={grid:null,rows:null,cols:null,containerEl:null,minX:null,maxX:null,minY:null,maxY:null,build:function(){this.grid.buildCoords(this.rows=[],this.cols=[]);this.computeBounds()},getCell:function(a8,a9){var a3=null;var a7=this.rows;var a4=this.cols;var a6=-1;var a2=-1;var a5;if(this.inBounds(a8,a9)){for(a5=0;a5<a7.length;a5++){if(a9>=a7[a5][0]&&a9<a7[a5][1]){a6=a5;break}}for(a5=0;a5<a4.length;a5++){if(a8>=a4[a5][0]&&a8<a4[a5][1]){a2=a5;break}}if(a6>=0&&a2>=0){a3={row:a6,col:a2};a3.grid=this.grid;a3.date=this.grid.getCellDate(a3)}}return a3},computeBounds:function(){var a2;if(this.containerEl){a2=this.containerEl.offset();this.minX=a2.left;this.maxX=a2.left+this.containerEl.outerWidth();this.minY=a2.top;this.maxY=a2.top+this.containerEl.outerHeight()}},inBounds:function(a2,a3){if(this.containerEl){return a2>=this.minX&&a2<this.maxX&&a3>=this.minY&&a3<this.maxY}return true}};function s(a2){this.coordMaps=a2}s.prototype={coordMaps:null,build:function(){var a2=this.coordMaps;var a3;for(a3=0;a3<a2.length;a3++){a2[a3].build()}},getCell:function(a5,a6){var a3=this.coordMaps;var a2=null;var a4;for(a4=0;a4<a3.length&&!a2;a4++){a2=a3[a4].getCell(a5,a6)}return a2}};function M(a2,a3){this.coordMap=a2;this.options=a3||{}}M.prototype={coordMap:null,options:null,isListening:false,isDragging:false,origCell:null,origDate:null,cell:null,date:null,mouseX0:null,mouseY0:null,mousemoveProxy:null,mouseupProxy:null,scrollEl:null,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollHandlerProxy:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,mousedown:function(a2){if(aw(a2)){a2.preventDefault();this.startListening(a2);if(!this.options.distance){this.startDrag(a2)}}},startListening:function(a3){var a4;var a2;if(!this.isListening){if(a3&&this.options.scroll){a4=ai(a(a3.target));if(!a4.is(window)&&!a4.is(document)){this.scrollEl=a4;this.scrollHandlerProxy=I(a.proxy(this,"scrollHandler"),100);this.scrollEl.on("scroll",this.scrollHandlerProxy)}}this.computeCoords();if(a3){a2=this.getCell(a3);this.origCell=a2;this.origDate=a2?a2.date:null;this.mouseX0=a3.pageX;this.mouseY0=a3.pageY}a(document).on("mousemove",this.mousemoveProxy=a.proxy(this,"mousemove")).on("mouseup",this.mouseupProxy=a.proxy(this,"mouseup")).on("selectstart",this.preventDefault);this.isListening=true;this.trigger("listenStart",a3)}},computeCoords:function(){this.coordMap.build();this.computeScrollBounds()},mousemove:function(a3){var a4;var a2;if(!this.isDragging){a4=this.options.distance||1;a2=Math.pow(a3.pageX-this.mouseX0,2)+Math.pow(a3.pageY-this.mouseY0,2);if(a2>=a4*a4){this.startDrag(a3)}}if(this.isDragging){this.drag(a3)}},startDrag:function(a3){var a2;if(!this.isListening){this.startListening()}if(!this.isDragging){this.isDragging=true;this.trigger("dragStart",a3);a2=this.getCell(a3);if(a2){this.cellOver(a2,true)}}},drag:function(a3){var a2;if(this.isDragging){a2=this.getCell(a3);if(!aq(a2,this.cell)){if(this.cell){this.cellOut()}if(a2){this.cellOver(a2)}}this.dragScroll(a3)}},cellOver:function(a2){this.cell=a2;this.date=a2.date;this.trigger("cellOver",a2,a2.date)},cellOut:function(){if(this.cell){this.trigger("cellOut",this.cell);this.cell=null;this.date=null}},mouseup:function(a2){this.stopDrag(a2);this.stopListening(a2)},stopDrag:function(a2){if(this.isDragging){this.stopScrolling();this.trigger("dragStop",a2);this.isDragging=false}},stopListening:function(a2){if(this.isListening){if(this.scrollEl){this.scrollEl.off("scroll",this.scrollHandlerProxy);this.scrollHandlerProxy=null}a(document).off("mousemove",this.mousemoveProxy).off("mouseup",this.mouseupProxy).off("selectstart",this.preventDefault);this.mousemoveProxy=null;this.mouseupProxy=null;this.isListening=false;this.trigger("listenStop",a2);this.origCell=this.cell=null;this.origDate=this.date=null}},getCell:function(a2){return this.coordMap.getCell(a2.pageX,a2.pageY)},trigger:function(a2){if(this.options[a2]){this.options[a2].apply(this,Array.prototype.slice.call(arguments,1))}},preventDefault:function(a2){a2.preventDefault()},computeScrollBounds:function(){var a2=this.scrollEl;var a3;if(a2){a3=a2.offset();this.scrollBounds={top:a3.top,left:a3.left,bottom:a3.top+a2.outerHeight(),right:a3.left+a2.outerWidth()}}},dragScroll:function(a4){var a8=this.scrollSensitivity;var a3=this.scrollBounds;var a9,a2;var a5,a7;var ba=0;var a6=0;if(a3){a9=(a8-(a4.pageY-a3.top))/a8;a2=(a8-(a3.bottom-a4.pageY))/a8;a5=(a8-(a4.pageX-a3.left))/a8;a7=(a8-(a3.right-a4.pageX))/a8;if(a9>=0&&a9<=1){ba=a9*this.scrollSpeed*-1}else{if(a2>=0&&a2<=1){ba=a2*this.scrollSpeed}}if(a5>=0&&a5<=1){a6=a5*this.scrollSpeed*-1}else{if(a7>=0&&a7<=1){a6=a7*this.scrollSpeed}}}this.setScrollVel(ba,a6)},setScrollVel:function(a3,a2){this.scrollTopVel=a3;this.scrollLeftVel=a2;this.constrainScrollVel();if((this.scrollTopVel||this.scrollLeftVel)&&!this.scrollIntervalId){this.scrollIntervalId=setInterval(a.proxy(this,"scrollIntervalFunc"),this.scrollIntervalMs)}},constrainScrollVel:function(){var a2=this.scrollEl;if(this.scrollTopVel<0){if(a2.scrollTop()<=0){this.scrollTopVel=0}}else{if(this.scrollTopVel>0){if(a2.scrollTop()+a2[0].clientHeight>=a2[0].scrollHeight){this.scrollTopVel=0}}}if(this.scrollLeftVel<0){if(a2.scrollLeft()<=0){this.scrollLeftVel=0}}else{if(this.scrollLeftVel>0){if(a2.scrollLeft()+a2[0].clientWidth>=a2[0].scrollWidth){this.scrollLeftVel=0}}}},scrollIntervalFunc:function(){var a2=this.scrollEl;var a3=this.scrollIntervalMs/1000;if(this.scrollTopVel){a2.scrollTop(a2.scrollTop()+this.scrollTopVel*a3)}if(this.scrollLeftVel){a2.scrollLeft(a2.scrollLeft()+this.scrollLeftVel*a3)}this.constrainScrollVel();if(!this.scrollTopVel&&!this.scrollLeftVel){this.stopScrolling()}},stopScrolling:function(){if(this.scrollIntervalId){clearInterval(this.scrollIntervalId);this.scrollIntervalId=null;this.computeCoords()}},scrollHandler:function(){if(!this.scrollIntervalId){this.computeCoords()}}};function aq(a2,a3){if(!a2&&!a3){return true}if(a2&&a3){return a2.grid===a3.grid&&a2.row===a3.row&&a2.col===a3.col}return false}function aF(a3,a2){this.options=a2=a2||{};this.sourceEl=a3;this.parentEl=a2.parentEl?a(a2.parentEl):a3.parent()}aF.prototype={options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,mouseY0:null,mouseX0:null,topDelta:null,leftDelta:null,mousemoveProxy:null,isFollowing:false,isHidden:false,isAnimating:false,start:function(a2){if(!this.isFollowing){this.isFollowing=true;this.mouseY0=a2.pageY;this.mouseX0=a2.pageX;this.topDelta=0;this.leftDelta=0;if(!this.isHidden){this.updatePosition()}a(document).on("mousemove",this.mousemoveProxy=a.proxy(this,"mousemove"))}},stop:function(a6,a3){var a2=this;var a5=this.options.revertDuration;function a4(){this.isAnimating=false;a2.destroyEl();this.top0=this.left0=null;if(a3){a3()}}if(this.isFollowing&&!this.isAnimating){this.isFollowing=false;a(document).off("mousemove",this.mousemoveProxy);if(a6&&a5&&!this.isHidden){this.isAnimating=true;this.el.animate({top:this.top0,left:this.left0},{duration:a5,complete:a4})}else{a4()}}},getEl:function(){var a2=this.el;if(!a2){this.sourceEl.width();a2=this.el=this.sourceEl.clone().css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex}).appendTo(this.parentEl)}return a2},destroyEl:function(){if(this.el){this.el.remove();this.el=null}},updatePosition:function(){var a3;var a2;this.getEl();if(this.top0===null){this.sourceEl.width();a3=this.sourceEl.offset();a2=this.el.offsetParent().offset();this.top0=a3.top-a2.top;this.left0=a3.left-a2.left}this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},mousemove:function(a2){this.topDelta=a2.pageY-this.mouseY0;this.leftDelta=a2.pageX-this.mouseX0;if(!this.isHidden){this.updatePosition()}},hide:function(){if(!this.isHidden){this.isHidden=true;if(this.el){this.el.hide()}}},show:function(){if(this.isHidden){this.isHidden=false;this.updatePosition();this.getEl().show()}}};function aL(a2){this.view=a2}aL.prototype={view:null,cellHtml:"<td/>",rowHtml:function(a7,a6){var a8=this.view;var a5=this.getHtmlRenderer("cell",a7);var a2="";var a3;var a4;a6=a6||0;for(a3=0;a3<a8.colCnt;a3++){a4=a8.cellToDate(a6,a3);a2+=a5(a6,a3,a4)}a2=this.bookendCells(a2,a7,a6);return"<tr>"+a2+"</tr>"},bookendCells:function(a3,a9,a8){var ba=this.view;var a4=this.getHtmlRenderer("intro",a9)(a8||0);var a6=this.getHtmlRenderer("outro",a9)(a8||0);var a5=ba.opt("isRTL");var a7=a5?a6:a4;var a2=a5?a4:a6;if(typeof a3==="string"){return a7+a3+a2}else{return a3.prepend(a7).append(a2)}},getHtmlRenderer:function(a5,a6){var a8=this.view;var a2;var a7;var a3;var a4;a2=a5+"Html";if(a6){a7=a6+q(a5)+"Html"}if(a7&&(a4=a8[a7])){a3=a8}else{if(a7&&(a4=this[a7])){a3=this}else{if((a4=a8[a2])){a3=a8}else{if((a4=this[a2])){a3=this}}}}if(typeof a4==="function"){return function(){return a4.apply(a3,arguments)||""}}return function(){return a4||""}}};function aj(a2){aL.call(this,a2);this.coordMap=new ak(this);this.elsByFill={}}aj.prototype=E(aL.prototype);a.extend(aj.prototype,{el:null,coordMap:null,cellDuration:null,elsByFill:null,render:function(){this.bindHandlers()},destroy:function(){},buildCoords:function(a3,a2){},getCellDate:function(a2){},getCellDayEl:function(a2){},rangeToSegs:function(a3,a2){},bindHandlers:function(){var a2=this;this.el.on("mousedown",function(a3){if(!a(a3.target).is(".fc-event-container *, .fc-more")&&!a(a3.target).closest(".fc-popover").length){a2.dayMousedown(a3)}});this.bindSegHandlers()},dayMousedown:function(a8){var a2=this;var bb=this.view;var a3=bb.calendar;var a9=bb.opt("selectable");var a4=null;var ba;var a7;var a5;var a6=new M(this.coordMap,{scroll:bb.opt("dragScroll"),dragStart:function(){bb.unselect()},cellOver:function(bc,bd){if(a6.origDate){a5=a2.getCellDayEl(bc);a4=[bd,a6.origDate].sort(x);ba=a4[0];a7=a4[1].clone().add(a2.cellDuration);if(a9){if(a3.isSelectionAllowedInRange(ba,a7)){a2.renderSelection(ba,a7)}else{a4=null;K()}}}},cellOut:function(bc,bd){a4=null;a2.destroySelection();N()},listenStop:function(bc){if(a4){if(a4[0].isSame(a4[1])){bb.trigger("dayClick",a5[0],ba,bc)}if(a9){bb.reportSelection(ba,a7,bc)}}N()}});a6.mousedown(a8)},renderDrag:function(a4,a2,a3){},destroyDrag:function(){},renderResize:function(a4,a2,a3){},destroyResize:function(){},renderRangeHelper:function(a5,a2,a4){var a6=this.view;var a3;if(!a2&&a6.opt("forceEventDuration")){a2=a6.calendar.getDefaultEventEnd(!a5.hasTime(),a5)}a3=a4?E(a4.event):{};a3.start=a5;a3.end=a2;a3.allDay=!(a5.hasTime()||(a2&&a2.hasTime()));a3.className=(a3.className||[]).concat("fc-helper");if(!a4){a3.editable=false}this.renderHelper(a3,a4)},renderHelper:function(a2,a3){},destroyHelper:function(){},renderSelection:function(a3,a2){this.renderHighlight(a3,a2)},destroySelection:function(){this.destroyHighlight()},renderHighlight:function(a3,a2){this.renderFill("highlight",this.rangeToSegs(a3,a2))},destroyHighlight:function(){this.destroyFill("highlight")},highlightSegClasses:function(){return["fc-highlight"]},renderFill:function(a3,a2){},destroyFill:function(a3){var a2=this.elsByFill[a3];if(a2){a2.remove();delete this.elsByFill[a3]}},renderFillSegEls:function(a8,a7){var a2=this;var a6=this[a8+"SegEl"];var a3="";var a5=[];var a4;if(a7.length){for(a4=0;a4<a7.length;a4++){a3+=this.fillSegHtml(a8,a7[a4])}a(a3).each(function(ba,bb){var bc=a7[ba];var a9=a(bb);if(a6){a9=a6.call(a2,bc,a9)}if(a9){a9=a(a9);if(a9.is(a2.fillSegTag)){bc.el=a9;a5.push(bc)}}})}return a5},fillSegTag:"div",fillSegHtml:function(a7,a4){var a3=this[a7+"SegClasses"];var a6=this[a7+"SegStyles"];var a2=a3?a3.call(this,a4):[];var a5=a6?a6.call(this,a4):"";return"<"+this.fillSegTag+(a2.length?' class="'+a2.join(" ")+'"':"")+(a5?' style="'+a5+'"':"")+" />"},headHtml:function(){return'<div class="fc-row '+this.view.widgetHeaderClass+'"><table><thead>'+this.rowHtml("head")+"</thead></table></div>"},headCellHtml:function(a6,a3,a5){var a7=this.view;var a2=a7.calendar;var a4=a7.opt("columnFormat");return'<th class="fc-day-header '+a7.widgetHeaderClass+" fc-"+G[a5.day()]+'">'+an(a2.formatDate(a5,a4))+"</th>"},bgCellHtml:function(a5,a3,a4){var a6=this.view;var a2=this.getDayClasses(a4);a2.unshift("fc-day",a6.widgetContentClass);return'<td class="'+a2.join(" ")+'" data-date="'+a4.format()+'"></td>'},getDayClasses:function(a3){var a5=this.view;var a4=a5.calendar.getNow().stripTime();var a2=["fc-"+G[a3.day()]];if(a5.name==="month"&&a3.month()!=a5.intervalStart.month()){a2.push("fc-other-month")}if(a3.isSame(a4,"day")){a2.push("fc-today",a5.highlightStateClass)}else{if(a3<a4){a2.push("fc-past")}else{a2.push("fc-future")}}return a2}});a.extend(aj.prototype,{mousedOverSeg:null,isDraggingSeg:false,isResizingSeg:false,segs:null,renderEvents:function(a3){var a7=this.eventsToSegs(a3);var a2=[];var a4=[];var a5,a6;for(a5=0;a5<a7.length;a5++){a6=a7[a5];if(ap(a6.event)){a2.push(a6)}else{a4.push(a6)}}a2=this.renderBgSegs(a2)||a2;a4=this.renderFgSegs(a4)||a4;this.segs=a2.concat(a4)},destroyEvents:function(){this.triggerSegMouseout();this.destroyFgSegs();this.destroyBgSegs();this.segs=null},getSegs:function(){return this.segs||[]},renderFgSegs:function(a2){},destroyFgSegs:function(){},renderFgSegEls:function(a6,a2){var a7=this.view;var a3="";var a5=[];var a4;if(a6.length){for(a4=0;a4<a6.length;a4++){a3+=this.fgSegHtml(a6[a4],a2)}a(a3).each(function(a9,ba){var bb=a6[a9];var a8=a7.resolveEventEl(bb.event,a(ba));if(a8){a8.data("fc-seg",bb);bb.el=a8;a5.push(bb)}})}return a5},fgSegHtml:function(a3,a2){},renderBgSegs:function(a2){return this.renderFill("bgEvent",a2)},destroyBgSegs:function(){this.destroyFill("bgEvent")},bgEventSegEl:function(a3,a2){return this.view.resolveEventEl(a3.event,a2)},bgEventSegClasses:function(a3){var a2=a3.event;var a4=a2.source||{};return["fc-bgevent"].concat(a2.className,a4.className||[])},bgEventSegStyles:function(a6){var a9=this.view;var a3=a6.event;var a7=a3.source||{};var a4=a3.color;var a8=a7.color;var a5=a9.opt("eventColor");var a2=a3.backgroundColor||a4||a7.backgroundColor||a8||a9.opt("eventBackgroundColor")||a5;if(a2){return"background-color:"+a2}return""},businessHoursSegClasses:function(a2){return["fc-nonbusiness","fc-bgevent"]},bindSegHandlers:function(){var a2=this;var a3=this.view;a.each({mouseenter:function(a5,a4){a2.triggerSegMouseover(a5,a4)},mouseleave:function(a5,a4){a2.triggerSegMouseout(a5,a4)},click:function(a5,a4){return a3.trigger("eventClick",this,a5.event,a4)},mousedown:function(a5,a4){if(a(a4.target).is(".fc-resizer")&&a3.isEventResizable(a5.event)){a2.segResizeMousedown(a5,a4)}else{if(a3.isEventDraggable(a5.event)){a2.segDragMousedown(a5,a4)}}}},function(a5,a4){a2.el.on(a5,".fc-event-container > *",function(a6){var a7=a(this).data("fc-seg");if(a7&&!a2.isDraggingSeg&&!a2.isResizingSeg){return a4.call(this,a7,a6)}})})},triggerSegMouseover:function(a3,a2){if(!this.mousedOverSeg){this.mousedOverSeg=a3;this.view.trigger("eventMouseover",a3.el[0],a3.event,a2)}},triggerSegMouseout:function(a3,a2){a2=a2||{};if(this.mousedOverSeg){a3=a3||this.mousedOverSeg;this.mousedOverSeg=null;this.view.trigger("eventMouseout",a3.el[0],a3.event,a2)}},segDragMousedown:function(bb,a6){var a2=this;var bc=this.view;var a3=bc.calendar;var a5=bb.el;var a7=bb.event;var ba,a9;var a8=new aF(bb.el,{parentEl:bc.el,opacity:bc.opt("dragOpacity"),revertDuration:bc.opt("dragRevertDuration"),zIndex:2});var a4=new M(bc.coordMap,{distance:5,scroll:bc.opt("dragScroll"),listenStart:function(bd){a8.hide();a8.start(bd)},dragStart:function(bd){a2.triggerSegMouseout(bb,bd);a2.isDraggingSeg=true;bc.hideEvent(a7);bc.trigger("eventDragStart",a5[0],a7,bd,{})},cellOver:function(bd,be){var bf=bb.cellDate||a4.origDate;var bg=a2.computeDraggedEventDates(bb,bf,be);ba=bg.start;a9=bg.end;if(a3.isEventAllowedInRange(a7,ba,bg.visibleEnd)){if(bc.renderDrag(ba,a9,bb)){a8.hide()}else{a8.show()}}else{ba=null;a8.show();K()}},cellOut:function(){ba=null;bc.destroyDrag();a8.show();N()},dragStop:function(bd){var be=ba&&!ba.isSame(a7.start);a8.stop(!be,function(){a2.isDraggingSeg=false;bc.destroyDrag();bc.showEvent(a7);bc.trigger("eventDragStop",a5[0],a7,bd,{});if(be){bc.eventDrop(a5[0],a7,ba,bd)}});N()},listenStop:function(){a8.stop()}});a4.mousedown(a6)},computeDraggedEventDates:function(ba,a3,a4){var bc=this.view;var a6=ba.event;var bb=a6.start;var a5=bc.calendar.getEventEnd(a6);var a2;var a9;var a8;var a7;var bd;if(a4.hasTime()===a3.hasTime()){a2=H(a4,a3);a9=bb.clone().add(a2);if(a6.end===null){a8=null}else{a8=a5.clone().add(a2)}a7=a6.allDay}else{a9=a4;a8=null;a7=!a4.hasTime()}bd=a8||bc.calendar.getDefaultEventEnd(a7,a9);return{start:a9,end:a8,visibleEnd:bd}},segResizeMousedown:function(bb,a8){var a2=this;var bd=this.view;var a3=bd.calendar;var a6=bb.el;var a9=bb.event;var bc=a9.start;var a7=bd.calendar.getEventEnd(a9);var ba=null;var a5;function a4(){a2.destroyResize();bd.showEvent(a9)}a5=new M(this.coordMap,{distance:5,scroll:bd.opt("dragScroll"),dragStart:function(be){a2.triggerSegMouseout(bb,be);a2.isResizingSeg=true;bd.trigger("eventResizeStart",a6[0],a9,be,{})},cellOver:function(be,bf){if(bf.isBefore(bc)){bf=bc}ba=bf.clone().add(a2.cellDuration);if(a3.isEventAllowedInRange(a9,bc,ba)){if(ba.isSame(a7)){ba=null;a4()}else{a2.renderResize(bc,ba,bb);bd.hideEvent(a9)}}else{ba=null;a4();K()}},cellOut:function(){ba=null;a4();N()},dragStop:function(be){a2.isResizingSeg=false;a4();N();bd.trigger("eventResizeStop",a6[0],a9,be,{});if(ba){bd.eventResize(a6[0],a9,ba,be)}}});a5.mousedown(a8)},getSegClasses:function(a6,a4,a5){var a3=a6.event;var a2=["fc-event",a6.isStart?"fc-start":"fc-not-start",a6.isEnd?"fc-end":"fc-not-end"].concat(a3.className,a3.source?a3.source.className:[]);if(a4){a2.push("fc-draggable")}if(a5){a2.push("fc-resizable")}return a2},getEventSkinCss:function(a4){var bb=this.view;var a7=a4.source||{};var a5=a4.color;var a8=a7.color;var a6=bb.opt("eventColor");var a2=a4.backgroundColor||a5||a7.backgroundColor||a8||bb.opt("eventBackgroundColor")||a6;var a3=a4.borderColor||a5||a7.borderColor||a8||bb.opt("eventBorderColor")||a6;var ba=a4.textColor||a7.textColor||bb.opt("eventTextColor");var a9=[];if(a2){a9.push("background-color:"+a2)}if(a3){a9.push("border-color:"+a3)}if(ba){a9.push("color:"+ba)}return a9.join(";")},eventsToSegs:function(a3,a5){var a2=this.eventsToRanges(a3);var a6=[];var a4;for(a4=0;a4<a2.length;a4++){a6.push.apply(a6,this.eventRangeToSegs(a2[a4],a5))}return a6},eventsToRanges:function(a3){var a2=this;var a4=al(a3);var a5=[];a.each(a4,function(a7,a6){if(a6.length){a5.push.apply(a5,au(a6[0])?a2.eventsToInverseRanges(a6):a2.eventsToNormalRanges(a6))}});return a5},eventsToNormalRanges:function(a5){var a2=this.view.calendar;var a8=[];var a7,a3;var a6,a4;for(a7=0;a7<a5.length;a7++){a3=a5[a7];a6=a3.start.clone().stripZone();a4=a2.getEventEnd(a3).stripZone();a8.push({event:a3,start:a6,end:a4,eventStartMS:+a6,eventDurationMS:a4-a6})}return a8},eventsToInverseRanges:function(a3){var a9=this.view;var bb=a9.start.clone().stripZone();var ba=a9.end.clone().stripZone();var a7=this.eventsToNormalRanges(a3);var a5=[];var a2=a3[0];var a8=bb;var a4,a6;a7.sort(w);for(a4=0;a4<a7.length;a4++){a6=a7[a4];if(a6.start>a8){a5.push({event:a2,start:a8,end:a6.start})}a8=a6.end}if(a8<ba){a5.push({event:a2,start:a8,end:ba})}return a5},eventRangeToSegs:function(a2,a4){var a6;var a3,a5;if(a4){a6=a4(a2.start,a2.end)}else{a6=this.rangeToSegs(a2.start,a2.end)}for(a3=0;a3<a6.length;a3++){a5=a6[a3];a5.event=a2.event;a5.eventStartMS=a2.eventStartMS;a5.eventDurationMS=a2.eventDurationMS}return a6}});function ap(a2){var a3=af(a2);return a3==="background"||a3==="inverse-background"}function au(a2){return af(a2)==="inverse-background"}function af(a2){return S((a2.source||{}).rendering,a2.rendering)}function al(a3){var a4={};var a5,a2;for(a5=0;a5<a3.length;a5++){a2=a3[a5];(a4[a2._id]||(a4[a2._id]=[])).push(a2)}return a4}function w(a2,a3){return a2.eventStartMS-a3.eventStartMS}function y(a2,a3){return a2.eventStartMS-a3.eventStartMS||a3.eventDurationMS-a2.eventDurationMS||a3.event.allDay-a2.event.allDay||(a2.event.title||"").localeCompare(a3.event.title)}function F(a2){aj.call(this,a2)}F.prototype=E(aj.prototype);a.extend(F.prototype,{numbersVisible:false,cellDuration:aD.duration({days:1}),bottomCoordPadding:0,rowEls:null,dayEls:null,helperEls:null,render:function(a3){var a5=this.view;var a2="";var a4;for(a4=0;a4<a5.rowCnt;a4++){a2+=this.dayRowHtml(a4,a3)}this.el.html(a2);this.rowEls=this.el.find(".fc-row");this.dayEls=this.el.find(".fc-day");this.dayEls.each(function(a7,a8){var a6=a5.cellToDate(Math.floor(a7/a5.colCnt),a7%a5.colCnt);a5.trigger("dayRender",null,a6,a(a8))});aj.prototype.render.call(this)},destroy:function(){this.destroySegPopover()},dayRowHtml:function(a4,a3){var a5=this.view;var a2=["fc-row","fc-week",a5.widgetContentClass];if(a3){a2.push("fc-rigid")}return'<div class="'+a2.join(" ")+'"><div class="fc-bg"><table>'+this.rowHtml("day",a4)+'</table></div><div class="fc-content-skeleton"><table>'+(this.numbersVisible?"<thead>"+this.rowHtml("number",a4)+"</thead>":"")+"</table></div></div>"},dayCellHtml:function(a4,a2,a3){return this.bgCellHtml(a4,a2,a3)},buildCoords:function(a7,a3){var a2=this.view.colCnt;var a4,a5,a6;this.dayEls.slice(0,a2).each(function(a9,a8){a4=a(a8);a5=a4.offset().left;if(a9){a6[1]=a5}a6=[a5];a3[a9]=a6});a6[1]=a5+a4.outerWidth();this.rowEls.each(function(a9,a8){a4=a(a8);a5=a4.offset().top;if(a9){a6[1]=a5}a6=[a5];a7[a9]=a6});a6[1]=a5+a4.outerHeight()+this.bottomCoordPadding},getCellDate:function(a2){return this.view.cellToDate(a2)},getCellDayEl:function(a2){return this.dayEls.eq(a2.row*this.view.colCnt+a2.col)},rangeToSegs:function(a3,a2){return this.view.rangeToSegments(a3,a2)},renderDrag:function(a5,a2,a4){var a3;this.renderHighlight(a5,a2||this.view.calendar.getDefaultEventEnd(true,a5));if(a4&&!a4.el.closest(this.el).length){this.renderRangeHelper(a5,a2,a4);a3=this.view.opt("dragOpacity");if(a3!==undefined){this.helperEls.css("opacity",a3)}return true}},destroyDrag:function(){this.destroyHighlight();this.destroyHelper()},renderResize:function(a4,a2,a3){this.renderHighlight(a4,a2);this.renderRangeHelper(a4,a2,a3)},destroyResize:function(){this.destroyHighlight();this.destroyHelper()},renderHelper:function(a2,a6){var a3=[];var a5=this.eventsToSegs([a2]);var a4;a5=this.renderFgSegEls(a5);a4=this.renderSegRows(a5);this.rowEls.each(function(a7,a9){var a8=a(a9);var ba=a('<div class="fc-helper-skeleton"><table/></div>');var bb;if(a6&&a6.row===a7){bb=a6.el.position().top}else{bb=a8.find(".fc-content-skeleton tbody").position().top}ba.css("top",bb).find("table").append(a4[a7].tbodyEl);a8.append(ba);a3.push(ba[0])});this.helperEls=a(a3)},destroyHelper:function(){if(this.helperEls){this.helperEls.remove();this.helperEls=null}},fillSegTag:"td",renderFill:function(a7,a5){var a3=[];var a2,a4;var a6;a5=this.renderFillSegEls(a7,a5);for(a2=0;a2<a5.length;a2++){a4=a5[a2];a6=this.renderFillRow(a7,a4);this.rowEls.eq(a4.row).append(a6);a3.push(a6[0])}this.elsByFill[a7]=a(a3);return a5},renderFillRow:function(a8,a4){var a2=this.view.colCnt;var a6=a4.leftCol;var a3=a4.rightCol+1;var a5;var a7;a5=a('<div class="fc-'+a8.toLowerCase()+'-skeleton"><table><tr/></table></div>');a7=a5.find("tr");if(a6>0){a7.append('<td colspan="'+a6+'"/>')}a7.append(a4.el.attr("colspan",a3-a6));if(a3<a2){a7.append('<td colspan="'+(a2-a3)+'"/>')}this.bookendCells(a7,a8);return a5}});a.extend(F.prototype,{rowStructs:null,destroyEvents:function(){this.destroySegPopover();aj.prototype.destroyEvents.apply(this,arguments)},getSegs:function(){return aj.prototype.getSegs.call(this).concat(this.popoverSegs||[])},renderBgSegs:function(a3){var a2=a.grep(a3,function(a4){return a4.event.allDay});return aj.prototype.renderBgSegs.call(this,a2)},renderFgSegs:function(a3){var a2;a3=this.renderFgSegEls(a3);a2=this.rowStructs=this.renderSegRows(a3);this.rowEls.each(function(a4,a5){a(a5).find(".fc-content-skeleton > table").append(a2[a4].tbodyEl)});return a3},destroyFgSegs:function(){var a3=this.rowStructs||[];var a2;while((a2=a3.pop())){a2.tbodyEl.remove()}this.rowStructs=null},renderSegRows:function(a5){var a3=[];var a4;var a2;a4=this.groupSegRows(a5);for(a2=0;a2<a4.length;a2++){a3.push(this.renderSegRow(a2,a4[a2]))}return a3},fgSegHtml:function(a8,a3){var bc=this.view;var a7=bc.opt("isRTL");var a4=a8.event;var a5=bc.isEventDraggable(a4);var a6=!a3&&a4.allDay&&a8.isEnd&&bc.isEventResizable(a4);var a2=this.getSegClasses(a8,a5,a6);var a9=this.getEventSkinCss(a4);var ba="";var bb;a2.unshift("fc-day-grid-event");if(!a4.allDay&&a8.isStart){ba='<span class="fc-time">'+an(bc.getEventTimeText(a4))+"</span>"}bb='<span class="fc-title">'+(an(a4.title||"")||"&nbsp;")+"</span>";return'<a class="'+a2.join(" ")+'"'+(a4.url?' href="'+an(a4.url)+'"':"")+(a9?' style="'+a9+'"':"")+'><div class="fc-content">'+(a7?bb+" "+ba:ba+" "+bb)+"</div>"+(a6?'<div class="fc-resizer"/>':"")+"</a>"},renderSegRow:function(bb,bc){var bj=this.view;var a4=bj.colCnt;var be=this.buildSegLevels(bc);var a8=Math.max(1,be.length);var bg=a("<tbody/>");var bf=[];var a2=[];var ba=[];var a6,a9;var a3;var bi;var a7,bd;var bh;function a5(bk){while(a3<bk){bh=(ba[a6-1]||[])[a3];if(bh){bh.attr("rowspan",parseInt(bh.attr("rowspan")||1,10)+1)}else{bh=a("<td/>");bi.append(bh)}a2[a6][a3]=bh;ba[a6][a3]=bh;a3++}}for(a6=0;a6<a8;a6++){a9=be[a6];a3=0;bi=a("<tr/>");bf.push([]);a2.push([]);ba.push([]);if(a9){for(a7=0;a7<a9.length;a7++){bd=a9[a7];a5(bd.leftCol);bh=a('<td class="fc-event-container"/>').append(bd.el);if(bd.leftCol!=bd.rightCol){bh.attr("colspan",bd.rightCol-bd.leftCol+1)}else{ba[a6][a3]=bh}while(a3<=bd.rightCol){a2[a6][a3]=bh;bf[a6][a3]=bd;a3++}bi.append(bh)}}a5(a4);this.bookendCells(bi,"eventSkeleton");bg.append(bi)}return{row:bb,tbodyEl:bg,cellMatrix:a2,segMatrix:bf,segLevels:be,segs:bc}},buildSegLevels:function(a6){var a4=[];var a2,a5;var a3;a6.sort(y);for(a2=0;a2<a6.length;a2++){a5=a6[a2];for(a3=0;a3<a4.length;a3++){if(!ar(a5,a4[a3])){break}}a5.level=a3;(a4[a3]||(a4[a3]=[])).push(a5)}for(a3=0;a3<a4.length;a3++){a4[a3].sort(u)}return a4},groupSegRows:function(a4){var a5=this.view;var a3=[];var a2;for(a2=0;a2<a5.rowCnt;a2++){a3.push([])}for(a2=0;a2<a4.length;a2++){a3[a4[a2].row].push(a4[a2])}return a3}});function ar(a5,a4){var a2,a3;for(a2=0;a2<a4.length;a2++){a3=a4[a2];if(a3.leftCol<=a5.rightCol&&a3.rightCol>=a5.leftCol){return true}}return false}function u(a2,a3){return a2.leftCol-a3.leftCol}a.extend(F.prototype,{segPopover:null,popoverSegs:null,destroySegPopover:function(){if(this.segPopover){this.segPopover.hide()}},limitRows:function(a2){var a5=this.rowStructs||[];var a3;var a4;for(a3=0;a3<a5.length;a3++){this.unlimitRow(a3);if(!a2){a4=false}else{if(typeof a2==="number"){a4=a2}else{a4=this.computeRowLevelLimit(a3)}}if(a4!==false){this.limitRow(a3,a4)}}},computeRowLevelLimit:function(a3){var a4=this.rowEls.eq(a3);var a5=a4.height();var a7=this.rowStructs[a3].tbodyEl.children();var a2,a6;for(a2=0;a2<a7.length;a2++){a6=a7.eq(a2).removeClass("fc-limited");if(a6.position().top+a6.outerHeight()>a5){return a2}}return false},limitRow:function(bh,ba){var a2=this;var bp=this.view;var bj=this.rowStructs[bh];var be=[];var a5=0;var a3;var bb;var a4;var bc;var a8,bk;var bm;var bo;var a6;var bn,bi;var bl;var a9;var bf,bg,bd;function a7(bq){while(a5<bq){a3={row:bh,col:a5};bm=a2.getCellSegs(a3,ba);if(bm.length){bn=a4[ba-1][a5];bd=a2.renderMoreLink(a3,bm);bg=a("<div/>").append(bd);bn.append(bg);be.push(bg[0])}a5++}}if(ba&&ba<bj.segLevels.length){bb=bj.segLevels[ba-1];a4=bj.cellMatrix;bc=bj.tbodyEl.children().slice(ba).addClass("fc-limited").get();for(a8=0;a8<bb.length;a8++){bk=bb[a8];a7(bk.leftCol);a6=[];bo=0;while(a5<=bk.rightCol){a3={row:bh,col:a5};bm=this.getCellSegs(a3,ba);a6.push(bm);bo+=bm.length;a5++}if(bo){bn=a4[ba-1][bk.leftCol];bi=bn.attr("rowspan")||1;bl=[];for(a9=0;a9<a6.length;a9++){bf=a('<td class="fc-more-cell"/>').attr("rowspan",bi);bm=a6[a9];a3={row:bh,col:bk.leftCol+a9};bd=this.renderMoreLink(a3,[bk].concat(bm));bg=a("<div/>").append(bd);bf.append(bg);bl.push(bf[0]);be.push(bf[0])}bn.addClass("fc-limited").after(a(bl));bc.push(bn[0])}}a7(bp.colCnt);bj.moreEls=a(be);bj.limitedEls=a(bc)}},unlimitRow:function(a2){var a3=this.rowStructs[a2];if(a3.moreEls){a3.moreEls.remove();a3.moreEls=null}if(a3.limitedEls){a3.limitedEls.removeClass("fc-limited");a3.limitedEls=null}},renderMoreLink:function(a3,a4){var a2=this;var a5=this.view;return a('<a class="fc-more"/>').text(this.getMoreLinkText(a4.length)).on("click",function(ba){var a7=a5.opt("eventLimitClick");var a8=a5.cellToDate(a3);var bb=a(this);var a9=a2.getCellDayEl(a3);var a6=a2.getCellSegs(a3);var bc=a2.resliceDaySegs(a6,a8);var bd=a2.resliceDaySegs(a4,a8);if(typeof a7==="function"){a7=a5.trigger("eventLimitClick",null,{date:a8,dayEl:a9,moreEl:bb,segs:bc,hiddenSegs:bd},ba)}if(a7==="popover"){a2.showSegPopover(a8,a3,bb,bc)}else{if(typeof a7==="string"){a5.calendar.zoomTo(a8,a7)}}})},showSegPopover:function(a4,a3,a5,a8){var a2=this;var ba=this.view;var a6=a5.parent();var a9;var a7;if(ba.rowCnt==1){a9=this.view.el}else{a9=this.rowEls.eq(a3.row)}a7={className:"fc-more-popover",content:this.renderSegPopoverContent(a4,a8),parentEl:this.el,top:a9.offset().top,autoHide:true,viewportConstrain:ba.opt("popoverViewportConstrain"),hide:function(){a2.segPopover.destroy();a2.segPopover=null;a2.popoverSegs=null}};if(ba.opt("isRTL")){a7.right=a6.offset().left+a6.outerWidth()+1}else{a7.left=a6.offset().left-1}this.segPopover=new aK(a7);this.segPopover.show()},renderSegPopoverContent:function(a3,a7){var a9=this.view;var a5=a9.opt("theme");var a8=a3.format(a9.opt("dayPopoverFormat"));var a2=a('<div class="fc-header '+a9.widgetHeaderClass+'"><span class="fc-close '+(a5?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span><span class="fc-title">'+an(a8)+'</span><div class="fc-clear"/></div><div class="fc-body '+a9.widgetContentClass+'"><div class="fc-event-container"></div></div>');var a6=a2.find(".fc-event-container");var a4;a7=this.renderFgSegEls(a7,true);this.popoverSegs=a7;for(a4=0;a4<a7.length;a4++){a7[a4].cellDate=a3;a6.append(a7[a4].el)}return a2},resliceDaySegs:function(a6,a2){var a5=a.map(a6,function(a7){return a7.event});var a4=a2.clone().stripTime();var a3=a4.clone().add(1,"days");return this.eventsToSegs(a5,function(a8,a7){var a9=ao(a8,a7,a4,a3);return a9?[a9]:[]})},getMoreLinkText:function(a2){var a4=this.view;var a3=a4.opt("eventLimitText");if(typeof a3==="function"){return a3(a2)}else{return"+"+a2+" "+a3}},getCellSegs:function(a2,a7){var a5=this.rowStructs[a2.row].segMatrix;var a3=a7||0;var a6=[];var a4;while(a3<a5.length){a4=a5[a3][a2.col];if(a4){a6.push(a4)}a3++}return a6}});function aV(a2){aj.call(this,a2)}aV.prototype=E(aj.prototype);a.extend(aV.prototype,{slotDuration:null,snapDuration:null,minTime:null,maxTime:null,dayEls:null,slatEls:null,slatTops:null,helperEl:null,businessHourSegs:null,render:function(){this.processOptions();this.el.html(this.renderHtml());this.dayEls=this.el.find(".fc-day");this.slatEls=this.el.find(".fc-slats tr");this.computeSlatTops();this.renderBusinessHours();aj.prototype.render.call(this)},renderBusinessHours:function(){var a2=this.view.calendar.getBusinessHoursEvents();this.businessHourSegs=this.renderFill("businessHours",this.eventsToSegs(a2),"bgevent")},renderHtml:function(){return'<div class="fc-bg"><table>'+this.rowHtml("slotBg")+'</table></div><div class="fc-slats"><table>'+this.slatRowHtml()+"</table></div>"},slotBgCellHtml:function(a4,a2,a3){return this.bgCellHtml(a4,a2,a3)},slatRowHtml:function(){var ba=this.view;var a3=ba.calendar;var a5=ba.opt("isRTL");var a4="";var a8=this.slotDuration.asMinutes()%15===0;var a9=aD.duration(+this.minTime);var a7;var a6;var a2;while(a9<this.maxTime){a7=ba.start.clone().time(a9);a6=a7.minutes();a2='<td class="fc-axis fc-time '+ba.widgetContentClass+'" '+ba.axisStyleAttr()+">"+((!a8||!a6)?"<span>"+an(a3.formatDate(a7,ba.opt("axisFormat")))+"</span>":"")+"</td>";a4+="<tr "+(!a6?"":'class="fc-minor"')+">"+(!a5?a2:"")+'<td class="'+ba.widgetContentClass+'"/>'+(a5?a2:"")+"</tr>";a9.add(this.slotDuration)}return a4},processOptions:function(){var a4=this.view;var a2=a4.opt("slotDuration");var a3=a4.opt("snapDuration");a2=aD.duration(a2);a3=a3?aD.duration(a3):a2;this.slotDuration=a2;this.snapDuration=a3;this.cellDuration=a3;this.minTime=aD.duration(a4.opt("minTime"));this.maxTime=aD.duration(a4.opt("maxTime"))},rangeToSegs:function(a7,a6){var ba=this.view;var a9=[];var a8;var a3;var a2;var a5,a4;a7=a7.clone().stripZone();a6=a6.clone().stripZone();for(a3=0;a3<ba.colCnt;a3++){a2=ba.cellToDate(0,a3);a5=a2.clone().time(this.minTime);a4=a2.clone().time(this.maxTime);a8=ao(a7,a6,a5,a4);if(a8){a8.col=a3;a9.push(a8)}}return a9},resize:function(){this.computeSlatTops();this.updateSegVerticals()},buildCoords:function(a8,a3){var a2=this.view.colCnt;var a6=this.el.offset().top;var a9=aD.duration(+this.minTime);var a7=null;var a4,a5;this.dayEls.slice(0,a2).each(function(bb,ba){a4=a(ba);a5=a4.offset().left;if(a7){a7[1]=a5}a7=[a5];a3[bb]=a7});a7[1]=a5+a4.outerWidth();a7=null;while(a9<this.maxTime){a5=a6+this.computeTimeTop(a9);if(a7){a7[1]=a5}a7=[a5];a8.push(a7);a9.add(this.snapDuration)}a7[1]=a6+this.computeTimeTop(a9)},getCellDate:function(a3){var a4=this.view;var a2=a4.calendar;return a2.rezoneDate(a4.cellToDate(0,a3.col).time(this.minTime+this.snapDuration*a3.row))},getCellDayEl:function(a2){return this.dayEls.eq(a2.col)},computeDateTop:function(a2,a3){return this.computeTimeTop(aD.duration(a2.clone().stripZone()-a3.clone().stripTime()))},computeTimeTop:function(a7){var a3=(a7-this.minTime)/this.slotDuration;var a4;var a5;var a6;var a2;a3=Math.max(0,a3);a3=Math.min(this.slatEls.length,a3);a4=Math.floor(a3);a5=a3-a4;a6=this.slatTops[a4];if(a5){a2=this.slatTops[a4+1];return a6+(a2-a6)*a5}else{return a6}},computeSlatTops:function(){var a3=[];var a2;this.slatEls.each(function(a4,a5){a2=a(a5).position().top;a3.push(a2)});a3.push(a2+this.slatEls.last().outerHeight());this.slatTops=a3},renderDrag:function(a5,a2,a4){var a3;if(a4){this.renderRangeHelper(a5,a2,a4);a3=this.view.opt("dragOpacity");if(a3!==undefined){this.helperEl.css("opacity",a3)}return true}else{this.renderHighlight(a5,a2||this.view.calendar.getDefaultEventEnd(false,a5))}},destroyDrag:function(){this.destroyHelper();this.destroyHighlight()},renderResize:function(a4,a2,a3){this.renderRangeHelper(a4,a2,a3)},destroyResize:function(){this.destroyHelper()},renderHelper:function(a2,a7){var a5=this.eventsToSegs([a2]);var a8;var a3,a4;var a6;a5=this.renderFgSegEls(a5);a8=this.renderSegTable(a5);for(a3=0;a3<a5.length;a3++){a4=a5[a3];if(a7&&a7.col===a4.col){a6=a7.el;a4.el.css({left:a6.css("left"),right:a6.css("right"),"margin-left":a6.css("margin-left"),"margin-right":a6.css("margin-right")})}}this.helperEl=a('<div class="fc-helper-skeleton"/>').append(a8).appendTo(this.el)},destroyHelper:function(){if(this.helperEl){this.helperEl.remove();this.helperEl=null}},renderSelection:function(a3,a2){if(this.view.opt("selectHelper")){this.renderRangeHelper(a3,a2)}else{this.renderHighlight(a3,a2)}},destroySelection:function(){this.destroyHelper();this.destroyHighlight()},renderFill:function(be,ba,a2){var bf=this.view;var a9;var bb;var bd;var a3,a4;var bc;var a5;var a6;var a7,a8;if(ba.length){ba=this.renderFillSegEls(be,ba);a9=this.groupSegCols(ba);a2=a2||be.toLowerCase();bb=a('<div class="fc-'+a2+'-skeleton"><table><tr/></table></div>');bd=bb.find("tr");for(a3=0;a3<a9.length;a3++){a4=a9[a3];bc=a("<td/>").appendTo(bd);if(a4.length){a5=a('<div class="fc-'+a2+'-container"/>').appendTo(bc);a6=bf.cellToDate(0,a3);for(a7=0;a7<a4.length;a7++){a8=a4[a7];a5.append(a8.el.css({top:this.computeDateTop(a8.start,a6),bottom:-this.computeDateTop(a8.end,a6)}))}}}this.bookendCells(bd,be);this.el.append(bb);this.elsByFill[be]=bb}return ba}});a.extend(aV.prototype,{eventSkeletonEl:null,renderFgSegs:function(a2){a2=this.renderFgSegEls(a2);this.el.append(this.eventSkeletonEl=a('<div class="fc-content-skeleton"/>').append(this.renderSegTable(a2)));return a2},destroyFgSegs:function(a2){if(this.eventSkeletonEl){this.eventSkeletonEl.remove();this.eventSkeletonEl=null}},renderSegTable:function(a8){var a9=a("<table><tr/></table>");var ba=a9.find("tr");var a7;var a5,a6;var a2,a3;var a4;a7=this.groupSegCols(a8);this.computeSegVerticals(a8);for(a2=0;a2<a7.length;a2++){a3=a7[a2];aJ(a3);a4=a('<div class="fc-event-container"/>');for(a5=0;a5<a3.length;a5++){a6=a3[a5];a6.el.css(this.generateSegPositionCss(a6));if(a6.bottom-a6.top<30){a6.el.addClass("fc-short")}a4.append(a6.el)}ba.append(a("<td/>").append(a4))}this.bookendCells(ba,"eventSkeleton");return a9},updateSegVerticals:function(){var a2=(this.segs||[]).concat(this.businessHourSegs||[]);var a3;this.computeSegVerticals(a2);for(a3=0;a3<a2.length;a3++){a2[a3].el.css(this.generateSegVerticalCss(a2[a3]))}},computeSegVerticals:function(a4){var a2,a3;for(a2=0;a2<a4.length;a2++){a3=a4[a2];a3.top=this.computeDateTop(a3.start,a3.start);a3.bottom=this.computeDateTop(a3.end,a3.start)}},fgSegHtml:function(a8,a3){var bc=this.view;var a4=a8.event;var a6=bc.isEventDraggable(a4);var a7=!a3&&a8.isEnd&&bc.isEventResizable(a4);var a2=this.getSegClasses(a8,a6,a7);var a9=this.getEventSkinCss(a4);var bb;var a5;var ba;a2.unshift("fc-time-grid-event");if(bc.isMultiDayEvent(a4)){if(a8.isStart||a8.isEnd){bb=bc.getEventTimeText(a8.start,a8.end);a5=bc.getEventTimeText(a8.start,a8.end,"LT");ba=bc.getEventTimeText(a8.start,null)}}else{bb=bc.getEventTimeText(a4);a5=bc.getEventTimeText(a4,"LT");ba=bc.getEventTimeText(a4.start,null)}return'<a class="'+a2.join(" ")+'"'+(a4.url?' href="'+an(a4.url)+'"':"")+(a9?' style="'+a9+'"':"")+'><div class="fc-content">'+(bb?'<div class="fc-time" data-start="'+an(ba)+'" data-full="'+an(a5)+'"><span>'+an(bb)+"</span></div>":"")+(a4.title?'<div class="fc-title">'+an(a4.title)+"</div>":"")+'</div><div class="fc-bg"/>'+(a7?'<div class="fc-resizer"/>':"")+"</a>"},generateSegPositionCss:function(a8){var ba=this.view;var a4=ba.opt("isRTL");var a9=ba.opt("slotEventOverlap");var a2=a8.backwardCoord;var a3=a8.forwardCoord;var a6=this.generateSegVerticalCss(a8);var a5;var a7;if(a9){a3=Math.min(1,a2+(a3-a2)*2)}if(a4){a5=1-a3;a7=a2}else{a5=a2;a7=1-a3}a6.zIndex=a8.level+1;a6.left=a5*100+"%";a6.right=a7*100+"%";if(a9&&a8.forwardPressure){a6[a4?"marginLeft":"marginRight"]=10*2}return a6},generateSegVerticalCss:function(a2){return{top:a2.top,bottom:-a2.bottom}},groupSegCols:function(a4){var a5=this.view;var a3=[];var a2;for(a2=0;a2<a5.colCnt;a2++){a3.push([])}for(a2=0;a2<a4.length;a2++){a3[a4[a2].col].push(a4[a2])}return a3}});function aJ(a5){var a4;var a3;var a2;a5.sort(y);a4=o(a5);A(a4);if((a3=a4[0])){for(a2=0;a2<a3.length;a2++){D(a3[a2])}for(a2=0;a2<a3.length;a2++){C(a3[a2],0,0)}}}function o(a6){var a4=[];var a2,a5;var a3;for(a2=0;a2<a6.length;a2++){a5=a6[a2];for(a3=0;a3<a4.length;a3++){if(!B(a5,a4[a3]).length){break}}a5.level=a3;(a4[a3]||(a4[a3]=[])).push(a5)}return a4}function A(a6){var a2,a5;var a3,a7;var a4;for(a2=0;a2<a6.length;a2++){a5=a6[a2];for(a3=0;a3<a5.length;a3++){a7=a5[a3];a7.forwardSegs=[];for(a4=a2+1;a4<a6.length;a4++){B(a7,a6[a4],a7.forwardSegs)}}}}function D(a6){var a4=a6.forwardSegs;var a2=0;var a5,a3;if(a6.forwardPressure===undefined){for(a5=0;a5<a4.length;a5++){a3=a4[a5];D(a3);a2=Math.max(a2,1+a3.forwardPressure)}a6.forwardPressure=a2}}function C(a4,a6,a5){var a2=a4.forwardSegs;var a3;if(a4.forwardCoord===undefined){if(!a2.length){a4.forwardCoord=1}else{a2.sort(v);C(a2[0],a6+1,a5);a4.forwardCoord=a2[0].backwardCoord}a4.backwardCoord=a4.forwardCoord-(a4.forwardCoord-a5)/(a6+1);for(a3=0;a3<a2.length;a3++){C(a2[a3],0,a4.forwardCoord)}}}function B(a5,a3,a4){a4=a4||[];for(var a2=0;a2<a3.length;a2++){if(ax(a5,a3[a2])){a4.push(a3[a2])}}return a4}function ax(a2,a3){return a2.bottom>a3.top&&a2.top<a3.bottom}function v(a2,a3){return a3.forwardPressure-a2.forwardPressure||(a2.backwardCoord||0)-(a3.backwardCoord||0)||y(a2,a3)}a1.prototype={calendar:null,coordMap:null,el:null,start:null,end:null,intervalStart:null,intervalEnd:null,rowCnt:null,colCnt:null,isSelected:false,scrollerEl:null,scrollTop:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,documentMousedownProxy:null,documentDragStartProxy:null,init:function(){var a2=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=a2+"-widget-header";this.widgetContentClass=a2+"-widget-content";this.highlightStateClass=a2+"-state-highlight";this.documentMousedownProxy=a.proxy(this,"documentMousedown");this.documentDragStartProxy=a.proxy(this,"documentDragStart")},render:function(){this.updateSize();this.trigger("viewRender",this,this,this.el);a(document).on("mousedown",this.documentMousedownProxy).on("dragstart",this.documentDragStartProxy)},destroy:function(){this.unselect();this.trigger("viewDestroy",this,this,this.el);this.destroyEvents();this.el.empty();a(document).off("mousedown",this.documentMousedownProxy).off("dragstart",this.documentDragStartProxy)},incrementDate:function(a2,a3){},updateSize:function(a2){if(a2){this.recordScroll()}this.updateHeight();this.updateWidth()},updateWidth:function(){},updateHeight:function(){var a2=this.calendar;this.setHeight(a2.getSuggestedViewHeight(),a2.isHeightAuto())},setHeight:function(a2,a3){},computeScrollerHeight:function(a4){var a2=this.el.add(this.scrollerEl);var a3;a2.css({position:"relative",left:-1});a3=this.el.outerHeight()-this.scrollerEl.height();a2.css({position:"",left:""});return a4-a3},recordScroll:function(){if(this.scrollerEl){this.scrollTop=this.scrollerEl.scrollTop()}},restoreScroll:function(){if(this.scrollTop!==null){this.scrollerEl.scrollTop(this.scrollTop)}},renderEvents:function(a2){this.segEach(function(a3){this.trigger("eventAfterRender",a3.event,a3.event,a3.el)});this.trigger("eventAfterAllRender")},destroyEvents:function(){this.segEach(function(a2){this.trigger("eventDestroy",a2.event,a2.event,a2.el)})},resolveEventEl:function(a4,a3){var a2=this.trigger("eventRender",a4,a4,a3);if(a2===false){a3=null}else{if(a2&&a2!==true){a3=a(a2)}}return a3},showEvent:function(a2){this.segEach(function(a3){a3.el.css("visibility","")},a2)},hideEvent:function(a2){this.segEach(function(a3){a3.el.css("visibility","hidden")},a2)},segEach:function(a3,a2){var a5=this.getSegs();var a4;for(a4=0;a4<a5.length;a4++){if(!a2||a5[a4].event._id===a2._id){a3.call(this,a5[a4])}}},getSegs:function(){},renderDrag:function(a4,a2,a3){},destroyDrag:function(){},documentDragStart:function(a7,bc){var a2=this;var a4=this.calendar;var ba=null;var a8=null;var bd=null;var a6;var a3;var bb;var a9;var a5;if(this.opt("droppable")){a6=a(a7.target);a3=this.opt("dropAccept");if(a.isFunction(a3)?a3.call(a6[0],a6):a6.is(a3)){bb=ae(a6);a9=bb.eventProps;a5=new M(this.coordMap,{cellOver:function(be,bf){ba=bf;a8=bb.duration?ba.clone().add(bb.duration):null;bd=a8||a4.getDefaultEventEnd(!ba.hasTime(),ba);if(a9){a.extend(a9,{start:ba,end:a8})}if(a4.isExternalDragAllowedInRange(ba,bd,a9)){a2.renderDrag(ba,bd)}else{ba=null;K()}},cellOut:function(){ba=null;a2.destroyDrag();N()}});a(document).one("dragstop",function(be,bg){var bf;a2.destroyDrag();N();if(ba){if(bb.startTime&&!ba.hasTime()){ba.time(bb.startTime)}a2.trigger("drop",a6[0],ba,be,bg);if(a9){bf=a4.renderEvent(a9,bb.stick);a2.trigger("eventReceive",null,bf[0])}}});a5.startDrag(a7)}}},select:function(a4,a2,a3){this.unselect(a3);this.renderSelection(a4,a2);this.reportSelection(a4,a2,a3)},renderSelection:function(a3,a2){},reportSelection:function(a4,a2,a3){this.isSelected=true;this.trigger("select",null,a4,a2,a3)},unselect:function(a2){if(this.isSelected){this.isSelected=false;this.destroySelection();this.trigger("unselect",null,a2)}},destroySelection:function(){},documentMousedown:function(a2){var a3;if(this.isSelected&&this.opt("unselectAuto")&&aw(a2)){a3=this.opt("unselectCancel");if(!a3||!a(a2.target).closest(a3).length){this.unselect(a2)}}}};function a1(a2){var bv=this;bv.calendar=a2;bv.opt=bq;bv.trigger=bw;bv.isEventDraggable=bj;bv.isEventResizable=bk;bv.eventDrop=bf;bv.eventResize=bg;var bt=a2.reportEventChange;var br=a2.options;var bp=aD.duration(br.nextDayThreshold);bv.init();function bq(bx){var by=br[bx];if(a.isPlainObject(by)&&!at(bx)){return aT(by,bv.name)}return by}function bw(bx,by){return a2.trigger.apply(a2,[bx,by||bv].concat(Array.prototype.slice.call(arguments,2),[bv]))}function bj(bx){var by=bx.source||{};return S(bx.startEditable,by.startEditable,bq("eventStartEditable"),bx.editable,by.editable,bq("editable"))}function bk(bx){var by=bx.source||{};return S(bx.durationEditable,by.durationEditable,bq("eventDurationEditable"),bx.editable,by.editable,bq("editable"))}bv.getEventTimeText=function(by,bz){var bA;var bx;if(typeof by==="object"&&typeof bz==="object"){bA=by;bx=bz;bz=arguments[2]}else{bA=by.start;bx=by.end}bz=bz||bq("timeFormat");if(bx&&bq("displayEventEnd")){return a2.formatRange(bA,bx,bz)}else{return a2.formatDate(bA,bz)}};function bf(bx,bz,bB,by){var bA=a2.mutateEvent(bz,bB,null);bw("eventDrop",bx,bz,bA.dateDelta,function(){bA.undo();bt()},by,{});bt()}function bg(bx,bz,bB,by){var bA=a2.mutateEvent(bz,null,bB);bw("eventResize",bx,bz,bA.durationDelta,function(){bA.undo();bt()},by,{});bt()}bv.isHiddenDay=bl;bv.skipHiddenDays=bu;bv.getCellsPerWeek=bh;bv.dateToCell=ba;bv.dateToDayOffset=bb;bv.dayOffsetToCellOffset=bc;bv.cellOffsetToCell=a3;bv.cellToDate=a7;bv.cellToCellOffset=a6;bv.cellOffsetToDayOffset=a4;bv.dayOffsetToDate=bd;bv.rangeToSegments=bs;bv.isMultiDayEvent=bn;var bi=bq("hiddenDays")||[];var bm=[];var a5;var be=[];var a8=[];var bo=bq("isRTL");(function(){if(bq("weekends")===false){bi.push(0,6)}for(var by=0,bx=0;by<7;by++){be[by]=bx;bm[by]=a.inArray(by,bi)!=-1;if(!bm[by]){a8[bx]=by;bx++}}a5=bx;if(!a5){throw"invalid hiddenDays"}})();function bl(bx){if(aD.isMoment(bx)){bx=bx.day()}return bm[bx]}function bh(){return a5}function bu(bx,by,bz){var bA=bx.clone();by=by||1;while(bm[(bA.day()+(bz?by:0)+7)%7]){bA.add(by,"days")}return bA}function a7(){var bx=a6.apply(null,arguments);var bz=a4(bx);var by=bd(bz);return by}function a6(bC,by){var bz=bv.colCnt;var bA=bo?-1:1;var bB=bo?bz-1:0;if(typeof bC=="object"){by=bC.col;bC=bC.row}var bx=bC*bz+(by*bA+bB);return bx}function a4(bx){var by=bv.start.day();bx+=be[by];return Math.floor(bx/a5)*7+a8[(bx%a5+a5)%a5]-by}function bd(bx){return bv.start.clone().add(bx,"days")}function ba(bz){var bA=bb(bz);var by=bc(bA);var bx=a3(by);return bx}function bb(bx){return bx.clone().stripTime().diff(bv.start,"days")}function bc(by){var bx=bv.start.day();by+=bx;return Math.floor(by/7)*a5+be[(by%7+7)%7]-be[bx]}function a3(bx){var bz=bv.colCnt;var bA=bo?-1:1;var bB=bo?bz-1:0;var bC=Math.floor(bx/bz);var by=((bx%bz+bz)%bz)*bA+bB;return{row:bC,col:by}}function bs(bQ,bA){var bK=bv.rowCnt;var bx=bv.colCnt;var bP=[];var bz=a9(bQ,bA);var bG=bb(bz.start);var bF=bb(bz.end);var bD=bc(bG);var bE=bc(bF)-1;for(var bH=0;bH<bK;bH++){var bI=bH*bx;var bJ=bI+bx-1;var bN=Math.max(bD,bI);var bO=Math.min(bE,bJ);if(bN<=bO){var bL=a3(bN);var bM=a3(bO);var by=[bL.col,bM.col].sort(x);var bC=a4(bN)==bG;var bB=a4(bO)+1==bF;bP.push({row:bH,leftCol:by[0],rightCol:by[1],isStart:bC,isEnd:bB})}}return bP}function a9(bA,bx){var bB=bA.clone().stripTime();var by;var bz;if(bx){by=bx.clone().stripTime();bz=+bx.time();if(bz&&bz>=bp){by.add(1,"days")}}if(!bx||by<=bB){by=bB.clone().add(1,"days")}return{start:bB,end:by}}function bn(bx){var by=a9(bx.start,bx.end);return by.end.diff(by.start,"days")>1}}Q.dataAttrPrefix="";function ae(a3){var a5=Q.dataAttrPrefix;var a4;var a6;var a2;var a7;if(a5){a5+="-"}a4=a3.data(a5+"event")||null;if(a4){if(typeof a4==="object"){a4=a.extend({},a4)}else{a4={}}a6=a4.start;if(a6==null){a6=a4.time}a2=a4.duration;a7=a4.stick;delete a4.start;delete a4.time;delete a4.duration;delete a4.stick}if(a6==null){a6=a3.data(a5+"start")}if(a6==null){a6=a3.data(a5+"time")}if(a2==null){a2=a3.data(a5+"duration")}if(a7==null){a7=a3.data(a5+"stick")}a6=a6!=null?aD.duration(a6):null;a2=a2!=null?aD.duration(a2):null;a7=Boolean(a7);return{eventProps:a4,startTime:a6,duration:a2,stick:a7}}function m(a2){a1.call(this,a2);this.dayGrid=new F(this);this.coordMap=this.dayGrid.coordMap}m.prototype=E(a1.prototype);a.extend(m.prototype,{dayGrid:null,dayNumbersVisible:false,weekNumbersVisible:false,weekNumberWidth:null,headRowEl:null,render:function(a4,a2,a3){this.rowCnt=a4;this.colCnt=a2;this.dayNumbersVisible=a3;this.weekNumbersVisible=this.opt("weekNumbers");this.dayGrid.numbersVisible=this.dayNumbersVisible||this.weekNumbersVisible;this.el.addClass("fc-basic-view").html(this.renderHtml());this.headRowEl=this.el.find("thead .fc-row");this.scrollerEl=this.el.find(".fc-day-grid-container");this.dayGrid.coordMap.containerEl=this.scrollerEl;this.dayGrid.el=this.el.find(".fc-day-grid");this.dayGrid.render(this.hasRigidRows());a1.prototype.render.call(this)},destroy:function(){this.dayGrid.destroy();a1.prototype.destroy.call(this)},renderHtml:function(){return'<table><thead><tr><td class="'+this.widgetHeaderClass+'">'+this.dayGrid.headHtml()+'</td></tr></thead><tbody><tr><td class="'+this.widgetContentClass+'"><div class="fc-day-grid-container"><div class="fc-day-grid"/></div></td></tr></tbody></table>'},headIntroHtml:function(){if(this.weekNumbersVisible){return'<th class="fc-week-number '+this.widgetHeaderClass+'" '+this.weekNumberStyleAttr()+"><span>"+an(this.opt("weekNumberTitle"))+"</span></th>"}},numberIntroHtml:function(a2){if(this.weekNumbersVisible){return'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"><span>"+this.calendar.calculateWeekNumber(this.cellToDate(a2,0))+"</span></td>"}},dayIntroHtml:function(){if(this.weekNumbersVisible){return'<td class="fc-week-number '+this.widgetContentClass+'" '+this.weekNumberStyleAttr()+"></td>"}},introHtml:function(){if(this.weekNumbersVisible){return'<td class="fc-week-number" '+this.weekNumberStyleAttr()+"></td>"}},numberCellHtml:function(a5,a3,a4){var a2;if(!this.dayNumbersVisible){return"<td/>"}a2=this.dayGrid.getDayClasses(a4);a2.unshift("fc-day-number");return'<td class="'+a2.join(" ")+'" data-date="'+a4.format()+'">'+a4.date()+"</td>"},weekNumberStyleAttr:function(){if(this.weekNumberWidth!==null){return'style="width:'+this.weekNumberWidth+'px"'}return""},hasRigidRows:function(){var a2=this.opt("eventLimit");return a2&&typeof a2!=="number"},updateWidth:function(){if(this.weekNumbersVisible){this.weekNumberWidth=aB(this.el.find(".fc-week-number"))}},setHeight:function(a5,a3){var a2=this.opt("eventLimit");var a4;a0(this.scrollerEl);aY(this.headRowEl);this.dayGrid.destroySegPopover();if(a2&&typeof a2==="number"){this.dayGrid.limitRows(a2)}a4=this.computeScrollerHeight(a5);this.setGridHeight(a4,a3);if(a2&&typeof a2!=="number"){this.dayGrid.limitRows(a2)}if(!a3&&aQ(this.scrollerEl,a4)){z(this.headRowEl,ah(this.scrollerEl));a4=this.computeScrollerHeight(a5);this.scrollerEl.height(a4);this.restoreScroll()}},setGridHeight:function(a2,a3){if(a3){aZ(this.dayGrid.rowEls)}else{L(this.dayGrid.rowEls,a2,true)}},renderEvents:function(a2){this.dayGrid.renderEvents(a2);this.updateHeight();a1.prototype.renderEvents.call(this,a2)},getSegs:function(){return this.dayGrid.getSegs()},destroyEvents:function(){a1.prototype.destroyEvents.call(this);this.recordScroll();this.dayGrid.destroyEvents()},renderDrag:function(a4,a2,a3){return this.dayGrid.renderDrag(a4,a2,a3)},destroyDrag:function(){this.dayGrid.destroyDrag()},renderSelection:function(a3,a2){this.dayGrid.renderSelection(a3,a2)},destroySelection:function(){this.dayGrid.destroySelection()}});aN({fixedWeekCount:true});R.month=aE;function aE(a2){m.call(this,a2)}aE.prototype=E(m.prototype);a.extend(aE.prototype,{name:"month",incrementDate:function(a2,a3){return a2.clone().stripTime().add(a3,"months").startOf("month")},render:function(a2){var a3;this.intervalStart=a2.clone().stripTime().startOf("month");this.intervalEnd=this.intervalStart.clone().add(1,"months");this.start=this.intervalStart.clone();this.start=this.skipHiddenDays(this.start);this.start.startOf("week");this.start=this.skipHiddenDays(this.start);this.end=this.intervalEnd.clone();this.end=this.skipHiddenDays(this.end,-1,true);this.end.add((7-this.end.weekday())%7,"days");this.end=this.skipHiddenDays(this.end,-1,true);a3=Math.ceil(this.end.diff(this.start,"weeks",true));if(this.isFixedWeeks()){this.end.add(6-a3,"weeks");a3=6}this.title=this.calendar.formatDate(this.intervalStart,this.opt("titleFormat"));m.prototype.render.call(this,a3,this.getCellsPerWeek(),true)},setGridHeight:function(a2,a3){a3=a3||this.opt("weekMode")==="variable";if(a3){a2*=this.rowCnt/6}L(this.dayGrid.rowEls,a2,!a3)},isFixedWeeks:function(){var a2=this.opt("weekMode");if(a2){return a2==="fixed"}return this.opt("fixedWeekCount")}});R.basicWeek=n;function n(a2){m.call(this,a2)}n.prototype=E(m.prototype);a.extend(n.prototype,{name:"basicWeek",incrementDate:function(a2,a3){return a2.clone().stripTime().add(a3,"weeks").startOf("week")},render:function(a2){this.intervalStart=a2.clone().stripTime().startOf("week");this.intervalEnd=this.intervalStart.clone().add(1,"weeks");this.start=this.skipHiddenDays(this.intervalStart);this.end=this.skipHiddenDays(this.intervalEnd,-1,true);this.title=this.calendar.formatRange(this.start,this.end.clone().subtract(1),this.opt("titleFormat")," \u2014 ");m.prototype.render.call(this,1,this.getCellsPerWeek(),false)}});R.basicDay=l;function l(a2){m.call(this,a2)}l.prototype=E(m.prototype);a.extend(l.prototype,{name:"basicDay",incrementDate:function(a2,a3){var a4=a2.clone().stripTime().add(a3,"days");a4=this.skipHiddenDays(a4,a3<0?-1:1);return a4},render:function(a2){this.start=this.intervalStart=a2.clone().stripTime();this.end=this.intervalEnd=this.start.clone().add(1,"days");this.title=this.calendar.formatDate(this.start,this.opt("titleFormat"));m.prototype.render.call(this,1,1,false)}});aN({allDaySlot:true,allDayText:"all-day",scrollTime:"06:00:00",slotDuration:"00:30:00",axisFormat:aa,timeFormat:{agenda:ab},minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:true});var b=5;function aa(a3,a2){return a2.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")}function ab(a3,a2){return a2.longDateFormat("LT").replace(/\s*a$/i,"")}function d(a2){a1.call(this,a2);this.timeGrid=new aV(this);if(this.opt("allDaySlot")){this.dayGrid=new F(this);this.coordMap=new s([this.dayGrid.coordMap,this.timeGrid.coordMap])}else{this.coordMap=this.timeGrid.coordMap}}d.prototype=E(a1.prototype);a.extend(d.prototype,{timeGrid:null,dayGrid:null,axisWidth:null,noScrollRowEls:null,bottomRuleEl:null,bottomRuleHeight:null,render:function(a2){this.rowCnt=1;this.colCnt=a2;this.el.addClass("fc-agenda-view").html(this.renderHtml());this.scrollerEl=this.el.find(".fc-time-grid-container");this.timeGrid.coordMap.containerEl=this.scrollerEl;this.timeGrid.el=this.el.find(".fc-time-grid");this.timeGrid.render();this.bottomRuleEl=a('<hr class="'+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el);if(this.dayGrid){this.dayGrid.el=this.el.find(".fc-day-grid");this.dayGrid.render();this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight()}this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)");a1.prototype.render.call(this);this.resetScroll()},destroy:function(){this.timeGrid.destroy();if(this.dayGrid){this.dayGrid.destroy()}a1.prototype.destroy.call(this)},renderHtml:function(){return'<table><thead><tr><td class="'+this.widgetHeaderClass+'">'+this.timeGrid.headHtml()+'</td></tr></thead><tbody><tr><td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="'+this.widgetHeaderClass+'"/>':"")+'<div class="fc-time-grid-container"><div class="fc-time-grid"/></div></td></tr></tbody></table>'},headIntroHtml:function(){var a2;var a3;var a5;var a4;if(this.opt("weekNumbers")){a2=this.cellToDate(0,0);a3=this.calendar.calculateWeekNumber(a2);a5=this.opt("weekNumberTitle");if(this.opt("isRTL")){a4=a3+a5}else{a4=a5+a3}return'<th class="fc-axis fc-week-number '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"><span>"+an(a4)+"</span></th>"}else{return'<th class="fc-axis '+this.widgetHeaderClass+'" '+this.axisStyleAttr()+"></th>"}},dayIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"><span>"+(this.opt("allDayHtml")||an(this.opt("allDayText")))+"</span></td>"},slotBgIntroHtml:function(){return'<td class="fc-axis '+this.widgetContentClass+'" '+this.axisStyleAttr()+"></td>"},introHtml:function(){return'<td class="fc-axis" '+this.axisStyleAttr()+"></td>"},axisStyleAttr:function(){if(this.axisWidth!==null){return'style="width:'+this.axisWidth+'px"'}return""},updateSize:function(a2){if(a2){this.timeGrid.resize()}a1.prototype.updateSize.call(this,a2)},updateWidth:function(){this.axisWidth=aB(this.el.find(".fc-axis"))},setHeight:function(a5,a3){var a2;var a4;if(this.bottomRuleHeight===null){this.bottomRuleHeight=this.bottomRuleEl.outerHeight()}this.bottomRuleEl.hide();this.scrollerEl.css("overflow","");a0(this.scrollerEl);aY(this.noScrollRowEls);if(this.dayGrid){this.dayGrid.destroySegPopover();a2=this.opt("eventLimit");if(a2&&typeof a2!=="number"){a2=b}if(a2){this.dayGrid.limitRows(a2)}}if(!a3){a4=this.computeScrollerHeight(a5);if(aQ(this.scrollerEl,a4)){z(this.noScrollRowEls,ah(this.scrollerEl));a4=this.computeScrollerHeight(a5);this.scrollerEl.height(a4);this.restoreScroll()}else{this.scrollerEl.height(a4).css("overflow","hidden");this.bottomRuleEl.show()}}},resetScroll:function(){var a2=this;var a4=aD.duration(this.opt("scrollTime"));var a5=this.timeGrid.computeTimeTop(a4);a5=Math.ceil(a5);if(a5){a5++}function a3(){a2.scrollerEl.scrollTop(a5)}a3();setTimeout(a3,0)},renderEvents:function(a4){var a2=[];var a6=[];var a3=[];var a7;var a5;for(a5=0;a5<a4.length;a5++){if(a4[a5].allDay){a2.push(a4[a5])}else{a6.push(a4[a5])}}a7=this.timeGrid.renderEvents(a6);if(this.dayGrid){a3=this.dayGrid.renderEvents(a2)}this.updateHeight();a1.prototype.renderEvents.call(this,a4)},getSegs:function(){return this.timeGrid.getSegs().concat(this.dayGrid?this.dayGrid.getSegs():[])},destroyEvents:function(){a1.prototype.destroyEvents.call(this);this.recordScroll();this.timeGrid.destroyEvents();if(this.dayGrid){this.dayGrid.destroyEvents()}},renderDrag:function(a4,a2,a3){if(a4.hasTime()){return this.timeGrid.renderDrag(a4,a2,a3)}else{if(this.dayGrid){return this.dayGrid.renderDrag(a4,a2,a3)}}},destroyDrag:function(){this.timeGrid.destroyDrag();if(this.dayGrid){this.dayGrid.destroyDrag()}},renderSelection:function(a3,a2){if(a3.hasTime()||a2.hasTime()){this.timeGrid.renderSelection(a3,a2)}else{if(this.dayGrid){this.dayGrid.renderSelection(a3,a2)}}},destroySelection:function(){this.timeGrid.destroySelection();if(this.dayGrid){this.dayGrid.destroySelection()}}});R.agendaWeek=e;function e(a2){d.call(this,a2)}e.prototype=E(d.prototype);a.extend(e.prototype,{name:"agendaWeek",incrementDate:function(a2,a3){return a2.clone().stripTime().add(a3,"weeks").startOf("week")},render:function(a2){this.intervalStart=a2.clone().stripTime().startOf("week");this.intervalEnd=this.intervalStart.clone().add(1,"weeks");this.start=this.skipHiddenDays(this.intervalStart);this.end=this.skipHiddenDays(this.intervalEnd,-1,true);this.title=this.calendar.formatRange(this.start,this.end.clone().subtract(1),this.opt("titleFormat")," \u2014 ");d.prototype.render.call(this,this.getCellsPerWeek())}});R.agendaDay=c;function c(a2){d.call(this,a2)}c.prototype=E(d.prototype);a.extend(c.prototype,{name:"agendaDay",incrementDate:function(a2,a3){var a4=a2.clone().stripTime().add(a3,"days");a4=this.skipHiddenDays(a4,a3<0?-1:1);return a4},render:function(a2){this.start=this.intervalStart=a2.clone().stripTime();this.end=this.intervalEnd=this.start.clone().add(1,"days");this.title=this.calendar.formatDate(this.start,this.opt("titleFormat"));d.prototype.render.call(this,1)}})});
$(document).ready(function(){var h=$(document);var b=$("div.vertical-box");var g=("div.fc-right");var e=("div.fc-left");var d="Goto-DateContainer";var c="div."+d;var a="div.fc-toolbar";var f="a.fc-more";FullCalendarOverrides={processEachCalendar:function(){setTimeout(function(){$(b).each(function(j){var i=$(this);FullCalendarOverrides.applyChangesToCalendar(i)})},1)},applyChangesToCalendar:function(i){if(i!=undefined&&i.length==1){if($(i).find(e).length==1){if($(e).find(c).length==0){$(e).append($(c))}}if($(i).find(f).length>=1){$(f).each(function(){var j=(this);if($(j).attr("href")==undefined){$(j).attr("href","javascript:;")}$(j).click(function(){setTimeout(function(){$("button.fc-close.close").focus()},20)})})}if($(i).find(".fc-prev-button .readers").length==0){$(i).find(".fc-prev-button").append($("<span>").addClass("readers").text("Previous day"))}if($(i).find(".fc-next-button .readers").length==0){$(i).find(".fc-next-button").append($("<span>").addClass("readers").text("Next day"))}}}};if($(h).find(b).length>=1){$(h).resize(function(){FullCalendarOverrides.processEachCalendar()})}});
var blue="#348fe2",blueLight="#5da5e8",blueDark="#1993E4",aqua="#49b6d6",aquaLight="#6dc5de",aquaDark="#3a92ab",green="#00acac",greenLight="#33bdbd",greenDark="#008a8a",orange="#f59c1a",orangeLight="#f7b048",orangeDark="#c47d15",dark="#2d353c",grey="#b6c2c9",purple="#727cb6",purpleLight="#8e96c5",purpleDark="#5b6392",red="#ff5b57";jQuery.expr.filters.toolTipOffscreen=function(a){var c={topNeg:true,topPos:true,leftPos:true,leftNeg:true};var d={top:$(window).scrollTop(),left:$(window).scrollLeft()};d.right=d.left+window.innerWidth;d.bottom=d.top+window.innerHeight;var b=$(a).offset();b.right=b.left+$(a).outerWidth();b.bottom=b.top+$(a).outerHeight();if(d.right>=b.left){c.leftPos=false}if(d.left<=b.right){c.leftNeg=false}if(d.bottom>=b.top){c.topPos=false}if(d.top<=b.bottom){c.topNeg=false}};$.expr[":"].caseInsensitive=function(c,e,d){var b=d[3].split(",");var a=b[0];var f=b[1];return $(c).attr(a).toLowerCase()==f.toLowerCase()};var jumpListCounter=0;(function(a){a.fn.hasEvent=function(b){if(a._data(this[0],"events")!=undefined){var c=b.indexOf(".");if(c>0){var e=b.substring(c+1,b.length);b=b.substring(0,c);if(a._data(this[0],"events")[b]!=undefined){for(var d=0;d<a._data(this[0],"events")[b].length;d++){if(a._data(this[0],"events")[b][d].namespace==e){return true}}}return false}return a._data(this[0],"events")[b]!=undefined}return false}})(jQuery);(function(a,n,e,l){a.zeusValidate=function(){};a.zeusValidate.userSettings={FixedHeader:true,ResponsiveTable:true,ColourScheme:0};a.zeusValidate.getErrorInAjax=function(t){var s=l;if(t!=l&&t.responseText!=l){try{var r=JSON.parse(t.responseText);if(r!=l&&r.Result!=l&&r.Result.toLowerCase().indexOf("<html")==-1&&r.Result.toLowerCase().indexOf("<body")==-1){s=r.Result}}catch(q){}}return s};a.zeusValidate.adjustPostionOnScroll=function(q,s,r){var u=this.element||a(e);var t=q.parents('.full-height-scrollable, .full-height-grid-scrollable, [class*="group-height-"] .panel-body');var v=u.find("div#page-container");v.off(s);v.on(s,function(x){u.find(r).each(function(){w(a(this))})});if(t.length){t.each(function(){a(this).off(s+"-other");a(this).on(s+"-other",function(x){u.find(r).each(function(){w(a(this))})})})}function w(x){x.css({top:q.offset().top+q.outerHeight()})}};a.zeusValidate.extractNumber=function(t,s){if(!a(s).hasClass("rhea-numeric")){return t}t=t.replace(/[(\,|\-|\$)]/g,"");var q=parseInt(a(s).data(c.Decimal));if(q>0){var r=t.indexOf(".");if(r>0){t=t.substr(0,r)}}return t};a.zeusValidate.handleDateValidation=function(u,t,s,r){var q=u.val();var v=(q!="")?a.zeusValidate.parseDateValue(q)!=l:true;if(!v){if(t.find(s).length==0){t.append("<span generated='true' >Please enter valid date.</span>")}t.css("display","inline-block")}else{t.find(s).remove();t.hide();u.removeClass(r)}};a.zeusValidate.focusErrorOnElement=function(r){if(r.length==1){var s=r.closest(".modal-dialog").length==0;var t=a("div#page-container");if(r[0].tagName=="SELECT"){var q=r.data("ariaSelectReference");if(q.length==1){if(s){t.animate({scrollTop:a(q).offset().top-t.offset().top+t.scrollTop()-35},500)}q.focus()}}else{if(s){t.animate({scrollTop:a(r).offset().top-t.offset().top+t.scrollTop()-35},500)}r.focus()}}};a.zeusValidate.parseDateUsingMoment=function(q){return moment(q,["D/MM/YYYY","D-MM-YYYY","DD/MM/YY"])};a.zeusValidate.parseDateTimeUsingMoment=function(q){return moment(q,["D/MM/YYYY h:mm A","D-MM-YYYY h:mm A","DD/MM/YY h:mm a"])};a.zeusValidate.parseDateValue=function(q){var r=l;if(q!=l&&typeof(q)=="string"&&q.indexOf("/")>=0){var s=q.split("/");if(s.length==3){var v=s[2];var u=s[1];var t=s[0];if(a.zeusValidate.isNumericInput(v)&&a.zeusValidate.isNumericInput(u)&&a.zeusValidate.isNumericInput(t)){if(v.length==4&&u.length>0&&u.length<=2&&t.length>0&&t.length<=2){r=new Date(v,u-1,t,0,0,0,0)}}}}return r};a.zeusValidate.isNumericInput=function(q){return isFinite(q)&&!isNaN(parseFloat(q))};a.zeusValidate.getValueFromInput=function(q){var s="";if(q.attr("type")=="checkbox"){s=q[0].checked}else{if(q.attr("type")=="radio"){var t=q.closest("form");var r=q.attr("name");var u=t.find('input[name="'+r+'"][type="radio"]:not(:disabled):checked');if(u.length==1){s=u.val()}}else{s=q.val();s=a.zeusValidate.stripCurrencyCharacters(s);if(s==null){s=""}else{if(a.isArray(s)){s=s.join(",")}}}}return s};a.zeusValidate.getParameterElementsForElement=function(q){var w=q.data(c.FieldPrefix);var u=q.data(c.Parameters);var v=[];if(u!=l&&u.length>0){v=u.split(",");if(h(q)){var r=q.attr("id");if(r){w=r.substr(0,r.lastIndexOf("_"))}}}var x=[];for(var s=0;s<v.length;s++){var t=v[s];var y=(w!=l&&w.length>0)?w+"_"+t:t;x.push(a("#"+y))}return x};function h(r){var u=r.closest("table");if(u!=l&&u.length>0){var q=r.closest("td");var s=r.attr("id");var t=new RegExp("_[0-9]+__");if(s!=l&&t.test(s)){return true}else{if(q!=l&&q.data(c.CurrentRowPrefix)!=l){return true}}}return false}a.zeusValidate.updateCkeditorInstances=function(q){if(q!=l){q.find("div["+f.RichTextArea+"=true]").each(function(){var r=a(this);var t=r.find("textarea");var s=CKEDITOR.instances[t.attr("id")];if(s!=l){s.updateElement()}})}};a.zeusValidate.getParameterMapForElement=function(r){var y=r.data(c.FieldPrefix);var w=r.data(c.Parameters);var x=[];if(w!=l&&w.length>0){x=w.split(",");if(h(r)){var s=r.attr("id");if(s==l||s==""){var q=r.closest("td");y=q.data(c.CurrentRowPrefix);y=y.substr(0,y.lastIndexOf("_"))}else{y=s.substr(0,s.lastIndexOf("_"))}}}var z={};for(var t=0;t<x.length;t++){var u=x[t];var A=(y!=l&&y.length>0)?y+"_"+u:u;var v=u.charAt(0).toLowerCase()+u.slice(1);z[v]=a.zeusValidate.getValueFromInput(a("#"+A))}return z};a.zeusValidate.handleDateTimeComparison=function(s,t,w,x){var r=a.zeusValidate.parseDateTimeValue(s,t);var v=a.zeusValidate.parseDateTimeValue(w,x);var y={};y.currentProperty=s;y.currentPropertyValue=r.value;y.dependentProperty=w;y.dependentPropertyValue=v.value;if(r.datatype!="other"&&r.datatype!="other"){if((r.datatype=="date"&&v.datatype=="datetime")||(r.datatype=="datetime"&&v.datatype=="date")){var q=new Date(r.value);q.setHours(0);q.setMinutes(0);q.setSeconds(0);q.setMilliseconds(0);y.currentPropertyValue=Date.parse(q.toString());var u=new Date(v.value);u.setHours(0);u.setMinutes(0);u.setSeconds(0);u.setMilliseconds(0);y.dependentPropertyValue=Date.parse(u.toString())}else{if((r.datatype=="time"&&v.datatype=="datetime")||(r.datatype=="datetime"&&v.datatype=="time")){var q=new Date(r.value);q.setFullYear(1970);q.setMonth(1);q.setDate(1);y.currentPropertyValue=Date.parse(q.toString());var u=new Date(v.value);u.setFullYear(1970);u.setMonth(1);u.setDate(1);y.dependentPropertyValue=Date.parse(u.toString())}else{if(r.datatype=="datetime"&&v.datatype=="datetime"){y.currentPropertyValue=a.zeusValidate.parseDateTime(r.value);y.dependentPropertyValue=a.zeusValidate.parseDateTime(v.value)}}}}return y};a.zeusValidate.parseDateTime=function(v){if(v!=null){var q=v.split("/");if(q.length==3){var x=q[2];if(x.indexOf(":")==-1){return new Date(x,q[1]-1,q[0])}else{var t=x.split(" ");if(t.length==3){var s=t[2];var w=t[0];var u=t[1].split(":");if(u.length==2){var r=u[0];return new Date(w,q[1]-1,q[0],s=="AM"?(parseInt(r)==12?0:r):(parseInt(r)==12?r:r+12),u[1])}}}}}return null};a.zeusValidate.parseDateTimeValue=function(u,x){var q=a(u).data(c.DatePicker);var r=a(u).data(c.DateTimePicker);var w=a(u).data(c.TimePicker);var s=a(u).data(c.DateTimeTicks);var t=a(u).data(c.DateTimeType);var v={};v.datatype="other";v.value=x;if(q!=l){v.datatype="date";v.value=q.selectedValue!=null?q.selectedValue.getTime()/1000:x}else{if(r!=l){v.datatype="datetime";v.value=r.selectedValue!=null?r.selectedValue.getTime()/1000:x}else{if(w!=l){v.datatype="time";v.value=w.selectedValue!=null?w.selectedValue.getTime()/1000:x}else{if(s!=l&&t!=l){v.datatype=t;v.value=parseInt(s)}}}}if(isNaN(v.value)){v.value=x}return v};a.zeusValidate.is=function(w,t,y,u,q){w=a.zeusValidate.stripCurrencyCharacters(w);y=a.zeusValidate.stripCurrencyCharacters(y);if(/^true$/i.test(u)){var x=this.isNullish(w);var z=this.isNullish(y);if(x||z){return true}}if(/^true$/i.test(q)){var x=this.isNullish(w);var z=this.isNullish(y);if(x||z){return false}}if(w==""){w=null}if(y==""){y=null}var A=[];if(a.isArray(w)){A=w}else{A.push(w)}var B=[];if(a.isArray(y)){B=y}else{B.push(y)}var v=[];for(var r=0;r<A.length;r++){for(var s=0;s<B.length;s++){v.push(this.comparisonTest(A[r],t,B[s]))}}if(t=="NotEqualTo"){return a.inArray(false,v)==-1}else{return a.inArray(true,v)!=-1}};a.zeusValidate.comparisonTest=function(s,q,t){function r(v){if(v!=null){var u=v.split("/");if(u.length==3){return new Date(u[2],u[1]-1,u[0])}else{return null}}return null}if(this.isDate(s)){s=isNaN(Date.parse(s))?Date.parse("01/01/0001 "+s):r(s);t=isNaN(Date.parse(t))?Date.parse("01/01/0001 "+t):r(t)}else{if(this.isBool(s)){if(/^true$/i.test(s)){s=true}else{if(/^false$/i.test(s)){s=false}}if(/^true$/i.test(t)){t=true}else{if(/^false$/i.test(t)){t=false}}s=!!s;t=!!t}else{if(this.isNumeric(s)){s=parseFloat(s);t=parseFloat(t)}}}switch(q){case"EqualTo":if(s==t){return true}break;case"NotEqualTo":if(s!=t){return true}break;case"GreaterThan":if(s>t){return true}break;case"LessThan":if(s<t){return true}break;case"GreaterThanOrEqualTo":if(s>=t){return true}break;case"LessThanOrEqualTo":if(s<=t){return true}break;case"RegExMatch":return(new RegExp(t)).test(s);break;case"NotRegExMatch":return !(new RegExp(t)).test(s);break}return false};a.zeusValidate.stripCurrencyCharacters=function(r){var q=/^[-]?\$[0-9]{1,3}(?:,?[0-9]{3})*(?:\.[0-9]{2})?$/;if(q.test(r)){if(a.zeusValidate.isNullish(r)){return r}r=r.replace("-","");r=r.replace("$","");r=r.split(",").join("")}return r};a.zeusValidate.getId=function(r,q){var s=r.id.lastIndexOf("_")+1;return r.id.substr(0,s)+q};a.zeusValidate.getName=function(r,q){var s=r.name.lastIndexOf(".")+1;return r.name.substr(0,s)+q};a.zeusValidate.isNullish=function(q){return q==null||q==l||a.trim(q)==""};a.zeusValidate.isNumeric=function(q){return(q-0)==q&&q.length>0};a.zeusValidate.isInteger=function(q){return/^\d+$/.test(q)};a.zeusValidate.isFloat=function(q){return/^((\d+(\.\d *)?)|((\d*\.)?\d+))$/.test(q)};a.zeusValidate.isDate=function(r){var q=new RegExp(/^(?=\d)(?:(?!(?:(?:0?[5-9]|1[0-4])(?:\.|-|\/)10(?:\.|-|\/)(?:1582))|(?:(?:0?[3-9]|1[0-3])(?:\.|-|\/)0?9(?:\.|-|\/)(?:1752)))(31(?!(?:\.|-|\/)(?:0?[2469]|11))|30(?!(?:\.|-|\/)0?2)|(?:29(?:(?!(?:\.|-|\/)0?2(?:\.|-|\/))|(?=\D0?2\D(?:(?!000[04]|(?:(?:1[^0-6]|[2468][^048]|[3579][^26])00))(?:(?:(?:\d\d)(?:[02468][048]|[13579][26])(?!\x20BC))|(?:00(?:42|3[0369]|2[147]|1[258]|09)\x20BC))))))|2[0-8]|1\d|0?[1-9])([-.\/])(1[012]|(?:0?[1-9]))\2((?=(?:00(?:4[0-5]|[0-3]?\d)\x20BC)|(?:\d{4}(?:$|(?=\x20\d)\x20)))\d{4}(?:\x20BC)?)(?:$|(?=\x20\d)\x20))?((?:(?:0?[1-9]|1[012])(?::[0-5]\d){0,2}(?:\x20[aApP][mM]))|(?:[01]\d|2[0-3])(?::[0-5]\d){1,2})?$/);return q.test(r)};a.zeusValidate.isBool=function(q){return/^true$/i.test(q)||/^false$/i.test(q)};a.zeusValidate.isJSON=function(r){try{var s=a.parseJSON(r);if(typeof s!="object"){return false}}catch(q){return false}return true};a.zeusValidate.getFieldPrefixFromName=function(t,r){var q=".";var s="";if(t.name.lastIndexOf(q)!=-1){s=t.name.substring(0,t.name.lastIndexOf(q)+1)}return s+r};a.zeusValidate.getFieldPrefixFromId=function(t,r){var u=t.id;if(u.indexOf("ContainerFor-")==-1&&u.lastIndexOf("-")!=-1){u=u.substring(0,u.lastIndexOf("-"))}var q="_";var s="";if(u.lastIndexOf(q)!=-1){s=u.substring(0,u.lastIndexOf(q)+1)}return s+r};a.zeusValidate.replaceAll=function(s,r,q){while(s.indexOf(r)!=-1){s=s.replace(r,q)}return s};a.zeusValidate.escapeRegex=function(q){return(q+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")};a.zeusValidate.extractTitle=function(t){var r=t!=l?t.toLowerCase():"";var y="<title>";var w="</title>";var x=r.indexOf(y);var v=r.indexOf(w);var u=false;if(x>-1&&v>-1){var s=x+y.length;var q=v-s;u=r.substr(s,q)}return u};a.zeusValidate.addError=function(r,t){if(r==l){return}r=a.trim(r);r=a.zeusValidate.replaceAll(r,"..",".");if(r[r.length-1]!="."){r=r+"."}if(t==l){t=a("#main_form")}var q=t.find("#validation-error-summary"),s=q.find("ul");s.empty();a("<li />").append(r).appendTo(s);if(q.hasClass("validation-summary-valid")){q.addClass("validation-summary-errors").addClass("alert").addClass("alert-danger").removeClass("validation-summary-valid").removeClass("noErrors")}};a.zeusValidate.addPropertyError=function(t,u,r){var q=a("#main_form").find("[data-valmsg-summary=true]"),s=q.find("ul");s.empty();a("<li />").append('<a href="#'+t+'">'+u+"</a> - "+r).appendTo(s);if(q.hasClass("validation-summary-valid")){q.addClass("validation-summary-errors").addClass("alert").addClass("alert-danger").removeClass("noErrors").removeClass("validation-summary-valid")}};a.zeusValidate.readCookie=function(t){var u=t+"=";var r=e.cookie.split(";");for(var s=0;s<r.length;s++){var q=r[s];while(q.charAt(0)==" "){q=q.substring(1,q.length)}if(q.indexOf(u)==0){return q.substring(u.length,q.length)}}return null};a.zeusValidate.doCallback=true;a.zeusValidate.preventDefaultOnNextFormSubmit=false;a.zeusValidate.ignoreLastClicked=false;a.zeusValidate.windowReloading=false;a.zeusValidate.ignoreDirty=false;a.zeusValidate.alwaysIgnoreDirty=false;a.zeusValidate.initialContentHTML=l;a.zeusValidate.skipNextFocusErrors=false;var b=a.zeusValidate.readCookie("ColourScheme");var m=b=="black"||b=="white"||b=="dark";a.zeusValidate.blockUIoptions={message:'<div class="msgInfo">Sending data please wait</div>',overlayCSS:{backgroundColor:"transparent"},css:{padding:"15px 15px 15px 15px",backgroundColor:(m?"#5E8E3F":"#ffffff"),border:"solid 1px "+(m?"#5E8E3F":"#b3c3ce"),color:(m?"#000000":"#446C86")}};a.zeusValidate.blockUIdefaultMessage='<div class="msgInfo">Retrieving data please wait</div>';a.zeusValidate.sessionExpired=function(r){if(a.zeusValidate.windowReloading){return true}var s=a.zeusValidate.extractTitle(r.responseText);function q(t,u){return t.indexOf(u,t.length-u.length)!==-1}if(s!==false&&r.status!=500&&!q(s,"| ESS Web")){a.zeusValidate.addError("Your session has timed out. Please log in again.");a.zeusValidate.alwaysIgnoreDirty=true;a.zeusValidate.windowReloading=true;n.location.reload();return true}return false};var j="zeus",d={};var g={ParentType:"z-pt",PropertyNameInParent:"z-pnip",FullPropertyNameInParent:"z-fpnip",RowNumber:"z-rn",Ajax:"z-a",AjaxForm:"z-af",AjaxConfirmation:"z-ac",GridFilter:"z-gf",DataSetEnabled:"z-dse",ColumnSelections:"z-cs",SelectionType:"z-gst",};var f={FieldPrefix:"data-zfp",ApplyActionForDependency:"data-aafd",ActionForDependencyType:"data-zadt",DependentProperty:"data-zdp",ComparisonType:"data-zct",DependentValue:"data-zdv",Type:"data-zt",Callback:"data-cb",CallbackSignature:"data-cbs",ContingentVisibleIf:"data-zcvi",ContingentEditableIf:"data-zcei",ContingentReadOnlyIf:"data-zcroi",ContingentClearIf:"data-zcci",ContingentRequiredIf:"data-zcri",DependentPropertyAjaxLoadIf:"data-zdpal",ComparisonTypeAjaxLoadIf:"data-zctal",DependentValueAjaxLoadIf:"data-zdval",PassOnNullAjaxLoadIf:"data-zpnal",FailOnNullAjaxLoadIf:"data-zfnal",AlwaysAjaxLoadIf:"data-zaal",DependentPropertyGst:"data-zdpg",ExclusiveGst:"data-zeg",DependentPropertyAge:"data-zdpa",DependentPropertyAgeFormatString:"data-zdpafs",DependentPropertiesCopy:"data-zdpsc",DependentPropertyDate:"data-zdpd",ReadOnlyType:"data-zrot",SubmitName:"data-zsn",SubmitType:"data-zst",Url:"data-zu",AutoLoadUrl:"data-zalu",LatitudeLongitude:"data-zll",IsNullable:"data-zin",Decimal:"data-zde",IsComplexType:"data-zict",Parameters:"data-zp",SkipLink:"data-zsl",SkipLinkTable:"data-zslt",RadioButtonGroup:"data-zrbg",CheckboxList:"data-zcl",PinnedCount:"data-zpc",PropertyIdGrid:"data-zpig",Countdown:"data-zcd",PagedMetadata:"data-zpm",ObjectValues:"data-zov",HistoryType:"data-zht",HistoryDescription:"data-zhd",ButtonClear:"data-zbcl",IsDownload:"data-zid",Toggle:"data-toggle",ErrorTipFor:"data-zet",DisplayName:"data-zdn",DependentPropertyId:"data-zdpi",DependentValueAdw:"data-zdva",ExcludeValues:"data-zev",Code:"data-zc",Dominant:"data-zd",OrderType:"data-zot",DisplayType:"data-zdt",MaximumSelections:"data-zms",EmptyMessage:"data-zem",Switcher:"data-zs",SwitcherChecked:"data-zsc",SwitcherUnchecked:"data-zsu",PagedMetadataPropertyId:"data-zpmpi",PagedHasMore:"data-zphm",SkipUnsavedChanges:"data-zsuc",SkipValidation:"data-zsv",DatePicker:"data-zdpic",TimePicker:"data-ztpi",DateTimePicker:"data-zdtpi",DateTimeTicks:"data-zdtti",DateTimeType:"data-zdtty",DateTime:"data-zdate",Click:"data-zck",PropertyNameForAjax:"data-zpnfa",PropertyNamesWithAjaxLoadToTrigger:"data-pnwalt",GraphTopLevelUrl:"data-zgtlu",GraphDrillDownUrl:"data-zgddu",GraphDrillDownNewPage:"data-zgddnp",GraphDrillDownElementNewPage:"data-zgddenp",GraphDrillDownElementUrl:"data-zgddeu",GraphDataSetEnabled:"data-zgdse",GraphCheckboxesHidden:"data-zgcbh",GraphType:"data-zgt",GraphXaxisLabel:"data-zgxal",GraphXaxisMin:"data-zgxamin",GraphXaxisMax:"data-zgxamax",WidgetContext:"data-zwc",WidgetView:"data-zwv",WidgetDataContext:"data-zwdc",WidgetDefaultLayout:"data-zwdl",CalendarCategory:"data-zcalc",CalendarData:"data-zcald",CalendarCategoryEventList:"data-zcalj",CalendarRendered:"data-zcal",CalendarDefaultView:"data-zcalv",CalendarDragResizeAction:"data-zucdr",CalendarEventAddBtn:"data-zcal-add",CalendarGoToDate:"data-zcgtd",AjaxRoutes:"data-zr",ButtonConfirmation:"data-zbc",ButtonConfirmationParameters:"data-zbcp",CalendarToolTipTag:"data-zu-id",CalendarDisablePastDates:"data-zcal-dpd",CalendarDefaultSessionTime:"data-zdst",CalendarMinDateToShow:"data-zcmin",CalendarMaxDateToShow:"data-zcmax",CalendarHideList:"data-zchcl",CalendarShowWeekends:"data-zcw",IsCategoryItemClickable:"data-zcic",CalendarConfirmationMessage:"data-zcc",CalendarAllowEventAddCategory:"data-zcec",CalendarBackgroundEventColour:"data-zcbc",ReadOnlyViewRow:"data-zdr",DateList:"data-zdl",AjaxGridRow:"data-zagr",AjaxGridInline:"data-zagi",AjaxGridModal:"data-zagm",ParentType:"data-zpt",PropertyNameInParent:"data-zpnip",FullPropertyNameInParent:"data-zfpnip",GridInlineEditedState:"data-zgies",RichTextArea:"data-zrtb",RichTextBoxOptions:"data-zrto",UserDefaultKey:"data-zudk",ContractsForContractModal:"data-zcfcm",CurrentContract:"data-zcty",Collapsed:"data-zclp",CollapsedProperty:"data-zgpu",DeletedRow:"data-zgdr",ActualDeletedRow:"data-zgadr",ActualAddedRow:"data-zgaar",EditedRow:"data-zger",RowSelector:"data-zgrs",GridPage:"data-zgp",BackgroundColour:"data-bg",AddressAutocomplete:"data-addr",DataKey:"data-key",DataText:"data-text",LazyLoad:"data-zlz",NeverCache:"data-znc",NoDeselect:"data-zds",SearchModalButtonName:"data-smbn",CurrentRowPrefix:"data-crp",DefaultValue:"data-dv",CalendarOpenInNewTab:"data-zcont",StoredRouteValues:"data-srv",AlwaysShowUnsavedChanges:"data-asuc",CurrentCodesOnlyAdw:"data-ccoa",AccessKeys:"data-ak",GridFilterStatus:"data-zgfe",GridFilterColumn:"data-zgfc",IgnoreDirtyCheck:"data-zidc",Tooltip:"data-ztt",TreeviewShowTrash:"data-ztvtrash",TreeviewShowAdd:"data-ztvadd",TreeviewActionType:"data-ztvaction",TreeviewNodeId:"data-ztvid",TreeviewNodeExpanded:"data-ztv-expanded",TreeviewNodeSelected:"data-ztv-selected",TreeviewNodeCustomAction:"data-ztv-customaction",ActionName:"data-zan",ControllerName:"data-zcn",AreaName:"data-zarn",AlwaysReadOnly:"data-zaro",SelectionType:"data-zgst",HttpPost:"data-zhp",};var k=a('<div class="panel-loader"><span class="spinner-small"></span></div>');var i=a('<div class="panel-loader"></div>');var c={};function p(r,s){this.element=r;this.options=a.extend({},d,s);this._defaultOptions=d;this._name=j;c=a.extend({},f);for(var q in c){c[q]=c[q].replace(/^data-/,"")}a.zeusFullDataTypes=f;a.zeusDataTypes=c;this.init();a.zeus=this}p.prototype={init:function(){this.globalAjaxHandlers();this.prepareReset();App.init();this.callback();this.applyBehaviours(false);this.postApplyBehavioursInit()},globalAjaxHandlers:function(){a(e).ajaxStart(function(){a.blockUI(a.zeusValidate.blockUIoptions)});a(e).ajaxSend(function(){a.blockUI(a.zeusValidate.blockUIoptions)});a(e).ajaxComplete(function(q,r,s){a.zeusValidate.sessionExpired(r);a.unblockUI();a.zeusValidate.blockUIoptions.message=a.zeusValidate.blockUIdefaultMessage});a(e).ajaxStop(function(q,r,s){a.unblockUI();a.zeusValidate.blockUIoptions.message=a.zeusValidate.blockUIdefaultMessage});a(e).ajaxSuccess(function(q,r,s){a.unblockUI();a.zeusValidate.blockUIoptions.message=a.zeusValidate.blockUIdefaultMessage});a(e).ajaxError(function(r,s,t){if(s.status==500){var q=a.zeusValidate.getErrorInAjax(s);q=q!=l?q:"The server encountered an internal error and was unable to process your request. Please try again later.";a.zeusValidate.addError(q)}a.unblockUI();a.zeusValidate.blockUIoptions.message=a.zeusValidate.blockUIdefaultMessage})},prepareReset:function(){var q=a("#content");if(q.length>0){a.zeusValidate.initialContentHTML=q.html()}},callback:function(){var r=function(){var t=a(e).find("body");var u=(/^true$/i.test(t.data(c.Callback)))?true:false;if(!u){n.sessionStorage.removeItem("callback.last.window.signature");n.sessionStorage.removeItem("callback.last.window.ajaxOptions");return}n.sessionStorage["callback.last.window.signature"]=t.data(c.CallbackSignature);var x=t.data(c.Url);var w=a.zeusValidate.getParameterMapForElement(t);var v={};v[g.Ajax]=true;var s={type:"GET",dataType:"html",global:false,url:x,cache:false,headers:v,data:w};n.sessionStorage["callback.last.window.ajaxOptions"]=JSON.stringify(s)};var q=function(){var t=a(e).find("body");var v=t.data(c.CallbackSignature);var u=n.sessionStorage["callback.last.window.signature"];var s=a.parseJSON(n.sessionStorage["callback.last.window.ajaxOptions"]);if(n.sessionStorage["callback.session.depth"]==l){n.sessionStorage["callback.session.depth"]=1}if(n.history.length==1){n.sessionStorage["callback.session.depth"]++;return}if(u!=l&&u!=v&&s!=null){a.ajax(s).done(function(w,y,x){})}};q();a(n).off("unload.callback");a(n).on("unload.callback",r)},getNewContentForPanel:function(w,s,y,t,u){var q=this;if(!w.hasClass("panel-loading")){var x=a('<div class="panel-loader"><span class="spinner-small"></span></div>');var v=a('<div class="panel-loader"></div>');w.addClass("panel-loading");w.find(".panel-body").first().prepend(x);w.find(".panel-footer").first().prepend(v);if(u==l||u==null){u={}}if(u[g.Ajax]==l||u[g.Ajax]==null){u[g.Ajax]=true}var r={url:y,global:false,type:"GET",headers:u,success:function(z,B,A){if(a.zeusValidate.sessionExpired(A)){return}x.remove();v.remove();w.removeClass("panel-loading");s.html(z);q.prepareNewContent(s)}};if(t!==l){a.extend(r,{type:"POST",data:t,contentType:"application/json; charset=utf-8",})}a.ajax(r).fail(function(D,C,A){x.remove();v.remove();w.removeClass("panel-loading");var z=/<body.*?>([\s\S]*?)<\/body>/img.exec(D.responseText);if(z!=l&&z.length==2){s.html('<div>Error loading content</div><div style="display: none">'+z[1]+"</div>")}else{var B=a.zeusValidate.getErrorInAjax(D);B=(B!=l?B:"Error occurred while loading.");s.html(B)}})}},prepareNewContent:function(q){var r=this.element;this.element=q;a.validator.unobtrusive.parseDynamicContent(q);this.applyBehaviours(true);this.element=r;this.calculateColumnWidths()},makeModalDialogElement:function(x,t,v,y){var q=this;x=(x!=null&&x!="")?x:"&nbsp;";var w='<div class="modal-header"><button type="button" class="close"><span aria-hidden="true">×</span><span class="readers">Close dialog</span></button>'+x+"</div>";var s='<div class="modal-body">'+t+"</div>";var u='<div class="modal-footer">'+v+"</div>";var r=a('<div tabindex="-1" class="modal modal-message fade" id="'+y+'"><div class="modal-dialog"><span class="readers" >Dialog start</span><div class="modal-content">'+w+s+u+'</div><span class="readers">Dialog End</span></div></div>');r.find(".modal-header button.close").on("click",function(){q.dismissModalDialogElement(r)});return r},showModalDialogElement:function(q){q.data("previousActiveElement",a(e.activeElement));a("body").append(q);q.modal({backdrop:"static",keyboard:false});n.setTimeout(function(){q.find(".modal-dialog").children("span").first().focus()},400)},dismissModalDialogElement:function(r){var q=a("<a>").attr("data-dismiss","modal");r.append(q);q.trigger("click");r.data("previousActiveElement").focus();setTimeout(function(){r.remove()},500)},applyBehaviours:function(q){this.skip();this.resize();this.maxlength();this.primary();this.userDefaults();this.datetimepicker();this.datepicker();this.timepicker();this.dropdowns();this.processTreeview();this.ajaxfield();this.searchModals();this.contingentif();this.ajaxloadif();this.actionif();this.paged();this.multiplegridselect();this.senddisabled();this.gst();this.age();this.copy();this.relativedate();this.historypin();this.numeric();this.crn();this.reset();this.clear();this.inlinegrid();this.ajaxgrid();this.gridstyle();this.expandCollapseAll();this.trigger();this.gridSortable();this.filterGrid();this.gridcolumnselector();this.focuserrors();this.processRichTextBox();this.tooltipposition();this.tooltiplinks();this.switchers();this.checkboxesadditions();this.flotGraphs();this.ajaxproperty();this.widgets();if(q){this.responsivetables()}this.processCalendar();this.equaliseReadOnlyViews();this.dateBasedContent();this.quickfinds();this.collapseRightSidebar();this.processFullHeightContent();this.savedSearchPopup();this.timelineLoadMore();this.fixColorAdminProblems();this.fixMarkup();this.generateMainFormJumpList();this.monitorBulletins();this.dirtycheck();this.autoLoadUrls()},postApplyBehavioursInit:function(){var q=this;this.calculateColumnWidths();a(e).on("resize.columnwidths",function(){q.calculateColumnWidths()});a("["+f.Click+"=reload]").trigger("click");this.alerts();this.contractmodal();this.contractpicker();this.orgsitepicker();this.menufiltering();this.settingsmenu();this.accessKeys();var r=a("#skipLinks");if(r!=l){r.focus()}this.hubconfiguration();this.responsivetables()},hubconfiguration:function(){return;var q;if(a.connection){q=a.connection.userMessagingHub}if(q){q.client.receiveMessage=function(s){var r=a("#zeus-alert");if(r.length){a.gritter.add({title:"",text:s,image:"",sticky:true,time:"",class_name:"my-sticky-class"})}};a.connection.hub.start().done(function(){})}},equalizepanels:function(){var q=this;var r=a(this.element)||a(e);r.find("div.row").each(function(){var s=a(this);if(s.closest(".zeus-widget-container").length==0){s.equalize({equalize:"height",reset:false,children:".panel"});s.find(".panel").each(function(){var t=a(this);t.css("min-height",t.css("height"));t.css("height","")})}})},contractmodal:function(){var q=this;var s=a(this.element)||a(e);var r=function(y){var w=y.data("bg-col");if(w!=l){return w}w="black";var v=y.attr("class").split(" ");for(var x=0;x<v.length;x++){if(v[x].indexOf("bg-")==0){w=v[x].substr(3,v[x].length-3);y.data("bg-col",w);break}}return w};function u(){var y=a(a(this).find(".widget")[0]);var v=r(y);var x="bg-"+v;var w="bg-"+v+"-darker";y.removeClass(w).addClass(x)}function t(){var y=a(a(this).find(".widget")[0]);var v=r(y);var x="bg-"+v;var w="bg-"+v+"-darker";y.removeClass(x).addClass(w)}s.find("a.contract-picker").hover(t,u).focus(t).blur(u);s.find("["+f.ContractsForContractModal+"]").bind("click.zeus-contractmodal",function(y){y.preventDefault();var z=a(this);var w=z.data(c.ContractsForContractModal);if(w==l||w.length==0){return}var v=w.split(",");var A=a("#contract_modal");var x=a("["+f.CurrentContract+"]").data(c.CurrentContract);A.find(".modal-body a").each(function(){var B=a(this);B.addClass("hidden");var C=B.find(".stats-desc")[0].innerHTML;for(var D=0;D<v.length;D++){if(C==v[D]){B.removeClass("hidden")}}B.bind("click.zeus-contractmodallink",function(H){H.preventDefault();var I=z.attr("href");var F="/"+C+"/";var G="/"+x+"/";var E=I.indexOf(G);a.zeusValidate.alwaysIgnoreDirty=true;n.location.href=I.substr(0,E)+F+I.substr(E+G.length,I.length-E+G.length)})});A.modal({backdrop:"static",keyboard:false})})},alerts:function(){var q=a("#zeus-alert");if(q.length){var r=q.data("zeus-alerts");for(var s=0;s<r.length;s++){a.gritter.add({title:"",text:r[s].Text,image:"",sticky:true,time:"",class_name:"my-sticky-class"})}}},contractpicker:function(){var q=this;var r=a(this.element)||a(e);r.find("a.contract-picker-launch").each(function(){var t=a(this);var s=t.closest(".sidebar").find(".contract-picker-list");t.on("click",function(v){if(s.css("display")!="block"){v.stopPropagation();var w=t.find(".readers").last();w.text(w.text().replace(/Opens a list below/,"Closes the list below"));s.css("display","block");a(e).on("click.contractpicker-autoclose",u);a(e).on("keydown.contractpicker-autoclose",function(x){if(x.which==27){u()}});function u(){s.css("display","none");w.text(w.text().replace(/Closes the list below/,"Opens a list below"));a(e).off(".contractpicker-autoclose")}}})})},menufiltering:function(){var q=this;var u=a(this.element)||a(e);var s=[".sidebar .nav > .has-sub .sub-menu li.has-sub > a",".sidebar .nav > .has-sub > a"];var t=[".sidebar .nav > li > ul > li > ul",".sidebar .nav > li > ul"];function v(){for(var w in t){var x=t[w];u.find(x).each(function(){if(a(this).find("li:not(.hide, .sidebar-subnav-header)").length>0){a(this).closest("li").removeClass("hide")}else{a(this).closest("li").addClass("hide")}})}}u.find(".menu-filter a").on("click.menu-filtering",function(){if(a(this).hasClass("selected")){a(this).trigger("deselect.menu-filtering")}else{a(this).trigger("select.menu-filtering")}});u.find(".menu-filter a").on("select.menu-filtering",function(){a(this).addClass("selected");a(this).addClass(a(this).parent().attr("data-background-class"));var w=a(this).find(".readers");w.text(w.text().replace(", not selected",", selected"))});u.find(".menu-filter a").on("deselect.menu-filtering",function(){a(this).removeClass("selected");a(this).removeClass(a(this).parent().attr("data-background-class"));var w=a(this).find(".readers");w.text(w.text().replace(", selected",", not selected"))});u.find(".contract-menu-filter").on("select.menu-filtering",function(){sessionStorage["contract-menu-filter"]=true;u.find(".sidebar .nav li.not-cc-valid").addClass("hide");v()}).on("deselect.menu-filtering",function(){sessionStorage.removeItem("contract-menu-filter");u.find(".sidebar .nav li.not-cc-valid").removeClass("hide");v()}).each(function(){if(sessionStorage["contract-menu-filter"]){a(this).trigger("select")}});u.find(".expand-collapse-menu-filter").on("select.menu-filtering",function(){if(u.find(".page-sidebar-minified").length>0){return}sessionStorage["expand-collapse-menu-filter"]=true;a(this).find("i").removeClass("fa-angle-double-down").addClass("fa-angle-double-up");for(var w in s){var y=s[w];u.find(y).each(function(){a(this).next(".sub-menu").slideDown(250);var z=a(this).find(".readers").first();z.text(z.text().replace(/Opens a list below/,"Closes the list below"))})}var x=a(this).find(".readers");x.text(x.text().replace("Expand","Collapse"))}).on("deselect.menu-filtering",function(){if(u.find(".page-sidebar-minified").length>0){return}sessionStorage.removeItem("expand-collapse-menu-filter");a(this).find("i").removeClass("fa-angle-double-up").addClass("fa-angle-double-down");for(var w in s){var y=s[w];u.find(y).each(function(){a(this).next(".sub-menu").slideUp(250);var z=a(this).find(".readers").first();z.text(z.text().replace(/Closes the list below/,"Opens a list below"))})}var x=a(this).find(".readers");x.text(x.text().replace("Collapse","Expand"))}).each(function(){if(sessionStorage["expand-collapse-menu-filter"]){a(this).trigger("select")}});var r=function(w){if(w!=""){u.find("div.search-menu-filter").removeClass("has-feedback");u.find(".search-menu-filter-icon").addClass("hidden")}else{u.find("div.search-menu-filter").addClass("has-feedback");u.find(".search-menu-filter-icon").removeClass("hidden")}};u.find("div.search-menu-filter input").on("input.menu-filtering",function(){var x=a.zeusValidate.getValueFromInput(a(this))||"";r(x);sessionStorage["search-menu-filter"]=x;var w=new RegExp(x.toLowerCase());u.find(".sidebar .nav li:not(.has-sub) > a").each(function(){if(x==""||w.test(a(this).text().toLowerCase())){a(this).closest("li").removeClass("hide")}else{a(this).closest("li").addClass("hide")}});v()});u.find("div.search-menu-filter input").on("keydown keyup",function(){var w=a.zeusValidate.getValueFromInput(a(this))||"";r(w);if(w==""){return}u.find("a.expand-collapse-menu-filter").trigger("select")});u.find("div.search-menu-filter input").on("focusout",function(){r("")});u.find("a.search-menu-filter").on("select.menu-filtering",function(){sessionStorage["search-menu-filter"]="";a(this).siblings("a.contract-menu-filter").trigger("deselect");a(this).siblings("a.expand-collapse-menu-filter").trigger("select");var w=a(this).closest("div.menu-filter").find("div.search-menu-filter");w.show();w.find("input").focus()}).on("deselect.menu-filtering",function(){var w=a(this).closest("div.menu-filter").find("div.search-menu-filter input");w.val("").trigger("input.menu-filtering");sessionStorage.removeItem("search-menu-filter");a(this).closest("div.menu-filter").find("div.search-menu-filter").hide();a(this).siblings("a.expand-collapse-menu-filter").trigger("deselect")}).each(function(){var x=sessionStorage["search-menu-filter"];if(x!=l){a(this).trigger("select");var w=a(this).closest("div.menu-filter").find("div.search-menu-filter input");w.val(x).trigger("input.menu-filtering")}})},gridcolumnselector:function(){var q=this;var r=a(this.element)||a(e);r.find('a[data-toggle="columnselector-dropdown"]').each(function(){var C=a(this);var y=C.parent().find("ul.columnselector");var B="hidden";var s="fadeInDown animated";var t=y.find(".btn-primary");var w=y.find(".btn-close");var u=y.find('.check-box-list input[type="checkbox"]');var v={};var z={};w.addClass(B);C.click(function(D){D.stopPropagation();if(y.hasClass(B)){y.removeClass(B);y.addClass(s);C.parent().addClass("open");v={};z={};u.each(function(){var E=a(this);v[E.attr("id")]=E.attr("checked");z[E.attr("id")]=E.attr("disabled")})}else{y.removeClass(s);y.addClass(B);C.parent().removeClass("open")}});y.click(function(D){D.stopPropagation()});y.keydown(function(D){if(D.keyCode==13){if(!(w.is(":focus")||t.is(":focus"))){D.preventDefault()}}});r.click(x);w.click(x);function x(){if(!y.hasClass(B)){y.addClass(B);C.parent().removeClass("open");A(C);if(!a.isEmptyObject(v)&&!a.isEmptyObject(z)){for(var E in v){var D=a("#"+E);D.removeAttr("checked");if(v[E]){D.attr("checked","checked")}}for(var E in z){var D=a("#"+E);D.removeAttr("disabled");if(z[E]){D.attr("disabled","disabled")}}}}}t.click(function(){u.each(function(){var D=a(this);D.data("initialValue",a.zeusValidate.getValueFromInput(D))});q.loadMoreResults(C.parent().parent().find(".rhea-paged"),true);v={};z={};x()});function A(D){var E=D.parent();var F=D.find(".readers").first();if(F.length>0){n.setTimeout(function(){if(E.hasClass("open")){F.text(F.text().replace(/Opens a list below/,"Closes the list below"))}else{F.text(F.text().replace(/Closes the list below/,"Opens a list below"))}},50)}}})},settingsmenu:function(){var r=a(this.element)||a(e);var q=r.find("#page-container");r.find('a[data-toggle="settings-dropdown"]').each(function(){var A=a(this);var E=A.parent().find("div.settings");var z="hidden";var s="fadeInDown animated";var B=E.find('input[name="ResponsiveTable"][type="hidden"]').siblings("div.switcher");var w=E.find('input[name="FixedHeader"][type="hidden"]').siblings("div.switcher");var v=E.find('input[type=radio][name="ColourScheme"]');var F=E.find('[data-settings="true"]').attr("data-value");var D=a.parseJSON(F);A.click(function(G){G.stopPropagation();if(E.hasClass(z)){E.removeClass(z);E.addClass(s);r.find("ul.dropdown-menu, div.sitepicker, div.settings").each(function(){var H=a(this);if(H.hasClass("contract-picker-list")||H.hasClass("sitepicker")){H.css("display","none")}else{if(H.closest("li.dropdown, div.dropdown").length==1){H.closest("li.dropdown, div.dropdown").removeClass("open")}}});A.closest("li.dropdown").addClass("open")}else{E.removeClass(s);E.addClass(z);A.closest("li.dropdown").removeClass("open")}});t();function t(){a.zeusValidate.userSettings.FixedHeader=D.FixedHeader;a.zeusValidate.userSettings.ResponsiveTable=D.ResponsiveTable;a.zeusValidate.userSettings.ColourScheme=D.ColourScheme;if(!D.FixedHeader){q.removeClass("page-sidebar-fixed");q.find(".sidebar").css("top","-50px");r.find('.sidebar [data-scrollbar="true"]').each(function(){a(this).removeAttr("style");a(this).slimScroll({destroy:true})});if(q.find(".sidebar-bg").length===0){q.append('<div class="sidebar-bg"></div>')}if(q.find(".sidebar-bg.sidebar-right").length===0){a('<div class="sidebar-right sidebar-bg" style="width: 240px;"></div>').appendTo(q)}}if(!D.ResponsiveTable){}}function C(){if(w.length){if(D.FixedHeader){w.find(".centre").css("left","55px")}else{w.find(".centre").css("left","5px")}}if(B.length){if(D.ResponsiveTable){B.find(".centre").css("left","55px")}else{B.find(".centre").css("left","5px")}}switch(D.ColourScheme){case 0:a(x("Default")).attr("checked","checked");break;case 1:a(x("Dark")).attr("checked","checked");break;case 2:a(x("Black")).attr("checked","checked");break;case 3:a(x("White")).attr("checked","checked");break;default:a(x("Default")).attr("checked","checked");break}}function x(G){return a.grep(v,function(H,I){return a(H).attr("value")==G})}E.click(function(G){G.stopPropagation()});r.click(u);r.find('a[data-toggle="dropdown"].dropdown-toggle').click(u);a(r).on("keydown.settings-autoclose",function(G){if(G.which==27){u()}});function u(){if(!E.hasClass(z)){E.addClass(z);A.closest("li.dropdown").removeClass("open");y(A);C()}}function y(G){var H=G.parent();var I=G.find(".readers").first();if(I.length>0){n.setTimeout(function(){if(H.hasClass("open")){I.text(I.text().replace(/Opens a list below/,"Closes the list below"))}else{I.text(I.text().replace(/Closes the list below/,"Opens a list below"))}},50)}}})},orgsitepicker:function(){var q=this;var r=a(this.element)||a(e);r.find(".sitepicker-launch").each(function(){var t=a(this);var y=t.parent().siblings(".sitepicker");var u=y.find("#RealOrg");var w=y.find("#RealSite");var v=y.find("#EffectiveOrg");var x=y.find("#EffectiveSite");var z=a.zeusValidate.getValueFromInput(y.find("#UrlTemplate"));var s=y.find('button[type="submit"]');s.off("click.rhea-ignoredirty");v.removeData("initialValue");x.removeData("initialValue");v.data("originalValue",a.zeusValidate.getValueFromInput(v));v.data("originalText",v.text());x.data("originalValue",a.zeusValidate.getValueFromInput(x));x.data("originalText",x.text());t.on("click",function(B){if(y.css("display")!="block"){B.stopPropagation();y.css("display","block");y.addClass("fadeInDown animated");y.on("mousedown.sitepicker-autoclose",function(C){C.originalEvent.sitepickerinsidetrigger=true});a(e).on("mousedown.sitepicker-autoclose",function(C){if(!C.originalEvent.sitepickerinsidetrigger){A()}});a(e).on("keydown.sitepicker-autoclose",function(C){if(C.which==27){A()}});function A(){v.data("ariaSelectReference").selectOrCreateChoice(v.data("originalValue"),v.data("originalText"),true);x.data("ariaSelectReference").selectOrCreateChoice(x.data("originalValue"),x.data("originalText"),true);x.data("ariaSelectReference").setEnabled(true);y.find(".alert").remove();y.css("display","none");y.removeClass("fadeInDown animated");a(e).off(".sitepicker-autoclose");y.off(".sitepicker-autoclose")}}});s.on("click",function(A){A.preventDefault();var C,D;if(a(this).text()=="Submit"){C=a.zeusValidate.getValueFromInput(v);D=a.zeusValidate.getValueFromInput(x)}else{if(a(this).text()=="Reset to Primary"){C=a.zeusValidate.getValueFromInput(u);D=a.zeusValidate.getValueFromInput(w)}}if(C!=""&&D!=""){var B=z.replace("ZEUS_ORG",C).replace("ZEUS_SITE",D);n.location.href=B}else{if(y.find("div.alert.alert-danger").length==0){a("<div>").text("You must select an Org and Site").addClass("alert alert-danger").appendTo(y)}}})})},primary:function(){var q=this;var r=a(this.element)||a(e);r.find('input[type="text"], input[type="email"]').bind("keypress.rhea-primary",function(s){var u=a(this);var v=u.attr("disabled")||u.attr("readonly");if(s.which==13){if(v){s.preventDefault();return false}var t=u.closest("fieldset").find(".btn-primary").not(":hidden")[0];if(t==l){t=u.closest("form").find(".btn-primary").not(":hidden")[0]}if(t!=l){t.click();s.preventDefault();return false}}return true});a("#main_form").on("keypress.rhea-primary",function(s){if(s.which==13){var u=false;var t=l;if(s.srcElement){t=a(s.srcElement)}else{if(s.target){t=a(s.target)}}if(t!=l&&t.length){u=t.is("textarea")}else{u=a(e.activeElement).is("textarea")}var v=a(this).find(".btn-primary").not(":hidden")[0];if(!u&&v!=l){v.click();s.preventDefault();return false}}})},focuserrors:function(){var q=a(this.element)||a(e);if(a.zeusValidate.skipNextFocusErrors){a.zeusValidate.skipNextFocusErrors=false;return}setTimeout(function(){var s=q.find("#validation-error-summary ul li");var w=q.find("section.msgGood ul li");var y=q.find("section.msgWarn ul li");var t=q.find("section.msgInfo ul li");var v=q.find("div#page-container");if(s.length>0&&s.not(":hidden")){var r=q.find("#validation-error-summary h4");if(r.length){r.attr("tabindex","-1");r.focus();v.animate({scrollTop:0},"fast");s.find("a.alert-link").click(function(A){A.preventDefault();var C=a(this);var B=C.attr("href");a.zeusValidate.focusErrorOnElement(q.find(B))})}}else{if(w.length>0&&w.not(":hidden")){var x=q.find("section.msgGood h4");if(x.length){x.attr("tabindex","-1");x.focus();v.animate({scrollTop:0},"fast")}}else{if(y.length>0&&y.not(":hidden")){var z=q.find("section.msgWarn h4");if(z.length){z.attr("tabindex","-1");z.focus();v.animate({scrollTop:0},"fast")}}else{if(t.length>0&&t.not(":hidden")){var u=q.find("section.msgInfo h4");if(u.length){u.attr("tabindex","-1");u.focus();v.animate({scrollTop:0},"fast")}}}}}},500)},resize:function(){a("textarea").autoGrow({})},maxlength:function(){var q=this;var r=a(this.element)||a(e);r.find("[maxlength]").not("[data-val-range]").each(function(){if(a(this).is(":disabled, [readonly]")&&!a(this).attr(f.ContingentEditableIf)&&!a(this).attr(f.ContingentReadOnlyIf)){return}var u=a(this);var t=u.attr("maxlength");var s=u.css("display");u.css("display","block");u.maxlength({alwaysShow:true,threshold:t,warningClass:"label label-success",limitReachedClass:"label label-danger",separator:" of ",preText:"You have used ",postText:" chars.",validate:true});u.css("display",s);u.bind("focus resize",function(v){setTimeout(a.zeusValidate.adjustPostionOnScroll(u,"scroll.zeus-maxindicator","span.bootstrap-maxlength"),20)})})},skip:function(){var q=a("#content");if(q!=l){a.zeusValidate.alwaysIgnoreDirty=(/^true$/i.test(q.data(c.SkipUnsavedChanges)))?true:false}var t=a(this.element)||a(e);var y=t.find("["+f.SkipLink+"]");if(y!==l){for(var r=0;r<y.length;r++){var v=a(y[r]);a("#skipLinks").find("ul")[0].innerHTML+='<li><a href="#'+v.attr("id")+'">skip to '+v.attr(f.DisplayName).toLowerCase()+"</a></li>"}}var z=t.find("["+f.SkipLinkTable+"]");if(z!==l){for(var s=0;s<z.length;s++){var w=a(z[s]);var x=a(w).find("table")[0];if(x!==l){var A=x.id;if(A!==l){var u=w.attr(f.DisplayName);if(a(w.prev("legend")).length>0){u=a(w.prev("legend"))[0].outerText}a("#skipLinks").find("ul")[0].innerHTML+='<li><a href="#'+A+'">skip to '+u.toLowerCase()+"</a></li>"}}}}},serializeform:function(r){var q=r.find(":input:disabled").removeAttr("disabled");var s=r.serialize();q.attr("disabled","disabled");return s},dirtycheck:function(){var q=this;var s=a(this.element)||a(e);s.find("button").each(function(){if(!a(this).hasEvent("click.rhea-ignoredirty")){a(this).bind("click.rhea-ignoredirty",function(){a.zeusValidate.ignoreDirty=true})}});s.find("input,textarea,select").each(function(){if(a(this).attr("type")=="radio"){a(this).data("initialValue",this.checked)}else{a(this).data("initialValue",a.zeusValidate.getValueFromInput(a(this)))}});s.find(".history input, .history textarea, .history select, .zeus-widget-view-list input, .zeus-widget-view-list textarea, .zeus-widget-view-list select, .menu-filter input, .zeus-grid-filter, .ztv-selected, .ztv-expanded,["+f.IgnoreDirtyCheck+'="true"]').removeData("initialValue");var r=function(){var u=false;a("input,textarea,select").each(function(){var v=a(this).data("initialValue");var w=a(this).attr("type");if(v!=l){if((w=="radio"&&v!=this.checked)||(w!="radio"&&v!=a.zeusValidate.getValueFromInput(a(this)))){u=true;return false}}});var t=a("section#validation-error-summary").attr(f.AlwaysShowUnsavedChanges)=="true";if(a.zeusValidate.ignoreDirty){a.zeusValidate.ignoreDirty=false}else{if((u&&!a.zeusValidate.alwaysIgnoreDirty)||t){return"You have unsaved changes."}}return l};a(n).off("beforeunload.catcher");a(n).on("beforeunload.catcher",r)},senddisabled:function(){var q=this;var t=a(this.element)||a(e);var s="last-clicked-button";t.find('button[name="submitType"]').bind("click.lastclicked",function(){var u=a(this);a("button."+s).removeClass(s);u.addClass(s)});var r=t.find("form");if(r.length<=0){t.find('button[name="submitType"]').bind("click.rhea-senddisabled",function(){var u=a(this);u.closest("form").data(c.IsDownload,u.data(c.IsDownload))})}else{r.each(function(){var u=a(this);u.find('button[name="submitType"]').bind("click.rhea-senddisabled",function(){var v=a(this);u.data(c.IsDownload,v.data(c.IsDownload))});u.submit(function(x){if(a.zeusValidate.preventDefaultOnNextFormSubmit){a.zeusValidate.preventDefaultOnNextFormSubmit=false;x.preventDefault();return}if(x.isDefaultPrevented()){return}var B=a("button."+s);if(!a.zeusValidate.ignoreLastClicked&&B!=l&&B.length==1){var v=a(B[0]);var J=v.data(c.ButtonConfirmation);var G=v.hasClass("skipconfirm");if(!G&&J!=l){x.preventDefault();var E=v.data(c.FieldPrefix);var F={};var D=[];var C=v.data(c.ButtonConfirmationParameters);if(C!=l&&C.length>0){D=C.split(",")}if(D.length>0){for(var z=0;z<D.length;z++){var A=D[z];var H=(E!=l&&E.length>0)?E+"_"+A:A;A=A.toLowerCase();F[A]=a.zeusValidate.getValueFromInput(a("#"+H))}}var y={};y[g.AjaxConfirmation]=true;y[g.Ajax]=true;a.ajax({url:J,type:"GET",dataType:"html",cache:false,headers:y,data:F}).done(function(L,O,N){if(a.zeusValidate.sessionExpired(N)){return}var M="modal-confirmation";var K=a("#"+M);if(K.length==0){K=q.makeModalDialogElement("",L,'<a class="btn btn-sm btn-white" href="javascript:;">No</a><a class="btn btn-sm btn-primary" href="javascript:;">Yes</a>',M);K.find(".modal-footer a.btn-primary").bind("click.zeus-modal-yes",function(){a.zeusValidate.ignoreLastClicked=true;v.click()});K.find(".modal-footer a").bind("click.zeus-modal-dismiss",function(){q.dismissModalDialogElement(K)})}q.showModalDialogElement(K)}).fail(function(M,L,K){a.zeusValidate.addError("Error occurred while loading.")});return}}a.zeusValidate.blockUIoptions.message='<div class="msgInfo">Sending data please wait</div>';a.blockUI(a.zeusValidate.blockUIoptions);var I=u.data(c.IsDownload)?1000*2.5:1000*30;if(u.data(c.IsDownload)){a.zeusValidate.ignoreLastClicked=false}setTimeout(function(){a.unblockUI();a.zeusValidate.blockUIoptions.message=a.zeusValidate.blockUIdefaultMessage},I);var w=a(this).find(":input:disabled").removeAttr("disabled");setTimeout(function(){w.attr("disabled","disabled")},1)})})}},dropdowns:function(){var q=a(this.element)||a(e);q.find("select").each(function(){var G=a(this);var s=G.is("[disabled]");var H=G.attr(f.MaximumSelections);var B=G.attr(f.LazyLoad);var C=G.attr(f.NeverCache);var D=G.attr(f.NoDeselect);var y=G.hasClass("rhea-adw");var z=G.hasClass("rhea-ajax");var r={labelText:a(q.find('label[for="'+G.attr("id")+'"]').contents().get(0)).text()+(G.attr("data-val-required")?" - Required":""),errorHandler:function(I,K,J){},};if(B!=l){r.eagerLoad=false}if(C!=l){r.allowAjaxCache=false}if(D!=l){r.deselectAllowed=false}if(H!=l){a.extend(r,{limit:parseInt(H),})}if(z||y){a.extend(r,{url:G.data(c.Url),global:false,})}if(z){if(G.data(c.Parameters)!=l&&G.data(c.Parameters).length>0){r.eagerLoad=false;var E=a.zeusValidate.getParameterElementsForElement(G);for(var x=0;x<E.length;++x){E[x].on("change.hierarchy",function(){var K=true;for(var J=0;J<E.length;++J){var I=E[J];if(I.attr("type")!="checkbox"&&a.zeusValidate.getValueFromInput(I)==""){K=false;break}}if(K){t.setEnabled(true);t.clearAll()}else{t.setEnabled(false);t.clearAll()}})}a.extend(r,{getPostData:function(){return a.zeusValidate.getParameterMapForElement(G)},})}}if(y){var w=function(){return G.data(c.DependentValueAdw)};var u=G.data(c.DependentPropertyId);var v=a(q).find("#"+u);if(u!=l&&v.length==1){var F=v.data(c.ReadOnlyType);w=function(){return a.zeusValidate.getValueFromInput(v)};r.eagerLoad=false;v.on("change.hierarchy",function(){if(w()==""){t.setEnabled(false);t.clearAll()}else{t.setEnabled(true);t.clearAll()}});if(w()==""){s=true}}a.extend(r,{getPostData:function(){return{code:G.data(c.Code),currentCodesOnly:G.data(c.CurrentCodesOnlyAdw),dependentValue:w(),dominant:G.data(c.Dominant),orderType:G.data(c.OrderType),displayType:G.data(c.DisplayType),excludeValues:G.data(c.ExcludeValues)!=l?G.data(c.ExcludeValues).split(","):l}}})}var A=!G.attr("multiple");if(A){a.extend(r,{closeOnSelect:true,})}var t=ariaSelect(G,r);if(A){t.addClass("single-select");if(G.attr("data-noselection")){t.clearAll()}}a("<i>").addClass("fa").addClass("fa-search").addClass("right-icon").prependTo(t.find(".amc-box"));t.find(".amc-box").addClass("form-control");t.find("input").addClass("form-control");if(s){t.setEnabled(false)}})},actionif:function(){var q=this;var r=a(this.element)||a(e);r.find(".rhea-actionif").each(function(){var z=a(this);var w="";if(z.data(c.FieldPrefix).length>0){w=z.data(c.FieldPrefix)+"_"}var u=a(this).data(c.ComparisonType);var B=a(this).data(c.DependentValue);var s=a(this).data(c.ActionForDependencyType);var A=a(this).data(c.Type);var y=w+z.data(c.DependentProperty);var v=r.find("#"+y);if(v.length==0||v.data(c.RadioButtonGroup)){v=r.find('input:radio[name="'+a.zeusValidate.replaceAll(y,"_",".")+'"]')}else{if(v.data(c.CheckboxList)){v=r.find('input:checkbox[name="'+a.zeusValidate.replaceAll(y,"_",".")+'"]')}}if(z[0]==v[0]){return}var t=function(){var C=null;if(a(this)[0].type=="radio"||a(this).length>1){for(var D=0;D!=a(this).length;D++){if(a(this)[D]["checked"]){C=a(this)[D].value;break}}if(C==null){C=false}}else{if(a(this)[0].type=="select-multiple"&&a(this)[0].length!=l&&a(this)[0].length>0&&a(this)[0].value!==l&&a(this)[0].value!=""){C=[];for(var E=0;E<a(this)[0].children.length;E++){if(a(this)[0].children[E].selected){C.push(a(this)[0].children[E].value)}}}else{if(a(this)[0].type=="checkbox"){var G=a('input:checkbox[name="'+this.name+'"]');C=[];for(var D=0;D!=G.length;D++){if(G[D]["checked"]){C.push(G[D].value)}}if(C.length==0){C=false}}else{C=a(this)[0].value}}}var F=z.find("span");if(a.zeusValidate.is(C,u,B,false,false)){if(s.toLowerCase()=="visible"){z.removeClass("hidden")}else{if(s.toLowerCase()=="hidden"){z.addClass("hidden")}else{if(s.toLowerCase()=="enabled"){if(A=="link"){if(F.hasClass("iconOnly")){z.find("a[disabled]").removeAttr("disabled")}else{z.find("span").addClass("hidden");z.find("a").removeClass("hidden")}}else{z.removeAttr("disabled")}}else{if(s.toLowerCase()=="disabled"){if(A=="link"){var H=z.closest("span["+f.ApplyActionForDependency+"=true]");if(H.length==1){H.attr("disabled","disabled")}else{if(F.hasClass("iconOnly")){z.find("a").attr("disabled","disabled")}else{z.find("a").addClass("hidden");F.removeClass("hidden")}}}else{z.attr("disabled","disabled")}}else{if(s.toLowerCase()=="confirmation"){z.removeClass("skipconfirm")}}}}}}else{if(s.toLowerCase()=="visible"){z.addClass("hidden")}else{if(s.toLowerCase()=="hidden"){z.removeClass("hidden")}else{if(s.toLowerCase()=="enabled"){if(A=="link"){if(F.hasClass("iconOnly")){z.find("a").attr("disabled","disabled")}else{z.find("a").addClass("hidden");z.find("span").removeClass("hidden")}}else{z.attr("disabled","disabled")}}else{if(s.toLowerCase()=="disabled"){var I=z.closest("span["+f.ApplyActionForDependency+"=true]");if(I.length==1){I.removeAttr("disabled")}else{if(A=="link"){if(F.hasClass("iconOnly")){z.find("a[disabled]").removeAttr("disabled")}else{z.find("span").addClass("hidden");z.find("a").removeClass("hidden")}}else{z.removeAttr("disabled")}}}else{if(s.toLowerCase()=="confirmation"){z.addClass("skipconfirm")}}}}}}};if(v.length>1){for(var x=0;x<v.length;x++){a(v[x]).bind("change.rhea-actionif",t)}}else{v.bind("change.rhea-actionif",t)}})},contingentif:function(){var q=this;var s=a(this.element)||a(e);var r=function(E,z){var v="ContainerFor-";var D="InnerContainerFor-";var G=E.data(c.ReadOnlyType);var A=function(){var R=E.data(x+"store");if(R==l){return}var N=t(R);if(N){if(E.is("select")){var L=E.data("ariaSelectReference");L.setEnabled(true);E.removeAttr("readonly");E.removeAttr("disabled");if(E.attr(f.AddressAutocomplete)=="true"){var Q=a("label[for="+E.attr("id")+"]").find("span.req");if(Q.length==1){Q.removeClass("hidden");Q.find(".readers").attr("aria-hidden","false")}}}else{if(E.data("val-date")!=l){var P=E.parent();if(P.hasClass("datetime")){P.find("input").each(function(){a(this).removeAttr("disabled");a(this).removeAttr("readonly")})}else{E.removeAttr("readonly");E.removeAttr("disabled")}}else{var O=(E[0].type=="checkbox"&&E.data("limit")==true);if(!O){E.removeAttr("readonly");E.removeAttr("disabled")}}}if(E[0].type=="checkbox"&&E.data("checkallid")!=l){var M=a("#"+E.data("checkallid"));if(M){M.removeAttr("readonly");M.removeAttr("disabled");M.closest("li").removeClass("hidden")}}}else{if(E.is("select")){var L=E.data("ariaSelectReference");L.setEnabled(false);E.attr(G,G);if(E.attr(f.AddressAutocomplete)=="true"){var Q=a("label[for="+E.attr("id")+"]").find("span.req");if(Q.length==1){Q.addClass("hidden");Q.find(".readers").attr("aria-hidden","true")}}}else{if(E.data("val-date")!=l){var P=E.parent();if(P.hasClass("datetime")){P.find("input").each(function(){a(this).attr(G,G)})}else{E.attr(G,G)}}else{var O=(E[0].type=="checkbox"&&E.data("limit")==true);if(!O){E.attr(G,G)}}}if(E[0].type=="checkbox"&&E.data("checkallid")!=l){var M=a("#"+E.data("checkallid"));if(M){M.attr(G,G);M.closest("li").addClass("hidden")}}}if(a(":focus")[0]==E[0]){E.blur();E.focus()}a(e).trigger("editable-state-change",E)};var F=function(){var Q=E.data(x+"store");if(Q==l){return}var N=t(Q);if(!N){if(E.is("select")){var L=E.data("ariaSelectReference");L.setEnabled(true);E.removeAttr("readonly");E.removeAttr("disabled")}else{if(E.data("val-date")!=l){var P=E.parent();if(P.hasClass("datetime")){P.find("input").each(function(){a(this).removeAttr("disabled");a(this).removeAttr("readonly")})}else{E.removeAttr("readonly");E.removeAttr("disabled")}}else{var O=(E[0].type=="checkbox"&&E.data("limit")==true);if(!O){E.removeAttr("readonly");E.removeAttr("disabled")}}}if(E[0].type=="checkbox"&&E.data("checkallid")!=l){var M=s.find("#"+E.data("checkallid"));if(M){M.removeAttr("readonly");M.removeAttr("disabled");M.closest("li").removeClass("hidden")}}}else{if(E.is("select")){var L=E.data("ariaSelectReference");L.setEnabled(false);E.attr(G,G)}else{if(E.data("val-date")!=l){var P=E.parent();if(P.hasClass("datetime")){P.find("input").each(function(){a(this).attr(G,G)})}else{E.attr(G,G)}}else{var O=(E[0].type=="checkbox"&&E.data("limit")==true);if(!O){E.attr(G,G)}}}if(E[0].type=="checkbox"&&E.data("checkallid")!=l){var M=s.find("#"+E.data("checkallid"));if(M){M.attr(G,G);M.closest("li").addClass("hidden")}}}if(a(":focus")[0]==E[0]){E.blur();E.focus()}a(e).trigger("editable-state-change",E)};var K=function(){var P=E.data(x+"store");if(P==l){return}var L=t(P);var O=E[0].id;if(O.indexOf("InnerContainerFor-")!=-1){O=O.replace("InnerContainerFor-","")}if(O.indexOf("ContainerFor-")==-1&&O.lastIndexOf("-")!=-1){O=O.substring(0,O.lastIndexOf("-"))}var M=O;M=(M.indexOf(v)==-1)?v+M:M;if(L){s.find("#"+M).removeClass("hidden");try{s.find("#"+M).find("textarea:visible").each(function(){if(a(this).is(":not([readonly])")||a(this).text()!=""){a(this).trigger("input")}})}catch(N){}}else{s.find("#"+M).addClass("hidden")}q.generateMainFormJumpList()};var u=function(){var P=E.data(x+"store");if(P==l){return}var O=t(P);if(O){var N=false;var Q="";if(E.hasClass("rhea-numeric")&&!/^true$/i.test(E.data(c.IsNullable))){Q=a.autoNumeric.Format(E,0)}if(E[0].type=="checkbox"||E[0].type=="radio"){if(E[0].checked){N=true;E[0].checked=false}}else{if(E[0].value!=Q){N=true;E.val(Q)}}if(a(E[0]).parent(".datetime").length!==0){a(E[0]).parent(".datetime").find("input:text").val(Q)}if(!N){return}var L=B(P);if(L){E.trigger("change.rhea-gst");E.trigger("change.rhea-copy")}else{E.change()}if(E.is("select")){var M=E.data("ariaSelectReference");M.clearAll()}}};var H=function(){var O=E.data(x+"store");if(O==l){return}var L=t(O);E.data("requiredif-allconditionsmet",L);var N=s.find("label[for="+E.attr("id")+"]").find("span.req");if(L){N.removeClass("hidden");N.find(".readers").attr("aria-hidden","false");if(E.is("select")){var M=E.parent().find(".amc-box").find("span.reader-only").first();M.text(M.text().replace(/$/," - Required"))}}else{N.addClass("hidden");N.find(".readers").attr("aria-hidden","true");if(E.is("select")){var M=E.parent().find(".amc-box").find("span.reader-only").first();M.text(M.text().replace(/ - Required$/,""))}}};var t=function(P){var O=[];var L=[];var M=[];for(var N=0;N<P.Dependents.length;N++){if(P.Contingents[N].Group!=l&&P.Contingents[N].Group.length){if(a.inArray(P.Contingents[N].Group,M)==-1){M.push(P.Contingents[N].Group);L[P.Contingents[N].Group]=[]}L[P.Contingents[N].Group].push(J(P.Dependents[N],P.Contingents[N]))}else{O.push(J(P.Dependents[N],P.Contingents[N]))}}for(var N=0;N<M.length;N++){O.push(a.inArray(false,L[M[N]])==-1)}return a.inArray(true,O)!=-1};var J=function(O,N){if(N==l){return false}var M=N.ComparisonType;var T=N.PassOnNull;var Q=N.FailOnNull;var V=N.DependentValue;var L=N.Always;var P=null;if(O[0].type=="radio"){for(var R=0;R!=O.length;R++){if(O[R]["checked"]){P=O[R].value;break}}if(P==null){P=false}}else{if(O[0].type=="select-multiple"&&O[0].length!=l&&O[0].length>0&&O[0].value!==l&&O[0].value!=""){P=[];for(var S=0;S<O[0].children.length;S++){if(O[0].children[S].selected){P.push(O[0].children[S].value)}}}else{if(O[0].type=="checkbox"){var U=s.find('input:checkbox[name="'+O[0].name+'"]');P=[];for(var R=0;R!=U.length;R++){if(U[R]["checked"]){P.push(U[R].value)}}if(P.length==0){P=false}}else{P=O[0].value}}}return L||a.zeusValidate.is(P,M,V,T,Q)};var B=function(N){var L=false;for(var M=0;M<N.Dependents.length;M++){L=N.Contingents[M].Always?true:L}return L};var I=function(M,L,N){var P=L.DependentProperty;if(E[0].id.length==0&&E.find("input").length>0){E=E.find("input")}var R=a.zeusValidate.getFieldPrefixFromId(E[0],P);if(M=="visibleif"){if(R.indexOf(D)!=-1){R=R.substring(D.length,R.length)}if(R.indexOf(v)!=-1){R=R.substring(v.length,R.length)}}var O=s.find("#"+R);if(O.length==0||O.data(c.RadioButtonGroup)){O=s.find('input:radio[name="'+a.zeusValidate.replaceAll(R,"_",".")+'"]')}else{if(O.data(c.CheckboxList)){O=s.find('input:checkbox[name="'+a.zeusValidate.replaceAll(R,"_",".")+'"]')}}if(E[0]==O[0]||O.length==0){return}var S={};S.Contingents=[];S.Dependents=[];if(E.data(M+"store")!=l){S=E.data(M+"store")}S.Dependents.push(O);S.Contingents.push(L);E.data(M+"store",S);if(O.length>1){for(var Q=0;Q<O.length;Q++){a(O[Q]).bind("change.zeus-trigger"+M,N)}}else{O.bind("change.zeus-trigger"+M,N)}};var x;var y;if(z==c.ContingentEditableIf&&E.data(c.ContingentEditableIf)!=l){x="editableif";z=c.ContingentEditableIf;y=A}else{if(z==c.ContingentReadOnlyIf&&E.data(c.ContingentReadOnlyIf)!=l){x="readonlyif";z=c.ContingentReadOnlyIf;y=F}else{if(z==c.ContingentVisibleIf&&E.data(c.ContingentVisibleIf)!=l){x="visibleif";z=c.ContingentVisibleIf;y=K}else{if(z==c.ContingentClearIf&&E.data(c.ContingentClearIf)!=l){x="clear";z=c.ContingentClearIf;y=u}else{if(z==c.ContingentRequiredIf&&E.data(c.ContingentRequiredIf)!=l){x="requiredif";z=c.ContingentRequiredIf;y=H}}}}}if(x==l||z==l||y==l){return}var w=E.data(z);if(w==l||typeof(w)!="object"){return}for(var C=0;C<w.length;C++){I(x,w[C],y)}if(y==H){H();E.bind("load.zeus-trigger-requiredif",H)}};s.find("["+f.ContingentEditableIf+"]").each(function(){r(a(this),c.ContingentEditableIf)});s.find("["+f.ContingentReadOnlyIf+"]").each(function(){r(a(this),c.ContingentReadOnlyIf)});s.find("["+f.ContingentVisibleIf+"]").each(function(){r(a(this),c.ContingentVisibleIf)});s.find("["+f.ContingentClearIf+"]").each(function(){r(a(this),c.ContingentClearIf)});s.find("["+f.ContingentRequiredIf+"]").each(function(){r(a(this),c.ContingentRequiredIf)})},ajaxfield:function(){var q=this;var r=a(this.element)||a(e);r.find('textarea.zeus-ajaxfield, input[type="text"].zeus-ajaxfield, select.zeus-ajaxfield').each(function(){var u=a(this);var v=u.attr(f.Url);var t=a.zeusValidate.getParameterElementsForElement(u);for(var s=0;s<t.length;++s){t[s].on("change.ajaxfield",function(){setTimeout(function(){if(u.data("ajaxFieldTriggered")===true){return}u.data("ajaxFieldTriggered",true);a.ajax({type:"GET",dataType:"html",global:false,url:v,cache:false,data:a.zeusValidate.getParameterMapForElement(u),success:function(x,y){u.val(x);if(u.is("textarea:visible")){u.trigger("input")}else{if(u.is("select")){var w=u.data("ariaSelectReference");if(w!=l){w.selectOrCreateChoice(x,x,true)}}}u.data("ajaxFieldTriggered",false)}}).fail(function(y,x,w){a.zeusValidate.addError("Error occurred while loading "+u.attr(f.DisplayName)+".");u.data("ajaxFieldTriggered",false)})},1)})}})},ajaxloadif:function(){var q=this;var r=a(this.element)||a(e);r.find(".rhea-ajaxloadif").each(function(){var C=a(this);var E=C.attr("id");if(E.indexOf("InnerContainerFor-")!=-1){E=E.replace("InnerContainerFor-","")}if(E.indexOf("ContainerFor-")==-1&&E.lastIndexOf("-")!=-1){E=E.substring(0,E.lastIndexOf("-"))}var t=(/^true$/i.test(a(this).data(c.AlwaysAjaxLoadIf)))?true:false;var D=a("#ContainerFor-"+E);if(D[0]==l){D=r.find("#ContainerFor-"+E)}a.each(C.data(),function(G,H){D.data(G,H)});C=D;var x=C.data(c.DisplayName);var w=C.data(c.DependentPropertyAjaxLoadIf);var u=C.data(c.ComparisonTypeAjaxLoadIf);var A=C.data(c.PassOnNullAjaxLoadIf);var y=C.data(c.FailOnNullAjaxLoadIf);var F=C.data(c.DependentValueAjaxLoadIf);if(C[0].id.length==0&&C.find("input").length>0){C=C.find("input")}var B=a.zeusValidate.getFieldPrefixFromId(C[0],w);if(B.indexOf("InnerContainerFor-")!=-1){B=B.replace("InnerContainerFor-","")}if(B.indexOf("ContainerFor-")!=-1){B=B.replace("ContainerFor-","")}var v=a("#"+B);if(v[0]==l){v=r.find("#"+B)}if(v.length==0||v.data(c.RadioButtonGroup)){v=a('input:radio[name="'+a.zeusValidate.replaceAll(B,"_",".")+'"]')}else{if(v.data(c.CheckboxList)){v=a('input:checkbox[name="'+a.zeusValidate.replaceAll(B,"_",".")+'"]')}}if(!t&&C[0]==v[0]){return}var s=function(J,G){var Y=true;if(G!=l&&G.suppressScrollAndFocus!=l&&G.suppressScrollAndFocus===false){delete G.suppressScrollAndFocus;Y=false}var Q=false;if(G!=l&&G.overrideContingentCheck!=l&&G.overrideContingentCheck===true){delete G.overrideContingentCheck;Q=true}var ab=C.data(c.Url);var I=null;if(a(this)[0].type=="radio"||a(this).length>1){for(var M=0;M!=a(this).length;M++){if(a(this)[M]["checked"]){I=a(this)[M].value;break}}if(I==null){I=false}}else{if(a(this)[0].type=="select-multiple"&&a(this)[0].length!=l&&a(this)[0].length>0&&a(this)[0].value!==l&&a(this)[0].value!=""){I=[];for(var N=0;N<a(this)[0].children.length;N++){if(a(this)[0].children[N].selected){I.push(a(this)[0].children[N].value)}}}else{if(a(this)[0].type=="checkbox"){var Z=a('input:checkbox[name="'+this.name+'"]');I=[];for(var M=0;M!=Z.length;M++){if(Z[M]["checked"]){I.push(Z[M].value)}}if(I.length==0){I=false}}else{I=a(this)[0].value}}}if(Q||t||a.zeusValidate.is(I,u,F,A,y)){var U=a.zeusValidate.getParameterMapForElement(C);G=(G!=l)?G:{};for(var O in U){var aa=O.charAt(0).toUpperCase()+O.slice(1);if(G[aa]!=l){U[O]=G[aa]}}var K=a("#ContainerFor-"+E);if(K==l||K.length==0){return}var W=K.data(c.ParentType);var V=K.data(c.PropertyNameInParent);var R=K.find(".panel");if(K.find(".panel").length==0){K.html('<div class="panel panel-inverse"><div class="panel-heading">'+x+'</div><div class="panel-body"></div></div>')}else{if(t&&C.data("pageload")==l){return}}R=a(K).find(".panel");if(R.hasClass("panel-loading")){return}R.addClass("panel-loading");var X=a('<div class="panel-loader"><span class="spinner-small"></span></div>');var P=a('<div class="panel-loader"></div>');var S=R.find(".panel-body");S.prepend(X);var T=R.find(".panel-footer");T.prepend(P);var H=K.parent().closest(".iscontainer");while(H.length){W=H.data(c.ParentType)+","+W;V=H.data(c.PropertyNameInParent)+","+V;H=H.parent().closest(".iscontainer")}var L={};L[g.Ajax]=true;L[g.ParentType]=W;L[g.PropertyNameInParent]=V;a.ajax({type:"GET",dataType:"html",global:false,url:ab,cache:false,headers:L,data:U}).done(function(ac,af,ad){if(a.zeusValidate.sessionExpired(ad)){return}X.remove();P.remove();R.removeClass("panel-loading");K.html(ac);a.zeusValidate.skipNextFocusErrors=true;q.prepareNewContent(K);if(!Y){var ae=a("div#page-container");ae.animate({scrollTop:K.offset().top-ae.offset().top+ae.scrollTop()-20},"fast");K.attr("tabindex",-1).focus()}}).fail(function(ah,ag,ac){var ad=a.zeusValidate.getErrorInAjax(ah);var ae=a(K.find(".panel-heading .panel-title")[0]);if(ae!=l){var af=ae.attr("id");ae=ae.text();ae=ae.length?'<a class="alert-link" href="#'+af+'">'+ae+"</a> - ":ae}else{ae=""}ad=ae+(ad!=l?ad:"Error occurred while loading");a.zeusValidate.addError(ad);X.remove();P.remove();R.removeClass("panel-loading")})}};if(v.length>1){for(var z=0;z<v.length;z++){a(v[z]).bind("change.rhea-ajaxloadif",s)}}else{if(v.length==1){v.bind("change.rhea-ajaxloadif",s)}}C.bind("load.rhea-ajaxloadif",s);if(C.data("pageload")!=l){return}if(t){C.trigger("load.rhea-ajaxloadif",{suppressScrollAndFocus:true,overrideContingentCheck:true});C.data("pageload",true)}})},gst:function(){var q=this;var r=a(this.element)||a(e);r.find(".rhea-gst").each(function(){var y=a(this);var z=a(this).data(c.ReadOnlyType);var t=a(this).data(c.DependentPropertyGst);var w=a(this).data(c.ExclusiveGst);if(y[0].id.length==0&&y.find("input").length>0){y=y.find("input")}var x=a.zeusValidate.getFieldPrefixFromId(y[0],t);var s=a("#"+x);if(s.length==0||s.data(c.RadioButtonGroup)){s=a('input:radio[name="'+a.zeusValidate.replaceAll(x,"_",".")+'"]')}if(y[0]==s[0]){return}var u=function(){if(t==null||t==l){return}var B=null;if(a(this)[0].type=="checkbox"||a(this)[0].type=="radio"||a(this).length>1){for(var D=0;D!=a(this).length;D++){if(a(this)[D]["checked"]){B=a(this)[D].value;break}}if(B==null){B=false}}else{B=a(this)[0].value}B=a.zeusValidate.replaceAll(B.replace("$",""),",","");if(!isNaN(B)){var A=new Number(B);var C=w?new Number(A*0.1):new Number(A/11);if(y.hasClass("rhea-numeric")){C=a.autoNumeric.Format(y,C)}y.val(C);y.change()}};if(s.length>1){for(var v=0;v<s.length;v++){a(s[v]).bind("change.rhea-gst",u)}}else{s.bind("change.rhea-gst",u)}})},age:function(){var q=this;var r=a(this.element)||a(e);r.find(".rhea-age").each(function(){var w=a(this);var t=a(this).data(c.DependentPropertyAge);var u=a(this).data(c.DependentPropertyAgeFormatString);var v=a.zeusValidate.getFieldPrefixFromId(w[0],t);var s=a("#"+v);if(w[0]==s[0]){return}s.bind("change.rhea-age",function(){var y=a(this)[0].value;var A=moment(a("#system_date").text(),"DD/MM/YYYY");var x=moment(y,"DD/MM/YYYY h:mm A");if(x.isValid()&&x.year()!=0){var B=A.diff(x,"years");var z=A.diff(x,"months");z=z-12*B;w.val(u.replace("{0}",B).replace("{1}",z))}else{w.val("")}})})},copy:function(){var q=this;var r=a(this.element)||a(e);r.find(".rhea-copy").each(function(){var w=a(this);var x=a(this).data(c.ReadOnlyType);var u=a(this).data(c.DependentPropertiesCopy);if(w[0].id.length==0&&w.find("input").length>0){w=w.find("input")}var s=[];if(a.isArray(u)){s=u}else{if(u!=null&&u!=l){s.push(u)}}for(var v=0;v<s.length;v++){var t=a("#"+a.zeusValidate.getFieldPrefixFromId(w[0],s[v]));if(w[0]==t[0]){return}t.bind("change.rhea-copy",function(){var z=false;if(s.length>1){var F=new Number(0);for(var D=0;D<s.length;D++){var A=a("#"+a.zeusValidate.getFieldPrefixFromId(w[0],s[D]));var B=null;if(A[0].type=="checkbox"||A[0].type=="radio"||A.length>1){for(var E=0;E!=A.length;E++){if(A[E]["checked"]){B=A[E].value;break}}if(B==null){B=false}}else{B=A[0].value}B=a.zeusValidate.replaceAll(B.replace("$",""),",","");if(!a.zeusValidate.isNumeric(B)){z=true}else{F=F+new Number(B)}}if(!z){if(w.hasClass("rhea-numeric")){F=a.autoNumeric.Format(w,F)}w.val(F);w.change()}}else{z=true}if(z){var y=null;if(a(this)[0].type=="checkbox"||a(this)[0].type=="radio"||a(this).length>1){for(var C=0;C!=a(this).length;C++){if(a(this)[C]["checked"]){y=a(this)[C].value;break}}if(y==null){y=false}}else{y=a(this)[0].value}y=a.zeusValidate.replaceAll(y.replace("$",""),",","");if(w.hasClass("rhea-numeric")){y=a.autoNumeric.Format(w,y)}w.val(y);w.change()}})}})},relativedate:function(){var q=this;var r=a(this.element)||a(e);r.find(".rhea-relativedate").each(function(){var A=a(this);var B=a(this).data(c.ReadOnlyType);var w=a(this).data(c.DependentPropertyDate).split(",",6);var C=parseInt(w[0]);var z=parseInt(w[1]);var u=parseInt(w[2]);var x=parseInt(w[3]);var y=parseInt(w[4]);var v=a("#"+a.zeusValidate.getFieldPrefixFromId(A[0],w[5]));if(A[0]==v[0]){return}function s(){var F=A.closest(".input-group");var E=F.hasClass("time")?"h:mm A":"DD/MM/YYYY h:mm A";var G=moment(v.val(),E);G=G.add({years:C,months:z,days:u,hours:x,minutes:y});if(F.hasClass("date")){A.datepicker("update",G.toDate())}else{if(F.hasClass("time")){A.val(G.format("h:mm A"));A.trigger("change")}else{if(F.hasClass("datetime")){var D=a("#"+A.attr("id")+"_Date");var H=a("#"+A.attr("id")+"_Time");D.datepicker("update",G.toDate());H.val(G.format("h:mm A"));A.val(G.format("DD/MM/YYYY h:mm A"));A.trigger("change")}}}}var t;v.bind("change.rhea-relativedate",function(){n.clearTimeout(t);t=n.setTimeout(s,5)})})},datetimepicker:function(){var q=this;var r=a(this.element)||a(e);r.find(".datetime").each(function(){var x=a(a(this).find('input[type="hidden"]')[0]);var s=a(this);var y=a(this);var t=a(s.find("input")[0]);var z=a(y.find("input")[1]);var w=t.parents().siblings("a.errorTip");var v="span[generated=true]";var u=" input-validation-error parsley-error";var A=new Date().toString("dd/MM/yyyy");if(t.val()=="01/01/0001"){t.val(A);x.val(a.zeusValidate.replaceAll(x.val(),"01/01/0001",A))}t.datepicker({format:"dd/mm/yyyy",todayBtn:"linked",todayHighlight:true,autoclose:true,weekStart:1,endDate:new Date(2100,12,31),startDate:new Date(1900,1,1),forceParse:false}).on("changeDate",function(){w.find(v).remove();w.hide();t.removeClass(u)});t.bind("input",function(){a.zeusValidate.handleDateValidation(t,w,v,u);t.datepicker("hide")});s.find(".fordate").bind("click",function(){if(t.attr("disabled")==l&&t.attr("readonly")==l){t.focus()}});t.bind("show.zeus-datepicker",function(){if(t.attr("readonly")=="readonly"||t.attr("disabled")=="disabled"){t.data("datepicker").hide()}});z.timepicker({timeFormat:"g:i A",step:15});y.find(".fortime").bind("click",function(){if(z.attr("disabled")==l&&z.attr("readonly")==l){z.focus()}});t.data("previousVal",t.val());t.data("currentVal",t.val());t.bind("input.track",function(){t.data("currentVal",t.val())});t.bind("focusout.track",function(){setTimeout(function(){var D=t.data("previousVal");var C=t.data("currentVal");var B=(D!=C);t.data("dateChanged",B);if(B&&t.hasClass(".rhea-trigger")){t.trigger("change.rhea-trigger")}},1)});t.bind("change.date focusout.date",function(){var C=a(this).parent();var G=a(C.find('input[type="hidden"]')[0]);var F=a(C.find("input")[0]);var I=G.val();var J=I.split(" ");if(J.length!=3){J=[A,"12:00","AM"]}if(J[0]=="1/01/0001"){J[0]=A}var H=a.trim(F.val());if(H!=""){var K=a.zeusValidate.parseDateUsingMoment(H);if(K.isValid()){var E=H;var N=l;var L=l;if(E.indexOf("/")!=-1){L=E.split("/");N=L[L.length-1]}else{if(E.indexOf("-")!=-1){L=E.split("-");N=L[L.length-1]}}if(L!=l&&L.length==3&&N!=l&&N.length<4){var B=10;var M=(moment().year()-2000)+B;if(N<=M){K.add(2000,"y")}else{if(N<100){K.add(1900,"y")}else{K.year(K.year()+"0")}}}H=K.format("D/MM/YYYY");G.val(H+" "+J[1]+" "+J[2]);F.val(H);G.trigger("change");a.zeusValidate.handleDateValidation(F,w,v,u)}else{w.show();var D=F.attr("class");if(D.indexOf(u)<0){F.attr("class",D+u)}G.val(H+" "+J[1]+" "+J[2])}}});t.focus(function(){setTimeout(a.zeusValidate.adjustPostionOnScroll(t,"scroll.zeus-timepicker","div.datepicker.datepicker-dropdown.dropdown-menu"),20)});z.bind("change.time focusout.date",function(){var B=a(this).parent();var C=a(B.find('input[type="hidden"]')[0]);var G=a(B.find("input")[1]);var E=C.val();var F=E.split(" ");if(F.length!=3){F=[A,"12:00","AM"]}var D=a.trim(G.val());if(D!=""){if(Date.parseExact(D,"h:mm tt")!=null){C.val(F[0]+" "+D);C.trigger("change")}else{G.val(F[1]+" "+F[2])}}});z.focus(function(){setTimeout(a.zeusValidate.adjustPostionOnScroll(z,"scroll.zeus-timepicker","div.ui-timepicker-wrapper"),20)});x.bind("focus.datetime",function(){t.focus()})})},datepicker:function(){var q=this;var r=a(this.element)||a(e);r.find(".date").each(function(){var s=a(this);var w=a(a(this).find("input")[0]);var v=w.parents().siblings("a.errorTip");var u="span[generated=true]";var t=" input-validation-error parsley-error";var x=new Date().toString("dd/MM/yyyy");if(w.val()=="01/01/0001"){w.val(x)}w.datepicker({format:"dd/mm/yyyy",todayBtn:"linked",todayHighlight:true,autoclose:true,weekStart:1,endDate:new Date(2100,12,31),startDate:new Date(1900,1,1),forceParse:false}).on("changeDate",function(){v.find(u).remove();v.hide();w.removeClass(t)});s.find(".input-group-addon").bind("click",function(){if(w.attr("disabled")==l&&w.attr("readonly")==l){w.focus()}});w.bind("input",function(){a.zeusValidate.handleDateValidation(w,v,u,t);w.datepicker("hide")});w.bind("show.zeus-datepicker",function(){if(w.attr("readonly")=="readonly"||w.attr("disabled")=="disabled"){w.data("datepicker").hide()}});w.data("previousVal",w.val());w.data("currentVal",w.val());w.bind("input.track",function(){w.data("currentVal",w.val())});w.bind("focusout.track",function(){setTimeout(function(){var A=w.data("previousVal");var z=w.data("currentVal");var y=(A!=z);w.data("dateChanged",y);if(y&&w.hasClass(".rhea-trigger")){w.trigger("change.rhea-trigger")}},1)});w.bind("change.date focusout.date",function(){var C=w.data("lastval");if(C=="1/01/0001"){C=x}var B=a.trim(w.val());if(B!=""){var D=a.zeusValidate.parseDateUsingMoment(B);if(D.isValid()){var A=B;var G=l;var E=l;if(A.indexOf("/")!=-1){E=A.split("/");G=E[E.length-1]}else{if(A.indexOf("-")!=-1){E=A.split("-");G=E[E.length-1]}}if(E!=l&&E.length==3&&G!=l&&G.length<4){var y=10;var F=(moment().year()-2000)+y;if(G<=F){D.add(2000,"y")}else{if(G<100){D.add(1900,"y")}else{D.year(D.year()+"0")}}}B=D.format("D/MM/YYYY");w.data("lastval",B);w.val(B);a.zeusValidate.handleDateValidation(w,v,u,t)}else{var z=w.attr("class");if(z.indexOf(t)<0){w.attr("class",z+t)}v.show()}}});w.focus(function(){setTimeout(a.zeusValidate.adjustPostionOnScroll(w,"scroll.zeus-datepicker","div.datepicker.datepicker-dropdown.dropdown-menu"),20)})})},timepicker:function(){var q=this;var r=a(this.element)||a(e);r.find(".time").each(function(){var t=a(this);var u=a(a(this).find("input")[0]);var s=a(a(this).find(".input-group-addon")[0]);var v=u.timepicker({timeFormat:"g:i A",step:15});s.bind("click",function(){if(u.attr("disabled")==l&&u.attr("readonly")==l){u.focus()}});u.bind("change.date focusout.date",function(){var x=u.data("lastval");var w=a.trim(u.val());if(w!=""){if(Date.parseExact(w,"h:mm tt")!=null){u.data("lastval",w)}else{u.val(x)}}});u.focus(function(){setTimeout(a.zeusValidate.adjustPostionOnScroll(u,"scroll.zeus-timepicker","div.ui-timepicker-wrapper"),20)})})},numeric:function(){var q=this;var r=a(this.element)||a(e);r.find(".rhea-numeric").each(function(){var u={};u.aSep="";if(a(this).data("val-currency")!=l){u.aSep=",";u.aSign="$"}u.wEmpty=(/^true$/i.test(a(this).data(c.IsNullable)))?"empty":"zero";if(a(this).data(c.Decimal)!=l){u.mDec=parseInt(a(this).data(c.Decimal))}else{u.mDec=0}var t=a(this).data("val-range-min");var s=a(this).data("val-range-max");if(t!=l){if(a(this).data(c.Decimal)!=l){u.vMin=parseFloat(t)}else{u.vMin=parseInt(t)}}if(s!=l){if(a(this).data(c.Decimal)!=l){u.vMax=parseFloat(s)}else{u.vMax=parseInt(s)}}a(this).autoNumeric(u)})},ajaxproperty:function(){var q=this;var r=a(this.element)||a(e);r.find("["+f.PropertyNameForAjax+"]").each(function(){var t=a(this);var u=t.data(c.FieldPrefix);u=u==l?"":u;var v=t.data(c.PropertyNameForAjax);if(v==l||v.length==0){return}if(u!=l&&u.length>0){u=u+"_"}if(t.is("a")){t.bind("click.zeus-ajaxproperty",function(C){C.preventDefault();var N=[];var S=t.data(c.Url);if(t.parents("td").length>0||S==l){S=this.href}else{N=a.zeusValidate.getParameterMapForElement(t)}var U=false;var E=a("#ContainerFor-"+u+v);if(E==l||E.length==0){E=a("#ContainerFor-"+v)}if(E==l||E.length==0){var H=(/^true$/i.test(v))?true:false;if(!H){return}var J=a(this).closest(".panel");if(J.hasClass("iswidget")){U=true;E=J.parent()}else{var x=J.closest(".iscontainer");if(x!=l){var z=x.attr("id");if(z!=l&&z.indexOf("ContainerFor-")!=-1){v=z.replace("ContainerFor-","");E=a("#ContainerFor-"+v)}}}if(E==l||E.length==0){return}}var P=a(this).closest("tr");if(P.length>0){P.siblings("tr").removeClass("success");P.addClass("success")}var Q=E.data(c.ParentType);var O=E.data(c.PropertyNameInParent);var K=E.find(".panel");if(K.hasClass("panel-loading")){return}K.addClass("panel-loading");var R=a('<div class="panel-loader"><span class="spinner-small"></span></div>');var I=a('<div class="panel-loader"></div>');var L=K.find(".panel-body");L.prepend(R);var M=K.find(".panel-footer");M.prepend(I);var y=E.parent().closest(".iscontainer");while(y.length){Q=y.data(c.ParentType)+","+Q;O=y.data(c.PropertyNameInParent)+","+O;y=y.parent().closest(".iscontainer")}var F={};F[g.Ajax]=true;F[g.ParentType]=Q;F[g.PropertyNameInParent]=O;var w={type:"GET",dataType:"html",global:false,url:S,cache:false,headers:F,data:N};var T=false;var B=new FormData();var D=a.zeusValidate.getParameterElementsForElement(t);for(var G=0;G<D.length;++G){var A=D[G];if(A.attr("type")=="file"&&A.attr("name")!=l){B.append(A.attr("name").replace(/.*\./,""),A[0].files[0]);T=true}else{if(A.attr("name")!=l){B.append(A.attr("name").replace(/.*\./,""),a.zeusValidate.getValueFromInput(A))}}}if(T){w={type:"POST",dataType:"html",global:false,url:S,cache:false,headers:F,processData:false,contentType:false,data:B,}}a.ajax(w).done(function(V,Y,W){if(a.zeusValidate.sessionExpired(W)){return}R.remove();I.remove();K.removeClass("panel-loading");if(U){E=E.find(".panel-body")}E.html(V);q.prepareNewContent(E);var X=a("div#page-container");X.animate({scrollTop:(E.offset().top-X.offset().top+X.scrollTop())-20},"fast");E.attr("tabindex",-1).focus()}).fail(function(aa,Z,V){var W=a.zeusValidate.getErrorInAjax(aa);var X=a(E.find(".panel-heading .panel-title")[0]);if(X!=l){var Y=X.attr("id");X=X.text();X=X.length?'<a class="alert-link" href="#'+Y+'">'+X+"</a> - ":X}else{X=""}W=X+(W!=l?W:"Error occurred while loading");a.zeusValidate.addError(W);R.remove();I.remove();K.removeClass("panel-loading")})})}});var s=n.location.href;r.find("["+f.PropertyNamesWithAjaxLoadToTrigger+"]").each(function(){var t=a(this);var y=t.data(c.PropertyNamesWithAjaxLoadToTrigger);var x=t.data(c.Parameters);if(y==l||y.length==0){return}var z=y.split(",");if(t.is("a")){if(x!=l&&x.Id!=l){var v=x.Id;if(s!=l&&v!=l){if(s.indexOf("/Bulletins")!=-1){var w=s.substring(n.location.href.lastIndexOf("/")+1);if(w==v){u(t)}}}}t.bind("click.zeus-ajaxproperties",function(A){A.preventDefault();if(x==l){x={}}for(var B=0;B<z.length;B++){x.suppressScrollAndFocus=B>0;x.overrideContingentCheck=true;a("#ContainerFor-"+z[B]).trigger("load.rhea-ajaxloadif",x);u(t)}});function u(A){var C=A.closest("table");var B=A.closest("tr");if(C.length>=1&&B.length>=1){a(C).find("tr").each(function(){var D=a(this);var E=l;E=D.attr(f.EditedRow);if(E==l){a(D).removeClass("success")}});B.addClass("success")}}}})},trigger:function(){var q=this;var r=a(this.element)||a(e);r.find(".rhea-trigger").each(function(){var s=a(this);var u=s.data(c.SubmitName);var t=s.data(c.SubmitType);if(s[0].id.length==0&&s.find("input").length>0){s=s.find("input")}var v=function(){if(s.data("triggered")===true){return}s.data("triggered",true);n.setTimeout(function(){var w=s.data(c.DatePicker)?s.data("dateChanged"):true;if(s.data(c.DateTimePicker)){w=a(s.parent().find("input")[0]).data("dateChanged")}if(w!==true){s.data("triggered",false);return}s.off("change.rhea-trigger");var x={};a("#content input, #content textarea, #content select").each(function(){if(a(this).attr("id")){x[a(this).attr("id")]=a(this).data("initialValue")}});a.zeusValidate.updateCkeditorInstances(r);var z=q.serializeform(a("#main_form"))+"&"+u+"="+t;var y=s.attr("id");a.ajax({type:"POST",data:z}).done(function(B,E,D){if(a.zeusValidate.sessionExpired(D)){return}s.data("triggered",l);a(e).find(".date,.datetime").each(function(){a(a(this).find("input")[0]).datepicker("hide")});a("body").find(".ui-timepicker-wrapper").hide();var A=a("#content");A.html(B);q.prepareNewContent(A);a("#content input, #content textarea, #content select").each(function(){if(a(this).attr("id")){a(this).data("initialValue",x[a(this).attr("id")])}});var C=function(){var F=a("#"+y);if(F.is("select")){F.data("ariaSelectReference").find(".amc-box").focus()}else{F.focus()}};setTimeout(C,50)}).fail(function(D,C,A){var B=a.zeusValidate.getErrorInAjax(D);B=(B!=l?B:"Error occurred while performing trigger on ")+" "+s.attr(f.DisplayName)+".";a.zeusValidate.addError(B);s.on("change.rhea-trigger",v);s.data("triggered",false)})},100)};s.on("change.rhea-trigger",v)})},paged:function(){var q=this;var r=a(this.element)||a(e);r.find(".rhea-paged").each(function(){var s=a(this);if(s.attr("data-rhea-scroll-load")=="true"){a(n).bind("scroll",function(){if(a(n).scrollTop()+a(n).height()>=r.height()-200){q.loadMoreResults(s,false)}})}if(s.hasClass("has-more")){s.removeClass("hidden")}s.bind("click.rhea-paged",function(t){t.preventDefault();q.loadMoreResults(s,false)})})},getTableRows:function(q){return q.find("tbody tr:not(["+f.ActualDeletedRow+"=true],["+f.ActualAddedRow+"=true])").not(".rhea-metadata").not(".responsive-row").length},loadMoreResults:function(x,r){$rhea=this;var t=a("#"+x.data(c.PropertyIdGrid));if(x.hasClass("hidden")&&!r){return}var y=$rhea.getTableRows(t.closest("table"));var w="";if(x.is("["+f.PagedMetadata+"]")){w=x.data(c.PagedMetadata)}else{w=t.data(c.PagedMetadata);if(w==l){w=a("#"+x.data(c.PagedMetadataPropertyId)).val()}}var u={};u[g.RowNumber]=y;u[g.SelectionType]=t.closest("table").data(c.SelectionType);if(r){var s=a("#"+t.closest("table").attr("id")+"SelectedColumns").closest("ul").find('input[type="checkbox"]').filter(":checked");var z=[];for(var v=0;v<s.length;v++){z.push(s[v].value)}u[g.ColumnSelections]=z.join()}var q="GET";if(/^true$/i.test(t.closest("table").data(c.HttpPost))){q="POST"}a.ajax({type:q,dataType:"html",url:x.data(c.Url),data:{metadata:w,storedRouteValues:x.data(c.StoredRouteValues),},headers:u,cache:false}).done(function(B){if(B==""||B==null){x.addClass("hidden");return}if(r){t.empty()}var G="<databreak/>";var H=B.indexOf(G);if(H!=-1){var C=B.substring(0,H);B=B.substring(H+G.length);var I=t.parent().find("thead");I.empty();var D=a(C).find("tr");I.append(D);var F=this.element;this.element=t.closest("table").parent();$rhea.gridstyle();$rhea.gridSortable();this.element=F}var E=a(B);t.append(E);a.zeusValidate.skipNextFocusErrors=true;$rhea.prepareNewContent(E);var A=t.closest("table");if(A.attr(f.GridFilterStatus)=="true"){A.trigger(a.fn.filterTable.defaultOptions.contentChangedEvent)}$rhea.responsivetables(E);$rhea.updateTableMetadata(B,x,t);if(x.is("["+f.PagedMetadata+"]")){return}}).fail(function(C,B,A){a.zeusValidate.addError("Error occurred while loading results.")})},updateTableMetadata:function(q,s,u){var t=a(q).last().data(c.PagedMetadata);if(t){if(s.is("["+f.PagedMetadata+"]")){s.data(c.PagedMetadata,t)}else{u.data(c.PagedMetadata,t)}}var r=(/^true$/i.test(a(q).last().data(c.PagedHasMore)))?true:false;if(!r){s.addClass("hidden")}else{s.removeClass("hidden")}},historypin:function(){var q=this;var s=a(this.element)||a(e);var r=s.find("#page-container");var t=100;var u=1020;s.find(".theme-panel").each(function(){a(this).css("top",t+"px");t+=50;a(this).css("z-index",u);u-=10});s.find('a[data-click="theme-panel-expand"]').on("click",function(w){var z=a(this);var y=z.find(".readers");var A=y.text();var B=z.closest(".theme-panel");if(A.match(/^close/)==null){s.find('a[data-click="theme-panel-expand"]').each(function(){var C=a(this);var D=C.find(".readers");var E=D.text();var F=C.closest(".theme-panel");if(E.match(/^close/)){C.click()}});B.css("position","absolute");y.text(A.replace(/^open/,"close"));z.siblings(".theme-panel-content").show();var v=B.css("top");z.attr("actualTop",v);var x=parseInt(v)+r.scrollTop();B.css("top",x);n.setTimeout(function(){var C=B.find(".qf-method-search .amc-box");if(C.length){C.focus()}else{C=B.find("form input");if(C.length){C.focus()}}},300)}else{y.text(A.replace(/^close/,"open"));var v=z.attr("actualTop");B.css("top",v);B.css("position","fixed");n.setTimeout(function(){z.siblings(".theme-panel-content").hide()},300)}});s.find(".unpin-all").on("click",function(v){v.preventDefault();var w=a(this).data(c.HistoryType);a.ajax({type:"POST",global:false,url:a(this).data(c.Url),data:{historyType:w,},cache:false}).fail(function(B,A,z){a.zeusValidate.addError("Error occurred while processing history pin.")});var y=a(this).parent().find(".pinned");var x=a(this).siblings("ul");x.attr(f.PinnedCount,parseInt(x.attr(f.PinnedCount))-y.length);y.each(function(){var B=a(this);B.removeClass("pinned");var A=a(this).find("span.readers");A.text(A.text().replace("Unpin","Pin").replace(" from list"," to list"));var z=a(this).closest("li");z.appendTo(x)})});s.find(".history-pin").each(function(){var A=a(this);var w=A.data(c.HistoryType);var v=A.data(c.HistoryDescription);var x=A.data(c.ObjectValues);var y=A.closest("li");var z=y.closest("ul");A.on("click.zeus-pin",function(B){B.preventDefault();var C=parseInt(z.attr(f.PinnedCount));var E=A.data(c.Url);a.ajax({type:"POST",global:false,url:E,data:{historyType:w,values:x},cache:false}).fail(function(H,G,F){a.zeusValidate.addError("Error occurred while processing history pin.")});A.toggleClass("pinned");var D=a(A).find("span.readers");if(A.hasClass("pinned")){y.prependTo(z);A.data(c.Url,E.replace("Pin","Unpin"));D.text(D.text().replace("Pin","Unpin").replace(" to list"," from list"));z.attr(f.PinnedCount,C+1)}else{y.appendTo(z);A.data(c.Url,E.replace("Unpin","Pin"));D.text(D.text().replace("Unpin","Pin"));z.attr(f.PinnedCount,C-1)}A.prev().focus()})})},multiplegridselect:function(){var q=this;var r=a(this.element)||a(e);r.find(".rhea-multiple-select-grid").each(function(){var u=a(this);var t=a("#"+u.data(c.PropertyIdGrid));var s=true;t.find("input:checkbox").each(function(){if(a(this)[0]!=u[0]&&!a(this).is(":checked")){s=false}});u.attr({checked:s});u.removeClass("hidden");u.bind("click.rhea-mutiple-select-grid",function(){t.find("input:checkbox").each(function(){var v=(a(this).attr("readonly")=="readonly"||a(this).attr("disabled")=="disabled"||a(this).closest("tr.zeus-filter-hide").length);if(!v){a(this).attr({checked:u.is(":checked")})}})})})},crn:function(){a("[data-val-crn]").bind("change.rhea-crn",function(){this.value=this.value.toUpperCase()});a("[data-val-crn]").bind("keyup.rhea-crn",function(){var r=this.selectionStart;var q=this.selectionEnd;this.value=this.value.toUpperCase();this.selectionStart=r;this.selectionEnd=q})},tooltipposition:function(){var q=this;var u=a(this.element)||a(e);var s=function(y){var z=y.find("span");if(z.data("top")==l){if(z[0].currentStyle!=l){z.data("top",z[0].currentStyle.top)}}var x=y.offset();var w=y.outerHeight(false);var A=z.outerHeight(false);var D=a(n).scrollTop()+a(n).height();var B=x.top+w;var v=B+A<=D;var C=z.data("top");if(!v){C=-(A+3)}z.css({top:C})};var r=function(w,v){if(v===true){if(a(u.find(".hintTip span")).hasClass("visible")){a(u.find(".hintTip span")).removeClass("visible")}}else{if(a(u.find(".errorTip span")).hasClass("visible")){a(u.find(".errorTip span")).removeClass("visible")}}var x=w.find("span");if(a(x).hasClass("visible")){a(x).removeClass("visible")}else{a(x).addClass("visible");s(w)}};var t=function(){if(a(u.find(".hintTip span")).hasClass("visible")){a(u.find(".hintTip span")).removeClass("visible")}if(a(u.find(".errorTip span")).hasClass("visible")){a(u.find(".errorTip span")).removeClass("visible")}};u.find(".errorTip").each(function(){var w=a(this);var v=true;w.bind("click.rhea-tooltipposition",function(){r(w,v)});w.bind("onenter.rhea-tooltipposition",function(){r(w,v)});w.bind("focusout.rhea-tooltipposition",function(){t()})});u.find(".hintTip").each(function(){var w=a(this);var v=false;w.bind("click.rhea-tooltipposition",function(){r(w,v)});w.bind("onenter.rhea-tooltipposition",function(){r(w,v)});w.bind("focusout.rhea-tooltipposition",function(){t()})})},tooltiplinks:function(){var q=this;var r=a(this.element)||a(e);r.find("a["+f.Tooltip+"]").each(function(){var s=a(this);var t=s.data(c.Tooltip);if(t==l){t="auto"}var u={placement:t,trigger:"hover",container:"body",delay:{show:100,hide:0},};s.tooltip(u)})},clear:function(){var q=this;var r=a(this.element)||a(e);r.find("button["+f.ButtonClear+'="true"]').each(function(){var s=a(this);s.bind("click",function(u){u.preventDefault();var x=a(s).parents("div.panel");var t;if(x.length==1){t=a(x[0]).find("*")}else{t=a("#main_form *")}if(t!=l){for(var w=0;w<t.length;w++){if((a(t[w]).attr("readOnly")!=l)||(t[w].hasAttribute("disabled"))){continue}var v=t[w].type;if(v){console.log(v);switch(v.toLowerCase()){case"text":case"password":case"textarea":case"tel":case"email":t[w].value="";break;case"radio":case"checkbox":if(t[w].checked){t[w].checked=false}break;case"select":case"select-one":case"select-multi":case"select-multiple":a(t[w]).data("ariaSelectReference").clearAll();break;default:break}}}}})})},inlinegrid:function(){var q=this;var r=a(this.element)||a(e);r.find("input["+f.GridInlineEditedState+"]").each(function(){var s=a(this);var u=s.closest("tr").find(":input").filter(function(){var v=a(this);return v.attr("id")!=s.attr("id")});var t=q.serializeform(u);s.data("initialState",t);s.bind("checkstate",function(){var v=q.serializeform(u);if(s.data("initialState")!=v){s.val(true);s.closest("tr").addClass("success")}else{s.val(false);s.closest("tr").removeClass("success")}});u.each(function(){var v=a(this);v.bind("change.inlinegrid",function(){s.trigger("checkstate")})})})},ajaxgrid:function(){var r={};r.None="none";r.Add="add";r.AddRefresh="addrefresh";r.AddSelfForAjax="addselfforajax";r.Edit="edit";r.EditRefresh="editrefresh";r.EditSelfForAjax="editselfforajax";r.Delete="delete";r.DeleteRefresh="deleterefresh";r.DeleteSelfForAjax="deleteselfforajax";var q=this;var s=a(this.element)||a(e);var t=function(v){var x=a(v);x.find(":input").each(function(){a(this).attr("disabled","disabled")});x.find("input["+f.RowSelector+"]").each(function(){this["checked"]=false});var w=x.find("td").not(".hidden");a(w[w.length-1]).find("a").each(function(){a(this).addClass("hidden")});x.removeClass("success");x.addClass("parsley-error")};s.find("tr["+f.DeletedRow+'="true"]').each(function(){t(this)});var u=function(v){var w=a(v);w.removeClass("parsley-error");w.addClass("success")};s.find("tr["+f.EditedRow+'="true"]').each(function(){u(this)});s.find("a["+f.AjaxGridModal+"]").each(function(){var v=a(this);var w=v.data(c.AjaxGridModal);if(w==r.None){return}v.bind("click.ajaxgridmodal",function(x){x.preventDefault();var y=w==r.Add||w==r.AddRefresh||w==r.AddSelfForAjax?a(v.closest(".panel").find("table")[0]):v.closest("table");var C=x.target.href!=l?x.target.href:v.attr("href");var B=w==r.Add||w==r.AddRefresh||w==r.AddSelfForAjax?y.find("tbody tr").not(".rhea-metadata").length:v.closest("tr").index();var A=a.zeusValidate.getParameterMapForElement(v);var z={};z[g.AjaxForm]=true;a.ajax({url:C,type:"GET",cache:false,global:true,data:A!=l?A:"",headers:z}).done(function(D,J,I){if(a.zeusValidate.sessionExpired(I)){return}var G="modal-grid";var E=a("#"+G);if(E.length>0){E.remove()}var E=q.makeModalDialogElement("","","",G);var H=function(L){E.find(".modal-body").html(a.zeusValidate.replaceAll(L,'id="main_form"','id="gridmodal_form"'));var K=a('<a href="javascript:;" class="modal-fix" tabindex="-1">&nbsp;</a>');var M=E.find(".modal-body .nestedButtons");a(M[M.length-1]).prepend(K);q.showModalDialogElement(E);q.prepareNewContent(E);E.find(".modal-body button").not("ul.amc-selected-choices li button").not("button[data-zbcl]").bind("click.zeus-modal-btn",F)};var F=function(O){O.preventDefault();var L=a(this);if(L.hasClass("cancel")&&(L.attr(f.SkipValidation)==l||L.attr(f.SkipValidation)=="false")){q.dismissModalDialogElement(E);return}if(E.hasClass("modal-loading")){return}E.addClass("modal-loading");var U=y.data(c.ParentType);var T=y.data(c.PropertyNameInParent);var P=y.data(c.FullPropertyNameInParent);var V=a('<div class="modal-loader"><span class="spinner-small"></span></div>');gridModalBody=E.find(".modal-body");gridModalBody.prepend(V);var R=a("#ContainerFor-"+y.attr("id").replace(/Table$/,""));var M=R.parent().closest(".iscontainer");while(M.length){U=M.data(c.ParentType)+","+U;T=M.data(c.PropertyNameInParent)+","+T;M=M.parent().closest(".iscontainer")}var S={};S[g.AjaxForm]=true;S[g.ParentType]=U;S[g.PropertyNameInParent]=T;S[g.FullPropertyNameInParent]=P;S[g.RowNumber]=B;var K={url:C,type:"POST",cache:false,global:false,headers:S,};var Q=E.find("form");a.zeusValidate.updateCkeditorInstances(Q);var N;if(Q.find('input[type="file"]').length==0){N=q.serializeform(Q)+"&submitType="+L.attr("value")}else{a.extend(K,{processData:false,contentType:false,});N=new FormData();Q.find("input,select,textarea").each(function(){var W=a(this);var X=W.attr("name");if(X){X=X.replace(/.*\./,"");if(W.attr("type")=="file"){N.append(X,W[0].files[0])}else{N.append(X,a.zeusValidate.getValueFromInput(W))}}});N.append("submitType",L.attr("value"))}a.extend(K,{data:N});a.ajax(K).done(function(X,ac,aa){if(a.zeusValidate.sessionExpired(aa)){return}V.remove();E.removeClass("modal-loading");var Z=false;var ab=false;var ae=v.data(c.AjaxGridModal);if(ae==r.DeleteRefresh){Z=true;ae=r.Delete}else{if(ae==r.EditRefresh){Z=true;ae=r.Edit}else{if(ae==r.AddRefresh){Z=true;ae=r.Add}else{if(ae==r.DeleteSelfForAjax){ab=true;ae=r.Delete}else{if(ae==r.EditSelfForAjax){ab=true;ae=r.Edit}else{if(ae==r.AddSelfForAjax){ab=true;ae=r.Add}}}}}}if(ae==r.Delete){var Y=a(X);var ad=v.closest("tr")[0];if((Y.length==0)||Y.data(c.AjaxGridRow)){if(Y.data(c.AjaxGridRow)){a(ad).html(Y[0].innerHTML);a.zeusValidate.skipNextFocusErrors=true;q.prepareNewContent(ad)}t(ad);q.dismissModalDialogElement(E);a(ad).attr(f.ActualDeletedRow,"true")}else{H(X);Z=false;ab=false}}else{if(ae==r.Edit){var Y=a(X);var ad=v.closest("tr")[0];if(Y.data(c.AjaxGridRow)){a(ad).html(Y[0].innerHTML);a.zeusValidate.skipNextFocusErrors=true;q.prepareNewContent(ad);u(ad);q.dismissModalDialogElement(E)}else{H(X);Z=false;ab=false}}else{if(ae==r.Add){var Y=a(X);if(Y.data(c.AjaxGridRow)){var ad=a("<tr>");y.append(ad);ad.html(Y[0].innerHTML);a.zeusValidate.skipNextFocusErrors=true;q.prepareNewContent(ad);ad.addClass("success");ad.attr(f.ActualAddedRow,"true");q.dismissModalDialogElement(E);ad.attr("tabindex","-1");ad.focus()}else{H(X);Z=false;ab=false}}}}if(Z){n.location.reload()}else{if(ab){var W=R.parent().closest(".iscontainer");if(W.length){W.trigger("load.rhea-ajaxloadif")}}}}).fail(function(ab,aa,W){var X=a.zeusValidate.getErrorInAjax(ab);var Y=a(R.find(".panel-heading .panel-title")[0]);if(Y!=l){var Z=Y.attr("id");Y=Y.text();Y=Y.length?'<a class="alert-link" href="#'+Z+'">'+Y+"</a> - ":Y}else{Y=""}X=Y+(X!=l?X:"Error occurred while loading");if(ab.responseText.indexOf("Maximum request length exceeded")>=0){X=Y+"Error occurred while loading (maximum request length exceeded)"}a.zeusValidate.addError(X);a.zeusValidate.addError(X,a(".modal"));V.remove();E.removeClass("modal-loading")})};H(D)}).fail(function(I,H,D){var E=a.zeusValidate.getErrorInAjax(I);var F=a(group.find(".panel-heading .panel-title")[0]);if(F!=l){var G=F.attr("id");F=F.text();F=F.length?'<a class="alert-link" href="#'+G+'">'+F+"</a> - ":F}else{F=""}E=F+(E!=l?E:"Error occurred while loading");a.zeusValidate.addError(E)})})});s.find("a["+f.AjaxGridInline+"]").each(function(){var w=a(this);var v=a("#"+w.data(c.AjaxGridInline)+"Table");if(v==l||v.length==0){return}w.bind("click.ajaxgridinline",function(x){x.preventDefault();var z=q.serializeform(v.find(":input"));var y={};y[g.Ajax]=true;a.ajax({url:x.target.href,type:"POST",cache:false,headers:y,data:z}).done(function(A,D,C){if(a.zeusValidate.sessionExpired(C)){return}var B=false;a.each(A,function(G,I){if(G.indexOf("[")==-1){return}var E=a.zeusValidate.replaceAll(G,".","_").replace("[","_").replace("]","_");E=E.charAt(0).toUpperCase()+E.slice(1);var F=a("#"+E);if(F.length){var H=F.closest("td");if(I.length>0){B=true;H.addClass("error")}else{H.removeClass("error");F.append(I)}}})}).fail(function(C,B,A){a.zeusValidate.addError("Error occurred while loading grid.")})})})},gridstyle:function(){var q=this;var r=a(this.element)||a(e);r.find("td span").each(function(u){var x=a(this);var t=false;var z=x.parent();var y=z.closest("table");if(y.length>=1){var v=y.find("thead tr");if(v.length==2){t=true}}var s=x.attr("class")!=l?x.attr("class").split(" "):[];if(t){for(var w=0;w<s.length;w++){if(s[w].indexOf("bg-")==0){z.addClass(s[w]);break}}}});r.find("tbody tr th, tbody tr td").each(function(){var s=a(this);var t=s.closest("table").find("thead th").eq(s.index()).text().replace(/^\s+|\s+$/g,"");s.attr("data-label",t)})},expandCollapseAll:function(){var q=this;var r=a(this.element)||a(e);r.find(".expandCollapseAll").each(function(){var s=a(this).find("a");a(s.get(0)).on("click.expandCollapseAll",function(){a(this).closest(".panel-body").find("["+f.Click+"=collapse] i.fa-plus").trigger("click")});a(s.get(1)).on("click.expandCollapseAll",function(){a(this).closest(".panel-body").find("["+f.Click+"=collapse] i.fa-minus").trigger("click")})})},gridSortable:function(){var q=this;var r=a(this.element)||a(e);r.find("table").each(function(){var s=this;a(s).sortTable({});a(s).on("beforetablesort",function(u,t){a.blockUI(a.zeusValidate.blockUIoptions)});a(s).on("aftertablesort",function(w,u){var z=a(this).find("thead td, thead th");var A=a(this).find("thead tr");if(A[1]!=null){z=a(A[1]).find("td, th")}z.find(".arrow").remove();var v=a.fn.sortTable.dir;var t=u.direction===v.ASC?"&uarr;":"&darr;";z.eq(u.column).append('<span class="arrow">'+t+"</span>");var B=z.eq(u.column).find("a");var x=a(s).parent().find("p.readers").first();var y=(B!=l?"Column "+B.text()+" ":"")+"sorted ";y+=u.direction===v.ASC?"ascending":"descending";y+=". Select column heading to change sort order.";x[0].innerText=y;a(s).trigger("resize",[true,true]);a.unblockUI()})})},filterGrid:function(){var q=this;var r=a(this.element)||a(e);r.find(".table-responsive table:not(["+f.GridFilterStatus+"=false])").each(function(){var A=a(this);var u=A.attr(f.PropertyNameInParent);var B=A.closest(".table-responsive");if(A.find("tbody tr").length){var z=A.attr(f.GridFilterStatus)!="true";var s="",t={},v={};if(z){var w=l;s=A.attr(f.GridFilterStatus);var x=B.find(".rhea-paged");if(x.length==1){w=a("#"+x.data(c.PagedMetadataPropertyId)).val();t.metadata=w}else{w=A.find("tbody").data(c.PagedMetadata);if(w==l&&u!=l){w=B.find("input#"+u+"_Metadata").val()}}if(w){t.metadata=w;v[g.RowNumber]=q.getTableRows(A)}v[g.GridFilter]=true}var y={placeInsideTable:z?false:false,columnHeadingSelector:"th["+f.GridFilterColumn+"=true]",processComplexElements:false,searchForComplexCells:true,filterAction:s,filterActionParameters:t,headers:v,columnNameAttribute:f.PropertyNameInParent,animation:true,labelText:"Filter results on this table:"};A.filterTable(y);A.off(a.fn.filterTable.defaultOptions.filterCompletedEvent);A.on(a.fn.filterTable.defaultOptions.filterCompletedEvent,function(){if(z){var C=A.find("tbody tr");q.updateTableMetadata(C,x,A.find("tbody"))}var E=false;var D=a.fn.filterTable.defaultOptions.hiddenClass;A.find("tbody tr:not(.hidden)").each(function(){var F=a(this);if(!F.hasClass("responsive-row")){if(!F.hasClass(D)){E=true}else{E=false}}else{if(F.hasClass("responsive-row")&&F.hasClass(D)&&E){F.removeClass(D)}}})})}})},reset:function(){var q=this;var s=a(this.element)||a(e);var r=0;s.find('input[type="reset"]').each(function(){var t=a(this);t.data("resetid",r++);t.bind("click.rhea-reset",function(v){if(a.zeusValidate.initialContentHTML!=l){v.preventDefault();var w=t.data("resetid");a("#content").html(a.zeusValidate.initialContentHTML);q.prepareNewContent(a("#content"));a.zeusValidate.skipNextFocusErrors=true;var u=s.find('[data-valmsg-summary="true"]');var y=u.find("ul");if(y&&y.length){y.empty();u.addClass("validation-summary-valid").removeClass("validation-summary-errors").removeClass("alert").removeClass("alert-danger")}a(".parsley-error").removeClass("parsley-error");a("["+f.ErrorTipFor+"]").hide();var z=a("section.msgGood");if(z&&z.length){z.empty();z.remove()}var A=a("section.msgWarn");if(A&&A.length){A.empty();A.remove()}var x=a("section.msgInfo");if(x&&x.length){x.empty();x.remove()}a('input[type="reset"]').each(function(){if(a(this).data("resetid")==w){a(this).focus()}})}})})},switchers:function(){var q=this;var r=a(this.element)||a(e);r.find("input["+f.Switcher+'="true"]').each(function(){var x=a(this);var t=a(this)[0];var y=a('label[for="'+t.id+'"]');var w=a("<span>").addClass("readers");if(y.length){y.append(w)}var v=a(t).attr(f.BackgroundColour)!=l?a(t).attr(f.BackgroundColour):"bg-black";var z=a("<span>").addClass("left").addClass(v).text(x.attr(f.SwitcherChecked));var A=a("<span>").addClass("right").addClass(v).text(x.attr(f.SwitcherUnchecked));var u=a('<div class="switcher" aria-hidden="true">').append(z).append(A);var s=a("<span>").addClass("centre").appendTo(u);var B=function(){if(t.checked){w.text("value is "+x.attr(f.SwitcherChecked)+", uncheck to select "+x.attr(f.SwitcherUnchecked));s.css("left","55px");z.removeClass("covered");A.addClass("covered")}else{s.css("left","5px");w.text("value is "+x.attr(f.SwitcherUnchecked)+", check to select "+x.attr(f.SwitcherChecked));z.addClass("covered");A.removeClass("covered")}};B();x.on("change",function(C){B()});x.on("focus",function(C){u.addClass("switcher-focus")});x.on("blur",function(C){u.removeClass("switcher-focus")});u.on("click",function(C){x.click();x.focus()});x.after(u);x.addClass("readers")})},checkboxesadditions:function(){a(".check-box-list",this.element).each(function(v){var C=a(this);var q=C.find('input[type="checkbox"]');if(q.length==0){return}var s=a(q[0]);var u="CheckAllFor-"+s[0].id;var w=a('<input type="checkbox" id="'+u+'">');var A=a('<label for="'+u+'">').text("Check all");var E=a('<div class="checkbox">').append(w).append(A);var B=a("<li>").append(E).prependTo(C);for(var t=0;t<q.length;t++){a(q[t]).data("checkallid",u)}if(s.attr("disabled")){w.attr("disabled",s.attr("disabled"))}if(s.attr("readonly")){w.attr("readonly",s.attr("readonly"))}if(s.attr("disabled")||s.attr("readonly")){B.addClass("hidden")}w.bind("change.rhea-checkall",function(G){var F=B.siblings().find('input[type="checkbox"]');a(this).attr("checked")?F.attr("checked",a(this).attr("checked")):F.removeAttr("checked");F.trigger("change")});var r=C.attr(f.MaximumSelections);if(r!=l){function y(){return this.checked}function z(){return !this.checked}function x(){return/^true$/i.test(a(this).data(c.AlwaysReadOnly))}function D(G){B.hide();if(/^true$/i.test(C.data(c.AlwaysReadOnly))||(G!=l&&/^true$/i.test(G.data(c.AlwaysReadOnly)))){return}if(B.hasClass("hidden")){return}var F=q.filter(x);F.each(function(){a(this).attr("disabled","disabled")});var I=q.filter(y);var J=q.filter(z);var H=I.length;if(H>=r){J.data("limit",true);J.attr("disabled","disabled")}else{J.data("limit",false);J.removeAttr("disabled")}}D();q.on("change.selectionlimit",function(){D(a(this))})}})},flotGraphs:function(){var q=this;var s=a(this.element)||a(e);function r(u,t,w){var y=u.parent();var v=y.hasClass("active");y.css("left","-100000px").css("display","block");if(!v){y.addClass("active")}var x=a.plot(u,t,w);if(!v){y.removeClass("active")}y.css("display","").css("left","")}s.find(".zeus-graph-table",q.element).each(function(){var y=a(this);var z=a("["+f.GraphTopLevelUrl+"]",q.element);z.off(".zeus-graph-refresh");z.on("click.zeus-graph-refresh",function(C){C.preventDefault();var A=a(this).closest("div").parent();var G=a(this).attr(f.GraphTopLevelUrl);var F=a(this).closest(".panel");var D=F.find("["+f.GraphType+"]").attr(f.GraphType);var B=A.find("["+f.GraphDataSetEnabled+"]").attr(f.GraphDataSetEnabled);var E={};E[g.DataSetEnabled]=B;q.getNewContentForPanel(F,A,G,JSON.stringify({graphType:D}),E)});y.find(".zeus-graph-drill-down").on("click",function(B){var C=a(this);if(C.parent().index()>0){var A={label:C.closest("table").find("thead").find("th")[C.parent().index()].innerText,dataPoint:C.closest("th").siblings("td").first().text(),graphType:y.attr(f.GraphType),yLabel:C.closest("tr").find("th").text()}}else{var A={label:C.text(),dataPoint:C.closest("th").siblings("td").first().text(),graphType:y.attr(f.GraphType),yLabel:C.text()}}t(y,A,B.ctrlKey)});function t(A,D,C){var B=A.closest(".tab-content").parent();var H=B.find("["+f.GraphDrillDownUrl+"]").attr(f.GraphDrillDownUrl);if(H.length>0){var G=B.find("["+f.GraphDrillDownNewPage+"]").length>0;if(G){w(H,D,C)}else{var L=B.closest(".panel");var E=B.find("["+f.GraphDataSetEnabled+"]").attr(f.GraphDataSetEnabled);var K={};K[g.DataSetEnabled]=E;var J=B.find('.zeus-graph-drill-down:contains("'+D.label+'")');var I=J.attr(f.GraphDrillDownElementUrl);if(I){var F=J.attr(f.GraphDrillDownElementNewPage);if(F&&F.toLowerCase()=="true"){w(I,D,C)}else{q.getNewContentForPanel(L,B,I,JSON.stringify(D),K)}}else{q.getNewContentForPanel(L,B,H,JSON.stringify(D),K)}}}}function w(E,B,A){var C=a("<form>").attr("method","post").attr("action",E);if(A){C.attr("target","_blank")}for(var D in B){a("<input>").attr("type","hidden").attr("name",D).attr("value",B[D]).appendTo(C)}a(e.body).append(C);a.zeusValidate.ignoreDirty=true;C.submit()}var u=y.parent().siblings().find("div["+f.GraphType+"]");function x(I,S){I.parent().find(".zeus-graph-choice-container").remove();var Z;var T;var H=[];var K=I.attr(f.GraphType);var R={grid:{clickable:true,hoverable:true,},};var J=I.attr("data-colours");if(J){a.extend(R,{colors:J.split(","),})}else{var D=a.zeusValidate.readCookie("ColourScheme");if(D=="black"){a.extend(R,{colors:["#007c7c","#af6500","#654a98","#9e0505","#0f5eaa","#3956cf","#9c5e14","#1d823c","#6b2b68"]})}else{if(D=="white"){a.extend(R,{colors:["#0a8387","#a3674b","#676197","#bf4f51","#3862a0","#007db6","#20476c","#3f8241","#58427c"]})}else{if(D=="dark"){a.extend(R,{colors:["#8fc89a","#f8b88d","#9285be","#e58887","#6eb1e1","#44b6cb","#e8e898","#b7d167","#be7c9f"]})}else{a.extend(R,{colors:["#00acac","#ff6c2c","#727cb6","#ff5b57","#348fe2","#49b6d6","#f59c1a","#8bbe41","#aa64a9"]})}}}}var aa=I.attr(f.GraphXaxisLabel);var ac=I.attr(f.GraphXaxisMin);var ab=I.attr(f.GraphXaxisMax);if(aa&&a.zeusValidate.isJSON(String(aa))){var X=[];var W=JSON.parse(String(aa));for(var M in W){if(W.hasOwnProperty(M)){X.push([M,W[M]])}}if(ac&&ab&&parseInt(ac)>0&&parseInt(ab)>0){a.extend(R,{xaxis:{ticks:X,min:parseInt(ac),max:parseInt(ab)}})}else{if(ab&&parseInt(ab)>0){a.extend(R,{xaxis:{ticks:X,max:parseInt(ab)}})}else{a.extend(R,{xaxis:{ticks:X}})}}}var C=a('<div class="zeus-graph-choice-container" style="margin: 0 auto">');function G(ag,ah){if(/^true$/i.test(I.data(c.GraphCheckboxesHidden))){return}var af=I.attr("id")+"-choice-"+ag;var ae=a('<input type="checkbox" checked="checked" id="'+af+'" '+f.IgnoreDirtyCheck+'="true">');ae.on("change.zeus-graph-choice",function(aj){var ai=[];C.find("input").each(function(ak){if(this.checked){ai.push(H[ak])}});a.plot(I,ai,R)});C.append(ae);C.append(a('<label for="'+af+'">').text(ah))}if(K=="pie"){y.find("tr").each(function(af){var ae=a(this).find("th").text();if(ae==""&&af==0){return}var ag=parseFloat(a(this).find("td").eq(S).text());H.push({label:ae,data:ag,})});a.extend(R,{series:{pie:{show:true,innerRadius:0,label:{show:false,}}},legend:{show:true,position:"nw"},yaxis:{transform:function(ae){return -ae},inverseTransform:function(ae){return -ae}}});r(I,H,R);Z=function(af,ae){af.text(ae.series.label+": "+ae.series.data[ae.dataIndex][1].toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"))};T=function(ae){return JSON.stringify({label:ae.series.label,dataPoint:ae.datapoint[1][0][1],graphType:K,})}}else{if(K=="bar"||K=="percentbar"){var X=[];var F=0;var Q=y.find("tr").last().find("td:not(.zeus-graph-axis-label)").length;if(Q>1){C.appendTo(I.parent());var E=y.find("tr").first().find("th");E.each(function(ae){if(ae==0){return}G(ae,a(this).text());var af={label:a(this).text(),data:[],color:ae,};if(K!="percentbar"){a.extend(af,{bars:{order:-ae,},})}H.push(af)});y.find("tr").each(function(af){if(af==0){return}var ae=a(this).find("th").text();a(this).find("td:not(.zeus-graph-axis-label)").each(function(ag){var ah=parseFloat(a(this).text());H[ag].data.push([ah,F])});X.push([F,ae]);++F})}else{y.find("tr").each(function(af){var ae=a(this).find("th").text();var ag=parseFloat(a(this).find("td:not(.zeus-graph-axis-label)").text());H.push({label:ae,data:[[ag,F]],});X.push([F,ae]);++F})}var B=(K=="percentbar")?0.5:0.5/Q;a.extend(R,{series:{stackpercent:(K=="percentbar"),bars:{show:true,barWidth:B,align:"center",horizontal:true,fill:true,fillColor:{colors:[{opacity:1},{opacity:1},{opacity:0}]}}},legend:{show:(Q>1&&K!="percentbar")?true:false,},yaxis:{ticks:X,transform:function(ae){return -ae},inverseTransform:function(ae){return -ae}},});r(I,H,R);Z=function(al,ah){var aj=null;var ak=(ah.series.data[ah.dataIndex][0].toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"));var am=ah.series.xaxis.ticks;if(am&&aa){var ae=0;var af=null;for(var ag=0;ag<am.length;ag++){if(am[ag].v===parseInt(ak)){aj=am[ag].label;break}else{if(!af||Math.abs(am[ag].v-parseInt(ak))<af){af=Math.abs(am[ag].v-parseFloat(ak));ae=ag}}}if(aj==null){for(var ai=0;ai<am.length;ai++){if(am[ai].v===Math.round(parseFloat(ak))){aj=am[ai].label;break}}if(aj==null&&am.length>ae){aj=am[ae].label}}if(aj){al.text(ah.series.label+": "+aj)}}else{al.text(ah.series.label+": "+ak)}};T=function(ae){return JSON.stringify({label:ae.series.label,dataPoint:ae.datapoint[0],graphType:K,ylabel:ae.series.yaxis.ticks[ae.dataIndex].label,})}}else{if(K=="line"||K=="time"){var F=0;var Q=y.find("tr").last().find("td").length;if(Q==1){H.push({label:"Chart",data:[],})}else{C.appendTo(I.parent());y.find("tr").first().find("th").each(function(ae){if(ae==0){return}G(ae,a(this).text());H.push({label:a(this).text(),data:[],color:ae,})})}y.find("tr").each(function(ae){if(ae==0&&Q>1){return}var af=parseFloat(a(this).find("th").text());a(this).find("td").each(function(ag){var ah=parseFloat(a(this).text());H[ag].data.push([af,ah])})});a.extend(R,{series:{lines:{show:true,fill:(Q>1)?false:true,fillColor:{colors:[{opacity:0},{opacity:1}]}},points:{show:true,},},legend:{show:(Q>1)?true:false,},xaxis:{mode:K=="time"?"time":"",timeformat:K=="time"?"%H %M":""}});r(I,H,R);Z=function(af,ae){pad="00";hour=new Date(ae.series.data[ae.dataIndex][0]).getUTCHours();minute=new Date(ae.series.data[ae.dataIndex][0]).getUTCMinutes();K=="time"?af.text((Q>1?ae.series.label+": ":"")+pad.substring(0,pad.length-hour.toString().length)+hour+":"+pad.substring(0,pad.length-minute.toString().length)+minute+"  ,  "+ae.series.data[ae.dataIndex][1]).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):af.text((Q>1?ae.series.label+": ":"")+ae.series.data[ae.dataIndex][0].toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")+"  ,  "+ae.series.data[ae.dataIndex][1]).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")};T=function(ae){return JSON.stringify({label:ae.series.label,dataPoint:ae.datapoint,graphType:K,})}}else{if(K=="date"){var X=[];var F=0;var U=y.find("tr");var ad=(parseInt(I.css("min-height"))-30)/(U.length-1);H={extents:{show:true,barVAlign:"bottom",rows:U.length-1,rowHeight:ad,barHeight:ad/2,color:"#484b63",fillColor:"#8e96c5",labelHAlign:"right",},data:[],extentdata:[]};var O=Number.MAX_VALUE;var N=Number.MIN_VALUE;U.each(function(ah){if(ah==0){return}var ag=a(this).find("th").text();var ai=a(this).find("td").first();var ae=a(this).find("td").last();var aj=parseFloat(ai.text());var af=parseFloat(ae.text());ai.text(new Date(aj).toDateString());ae.text(new Date(af).toDateString());H.extentdata.push({label:ag,start:aj,end:af,row:F++});if(aj<O){O=aj}if(af>N){N=af}});var V=(N-O)/8;N+=V;a.extend(R,{legend:{show:false,},yaxis:{ticks:[]},xaxis:{min:O,max:N,mode:"time",timeformat:"%d %b %y"}});a.plot(I,[H,{}],R);function A(){I.find(".extentLabel").each(function(){var ae=a(this);ae.css("font-size",(ad/4)+"px");ae.css({color:"black",bottom:ae.parent().height()-(ae.position().top+ae.height())+((ad/2-ae.height())/2),})})}A();I.on("resize",function(){n.setTimeout(function(){A()},10)})}}}}var Y=I.siblings(".zeus-graph-tooltip");var L=false;I.on("plothover.flotgraphs",function(ae,ag,af){if(af){Z(Y,af);Y.css("border-color",af.series.color);Y.css("display","block");Y.css("top",ag.pageY-n.pageYOffset);if(Y.width()+20>a(e).width()-ag.pageX){Y.css("left",ag.pageX-n.pageXOffset-20-Y.width())}else{Y.css("left",ag.pageX-n.pageXOffset+20)}L=true}});I.on("mousemove.flotgraphs",function(ae){if(!L){Y.css("display","none")}L=false});I.on("mouseout.flotgraphs",function(ae){Y.css("display","none")});var P=l;I.on("click.flotgraphs",function(ae){if(P==l){P=a.Deferred()}P.resolveWith(l,[ae.ctrlKey])});I.on("plotclick.flotgraphs",function(ae,ag,af){if(P==l){P=a.Deferred()}P.done(function(ah){if(af){t(I,JSON.parse(T(af)),ah)}P=l})})}var v=0;u.each(function(A){x(a(this),v);if(a(this).attr(f.GraphType)=="pie"){++v}})});s.find(".zeus-graph-select-button").each(function(){var w=a(this).closest(".panel").find(".panel-title").first();var t="graph-choice-"+(w.length?w.text():"unknown");var x=a(this).text();a(this).on("click",function(){localStorage[t]=x;var y=a(this).closest("li");y.siblings().add(y).each(function(){a(this).find("a .sr-only").remove()});a(this).append(a("<span class='sr-only'>selected</span>"))});if(localStorage[t]==x){var u=a(this).closest("li");u.siblings().removeClass("active");u.addClass("active");var v=a(a(this).prev().attr("href"));v.siblings().removeClass("in").removeClass("active");v.addClass("in").addClass("active")}})},monitorBulletins:function(){var q=this;var r=a("#zeus-ajax-routes").data(c.AjaxRoutes);if(r.LogBulletin==l){return}a("#ContainerFor-BulletinDetails").find("a").each(function(){var s=a(this);s.on("click",function(t){if(s.data("logged")!=l){return}t.preventDefault();s.data("logged",true);var v=a("#BulletinDetails_BulletinID").val();var w=s.attr("href");var u={};u[g.Ajax]=true;a.ajax({url:r.LogBulletin,global:false,type:"GET",dataType:"html",data:{id:v,url:w},headers:u,}).always(function(){if((s.attr("target")!=l&&s.attr("target")=="_blank")){n.open(w)}else{n.location.href=w}})})})},widgets:function(){var q=this;var t=a(this.element)||a(e);var w;var u=a("#zeus-ajax-routes").data(c.AjaxRoutes);function v(z){clearTimeout(w);w=setTimeout(function(){var D=z.find(".panel-title").not(":hidden");var C=D.map(function(F,E){return a(E).text()});var B=C.toArray().join();var A={};A[g.Ajax]=true;a.ajax({url:u.SetWidgetLayout,global:false,type:"POST",data:JSON.stringify({widgetLayout:B,widgetContext:z.attr(f.WidgetContext),viewName:z.attr(f.WidgetView),}),headers:A,contentType:"application/json; charset=utf-8",})},3000)}function r(B){var A=a(this);var C={};C[g.Ajax]=true;var z={url:u.AddWidget,type:"POST",data:JSON.stringify({widgetName:A.find("td").last().text(),widgetContext:A.closest(".zeus-widget-selector").attr(f.WidgetContext),viewName:A.closest(".zeus-widget-selector").attr(f.WidgetView),}),headers:C,contentType:"application/json; charset=utf-8",success:function(E){var I=/^Too many widgets: (\d+)$/.exec(E);if(I!=null){a.zeusValidate.addError("Dashboard has too many widgets loaded. You cannot load more than "+I[1]+" widgets at once.")}else{var D=t.find(".zeus-widget-container").first();if(D.length==0){D=a(".zeus-widget-container").first()}var G=a(E);D.append(G);q.prepareNewContent(G);A.parent().attr("style","display: none;");G.find("["+f.Click+"=reload]").trigger("click");var H=G.find(".panel-heading");var F=H.find(".panel-title");if(F.attr("tabindex")==l){F.attr("tabindex","-1")}H.find("a").first().focus()}},error:function(E,F,D){a.zeusValidate.addError("Error occurred while loading widget.")}};a.ajax(z)}t.find(".zeus-widget-selection-list button").on("click.zeus-widgets",r);function s(D,z,C){var A=a("<form style='visibility:hidden;'>").attr("method","POST").attr("action",D);if(C==l){C=n.location.toString()}z.returnTo=C;for(var B in z){A.append(a("<input>").attr("name",B).attr("value",z[B]))}a(e.body).append(A);a.zeusValidate.ignoreDirty=true;A.submit()}function x(B,z,C){var A=new RegExp("("+z+"=).*?(&|$)");if(B.search(A)>=0){B=B.replace(A,"$1"+C+"$2")}else{B=B+(B.indexOf("?")>0?"&":"?")+z+"="+C}return B}t.find(".zeus-widget-view-list select").each(function(){var z=a(this).data("ariaSelectReference");z.setOption("deselectAllowed",false)});t.find(".zeus-widget-view-list select").on("change.zeus-widgets",function(){var z=a.zeusValidate.getValueFromInput(a(this));if(z){n.location=x(n.location.toString(),"viewName",z)}else{a(this).siblings("button").attr("disabled","disabled")}});t.find(".zeus-widget-selector .wvl-reset").on("click.zeus-widgets",function(){s(u.ResetView,{widgetContext:a(this).closest(".zeus-widget-selector").attr(f.WidgetContext),viewName:a(this).closest(".zeus-widget-selector").attr(f.WidgetView),defaultLayout:a(this).closest(".zeus-widget-selector").attr(f.WidgetDefaultLayout),})});t.find(".zeus-widget-selector .wvl-delete").on("click.zeus-widgets",function(){s(u.DeleteView,{widgetContext:a(this).closest(".zeus-widget-selector").attr(f.WidgetContext),viewName:a(this).closest(".zeus-widget-selector").attr(f.WidgetView),})});t.find(".zeus-widget-selector .wvl-default").on("click.zeus-widgets",function(){s(u.SetDefaultView,{widgetContext:a(this).closest(".zeus-widget-selector").attr(f.WidgetContext),viewName:a(this).closest(".zeus-widget-selector").attr(f.WidgetView),})});t.find(".zeus-widget-selector .wvl-create").on("click.zeus-widgets",function(A){var z=a(this);A.preventDefault();var B=q.makeModalDialogElement("Enter a name for this new dashboard view : ",'<input style="width: 100%" type="text" name="newViewName"></input>','<a class="btn btn-sm btn-white" href="javascript:;">Cancel</a><a class="btn btn-sm btn-primary" href="javascript:;">Ok</a>');B.find(".modal-footer a.btn-primary").on("click.zeus-modal-yes",function(){var D=a.zeusValidate.getValueFromInput(B.find("input"));if(D!=l&&D!=""){s(u.CreateNewView,{widgetContext:z.closest(".zeus-widget-selector").attr(f.WidgetContext),viewName:z.closest(".zeus-widget-selector").attr(f.WidgetView),newViewName:D,},x(n.location.toString(),"viewName",D));q.dismissModalDialogElement(B)}else{if(B.find("#validation-error-summary").length==0){var C=a("<section>").attr("id","validation-error-summary").addClass("validation-summary-errors alert alert-danger").append(a("<ul>"));B.find("input").before(C)}a.zeusValidate.addError("You cannot create a new view with no name",B)}});B.find(".modal-footer a:not(.btn-primary)").on("click.zeus-modal-dismiss",function(){q.dismissModalDialogElement(B)});q.showModalDialogElement(B)});t.find(".zeus-widget-data-context-list  > div > div").on("click",function(){var A={};A[g.Ajax]=true;var z={url:u.SetWidgetDataContext,type:"POST",data:JSON.stringify({dataContext:a(".btnText",this).text(),widgetContext:a(this).closest(".zeus-widget-selector").attr(f.WidgetContext),viewName:a(this).closest(".zeus-widget-selector").attr(f.WidgetView),}),headers:A,contentType:"application/json; charset=utf-8",success:function(B){a("["+f.Click+"=reload]").trigger("click")},error:function(C,D,B){a.zeusValidate.addError("Error occurred while loading widget.")}};a.ajax(z)});var y={placement:"bottom",trigger:"hover",container:"body"};t.find("["+f.Click+"=remove]").on("hover.zeus-widgets",function(){a(this).tooltip(a.extend({title:"Remove",},y));a(this).tooltip("show")});t.find("["+f.Click+"=remove]").on("click.zeus-widgets",function(A){A.preventDefault();a(this).tooltip("destroy");var D=a(this).closest(".panel");var C=D.find(".panel-title").first().text();var z=D.closest(".zeus-widget-container");var E=z.attr(f.WidgetContext);D.parent().remove();q.calculateColumnWidths();v(z);q.generateMainFormJumpList();var B=a('.zeus-widget-selector li[style="display: none;"]').has('td:contains("'+C+'")');B.removeAttr("style")});t.find("["+f.Click+"=collapse]").on("hover.zeus-widgets",function(){var z="fa-minus";var A="fa-plus";var B=a(this).find("i");var C="Collapse / Expand";if(B.length==1){if(B.hasClass(A)){C="Expand"}else{if(B.hasClass(z)){C="Collapse"}}}a(this).tooltip("destroy");a(this).tooltip(a.extend({title:C,},y));a(this).tooltip("show")});t.find("["+f.Click+"=collapse]").on("click.zeus-widgets",function(B){B.preventDefault();var G=["off-full-height-","off-group-height-"];var H=["full-height-","group-height-"];var z="fa-minus";var D="fa-plus";a(this).closest(".dynamicContainer").removeClass("dynamicContainer");var L=a(this).closest(".panel");a(L.find(".panel-body")[0]).slideToggle();a(L.find(".panel-footer")[0]).slideToggle();var M=L.attr("class").split(" ");var E=[];var F=[];if(L.data("heightClassesOff")!=l&&L.data("heightClassesOn")!=l){E=L.data("heightClassesOff");F=L.data("heightClassesOn")}else{for(var I=0;I<M.length;I++){for(var K=0;K<G.length;K++){if(M[I].indexOf(G[K])==0){E.push(M[I]);F.push(M[I].substring(4))}}for(var K=0;K<H.length;K++){if(M[I].indexOf(H[K])==0){F.push(M[I]);E.push(G[K]+M[I].substring(H[K].length))}}}if(F.length>0){L.data("heightClassesOff",E);L.data("heightClassesOn",F)}}var J=a(this).find("i");var N=a(this).find("span[class=readers]");var A=a(this).attr(f.CollapsedProperty);if(J.length==1){if(J.hasClass(z)){for(var I=0;I<F.length;I++){L.removeClass(F[I]);L.addClass(E[I])}L.addClass("panel-collapsed");J.removeClass(z);J.addClass(D);if(N.length==1){N.text(N.text().replace(/^Collapse/,"Expand"))}if(A!==l&&A.length>0){a(e).find("#"+a(this).attr(f.CollapsedProperty)).val(true)}}else{if(J.hasClass(D)){for(var I=0;I<E.length;I++){L.removeClass(E[I]);L.addClass(F[I])}L.removeClass("panel-collapsed");J.removeClass(D);J.addClass(z);if(N.length==1){N.text(N.text().replace(/^Expand/,"Collapse"))}var C=this;setTimeout(function(){a(a(C).closest(".panel").find(".panel-footer")[0]).css("overflow","");a(a(C).closest(".panel").find(".panel-body")[0]).css("overflow","")},200);if(A!==l&&A.length>0){a(e).find("#"+a(this).attr(f.CollapsedProperty)).val(false)}}}}});t.find("["+f.Click+"=reload]").on("hover.zeus-widgets",function(){a(this).tooltip(a.extend({title:"Reload",},y));a(this).tooltip("show")});t.find("["+f.Click+"=reload]").on("click.zeus-widgets",function(z){z.preventDefault();var A=a(this).closest(".panel");var B=a(A).find(".panel-body").first();q.getNewContentForPanel(A,B,B.attr(f.Url),JSON.stringify({widgetContext:B.attr(f.WidgetContext),viewName:B.attr(f.WidgetView)}))});t.find("["+f.Click+"=expand]").on("hover.zeus-widgets",function(){a(this).tooltip(a.extend({title:"Expand / Compress",},y));a(this).tooltip("show")});t.find("["+f.Click+"=expand]").on("click.zeus-widgets",function(z){z.preventDefault();var C=a(this).closest(".panel");var B=C.find(".panel-body");var A=C.find(".panel-footer");if(a("body").hasClass("panel-expand")&&a(C).hasClass("panel-expand")){a("body, .panel").removeClass("panel-expand");if(A.length&&B.length){B.css("margin-bottom","")}a(".panel").removeAttr("style");a(this).siblings("["+f.Click+"=collapse]").show()}else{a("body").addClass("panel-expand");C.addClass("panel-expand");if(A.length&&B.length){B.css("margin-bottom",A.height()+"px")}a(this).siblings("["+f.Click+"=collapse]").hide()}a(n).trigger("resize")});t.find("["+f.Click+"=moveup]").on("hover.zeus-widgets",function(){a(this).tooltip(a.extend({title:"Move up",},y));a(this).tooltip("show")});t.find("["+f.Click+"=moveup]").on("click.zeus-widgets",function(z){z.preventDefault();a(this).tooltip("hide");var A=a(this).closest(".panel").parent();var B=A.prev();if(B.length==1){B.before(A);q.calculateColumnWidths();v(A.closest(".zeus-widget-container"));a(this).focus()}});t.find("["+f.Click+"=movedown]").on("hover.zeus-widgets",function(){a(this).tooltip(a.extend({title:"Move down",},y));a(this).tooltip("show")});t.find("["+f.Click+"=movedown]").on("click.zeus-widgets",function(z){z.preventDefault();a(this).tooltip("hide");var A=a(this).closest(".panel").parent();var B=A.next();if(B.length==1){B.after(A);q.calculateColumnWidths();v(A.closest(".zeus-widget-container"));a(this).focus()}});t.find(".zeus-widget-container").sortable({update:function(z,A){q.calculateColumnWidths();v(A.item.closest(".zeus-widget-container"))},start:function(z,A){A.placeholder.height(A.item.height())},cancel:".iswidget .panel-body",tolerance:"pointer",})},responsivetables:function(r){var q=this;var u=a(this.element)||a(e);var s=r||false;function t(){function v(){return(((1+Math.random())*65536)|0).toString(16).substring(1)}return(v()+v()+"-"+v()+"-4"+v().substr(0,3)+"-"+v()+"-"+v()+v()+v()).toLowerCase()}u.find("table").each(function(){var y=a(this);var w="responsive-hidden";var A=y.find("thead tr").last();var z=a(this).closest(".table-responsive");if(z.length==0||A.length==0){return}var B=[];var x=[];var v=l;A.children().each(function(C,D){if(a(D).is(".removable")){B.push(C)}else{if(v==l){v=C}}});if(v==l){console.log("Cannot use responsive table with every column being removable");return}y.find("tbody tr:not(.responsive-row)").each(function(){var D=a("<i>").addClass("fa fa-plus");var C=a("<a>").attr("href","javascript:;").addClass("row-revealer").append(D).addClass(w);C.data("guid",t());C.on("click",function(){C.toggleClass("revealed");var E=C.data("guid");var F=C.closest("table").find("tr.responsive-row.guid-"+E);if(F.is(".responsive-row")){if(C.hasClass("revealed")){F.removeClass(w);D.removeClass("fa-plus").addClass("fa-minus")}else{F.addClass(w);D.removeClass("fa-minus").addClass("fa-plus")}}});a(a(this).children().get(v)).each(function(){if(a(this).children(".row-revealer").length==0){a(this).prepend(C)}})});a(n).on("resize",function(D,G,C){if(C===true){y.find("a.row-revealer.revealed").trigger("click");y.find("a.row-revealer").each(function(){var H=a(this);var J=H.data("guid");var I=H.closest("tr");var K=H.closest("table").find("tr.responsive-row.guid-"+J);K.insertAfter(I)})}if(jQuery.type(G)==="boolean"){B=[];x=[];A.children().each(function(H,I){if(a(I).is(".removable")){B.push(H)}else{if(v==l){v=H}}})}var F=x.length;while(z[0].scrollWidth<=a(z[0]).innerWidth()&&x.length>0){var E=x.pop();y.find("tr:not(.responsive-row)").each(function(){a(a(this).children("th, td").get(E)).removeClass(w)});B.push(E)}while(z[0].scrollWidth>a(z[0]).innerWidth()&&B.length>0){var E=B.pop();y.find("tr:not(.responsive-row)").each(function(){if(!s){a(a(this).children("th, td").get(E)).addClass(w)}});x.push(E)}if(F!=x.length){y.find("tbody tr:not(.responsive-row)").each(function(){var O=a(this).next();if(O.length&&O.is(".responsive-row")){O.remove()}if(x.length){a(this).find(".row-revealer").removeClass(w);var K=a(this).find(".row-revealer").data("guid");var P=a('<td colspan="'+A.children(":visible").length+'">');var J=a('<dl class="dl-horizontal">').appendTo(P);var H=a(this).children("th, td");var M=A.children("th, td");for(var N in x){var I=a(H.get(x[N])).clone();a("<dd>").html(I.html()).prependTo(J);var L=a(M.get(x[N])).clone();L.find(".readers").remove();a("<dt>").text(L.text()+":").prependTo(J)}O=a("<tr>").addClass("responsive-row").append(P);O.addClass("guid-"+K);if(!a(this).find(".row-revealer").hasClass("revealed")){O.addClass(w)}a(this).after(O)}else{a(this).find(".row-revealer").addClass(w)}})}});if(s){a(this).trigger("resize",[true,false])}else{a(this).trigger("resize")}})},processCalendar:function(){var q=this;var ae=a(this.element)||a(e);var ao={left:"today prev, next ",center:"title",right:"month,agendaWeek,agendaDay"};var D=new Date();var w;var af="current_date";var ag="current_view";var r="agendaDay";var s="agendaWeek";var aa="month";var E=120;var al="'Start.Time'";var ai="'Start.Date'";var K="'End.Time'";var H="'End.Date'";var aj="'Start'";var I="'End'";var Z="'ModelStateIsValid'";var W="javascript:;";var an="submitType";var F=a("#calendarCategory-dialog-form");var X=a("#modal-message");var ak=new Date();var J=new Date().addMinutes(E);var C;var am=l;var Y=false;var R="gotoDate";var P="Goto-Date";var Q=a("input#"+P);var ad=("div.fc-right");var S="button.hideCategories";var z="div.categoriesList";var L='<i class="fa fa-2x fa-angle-double-left"></i>';var B='<i class="fa fa-2x fa-angle-double-right"></i>';var t="p.BackgroundEventsData";var x="p.CalendarData";var y=l;function u(ar){a(ar).find("button[type='submit']").each(function(){var at=a(this);var au=a(at).attr("value");if(au!=l&&au!=""){if(au.toLowerCase()!="close"){a(at).click(function(av){am=au})}}})}function G(at,ar){ab(at,ar)}function U(at,ar){return(at!=l&&at.getResponseHeader("content-type").indexOf(ar))}function M(au){var at=new Date(parseInt(au.substr(6)));var av=10*60*60000;var ar=at.getTimezoneOffset()*60000;return new Date(at.getTime()+av+ar)}function ab(at,ar){if(at!=l&&at!=""){if(at.indexOf("#_NonClickable")==-1){a.ajax({url:at,quietMillis:1000,type:"GET",dataType:"html",cache:false,global:true,contentType:"application/xml; charset=utf-8"}).done(function(au,aw,av){if(a.zeusValidate.sessionExpired(av)){return}v(au,at,ar,av)}).fail(function(aw,av,au){a.zeusValidate.addError("Error occurred while loading details.")})}}else{a.zeusValidate.addError("Encountered error: Url is undefined or empty processAjaxGet().")}}function aq(at,ax){var aw="__RequestVerificationToken=";var ar=l;if(at!=l){at=a.zeusValidate.replaceAll(at,'id="main_form"','id="modal_form"');at=a("<div>").html(at);var au=a(at).find('input[name="__RequestVerificationToken"]');var av=a(au).attr("value");C=ax;ar=ax+"?"+aw+av}return{postAction:ar,response:at}}function v(aO,aU,aw,aN){if(aO!=l&&aO!=""){var aP=aq(aO,aU);var ar=aP.postAction;var aK=a("#modal-message .modal-body");var aI=a(aP.response).find("input[name="+Z+"]");if((aI.length==0)){var av=a("["+f.CalendarCategory+"="+aw+"]");var au=a(av).attr("data-bg");var ax=a(av).attr(f.Url);var aD=a(av).attr(f.CalendarDragResizeAction);var at=a(av).attr(f.IsCategoryItemClickable);var aM=a(av).attr(f.CalendarOpenInNewTab);var az=a.parseJSON(aO);var aA=ax+(ax.indexOf("?")>=0?"&id=":"?id=")+az.Id;var aV=az.IsClickable&&at=="1"?aA:"#_NonClickable";if(aM=="1"&&aV.indexOf("#_NonClickable")==-1){aV=aA}if(az.IsDelete>0){w.fullCalendar("removeEvents",az.Id)}else{var ay={id:az.Id,title:az.Title,start:az.Start!=l?(az.Start):new Date(),end:az.End!=l?(az.End):new Date(),className:(az.SpecialColour!=l&&az.SpecialColour!=""?("bg-"+az.SpecialColour.toLowerCase()):au)+O(az.End),media:a(av).attr("data-media"),description:az.Title,toolTipDescription:az.ToolTipDescriptionHtml,url:az.IsClickable&&at=="1"?az.Id:az.Id+"#_NonClickable",allDay:az.AllDay,dataUrl:aV,opensInNewTab:aM=="1"&&az.IsClickable&&at=="1",dragUrl:aD==l?l:(aD+"?id="+az.Id),category:aw,editable:aD!=l&&az.IsEditable};if(az.Id!=l){var aH=w.fullCalendar("clientEvents",az.Id);if(aH!=l&&aH.length==1){w.fullCalendar("removeEvents",az.Id)}w.fullCalendar("renderEvent",ay)}}if(az.KeepShowingModal>0){ab(ax,aw)}else{A()}}else{a(aK).empty();a(aK).append(aP.response);var aJ=a("#modal_form");u(aJ);var aQ=a(aJ.find("input[name="+aj+"]")[0]);if(aQ!=l&&(aQ.val()==""||aQ.val()==l)){var aB=ak.toString("dd/MM/yyyy h:mm tt");aB=a.zeusValidate.replaceAll(aB," 0:00 AM"," 12:00 AM");a(aJ.find("input[name="+aj+"]")[0]).val();a(aJ.find("input[name="+aj+"]")[0]).attr("value",aB)}var aR=a(aJ.find("input[name="+ai+"]")[0]);if(aR!=l&&(aR.val()==""||aR.val()==l)){var aC=ak.toString("dd/MM/yyyy");a(aJ.find("input[name="+ai+"]")[0]).val();a(aJ.find("input[name="+ai+"]")[0]).attr("value",aC)}var aS=a(aJ.find("input[name="+al+"]")[0]);if(aS!=l&&(aS.val()==""||aS.val()==l)){var aT=ak.toString("h:mm tt");a(aJ.find("input[name="+al+"]")[0]).val(aT);a(aJ.find("input[name="+al+"]")[0]).attr("value",aT)}var aE=a(aJ.find("input[name="+I+"]")[0]);if(aE!=l&&(aE.val()==""||aE.val()==l)){var aB=J.toString("dd/MM/yyyy h:mm tt");aB=a.zeusValidate.replaceAll(aB," 0:00 AM"," 12:00 AM");a(aJ.find("input[name="+I+"]")[0]).val(aB);a(aJ.find("input[name="+I+"]")[0]).attr("value",aB)}var aF=a(aJ.find("input[name="+H+"]")[0]);if(aF!=l&&(aF.val()==""||aF.val()==l)){var aC=J.toString("dd/MM/yyyy");a(aJ.find("input[name="+H+"]")[0]).val(aC);a(aJ.find("input[name="+H+"]")[0]).attr("value",aC)}var aG=a(aJ.find("input[name="+K+"]")[0]);if(aG!=l&&(aG.val()==""||aG.val()==l)){var aT=J.toString("h:mm tt");a(aJ.find("input[name="+K+"]")[0]).val(aT);a(aJ.find("input[name="+K+"]")[0]).attr("value",aT)}var aL=a(X).modal({backdrop:"static",keyboard:false});a(aK).find('button[class ~= "cancel"]').first().each(function(){a(this).click(function(aW){aW.preventDefault();A()})});q.prepareNewContent(aJ);aJ.unbind("submit");aJ.bind("submit",function(aW){aW.preventDefault();var aY=true;if(aY!==l&&aY==true){var aZ=aJ.serialize()+"&submitType="+am+"&";var aX=JSON.stringify({model:aZ});if(am!=l){aX=JSON.stringify({model:aZ})}a.ajax({url:ar,quietMillis:1000,type:"POST",dataType:"html",data:aX}).done(function(a0,a2,a1){if(a0==l||a0==""){a.zeusValidate.ignoreDirty=true;location.reload(true)}else{if(a.zeusValidate.sessionExpired(a1)){return}else{v(a0,aU,aw,a1)}}}).fail(function(a2,a1,a0){a.zeusValidate.addError("Error occurred while loading details.")})}else{}});setTimeout(function(){a(aJ).find("textarea:visible:not([readonly])").trigger("input").blur();a(aJ).find("input[type!=hidden]:first,textarea,select").filter(":visible:first").focus();a(aJ).find("a["+f.Click+"]").remove()},300)}}}function A(){a(".modal ").modal("hide");a(F).modal("hide")}function ac(ay,aw,ar,av,au){if(ay!=l){var ax=aw!=null?aw.toString("dd/MM/yyyy h:mm tt"):null;var at=ar!=null?ar.toString("dd/MM/yyyy h:mm tt"):aw.toString("dd/MM/yyyy");a.ajax({url:ay,quietMillis:1000,type:"POST",dataType:"html",data:{start:ax,end:at,category:au},error:function(az){a.zeusValidate.addError("The server encountered an internal error and was unable to process your request. Please try again later.")}}).done(function(az,aB,aA){if(a.zeusValidate.sessionExpired(aA)){return}if(az==l||az==""){a.zeusValidate.ignoreDirty=true;location.reload(true)}else{if(az.toLowerCase()=="true"){return}}av()}).fail(function(aB,aA,az){a.zeusValidate.addError("Error occurred while processing.")})}}function N(av){var ar,aw,ax,at,au;ar=parseInt(av.format("DD"));aw=parseInt(av.format("MM"));ax=parseInt(av.format("YYYY"));at=parseInt(av.format("HH"));au=parseInt(av.format("mm"));return new Date(ax,aw-1,ar,at,au,0,0)}function ah(at,ar,av){Y=false;var aw=a("["+f.CalendarCategory+"="+at+"]").attr(f.CalendarConfirmationMessage);var au=q.makeModalDialogElement("",aw,'<a class="btn btn-sm btn-white" href="javascript:;">No</a><a class="btn btn-sm btn-primary" href="javascript:;">Yes</a>');au.find("a.btn-primary").click(function(ax){Y=true;ar()});au.find("a.btn").on("click",function(ax){q.dismissModalDialogElement(au)});au.on("hidden.bs.modal",function(ax){if(!Y){av()}});q.showModalDialogElement(au)}function O(ar){var au=moment(ar);var at=N(au);return V(at)?" pastDate":""}function V(ar){var au=new Date();au=new Date(au.getFullYear(),au.getMonth(),au.getDate());ar=new Date(ar.getFullYear(),ar.getMonth(),ar.getDate());var at=ar<au;return at}function ap(ar){return ar!=l?ar.replace(/\s+/g,""):l}function T(at){var ar=true;var au=a(z).find("["+f.CalendarCategory+"="+at+"]");if(au.length==1){if(au.attr(f.CalendarAllowEventAddCategory)=="1"){ar=true}else{ar=false}}return ar}a(".vertical-box").each(function(){var aA,aQ;var aD=l;var ay=a(this);y=a(ay).closest("div.panel").length==1?a(ay).closest("div.panel"):l;var aB=a(ay).attr(f.CalendarDisablePastDates)!=l?a(ay).attr(f.CalendarDisablePastDates).toLowerCase().indexOf("true")==0:true;var aJ=a.zeusValidate.parseDateValue(a(ay).attr(f.CalendarMaxDateToShow));var aK=a.zeusValidate.parseDateValue(a(ay).attr(f.CalendarMinDateToShow));var au=a(ay).find(x);if(au.length==1){au=JSON.parse(au.text());au.EventLimitWeekDay=au.EventLimitWeekDay>0?au.EventLimitWeekDay:au.EventLimit;if(!au.ShowTodayButton){ao.left=a.zeusValidate.replaceAll(ao.left,"today","")}if(!au.AllowCalendarScrolling){ao.left=a.zeusValidate.replaceAll(ao.left," prev, next ","")}}var aH=a(ay).attr(f.CalendarRendered);if(aH!=l&&aH=="true"){return}a(ay).attr(f.CalendarRendered,"true");var aU=a.zeusValidate.parseDateValue(sessionStorage[af]);var aV=sessionStorage[ag];var aO=a.zeusValidate.parseDateValue(a(ay).attr(f.CalendarGoToDate));if(aO!=l){aD=aO;if(aO<aK||aO>aJ){aD=aK}}else{if(aU!=l&&au.RememberLastDateAndView){if(aU>=aK&&aU<=aJ){aU=aU}else{aU=aK}aD=aU}}aP();if(ay.attr(f.CalendarDefaultSessionTime)!=l&&parseInt(ay.attr(f.CalendarDefaultSessionTime))>0){var aY=parseInt(ay.attr(f.CalendarDefaultSessionTime));J=new Date().addMinutes(aY);E=aY}var ax=a(ay).find(".external-event");var av=[];var aw=[];if(ax!=l){aM()}if(ay.attr(f.CalendarHideList)!=l&&ay.attr(f.CalendarHideList)=="true"){a(S).click();a(S).hide()}var az=aV&&au.RememberLastDateAndView!=l?aV:a(ay).attr(f.CalendarDefaultView);switch(az){case"day":az=r;break;case"month":az=aa;break;case"week":az=s;break;case"agendaDay":az=r;break;case"agendaWeek":az=s;break;default:az=aa;break}function aM(){a(ax).each(function(){var a0=a(this).attr("data-title");var a2=a(this).attr(f.CalendarAllowEventAddCategory);var a3=a(this).attr(f.CalendarOpenInNewTab);var a1=ap(a0);aw.push(a1);var a4=a(this).attr(f.Url);if(a2=="1"&&a3=="0"){av.push(a0);a(this).keypress(function(a5){if(a5.which==13||a5.keyCode==13){ab(a4,a1)}})}})}function aN(a0){var a1=a(a0).find(".radio-button-list");a(a1).empty();a(av).each(function(a2){var a3=av[a2];var a6=ap(a3);var a5="";if(a2==0){a5="checked"}var a4="<input id='rd-"+a6+"' type='radio' name='group1' "+a5+"  value='"+a6+"'> <label for='rd-"+a6+"'>"+a3+"</label> <br>";a(a1).append(a4)})}function aS(a0,a3,a1){var a2=a(a0).find(".radio-button-list");a(a2).empty();if(!a1){a1=a3}ax.each(function(a6){var a4=a(this);if(a4.attr(f.CalendarAllowEventAddCategory)=="1"&&a4.attr(f.CalendarOpenInNewTab)=="1"){var bb="",a7="";bb=a3?a3.format():"";a7=a1?a1.format():"";if(bb.indexOf("+")!=-1){bb=bb.substr(0,bb.indexOf("+"))}if(a7.indexOf("+")!=-1){a7=a7.substr(0,a7.indexOf("+"))}var bc=a4.attr(f.Url);var ba="&";if(bc.indexOf("?")==-1){ba="?"}var a8=bc+(bb!=""?ba+"start="+bb:"")+(a7!=""?"&end="+a7:"");var a5=a4.attr("data-title");var a9='<a class="contract-picker" href="'+a8+'"><div class="widget-stats widget '+a4.attr("data-bg")+'"><div class="stats-number">'+a5+"</div></div></a>";a(a2).append(a9);if(a6==0){a(a0).find(".modal-title").text("Create on "+a3.format("DD/MM/YYYY h:mm a")+" to "+a1.format("DD/MM/YYYY h:mm a"))}}})}function aE(a1,a3,a2){if(a1!=l&&a.inArray(a1,aw)!=-1){ar(a1)}else{var a0=ax.filter(function(){return a(this).attr(f.CalendarOpenInNewTab)!="0"}).length;if(ax.length==0){return}else{if(a0==0){aN(F);aA=a(F).modal({keyboard:false,backdrop:"static"});F.find("form").off("submit");aQ=F.find("form").on("submit",function(a4){a4.preventDefault();a4.stopPropagation();ar()})}else{aS(F,a3,a2);a(F).modal({keyboard:false,backdrop:"static"})}}}}function ar(a2){var a1=a2;if(aQ!=l){a1=a(aQ).find("input[type]:checked").val()}a1=a1==l?aw[0]:a1;if(a.inArray(a1,aw)!=-1){A();var a0="div["+f.CalendarCategory+'="'+a1+'"]';var a3=l;a(ax).each(function(){var a4=a(this).attr(f.CalendarCategory);if(a4==a1){a3=a(this).attr(f.Url);return false}});ab(a3,a1)}else{(aA).dialog("close")}}function aC(){var a0=l;var a1=a(ay).find("p.DatesToDisable");if(a1.length==1){a1=a1.text();a0=JSON.parse(a1)}return a0}function aI(a2){var a3=false;var a1=(a2 instanceof Date||typeof a2.getMonth==="function")?a2:N(a2);if((V(a1)&&aB)){a3=true}else{var a0=aC();a.each(a0,function(a7){var a4=a0[a7];var a5=new Date(a1);var a8=moment(a4);var a6=N(a8);if(a6.getHours()==0){a5.setHours(0,0,0,0)}if(a6.getTime()==a5.getTime()){a3=true}})}return a3}function aG(a0){var a1=a0?a(".toolTip["+f.CalendarToolTipTag+" ="+a(a0).attr("href")+"]"):a(".toolTip["+f.CalendarToolTipTag+"]");a(a1).css("display","none")}function aT(a2,a3){a2=a2==l?"Error":a2;a3=a3==l?"Adding events is not permitted on disabled dates.":a3;var a4='<div class="alert alert-danger"> <h4>'+a2+"</h4><p>"+a3+"</p></div>";var a5="calendar-date-disabled";var a0='<div class="modal-footer"><a class="btn btn-sm btn-white" href="javascript:;" data-dismiss="modal">Close</a></div>';var a1=q.makeModalDialogElement("",a4,a0,a5);q.showModalDialogElement(a1);a1.find('.modal-footer a[data-dismiss="modal"]').click(function(a6){q.dismissModalDialogElement(a1)})}aD=(aD!=l)?aD:l;var at=a(ay).find("#calendar");w=a(at).fullCalendar({weekends:a(ay).attr(f.CalendarShowWeekends)=="false"?false:true,header:ao,columnFormat:"ddd D/M",firstDay:1,timeFormat:"h(:mm) a",timezone:"local",displayEventEnd:true,titleFormat:{month:"MMMM YYYY",week:"D MMM YYYY",day:"D MMMM YYYY"},selectable:{day:true,week:true,"default":false},selectHelper:false,selectOverlap:true,select:function(a4,a2,a3,a6){if(au!=l&&au.ShowFormInModal==true){var a5=N(a4);var a1=aI(a5);if(!a(this).hasClass("disabled")&&!a1){var a0=false;a0=a4.toString().indexOf("00:00:00")>-1;J=N(a2);ak=a5;aE(l,a4,a2)}else{aT()}}w.fullCalendar("unselect")},droppable:true,defaultView:az,eventLimit:{week:au.EventLimitWeekDay>0?au.EventLimitWeekDay:au.EventLimit,day:au.EventLimitWeekDay>0?au.EventLimitWeekDay:au.EventLimit,month:au.EventLimit,"default":true},eventBackgroundColor:a(ay).attr(f.CalendarBackgroundEventColour),dayClick:function(a1,a5,a6){if(au!=l&&au.ShowFormInModal==true){var a4=N(a1);var a3=aI(a4);if(!a(this).hasClass("disabled")&&!a3){var a0=false;a0=a1.toString().indexOf("00:00:00")>-1;var a2=N(a1);ak=a4;J=a2;if(!a0){J.setMinutes(J.getMinutes()+E)}aE(l,a1)}else{if(a6.name=="month"){aT()}}}},height:700,drop:function(a5,a8,a9){var a2=a(this);var a1=a2.attr(f.CalendarAllowEventAddCategory)=="1"&&a2.attr(f.CalendarOpenInNewTab)=="0";if(a1){if(!aI(a5)){var a3=a(a2).attr(f.CalendarCategory);var a4=a(a2).attr(f.Url);var a0=false;a0=a5.toString().indexOf("00:00:00")>-1;var a7=N(a5);var a6=N(a5);ak=a7;J=a6;if(!a0){if(a2.attr(f.CalendarDefaultSessionTime)!=l&&parseInt(a2.attr(f.CalendarDefaultSessionTime))>0){var ba=parseInt(a2.attr(f.CalendarDefaultSessionTime));J.setMinutes(J.getMinutes()+ba)}else{J.setMinutes(J.getMinutes()+E)}}ab(a4,a3)}else{aT()}}else{aT("Error","New events for this category cannot be created.")}},eventDrop:function(a2,a0,a6,a4,a8,a9){var a7,a1;a7=N(a2.start);if(a2.end!=l){a1=N(a2.end)}var a3=a(this);if((a7!=l&&!aI(a7))||(a1!=l&&!aI(a1))){var a5=function(){var ba=a3.attr(f.CalendarDragResizeAction);ba=ba==l?a2.dragUrl:ba;ac(ba,a7,a1,a6,a2.category)};ah(a2.category,a5,a6)}else{a(a3).css("cursor","no-drop");aT();a6()}aG(a3)},eventResize:function(a3,a1,a6,a5,a8,a9){var a4=a(this);var a7,a2;a7=N(a3.start);if(a3.end!=l){a2=N(a3.end)}if(a9.name.indexOf(aa)==0){a6()}else{if((a7!=l&&!aI(a7))||(a2!=l&&!aI(a2))){var a0=function(){var ba=a4.attr(f.CalendarDragResizeAction);ba=ba==l?a3.dragUrl:ba;ac(ba,a7,a2,a6,a3.category)};ah(a3.category,a0,a6)}else{aT();a6()}}aG(a4)},eventClick:function(a0,a3,a5){a3.preventDefault();var a1=a(this);var a2=a(a1).attr(f.Url);if(a0.opensInNewTab){var a4=n.open(a0.url,"_self")}else{a2=a2==l?a0.dataUrl:a2;G(a2,a0.category)}},viewRender:function(a5,a2){var a4=a(ay).find("button.fc-prev-button");var a3=a(ay).find("button.fc-next-button");var a8=N(a5.start);var a6=N(a5.end);var a7="day";if(a5.name=="month"){a7="month"}else{if(a5.name=="agendaWeek"){a7="week"}}ae.find(ay).find(".fc-prev-button .readers").text("Previous "+a7);ae.find(ay).find(".fc-next-button .readers").text("Next "+a7);if(a8<=aK){a(a4).attr("disabled","disabled")}else{if(a8>aK){a(a4).removeAttr("disabled")}}if(a6>aJ){a(a3).attr("disabled","disabled")}else{if(a6<aJ){a(a3).removeAttr("disabled")}}var a0=moment(a5.start);a0=a5.name=="month"?a0.add(1,"M"):a0;var a1=a0.format("DD/MM/YYYY");sessionStorage[af]=a1;sessionStorage[ag]=a5.name;aG();if(Q.val()!=a1){Q.val("")}},dayRender:function(a1,a0){if(aI(a1)){a(a0).addClass("disabled")}},eventRender:function(a3,a2){var a5=(a3.media)?a3.media:"";var a1=(a3.description)?a3.description:"";var a8=f.CalendarToolTipTag+'="'+a(a2).attr("href")+'"';a2.find(".fc-title").after(a('<span class="fc-event-icons"><span>').html(a5));a2.find(".fc-title").after("<div>"+a1+"</div>");if(a3.description!=l||a3.toolTipDescription!=l){var a4=a('<small class="toolTip" '+a8+">"+(a3.toolTipDescription==l?a1:a3.toolTipDescription)+"</small>");var a6=a(".toolTip["+a8+"]");if(a(e).find(a(a6)).length==0){a("body").append(a4);a6=a(".toolTip["+a8+"]")}var a9=a6.width();var a7=a6.height();var a0=at.width();a(a2).focusin(function(ba){var bb=a(a2).offset();a(a6).css("display","block");a(a6).css("border-color",a(a2).css("background-color"));a(a6).css("top",bb.top);a(a6).css("left",bb.left-n.pageXOffset+100-a9);var bc=a(a6).is(":toolTipOffscreen");if(bc.leftNeg){a(a6).css("left",Math.abs(a(a6).offset().left))}else{if(bc.leftPos){a(a6).css("left",(a(a6).offset().left-100-a9))}}if(bc.topNeg){a(a6).css("top",Math.abs(a(a6).offset().top))}else{if(bc.topPos){a(a6).css("top",(a(a6).offset().top-a7))}}}).mouseover(function(ba){a(a6).css("display","block");a(a6).css("border-color",a(a2).css("background-color"))});a(a2).mousemove(function(ba){a(a6).css("top",ba.pageY+5);if(a9+20>a0-ba.pageX){a(a6).css("left",ba.pageX-n.pageXOffset-20-a9)}else{a(a6).css("left",ba.pageX-n.pageXOffset+20)}});a(a2).focusout(function(ba){a(a6).css("display","none")}).mouseout(function(ba){a(a6).css("display","none")})}},editable:true,events:new function(){var a3=[];if(ax!=l&&ax.length){if(ax.length==1){a(S).click()}a.each(ax,function(){var a9=a(this);var a7=a(a9).attr(f.CalendarCategory);var a5=a(a9).attr("data-bg");var a6=a(a9).attr("data-media");var a8=a(a9).attr(f.Url);var a4=a(a9).attr(f.IsCategoryItemClickable);var ba=a(a9).attr(f.CalendarDragResizeAction);var bb="["+f.CalendarCategoryEventList+"="+a7+"]";var bd=a(a9).attr(f.CalendarOpenInNewTab);var bc=a(at).find(bb);if(bc!=l){var bf=a(bc).text();if(bf!=l&&bf!=""){var be=a.parseJSON(bf);a.each(be,function(){var bi=a(this)[0];var bl=bi.Start!=l?(bi.Start):new Date();var bj=bi.End!=l?(bi.End):new Date();var bk=O(bj);var bg=a8+(a8.indexOf("?")>=0?"&id=":"?id=")+bi.Id;var bm=bi.IsClickable&&a4=="1"?bi.Id:bi.Id+"#_NonClickable";if(bd=="1"&&bm.indexOf("#_NonClickable")==-1){bm=bg}var bh={id:bi.Id,title:bi.Title,start:bl,end:bj,dow:bi.DOW,className:(bi.SpecialColour!=l&&bi.SpecialColour!=""?("bg-"+bi.SpecialColour.toLowerCase()):a5)+bk,media:a6,description:bi.EventDescriptionHtml,toolTipDescription:bi.ToolTipDescriptionHtml,url:bm,allDay:bi.AllDay,dataUrl:(bi.IsClickable&&a4=="1"?bg:"#_NonClickable"),dragUrl:ba==l?l:(ba+"?id="+bi.Id),category:a7,opensInNewTab:bd=="1"&&bi.IsClickable&&a4=="1",constraint:ap(bi.BackgroundEventIdentifier),editable:ba!=l&&bi.IsEditable};a3.push(bh)})}}});var a0=a(ay).find(t);if(a0.length==1){var a2=a0.text();if(a2!=l&&a2!=""){var a1=JSON.parse(a2);a.each(a1,function(){var a4=a(this)[0];var a5={id:ap(a4.BackgroundEventIdentifier),start:a4.Start!=l?(a4.Start):new Date(),end:a4.End!=l?(a4.End):new Date(),dow:a4.DOW,rendering:"background",color:a4.BackgroundEventColor};if(a4.DroppingAllowed==0){a5.overlap=false}a3.push(a5)})}}}return a3},eventAfterAllRender:function(a1){FullCalendarOverrides.applyChangesToCalendar(ay);var a0="panel-loading";y.find(".panel-body div.panel-loader").remove();y.removeClass(a0)}});aX(aD);function aX(a0){var a1;var a2=function(a4,a6){if(a4!=l||(a4!=l&&a4.trim()!="")){var a3=typeof(a4)=="string"?a.zeusValidate.parseDateValue(a4):a4;if(a3!=null){var a5="Select a date within the search (From, Look Ahead) "+aK.toString("dd/MM/yyyy")+" - "+aJ.toString("dd/MM/yyyy");if(a3>=aK&&a3<=aJ){a(at).fullCalendar("gotoDate",moment(a3))}else{if(a3>aJ&&a6){aT(l,a5)}else{if(a3<aK&&a6){aT(l,a5)}}}if(a6){at.fullCalendar("changeView",r)}}}};if(a0!=l){a2(a0)}Q.off("change");Q.on("change",function(a3){var a4=a(this);clearTimeout(a1);a1=setTimeout(function(){var a5=a(a4).val();a2(a5,true)},10)})}var aR="a["+f.CalendarEventAddBtn+"=true]";a(aR).click(function(a2){var a0=a(this);var a3=a(a0).attr("href");if(a3=="#"){ak=new Date();J=new Date();J.setMinutes(J.getMinutes()+E);var a1=a(this).attr(f.FieldPrefix);if(a1!=l){a1=ap(a1)}aE(a1)}});var aW=at.find(".fc-today-button");if(aW!=l&&aW.length==1){a(aW).click(function(a0){a0.preventDefault();aX(moment().format("DD/MM/YYYY"))})}a("#external-events .external-event").each(function(){var a0={title:a.trim(a(this).attr("data-title")),className:a(this).attr("data-bg"),media:a(this).attr("data-media"),description:a(this).attr("data-desc")};a(this).data("eventObject",a0);a(this).draggable({zIndex:999,revert:true,revertDuration:0})});var aF,aZ=0;a(e).resize(function(){if(aF!=n.innerHeight||aZ!=n.innerWidth){aF=n.innerHeight;aZ=n.innerWidth}});aL();function aL(){var a0=at.closest(".panel-body").find(".categoryListSplitButton");a0.css("top","-12px");at.find(".fc-toolbar .fc-right").append(a0)}function aP(){a(S).click(function(a0){a0.preventDefault();var a1=a(S).text();if(a(z).hasClass("hidden")){a(z).removeClass("hidden");a(S).html(a.zeusValidate.replaceAll(a1,"Show","Hide")+L)}else{a(z).addClass("hidden");a(S).html(a.zeusValidate.replaceAll(a1,"Hide","Show")+B)}})}setTimeout(function(){y.find(".fc-button").mousedown(function(a1){a0(a(this))}).off("keypress.zeus-calendar-spinner").on("keypress.zeus-calendar-spinner",function(a1){if(a1.which==13||a1.which==10){a1.preventDefault();a1.stopPropagation();a0(a(this))}});function a0(a1){if(!a1.hasClass("fc-state-active")&&!a1.is(":disabled")){var a3=a('<div class="panel-loader"><span class="spinner-small"></span></div>');var a2="panel-loading";if(!y.hasClass(a2)){y.addClass("panel-loading");y.find(".panel-body").prepend(a3)}setTimeout(function(){a1.click()},300)}}},20);return false});a(".fc-event-container .fc-event").each(function(ar){var at=a(this);a(this).bind("keypress",function(av){if(av.keyCode==13||av.which==13){av.preventDefault();var aw=a(at).attr(f.Url);var au=a(at).attr(f.CalendarCategory);G(aw,au)}})})},equaliseReadOnlyViews:function(){var t=a(this.element)||a(e);var u=t.find("ul.displayContainer");var r=function(v){var y=true;if(v.length>=2){var w=a(v)[0];var x=a(v)[1];var z=a(w).offset().top;var A=a(x).offset().top;if(z!=A){y=true}else{y=false}}return y};if(u.length>=1){s();a(n).resize(function(){setTimeout(s,100)})}function q(v){if(v!=l&&v.length>0){var y=(v).find("li.definitionProperty");if(y!=l&&y.length>0){y.removeAttr("style")}}for(var x=0;x<1000;x++){var z="'"+x+"'";var A="li["+f.ReadOnlyViewRow+"="+z+"]";var w=(v).find(A);if(w.length==0){break}if(r(w)){(w).addClass("defPropertyExtraPadding");(w).removeAttr("style")}else{(w).removeClass("defPropertyExtraPadding");(v).equalize({children:A})}}}function s(){a.each(u,function(){q(a(this))})}},collapseRightSidebar:function(){var s=a(this.element)||a(this);var r="rightSideBarStayCollapsed";var v="#page-container";var u="page-right-sidebar-collapsed";var t=" right sidebar.";u=(a(n).width()<979)?"page-right-sidebar-toggled":u;var w=s.find("[data-click=right-sidebar-toggled]");w.click(function(x){if(a(v).hasClass(u)){sessionStorage[r]="true";a(v).find(".sidebar-right").css("display","none");w.find(".readers").text("Open"+t)}else{sessionStorage[r]="false";a(v).find(".sidebar-right").css("display","inline");w.find(".readers").text("Close"+t)}});if(a(v).hasClass(u)){a(v).find(".sidebar-right").css("display","none");w.find(".readers").text("Open"+t)}var q=a("div.sidebar-right div[data-scrollbar=true]");if(q.length>0&&a(".page-right-sidebar-collapsed").length==0){a(q).each(function(){var x=a(this).html();if(x==l||x.trim()==""||sessionStorage[r]=="true"){if(a("#page-container.page-right-sidebar-collapsed").length==0){a("#page-container").addClass("page-right-sidebar-collapsed");a("#page-container").removeClass("page-right-sidebar-toggled")}w.find(".readers").text("Open"+t)}else{w.find(".readers").text("Close"+t)}})}else{if(q.length==0){a('a[data-click="right-sidebar-toggled"]').remove()}}},processFullHeightContent:function(){var q=a(this.element)||a(e);q.find(".full-height-scrollable, .full-height-grid-scrollable").each(function(){var s=a(this);if(s.children("div.panel-footer").length==0){s.append('<div class="panel-footer"><span class="btn" style="visibility: collapse;">span</span></div>')}if(s.hasClass("full-height-grid-scrollable")){r();a(n).resize(r)}function r(){var t=a(n).width();if(t>=1200){s.find("div.zeus-table").removeClass("overflow-x-auto")}else{s.find("div.zeus-table").addClass("overflow-x-auto")}}})},dateBasedContent:function(){var q=this;var r=a(this.element)||a(e);r.find(".zeus-date-based-content").each(function(){var t=a(this);var s;var x=t.find(".zeus-date-part");var u=t.find(".zeus-content-part");var D=x.attr(f.Url);var w=x.attr(f.DateList);var z=(w==l)?[]:w.split(",");var v=x.attr(f.DateTime);if(!v){v=new Date().toISOString();v=v.replace(/T.*/,"")}if(D!=l&&D!=""){x.datepaginator({injectStyle:false,selectedDate:"1000-01-01",onSelectedDateChanged:function(){var E=a(this);n.clearTimeout(s);s=n.setTimeout(function(){var K=E.find(".dp-selected").attr("data-moment");var G=x.closest(".iscontainer");var J=G.data(c.ParentType);var I=G.data(c.PropertyNameInParent);var F=G.parent().closest(".iscontainer");while(F.length){J=F.data(c.ParentType)+","+J;I=F.data(c.PropertyNameInParent)+","+I;F=F.parent().closest(".iscontainer")}var H={};H[g.Ajax]=true;H[g.ParentType]=J;H[g.PropertyNameInParent]=I;a.ajax({type:"GET",dataType:"html",data:{selectedDate:K},global:false,url:D,headers:H,success:function(L){u.html(L);q.prepareNewContent(u)},error:function(M,N,L){a.zeusValidate.addError("Error occurred while processing date based content.")}})},500)}})}x.datepaginator("setSelectedDate",v);var C;function B(){x.find("a").each(function(I,G){var F=a(G);var J=F.attr("data-moment");for(var H=0;H<z.length;++H){if(J==z[H]){F.addClass("zhighlight")}}F.off("click.patchdatepaginator").on("click.patchdatepaginator",function(K){n.setTimeout(function(){x.find("a").eq(I).focus();clearTimeout(C);B()},1)})});var E=x.find("ul.pagination").children();if(E.first().find(".readers").length==0){E.first().find("i").before(a("<span>").addClass("readers").text("Previous day"))}if(E.last().find(".readers").length==0){E.last().find("i").before(a("<span>").addClass("readers").text("Next day"))}C=n.setTimeout(B,5000)}B();var y=x.find("a").first();var A=x.find("a").last();y.width(y.width()-1);A.width(A.width()-1);x.find(".glyphicon-calendar").removeClass("glyphicon").removeClass("glyphicon-calendar").addClass("fa").addClass("fa-calendar")})},quickfinds:function(){var q=this;var s=a(this.element)||a(e);s.find("input.qf-method-selector").on("change",function(){if(this.checked){a(this).closest(".history").find(".qf-method").hide();a(this).closest(".history").find(".qf-method-"+a(this).val()).show()}}).trigger("change");s.find(".history select").on("change",function(){r(a(this),a.zeusValidate.getValueFromInput(a(this)))});s.find(".zeus-qf").on("click",function(t){t.preventDefault();t.stopPropagation();if(a(this).closest("form").valid()){r(a(this),a.zeusValidate.getValueFromInput(a(this).parent().find("input")))}});s.find(".zeus-qf").siblings("input").on("keypress",function(t){if(t.which==13||t.which==10){t.preventDefault();t.stopPropagation();if(a(this).closest("form").valid()){r(a(this),a.zeusValidate.getValueFromInput(a(this)))}}});function r(t,w){var v=t.closest(".history").find("h3").attr(f.Url);var u=v.replace("ZEUS_QF_PLACEHOLDER",w);n.location.href=u}},userDefaults:function(){var q=this;var r=a(this.element)||a(e);r.find("["+f.UserDefaultKey+"]").each(function(){var t=a(this);var v=t.attr(f.UserDefaultKey);function z(){if(t.is("select")){var G=t.val();if(G==null){sessionStorage.removeItem(v);localStorage.removeItem(v)}else{if(a.isArray(G)){var E={};for(var C in G){var F=G[C];E[F]=t.find('option[value="'+F+'"]').text()}sessionStorage[v]=localStorage[v]=JSON.stringify(E)}else{var D={};D[G]=t.find('option[value="'+G+'"]').text();sessionStorage[v]=localStorage[v]=JSON.stringify(D)}}}else{if(t.is('[type="checkbox"]')){var B=sessionStorage[v]!=l?JSON.parse(sessionStorage[v]):{};var F=t.val();B[F]=a.zeusValidate.getValueFromInput(t);sessionStorage[v]=localStorage[v]=JSON.stringify(B)}else{sessionStorage[v]=localStorage[v]=a.zeusValidate.getValueFromInput(t)}}}var y=a.zeusValidate.getValueFromInput(t);if(y!=l&&y!=null&&y!=""&&y!="01/01/0001"&&(!t.is("select")||t.find("option[selected]").length)){z()}else{var s=sessionStorage[v];if(s==l){s=localStorage[v]}if(s!=l){if(t.is("select")){var x=JSON.parse(s);t.find("option[selected]").removeAttr("selected");for(var u in x){var A=x[u];var w=t.find('option[value="'+u+'"]');if(w.length>0){w.attr("selected","selected")}else{a("<option>").attr("value",u).attr("selected","selected").text(A).appendTo(t)}t.removeAttr("data-noselection")}}else{if(t.is('[type="checkbox"]')){if(JSON.parse(s)[t.val()]){t[0].checked=true}}else{if(t.is('[type="radio"]')){if(s==t.val()){t[0].checked=true}}else{t.val(s)}}}}}t.on("change.userdefaults",function(){z()})})},searchModals:function(){var q=this;var r=a(this.element)||a(e);r.find(".zeus-search-modal").each(function(){var u=a(this);var w=u.data(c.SearchModalButtonName);var s=a('<button type="button">').text((w!=l)?w:"Find");var v=u.add(u.siblings(".amc-aria-multi-complete"));v.wrapAll(a("<div>").addClass("form-control-main-part"));u.parent().after(s);u.parent().add(s).wrapAll((a("<div>").addClass("form-control-with-appendix")));s.data("parentid",u.attr("id"));var t=function(x,y){y=a(y);if(s.data("parentid")!=y.attr("id")){return}if(y.attr("readonly")=="readonly"||y.attr("disabled")=="disabled"){s.attr("disabled","disabled")}else{s.removeAttr("disabled")}};a(e).bind("editable-state-change",t);a(e).trigger("editable-state-change",u);s.on("click.search-modals",function(x){x.preventDefault();var y={};y[g.AjaxForm]=true;var A=u.data(c.Url);var z=a.zeusValidate.getParameterMapForElement(u);a.ajax({url:A,type:"GET",dataType:"html",cache:false,headers:y,data:z,}).done(function(B,H,D){if(a.zeusValidate.sessionExpired(D)){return}var F="modal-search";var G="#"+F;a(G).remove();var E=q.makeModalDialogElement("",B,"",F);q.prepareNewContent(E);function C(){E.find('button[value="Search"]').off("click").on("click.search-modal",function(J){J.preventDefault();a.zeusValidate.updateCkeditorInstances(E);var I=E.find("form").serialize();I=a.grep(I.split("&"),function(K){return K.indexOf("SearchTable")!=0}).join("&");a.ajax({url:A,type:"POST",data:I,dataType:"html",cache:false,headers:y,}).done(function(L,M){var K=E.find(".modal-body");K.html(L);q.prepareNewContent(K);C();E.find('button[value="Search"]').focus()}).fail(function(N,M,K){var L=a.zeusValidate.getErrorInAjax(N);L=(L!=l?L:"Error occurred while loading.");a.zeusValidate.addError(L)})});E.find('button[value="Select"]').off("click").on("click.search-modal",function(J){J.preventDefault();var L=[];var M=[];E.find("input[type=radio]["+f.RowSelector+"=True]").each(function(){if(this.checked){var N=this.value;var O=a(this).attr(f.DataText);if(O==l){O=N}L.push(N);M.push(O);return false}});if(L.length==0){E.find("input[type=checkbox]").each(function(){if(this.checked&&a(this).attr(f.DataKey)!=l){var N=a(this).attr(f.DataKey);var O=a(this).attr(f.DataText);if(O==l){O=N}L.push(N);M.push(O)}})}if(L.length>0){if(u.is("select")){var I=u.data("ariaSelectReference");for(var K=0;K<L.length;++K){I.selectOrCreateChoice(L[K],M[K],true)}}else{u.val(L[0])}}u.change();q.dismissModalDialogElement(E)});E.find("button.cancel").off("click").on("click.search-modal",function(I){I.preventDefault();q.dismissModalDialogElement(E)})}C();q.showModalDialogElement(E)}).fail(function(E,D,B){var C=a.zeusValidate.getErrorInAjax(E);C=(C!=l?C:"Error occurred while loading.");a.zeusValidate.addError(C)})})})},processRichTextBox:function(){var q=this;var s=a(this.element)||a(e);var t=a("#zeus-ajax-routes").data(c.AjaxRoutes);var u=(t.CkeditorBasePath);n.CKEDITOR_BASEPATH=u;CKEDITOR.basePath=u;s.find("div["+f.RichTextArea+"=true]").each(function(){var x=a(this);var y=x.find("textarea:enabled");var F=y.is("[readonly]");if(x.find("a.hintTip").length==0){x.find("label").after('<a role="presentation" class="hintTip" href="javascript:;"><span>Help tip: Press ALT + F10 to access the toolbar via keyboard.</span></a>')}if(y.length==1){var B,I;if(F){return}var C=a(this).find("p["+f.RichTextBoxOptions+"=true]").text();if(C!=l){B=JSON.parse(C);I=[];var H=[];var v=[];if(C.indexOf("bold")>0){v.push("Bold")}if(C.indexOf("italic")>0){v.push("Italic")}if(C.indexOf("underline")>0){v.push("Underline")}H.push({name:"basicstyles",items:v});if(C.indexOf("paragraph")>0){I.push({name:"paragraph",groups:["list","align","bidi"]});H.push({name:"basicstyles",items:["NumberedList","BulletedList","-","-","JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock","-","BidiLtr","BidiRtl"]})}if(C.indexOf("links")>0){I.push({name:"links",groups:["Link","Unlink"]});H.push({name:"links",items:["Link","Unlink","Anchor"]})}if(C.indexOf("editing")>0){I.push({name:"editing",groups:["selection"]});H.push({name:"editing",items:["SelectAll"]})}if(C.indexOf("source")>0){I.push({name:"document",groups:["Source"]});H.push({name:"document",items:["Source"]})}if(C.indexOf("tables")>0){I.push({name:"insert",groups:["insert"]});H.push({name:"insert",items:["Table"]})}if(C.indexOf("cms")>0){I.push({name:"cms",groups:["cms"]});H.push({name:"cms",items:["Format","Superscript","Subscript","Strike","HorizontalRule","-","Image","-","Outdent","Indent"]})}}var G=y.val()!=l?y.val():"";var z=y.attr("name");var A=y.attr("spellcheck")=="true"?true:false;var D=CKEDITOR.instances[a.zeusValidate.replaceAll(z,".","_")];if(D){D.destroy(true)}var w={"strong em ul ol big small link unlink u":true,"h1 h2 h3 h4 h5 h6 p blockquote li":{styles:"text-align"},a:{attributes:"!href,target"},};if(C!=l&&C.indexOf("tables")>=0){w={"strong em ul ol big small link unlink u":true,"h1 h2 h3 h4 h5 h6 p blockquote li th td tr tbody thead":{styles:"text-align"},a:{attributes:"!href,target"},table:{attributes:"border"},}}if(C!=l&&C.indexOf("cms")>0){w=true;a.each(CKEDITOR.dtd.$removeEmpty,function(J,K){CKEDITOR.dtd.$removeEmpty[J]=false})}if(y.closest(".modal").length==1){setTimeout(E,50)}else{E()}function E(){var J=CKEDITOR.replace(z,{toolbar:H,language:"en",disableNativeSpellChecker:A,htmlEncodeOutput:false,allowedContent:w,removePlugins:",scayt,liststyle,tabletools,scayt,contextmenu,paste",removeButtons:"PasteFromWord, Language"});J.setData(G);CKEDITOR.on("dialogDefinition",function(K){K.data.definition.resizable=CKEDITOR.DIALOG_RESIZE_NONE})}}});for(var r in CKEDITOR.instances){CKEDITOR.instances[r].on("change",function(){CKEDITOR.instances[r].updateElement()})}CKEDITOR.on("instanceReady",function(v){v.editor.on("paste",function(w){w.data.html='<!--class="Mso"-->'+w.data.html},null,null,9)});setTimeout(function(){var v="Press ALT 0 for help";a(".cke_voice_label").each(function(){var w=a(this);if(w.text()==v){w.text("")}});a("iframe.cke_wysiwyg_frame").each(function(){var w=a(this);var x=w.attr("title");if(x.indexOf(v)){w.attr("title",a.zeusValidate.replaceAll(x,v,""))}})},100)},savedSearchPopup:function(){var q=this;var r=a(this.element)||a(e);r.find('button[value="Save search criteria"]').each(function(){var s=a(this);var t=a(this).closest("form");s.on("click",function(u,w){if(!w){u.preventDefault();var v=q.makeModalDialogElement("Enter a name for this new saved search",'<input style="width: 100%" type="text" name="savedSearchSaveName"></input>','<a class="btn btn-sm btn-white" href="javascript:;">Cancel</a><a class="btn btn-sm btn-primary" href="javascript:;">Ok</a>');v.find(".modal-footer a.btn-primary").bind("click.zeus-modal-yes",function(){v.find("input").appendTo(t);s.trigger("click",true)});v.find(".modal-footer a").bind("click.zeus-modal-dismiss",function(){q.dismissModalDialogElement(v)});q.showModalDialogElement(v)}})})},generateMainFormJumpList:function(){var q=this;var t=a(this.element)||a(e);var r=a(e).find(".jump-list ul");if(r.length==0){return}var s=a(e).find(".panel-heading .panel-title");r.empty();s.each(function(){var v=a(this);if(!v.is(":visible")){return}var w=v.attr("id");if(w==l||w==""){w="jl"+(jumpListCounter++);v.attr("id",w)}var u=a("<a>").attr("href","javascript:;").text(v.text()).on("click",function(x){var y=a("div#page-container");y.animate({scrollTop:v.offset().top-y.offset().top+y.scrollTop()-20},500);if(v.attr("tabindex")==l){v.attr("tabindex","-1")}v.focus()});a("<li>").append(u).appendTo(r)});if(r.children().length){r.parent().show()}else{r.parent().hide()}},timelineLoadMore:function(){var q=this;var r=a(this.element)||a(e);r.find("a[data-z-time]").each(function(){var u=a(this);var t=u.closest("li");var v=u.attr(f.Url);var s={loadMoreTag:u.attr("data-z-time")};if(v!=l&&v!=""){u.on("click",function(){a.ajax({url:v,type:"GET",data:s,dataType:"html",cache:false,}).done(function(y,z,x){var A=a("<div>").append(y);t.before(A);t.remove();q.prepareNewContent(A);var w=A.contents();A.replaceWith(w);w.filter("li")[0].scrollIntoView()}).fail(function(y,x,w){a.zeusValidate.addError("Error occurred while loading timeline.")})})}})},fixMarkup:function(){var q=a(this.element)||a(e);q.find(".panel .panel").each(function(){var r=a(this).find(".panel-heading");var s=r.find("h2.panel-title");if(s.length){s.each(function(){var t=a(this);var v=t[0].outerHTML;var u=t.parents(".panel").length+1;t.replaceWith(v.replace("<h2 ","<h"+u+" ").replace("</h2>","</h"+u+">"))})}})},accessKeys:function(){var u=a(this.element)||a(e);var q=a.parseJSON(u.find("div["+f.AccessKeys+"=true]").text());var v={disable_in_input:false,};if(q!=null){if(q.QuickFindAccessKey){var t;shortcut.add(q.QuickFindAccessKey,function(){clearTimeout(t);t=setTimeout(function(){var w=u.find(".theme-panel [data-click=theme-panel-expand]").first();if(w.length){var x=w.parent();if(x.hasClass("active")){x.next().focus()}else{w.focus()}w.click()}},300)},v)}if(q.JumpToAccessKey){var s;shortcut.add(q.JumpToAccessKey,function(){clearTimeout(s);s=setTimeout(function(){var w=u.find(".jump-list a").first();if(w.length){w.focus();w.click()}},300)},v)}if(q.MenuSearchFilter){var r;shortcut.add(q.MenuSearchFilter,function(){clearTimeout(r);r=setTimeout(function(){u.find("a.search-menu-filter").click()},300)},v)}if(q.FocusRightSidebar){shortcut.add(q.FocusRightSidebar,function(){u.find("#sidebar-right").focus()},v)}}},fixColorAdminProblems:function(){var q=this;var s=a(this.element)||a(e);var t="page-sidebar-minified";var v="#page-container";var u=sessionStorage.sidebarState;if(u=="collapsed"){a(v).addClass(t)}else{if(u=="notcollapsed"){a(v).removeClass(t)}}s.find("[data-click=sidebar-toggled]").click(function(w){var x="page-sidebar-toggled";if(s.find("#sidebar").closest(".page-with-two-sidebar").hasClass(x)){s.find("#sidebar").css("display","inline")}else{s.find("#sidebar").css("display","none")}});a(n).off("resize.zeus-sidebar");a(n).on("resize.zeus-sidebar",function(){if(a(n).width()>767){a("#sidebar").css("display","inline")}else{a("#sidebar").css("display","none")}});s.find("ul.dropdown-menu, div.sitepicker, div.settings").each(function(){var x=a(this);var y=x.closest("li.dropdown");s.keyup(function(B){var z=B.keyCode;if(z==9){var A=e.activeElement;if(x.find(A).length==0){w()}}});function w(){var z=l;if(x.hasClass("contract-picker-list")||x.hasClass("sitepicker")){x.css("display","none");if(x.hasClass("sitepicker")){z=x.closest("div.orgsitepicker").find("a.sitepicker-launch span.readers");A("Closes the site picker")}else{z=x.parent().find("a.contract-picker-launch span.readers");A()}}else{if(x.hasClass("settings")){x.addClass("hidden");z=y.find("a.dropdown-toggle span.readers");A()}else{if(y.length==1){y.removeClass("open");z=y.find("a.dropdown-toggle span.readers");A()}}}function A(B){B=B==l?"(Closes the list below)":B;if(z!=l){z.text(function(C,D){if(D.indexOf(B)!=-1){return D.replace("Close","Open").replace(" the "," a ")}})}}}});s.find(".panel a[data-zck=expand]").on("click",function(){var w=a(this);setTimeout(function(){var x=w.closest("div.panel-expand");if(x.length==1){s.on("keyup.zeus-panel-restrict-focus",function(z){var y=z.keyCode;if((y==9)&&x.find(z.target).length==0){z.stopPropagation();x.find("a").first().focus()}})}else{s.off("keyup.zeus-panel-restrict-focus")}},50)});s.find("[data-click=sidebar-minify]").on("click",function(w){var x=a(this).find("span.readers");if(x.length>0){if(x.text()=="Minimize menu"){x.text("Maximize menu")}else{x.text("Minimize menu")}}setTimeout(function(){if(s.find(v).hasClass(t)){sessionStorage.sidebarState="collapsed"}else{sessionStorage.sidebarState="notcollapsed"}},50)});function r(w){var x=w.parent();var y=w.find(".readers").first();if(y.length>0){n.setTimeout(function(){if(x.hasClass("open")){y.text(y.text().replace(/Opens a list below/,"Closes the list below"))}else{y.text(y.text().replace(/Closes the list below/,"Opens a list below"))}},50)}}s.find('a[data-toggle="dropdown"], a[data-toggle="settings-dropdown"]').on("click",function(){r(a(this))});s.find('a[data-toggle="dropdown"], a[data-toggle="settings-dropdown"]').on("focus",function(){r(a(this))});s.find(".sidebar .nav a").click(function(){var x=a(this).next(".sub-menu");var w=a(this).find(".readers").first();if(w.length>0&&x.length>0){n.setTimeout(function(){if(x.is(":visible")){w.text(w.text().replace(/Opens a list below/,"Closes the list below"))}else{w.text(w.text().replace(/Closes the list below/,"Opens a list below"))}},350)}});s.find('button[data-toggle="dropdown"]').on("click.display-fix",function(){var w=a(this);n.setTimeout(function(){var x=w.siblings("ul");x.filter(":visible").each(function(){var y=false;var z={};var B=a(this).offset().top+a(this).height()-a(n).height();if(B>a(n).scrollTop()){y=true;z.scrollTop=B}var A=a(this).offset().left+a(this).width()-a(n).width();if(A>a(n).scrollLeft()){y=true;z.scrollLeft=A}if(y){a("html, body").animate(z,"fast")}})},50)})},calculateColumnWidths:function(){var q=this;var t=a(this.element)||a(e);var r="col-xs-";if(n.matchMedia("(min-width: 1200px)").matches){r="col-lg-"}if(n.matchMedia("(min-width: 1600px)").matches){r="col-xl-"}function s(v){var u=v.children('[class*="'+r+'"]');var C=0;for(var w=0;w<u.length;++w){var A=a(u[w]);var B=12;if(A.hasClass(r+"8")){B=8}if(A.hasClass(r+"6")){B=6}if(A.hasClass(r+"4")){B=4}if(A.hasClass(r+"3")){B=3}var y=C+B;var x=0;var z=0;if(C>0&&y<=12){x=8}if(y<12){z=7}A.css("margin-left",x+"px");A.css("margin-right",z+"px");var D=x+z;if(B==12){A.css("width","calc(100% - "+D+"px)")}else{if(B==8){A.css("width","calc(66.666666% - "+D+"px)")}else{if(B==6){A.css("width","calc(50% - "+D+"px)")}else{if(B==4){A.css("width","calc(33.333333% - "+D+"px)")}else{if(B==3){A.css("width","calc(25% - "+D+"px)")}}}}}if(y>12){C=B}else{if(y==12){C=0}else{C=y}}}v.children().each(function(){s(a(this))})}s(t)},autoLoadUrls:function(){var q=this;var r=a(this.element)||a(e);r.find("["+f.AutoLoadUrl+"]").each(function(){var s=a(this).attr(f.AutoLoadUrl);if(s!=l&&s!=""){s=s.replace(/.*?\//,"/");n.setTimeout(function(){a.fileDownload(s,{httpMethod:"POST"}).done(function(){}).fail(function(){a.zeusValidate.addError("Failed to download file.")})},500)}})},redirectDocumentUploadDownload:function(){var q=this;var r=a(this.element)||a(e);r.find("a").each(function(){var v=a(this);var t=v.attr("href")||"";var w=t.match(/.*\/Components\/DocumentModal\/Document\?TransactionId=(.*)&Guid=(.*)/);if(w!=null){var u=w[1];var s=w[2];v.off("click").on("click",function(y){y.preventDefault();var z="http://localhost:54844/api/document_evidence/transactions/"+u+"/files/"+s+"/?includeBinary=True";var x={type:"GET",dataType:"json",global:false,url:z,cache:false,success:function(K,L,J){var D=K.Data;if(D!=""&&D!=l){var H=D.Title+D.Extension;if(navigator.msSaveBlob){var A=atob(D.Binary);var C=new Array(A.length);for(var I=0;I<A.length;I++){C[I]=A.charCodeAt(I)}var B=new Blob([new Uint8Array(C)],{type:"application/octet-stream"});navigator.msSaveBlob(B,H)}else{var F="data:application/octet-stream;base64,"+D.Binary;var E=e.createElement("a");E.download=H;E.href=F;var G=e.createEvent("MouseEvents");G.initMouseEvent("click",true,true,n,1,0,0,0,0,false,false,false,false,0,null);E.dispatchEvent(G)}}},error:function(B,D,C){var A=2},complete:function(B,C){var A=2},};a.ajax(x)})}})},processTreeview:function(){var q=this;a(".jstree-default").not(".jstree").bind("ready.jstree",function(s,r){var t=s.currentTarget.parentElement.id;a("#"+t+" li").each(function(u){q.treeviewRenderActionIcons(a(this),false,t)});a(".jstree-selflink").off("click").click(function(u){q.bindTreeViewSelfLink(u,a(this));return false});a(".jstree-modal").off("click").click(function(u){u.preventDefault();q.bindTreeViewModalLink(u,a(this));return false})});a(".jstree-default").not(".jstree").bind("open_node.jstree",function(s,r){var t=s.currentTarget.parentElement.id;var u=r.node.li_attr[f.TreeviewNodeId];a("#"+t+" .ztv-expanded").each(function(v){if(a(this).attr(f.TreeviewNodeId)==u){a(this).val("True");a(this).removeData("initialValue")}});a("#"+r.node.id).children("ul").children("li").each(function(v){q.treeviewRenderActionIcons(a(this),true,t)});a("#"+r.node.id+" .jstree-selflink").off("click").click(function(v){v.preventDefault();q.bindTreeViewSelfLink(v,a(this));return false});a("#"+r.node.id+" .jstree-modal").off("click").click(function(v){v.preventDefault();q.bindTreeViewModalLink(v,a(this));return false})});a(".jstree-default").not(".jstree").bind("close_node.jstree",function(s,r){var t=s.currentTarget.parentElement.id;var u=r.node.li_attr[f.TreeviewNodeId];a("#"+t+" .ztv-expanded").each(function(v){if(a(this).attr(f.TreeviewNodeId)==u){a(this).val("False");a(this).removeData("initialValue")}})});a(".jstree-default").not(".jstree").bind("select_node.jstree",function(s,r){var t=s.currentTarget.parentElement.id;var u=r.node.li_attr[f.TreeviewNodeId];a("#"+t+" .ztv-selected").each(function(v){if(a(this).attr(f.TreeviewNodeId)==u){a(this).val("True");a(this).removeData("initialValue")}else{a(this).val("False");a(this).removeData("initialValue")}})});a(".jstree-default").not(".jstree").on("select_node.jstree",function(s,r){var t=a("#"+r.selected).find("a");if(t.attr("href")!="#"&&t.attr("href")!="javascript:;"&&t.attr("href")!=""&&t.attr(f.PropertyNameForAjax)==null){if(t.attr("target")=="_blank"){n.open(t.attr("href"),"_blank")}else{e.location.href=t.attr("href")}return false}});a(".jstree-default").not(".jstree").on("keydown.jstree",".jstree-custactn",a.proxy(function(r){switch(r.which){case 39:r.preventDefault();a(r.currentTarget).next("a").focus();break;case 37:r.preventDefault();a(r.currentTarget).prev("a").focus();break;case 38:r.preventDefault();o=a(r.currentTarget).closest(".jstree").jstree().get_prev_dom(a(r.currentTarget).parent().children("a").first());if(o&&o.length){o.children(".jstree-anchor").focus()}break;case 40:r.preventDefault();o=a(r.currentTarget).closest(".jstree").jstree().get_next_dom(a(r.currentTarget).parent().children("a").first());if(o&&o.length){o.children(".jstree-anchor").focus()}break}},this));a(".jstree-default").not(".jstree").jstree({core:{themes:{responsive:false}},types:{"default":{icon:"fa fa-folder text-warning fa-lg"},file:{icon:"fa fa-file text-inverse fa-lg"}},plugins:["types"],})},treeviewRenderActionIcons:function(u,w,x){var q=this;var v=u.children("a").text();var t='<a href="'+a("#"+x+" .SelfPostbackURL").val()+'" data-ztvaction="Delete" class="jstree-selflink jstree-custactn" tabindex="-1"><span class="readers">Delete for: '+v+'</span><i class="jstree-icon jstree-themeicon fa fa-trash fa-lg text-primary jstree-themeicon-custom" role="presentation" title="Delete for: '+v+'"></i></a>';var r='<a href="'+a("#"+x+" .SelfPostbackURL").val()+'" data-ztvaction="Add" class="jstree-selflink jstree-custactn" tabindex="-1"><span class="readers">Add for: '+v+'</span><i class="jstree-icon jstree-themeicon fa fa-plus fa-lg text-primary jstree-themeicon-custom" role="presentation"title="Add for: '+v+'"></i></a>';var s="";var y=u.attr(f.TreeviewNodeId);a("#"+x+" ."+c.TreeviewNodeCustomAction).each(function(z){if(a(this).attr(f.TreeviewNodeId)==y){s=a(this).val()}});if(u.children("ul").length==1){a(s).insertBefore(u.children("ul"));if(u.attr(f.TreeviewShowTrash)=="True"){a(t).insertBefore(u.children("ul"))}if(u.attr(f.TreeviewShowAdd)=="True"){a(r).insertBefore(u.children("ul"))}if(w){u.children("ul").children("li").each(function(z){var A=a(this);q.treeviewRenderActionIcons(A,true,x)})}}else{u.append(s);if(u.attr(f.TreeviewShowTrash)=="True"){u.append(t)}if(u.attr(f.TreeviewShowAdd)=="True"){u.append(r)}}u.children("[data-zpnfa]:not(.jstree-selflink):has(.jstree-actionbtn)").each(function(z){a(this).wrap("<span class='custom_action_btn'></span>");q.prepareNewContent(a(this).parent());a(this).unwrap()})},bindTreeViewSelfLink:function(r,t){var q=this;var s=a(t).closest(".jstree-container").attr("id");a("#"+s+" .TriggerId").val(a(t).parent().attr(f.TreeviewNodeId));a("#"+s+" .TriggerAction").val(a(t).attr(f.TreeviewActionType));a.ajax({url:a(t).attr("href"),type:"POST",data:a("#main_form #"+s+" input").serialize(),success:function(v){var u=a(v).filter(".jstree-container").attr("id");a("#"+u).wrap("<p/>").parent().html(v);a("#"+u).unwrap();q.prepareNewContent(a("#"+u))}})},bindTreeViewModalLink:function(r,s){var q=this;var t=a(r.target).closest(".jstree-modal").attr("href");a.ajax({url:t,type:"GET",cache:false,global:true,data:"",}).done(function(u,A,z){if(a.zeusValidate.sessionExpired(z)){return}var x="modal-grid";var v=a("#"+x);if(v.length>0){v.remove()}var v=q.makeModalDialogElement("","","",x);var y=function(C){var E=a(r.target).closest(".jstree").parent().attr("id");a(v).data("sourceTreeviewId",E);v.find(".modal-body").html(a.zeusValidate.replaceAll(C,'id="main_form"','id="gridmodal_form"'));var B=a('<a href="javascript:;" class="modal-fix" tabindex="-1">&nbsp;</a>');var D=v.find(".modal-body .nestedButtons");a(D[D.length-1]).prepend(B);q.showModalDialogElement(v);q.prepareNewContent(v);v.find(".modal-body button").not("ul.amc-selected-choices li button").not("button[data-zbcl]").bind("click.zeus-modal-btn",w)};var w=function(E){E.preventDefault();var C=a(this);if(C.hasClass("cancel")&&(C.attr(f.SkipValidation)==l||C.attr(f.SkipValidation)=="false")){q.dismissModalDialogElement(v);return}if(v.hasClass("modal-loading")){return}v.addClass("modal-loading");var H=a('<div class="modal-loader"><span class="spinner-small"></span></div>');gridModalBody=v.find(".modal-body");gridModalBody.prepend(H);var B={url:t,type:"POST",cache:false,global:false};var F=v.find("form");a.zeusValidate.updateCkeditorInstances(F);var D;if(F.find('input[type="file"]').length==0){D=q.serializeform(F)+"&submitType="+C.attr("value")}else{a.extend(B,{processData:false,contentType:false,});D=new FormData();F.find("input,select,textarea").each(function(){var I=a(this);var J=I.attr("name");if(J){J=J.replace(/.*\./,"");if(I.attr("type")=="file"){D.append(J,I[0].files[0])}else{D.append(J,a.zeusValidate.getValueFromInput(I))}}});D.append("submitType",C.attr("value"))}var G=a("#main_form #"+a(v).data("sourceTreeviewId")+" input").serialize();a.extend(B,{data:D+G});a.ajax(B).done(function(I,K,J){if(a.zeusValidate.sessionExpired(J)){return}if(I.redirect!=l){n.location.href=I.redirect;return}H.remove();v.removeClass("modal-loading");var L=a(v).data("sourceTreeviewId");if(a(I).attr("id")==L){a("#"+L).wrap("<p/>").parent().html(I);a("#"+L).unwrap();q.prepareNewContent(a("#"+L));q.dismissModalDialogElement(v)}else{y(I)}}).fail(function(N,M,I){var J=a.zeusValidate.getErrorInAjax(N);var K=a(group.find(".modal .panel-heading .panel-title")[0]);if(K!=l){var L=K.attr("id");K=K.text();K=K.length?'<a class="alert-link" href="#'+L+'">'+K+"</a> - ":K}else{K=""}J=K+(J!=l?J:"Error occurred while loading");if(N.responseText.indexOf("Maximum request length exceeded")>=0){J=K+"Error occurred while loading (maximum request length exceeded)"}a.zeusValidate.addError(J,a(".modal"));H.remove();v.removeClass("modal-loading")})};y(u)}).fail(function(x,w,u){var v=a.zeusValidate.getErrorInAjax(x);v=(v!=l?v:"Error occurred while loading.");a.zeusValidate.addError(v)})}};a.fn[j]=function(q){return this.each(function(){if(!a.data(this,"plugin_"+j)){a.data(this,"plugin_"+j,new p(this,q))}})}})(jQuery,window,document);$(document).ready(function(){$(document).zeus()});
(function(a,d,b,c){a.validator.addMethod("isequalto",function(n,j,l){var g=a("#"+a.zeusValidate.getFieldPrefixFromId(j,l.dependentproperty));var e=l.comparisontype;var m=l.passonnull;var k=l.failonnull;var h=g.val();var f=a.zeusValidate.handleDateTimeComparison(j,n,g,h);n=f.currentPropertyValue;h=f.dependentPropertyValue;if(a.zeusValidate.is(n,e,h,m,k)){return true}return false});a.validator.addMethod("isnotequalto",function(n,j,l){var g=a("#"+a.zeusValidate.getFieldPrefixFromId(j,l.dependentproperty));var e=l.comparisontype;var m=l.passonnull;var k=l.failonnull;var h=g.val();var f=a.zeusValidate.handleDateTimeComparison(j,n,g,h);n=f.currentPropertyValue;h=f.dependentPropertyValue;if(a.zeusValidate.is(n,e,h,m,k)){return true}return false});a.validator.addMethod("isgreaterthan",function(o,k,m){var f=a(k);if(f.attr(a.zeusFullDataTypes.DateTimePicker)=="True"&&f.attr("type")!="hidden"){return true}var h=a("#"+a.zeusValidate.getFieldPrefixFromId(k,m.dependentproperty));var e=m.comparisontype;var n=m.passonnull;var l=m.failonnull;var j=h.val();var g=a.zeusValidate.handleDateTimeComparison(k,o,h,j);o=g.currentPropertyValue;j=g.dependentPropertyValue;if(a.zeusValidate.is(o,e,j,n,l)){return true}return false});a.validator.addMethod("isgreaterthanorequalto",function(o,k,m){var f=a(k);if(f.attr(a.zeusFullDataTypes.DateTimePicker)=="True"&&f.attr("type")!="hidden"){return true}var h=a("#"+a.zeusValidate.getFieldPrefixFromId(k,m.dependentproperty));var e=m.comparisontype;var n=m.passonnull;var l=m.failonnull;var j=h.val();var g=a.zeusValidate.handleDateTimeComparison(k,o,h,j);o=g.currentPropertyValue;j=g.dependentPropertyValue;if(a.zeusValidate.is(o,e,j,n,l)){return true}return false});a.validator.addMethod("islessthan",function(o,k,m){var f=a(k);if(f.attr(a.zeusFullDataTypes.DateTimePicker)=="True"&&f.attr("type")!="hidden"){return true}var h=a("#"+a.zeusValidate.getFieldPrefixFromId(k,m.dependentproperty));var e=m.comparisontype;var n=m.passonnull;var l=m.failonnull;var j=h.val();var g=a.zeusValidate.handleDateTimeComparison(k,o,h,j);o=g.currentPropertyValue;j=g.dependentPropertyValue;if(a.zeusValidate.is(o,e,j,n,l)){return true}return false});a.validator.addMethod("islessthanorequalto",function(o,k,m){var f=a(k);if(f.attr(a.zeusFullDataTypes.DateTimePicker)=="True"&&f.attr("type")!="hidden"){return true}var h=a("#"+a.zeusValidate.getFieldPrefixFromId(k,m.dependentproperty));var e=m.comparisontype;var n=m.passonnull;var l=m.failonnull;var j=h.val();var g=a.zeusValidate.handleDateTimeComparison(k,o,h,j);o=g.currentPropertyValue;j=g.dependentPropertyValue;if(a.zeusValidate.is(o,e,j,n,l)){return true}return false});a.validator.addMethod("isregexmatch",function(n,j,l){var g=a("#"+a.zeusValidate.getFieldPrefixFromId(j,l.dependentproperty));var e=l.comparisontype;var m=l.passonnull;var k=l.failonnull;var h=g.val();var f=a.zeusValidate.handleDateTimeComparison(j,n,g,h);n=f.currentPropertyValue;h=f.dependentPropertyValue;if(a.zeusValidate.is(n,e,h,m,k)){return true}return false});a.validator.addMethod("isnotregexmatch",function(n,j,l){var g=a("#"+a.zeusValidate.getFieldPrefixFromId(j,l.dependentproperty));var e=l.comparisontype;var m=l.passonnull;var k=l.failonnull;var h=g.val();var f=a.zeusValidate.handleDateTimeComparison(j,n,g,h);n=f.currentPropertyValue;h=f.dependentPropertyValue;if(a.zeusValidate.is(n,e,h,m,k)){return true}return false});a.validator.addMethod("requiredif",function(q,f,o){var p=a(f);p.trigger("load.zeus-trigger-requiredif");var e=p.data("requiredif-allconditionsmet");if(e){if(f.type=="checkbox"&&(/^true$/i.test(a(f).data(a.zeusDataTypes.CheckboxList)))){q=false;var g=a('input:checkbox[name="'+a.zeusValidate.replaceAll(f.id,"_",".")+'"]');for(var l=0;l!=g.length;l++){if(g[l]["checked"]){q=true;break}}}else{if(f.type=="radio"){q=false;var g=a('input:radio[name="'+a.zeusValidate.replaceAll(f.id,"_",".")+'"]');for(var l=0;l!=g.length;l++){if(g[l]["checked"]){q=true;break}}}}if(q!=null){var m=q.toString().replace(/^\s\s*/,"").replace(/\s\s*$/,"")!="";if(a.zeusValidate.isDate(q)){return new Date(Date.parse(q))!=new Date("1/01/0001 12:00")}if(a.zeusValidate.isBool(q)){return(/^true$/i.test(q))}if(a.zeusValidate.isInteger(q)){return parseInt(q)!=0}if(a.zeusValidate.isFloat(q)){var h=parseFloat(q);var j=(h+"").split(".");if(j.length==2){var n="0.";for(var k=0;k<j[1].length;k++){n=n+"0"}return h!=parseFloat(n)}return h!=0}return m}}else{return true}return false});a.validator.addMethod("crn",function(k,g){if(this.optional(g)||k==null||k.length==0){return true}if(k.length!=10){return false}var j=512;var f=0;var e=new Array("X","V","T","S","L","K","J","H","C","B","A");for(var h=0;h<=8;h++){if(/^\d+$/.test(k[h])){f+=k[h]*j;j=j/2}else{return false}}return e[f%11]==k[9]});a.validator.addMethod("abn",function(j,f){if(this.optional(f)||j==null||j.length==0){return true}j=a.zeusValidate.replaceAll(j," ","");a(f).val(j);if(j.length!=11){return false}var k=new Array(10,1,3,5,7,9,11,13,15,17,19);var h=0;var e;for(var g=0;g<k.length;g++){if(/^\d+$/.test(j[g])){e=parseInt(j[g]);h+=(g==0)?(e-1)*k[g]:e*k[g]}else{return false}}return(h%89)==0});a.validator.addMethod("currency",function(f,e){return this.optional(e)||/^-?\$?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(f)});a.validator.addMethod("date",function(t,l){if(a(l).is(":hidden")){return true}var j=a(l).data(a.zeusDataTypes.DateTimePicker);var s=false;var k=l.Name;var f="date";if(j!=c){var m=a(a(l).closest(".datetime").find('input[type="hidden"]')[0]);var n=m.val();k=m.data(a.zeusDataTypes.DisplayName);f="date and time";var o=a.zeusValidate.parseDateTimeUsingMoment(n);if(o.isValid()){s=true;m.val(o.format("D/MM/YYYY h:mm A"))}if(s){var e=l.id.substring(0,l.id.lastIndexOf("_"));var g=a.trim(a("#"+e+"_Date").val());var q=a.trim(a("#"+e+"_Time").val());if(l.id.match(/_Date$/)){if(g==""&&q!=""){s=false}}else{if(l.id.match(/_Time$/)){if(g!=""&&q==""){s=false}}}return s}}if(this.optional(l)){return true}var h=a(l).data(a.zeusDataTypes.DatePicker);var r=a(l).data(a.zeusDataTypes.TimePicker);if(t!=c&&t.length){if(h!=c){k=a(l).data(a.zeusDataTypes.DisplayName);var p=a.zeusValidate.parseDateUsingMoment(t);if(p.isValid()){s=true;a(l).val(p.format("D/MM/YYYY"))}}else{if(r!=c){k=a(l).data(a.zeusDataTypes.DisplayName);f="time";s=Date.parseExact(t,"h:mm tt")!=null}}}if(!s){this.settings.messages[l.name].date="The field "+k+" must be a valid "+f+"."}return s})})(jQuery,window,document);$.validator.addMethod("minlength",function(c,a,b){return this.optional(a)||this.getLength($.trim($.zeusValidate.extractNumber(c,a)),a)>=b});$.validator.addMethod("maxlength",function(c,a,b){return this.optional(a)||this.getLength($.trim($.zeusValidate.extractNumber(c,a)),a)<=b});$.validator.addMethod("rangelength",function(f,a,c){var b=new Array();switch(a.nodeName.toLowerCase()){case"select":var d=$("option:selected",a);d.each(function(g,h){if($.inArray(h.value.length,b)==-1){b.push(h.value.length)}});break;case"input":if(this.checkable(a)){b.push(this.findByName(a.name).filter(":checked").length)}break}if(b.length==0){b.push(this.getLength($.zeusValidate.extractNumber(f,a),a))}var e=true;for(i=0;i<b.length;i++){if(!(b[i]>=c[0]&&b[i]<=c[1])){e=false}}return this.optional(a)||e});$.validator.addMethod("min",function(c,a,b){if(c!=undefined&&c!=null){c=c.replace(/\$/g,"").replace(/,/g,"")}return this.optional(a)||c>=b});$.validator.addMethod("max",function(c,a,b){if(c!=undefined&&c!=null){c=c.replace(/\$/g,"").replace(/,/g,"")}return this.optional(a)||c<=b});$.validator.addMethod("range",function(c,a,b){if(c!=undefined&&c!=null){c=c.replace(/\$/g,"").replace(/,/g,"")}return this.optional(a)||(c>=b[0]&&c<=b[1])});jQuery.extend(jQuery.validator.messages,{email:"Enter a valid email address. Example format Job.bloggs@email.com.",url:"Enter a valid URL."});
(function(a,f,c,e){var d=function(g,h,i){g.rules[h]=i;if(g.message){g.messages[h]=g.message}};var b=a.validator.unobtrusive;b.adapters.add("isequalto",["dependentproperty","comparisontype","passonnull","failonnull"],function(g){d(g,"isequalto",{dependentproperty:g.params.dependentproperty,comparisontype:g.params.comparisontype,passonnull:g.params.passonnull,failonnull:g.params.failonnull})});b.adapters.add("isnotequalto",["dependentproperty","comparisontype","passonnull","failonnull"],function(g){d(g,"isnotequalto",{dependentproperty:g.params.dependentproperty,comparisontype:g.params.comparisontype,passonnull:g.params.passonnull,failonnull:g.params.failonnull})});b.adapters.add("isgreaterthan",["dependentproperty","comparisontype","passonnull","failonnull"],function(g){d(g,"isgreaterthan",{dependentproperty:g.params.dependentproperty,comparisontype:g.params.comparisontype,passonnull:g.params.passonnull,failonnull:g.params.failonnull})});b.adapters.add("isgreaterthanorequalto",["dependentproperty","comparisontype","passonnull","failonnull"],function(g){d(g,"isgreaterthanorequalto",{dependentproperty:g.params.dependentproperty,comparisontype:g.params.comparisontype,passonnull:g.params.passonnull,failonnull:g.params.failonnull})});b.adapters.add("islessthan",["dependentproperty","comparisontype","passonnull","failonnull"],function(g){d(g,"islessthan",{dependentproperty:g.params.dependentproperty,comparisontype:g.params.comparisontype,passonnull:g.params.passonnull,failonnull:g.params.failonnull})});b.adapters.add("islessthanorequalto",["dependentproperty","comparisontype","passonnull","failonnull"],function(g){d(g,"islessthanorequalto",{dependentproperty:g.params.dependentproperty,comparisontype:g.params.comparisontype,passonnull:g.params.passonnull,failonnull:g.params.failonnull})});b.adapters.add("isregexmatch",["dependentproperty","comparisontype","passonnull","failonnull"],function(g){d(g,"isregexmatch",{dependentproperty:g.params.dependentproperty,comparisontype:g.params.comparisontype,passonnull:g.params.passonnull,failonnull:g.params.failonnull})});b.adapters.add("isnotregexmatch",["dependentproperty","comparisontype","passonnull","failonnull"],function(g){d(g,"isnotregexmatch",{dependentproperty:g.params.dependentproperty,comparisontype:g.params.comparisontype,passonnull:g.params.passonnull,failonnull:g.params.failonnull})});b.adapters.add("requiredif",["contingencies"],function(g){var h={};d(g,"requiredif",h)});b.adapters.add("required",function(g){d(g,"required",true)});b.adapters.addBool("crn");b.adapters.addBool("abn");b.adapters.addBool("currency")})(jQuery,window,document);$(function(){setupFormValidation($(document))});function setupFormValidation(a){a.find("form").each(function(){var d=function(h){var g=$(h).data($.zeusDataTypes.DisplayName);if(g==undefined){g=$(h)[0].name}return g};var b=function(g){return g.replace(/([!"#$%&'()*+,./:;<=>?@\[\\\]^`{|}~])/g,"\\$1")};$(this).unbind("invalid-form.validate");$(this).bind("invalid-form.validate",function(k,m){var h=$(this).find("section#validation-error-summary"),l=h.find("ul");if(l&&l.length&&m.errorList.length){l.empty();h.addClass("validation-summary-errors");h.addClass("alert");h.addClass("alert-danger");h.removeClass("validation-summary-valid");h.removeClass("noErrors");var j=[];$.each(m.errorList,function(){var p=$(this.element)[0].id;var u=undefined;var q=this.message;var o=$("#"+p+"_Date").length&&$("#"+p+"_Time").length;if(o){p=p+"_Date"}var r="a.errorTip["+$.zeusFullDataTypes.ErrorTipFor+'="'+p+'"]';var s=$("#"+p).closest("iscontainer").find(r);if(s.length==0){s=$(r)}$(s).each(function(){var v=$(this);$(v).find('span[for="'+p+'"]').text("Error: "+q);return});var n=$("<a class='alert-link' href=\"javascript:;\">"+d(this.element)+"</a>").on("click",function(w){var v=$("#"+p);$.zeusValidate.focusErrorOnElement(v)});u=$("<li />").append(n).append(" - "+this.message);var t=d(this.element)+" - "+this.message;if(u!=undefined&&$.inArray(t,j)==-1){u.appendTo(l);j.push(t)}});var g=l.find("a");if(g.length){g.first().focus()}}var i=$("#validation-error-summary h4");if(i.length){i.attr("tabindex","-1");i.focus();$("div#page-container").animate({scrollTop:0},"fast")}});var f=$.data($(this)[0],"validator");var e=f.settings;e.focusInvalid=false;e.onkeyup=e.onclick=e.onfocusout=function(){};e.ignore=function(){var h=$("#content");if(h!=undefined){var m=(/^true$/i.test(h.data($.zeusDataTypes.SkipValidation)))?true:false;if(m){return true}}var i=$(this).is(":disabled")||$(this).is("[readonly]");var k=$(this).is(":hidden");if(k){var j=$("#"+this.id+"_Date");var n=$("#"+this.id+"_Time");if(j.length&&n.length){return j.is(":hidden")}var g=$(this).siblings().first();if(g.length>0&&g.is(".amc-aria-multi-complete")){return g.is(":hidden")}var l=$(this).closest("["+$.zeusFullDataTypes.RichTextArea+"='true']");if($(this).is("textarea")&&l.length&&l.is(":visible")){return false}return true}return i?true:false};var c=$(this);e.errorPlacement=function(j,k){var h=c.find("[data-valmsg-for='"+b(k[0].name)+"']"),l=$.parseJSON(h.attr("data-valmsg-replace"))!==false;h.removeClass("field-validation-valid").addClass("field-validation-error");j.data("unobtrusiveContainer",h);var i=$("#"+k[0].id);var g=i.siblings().first();if(g.length>0&&g.is(".amc-aria-multi-complete")){i=g.find(".amc-box")}if(l){h.empty();$("["+$.zeusFullDataTypes.ErrorTipFor+'="'+b(k[0].name)+'"]').hide();i.removeClass("parsley-error");j.removeClass("input-validation-error").appendTo(h);j.removeClass("input-validation-error").appendTo($("["+$.zeusFullDataTypes.ErrorTipFor+'="'+b(k[0].name)+'"]'));if(j[0].innerHTML.length>0){$("["+$.zeusFullDataTypes.ErrorTipFor+'="'+b(k[0].name)+'"]').show();i.addClass("parsley-error")}}else{j.hide();$("["+$.zeusFullDataTypes.ErrorTipFor+'="'+b(k[0].name)+'"]').hide();i.removeClass("parsley-error")}};f.elements=function(){var i=this,h={};var g="select["+$.zeusFullDataTypes.AddressAutocomplete+"=true]:disabled";return $(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, "+g).not(this.settings.ignore).filter(function(){if(!this.name&&i.settings.debug&&window.console){console.error("%o has no name assigned",this)}if(this.name in h||!i.objectLength($(this).rules())){return false}h[this.name]=true;return true})};f.showLabel=function(g,j){var i=this.errorsFor(g);if(i.length){i.removeClass(this.settings.validClass).addClass(this.settings.errorClass);i.attr("generated")&&i.html(j)}else{var k=j!==undefined?"Error: "+j:"";i=$("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(g),generated:true}).addClass(this.settings.errorClass).html(k);if(this.settings.wrapper){i=i.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()}if(!this.labelContainer.append(i).length){this.settings.errorPlacement?this.settings.errorPlacement(i,$(g)):i.insertAfter(g)}}if(!j&&this.settings.success){i.text("");typeof this.settings.success=="string"?i.addClass(this.settings.success):this.settings.success(i)}this.toShow=this.toShow.add(i);var l=this.idOrName(g);var h=$("["+$.zeusFullDataTypes.ErrorTipFor+'="'+l+'"]');if(h.length==0){while(l.indexOf("_")>=0){l=l.replace("_",".")}h=$("["+$.zeusFullDataTypes.ErrorTipFor+'="'+l+'"]')}if(j===undefined){h.find('[generated="true"]').remove()}else{var m=h.find('[generated="true"]');if(m.length>1){m.next().remove()}}};$.validator.methods.required=function(n,j,k){var i=$(j).data($.zeusDataTypes.DateTimePicker);if(i!=undefined){var g=j.id.substring(0,j.id.lastIndexOf("_"));var h=$.trim($("#"+g+"_Date").val());var l=$.trim($("#"+g+"_Time").val());if((h==""&&l!="")||(h!=""&&l=="")){return true}}if(!this.depend(k,j)){return"dependency-mismatch"}if(j.nodeName.toLowerCase()==="select"){var m=$(j).val();return m&&m.length>0}if(this.checkable(j)){return this.getLength(n,j)>0}return $.trim(n).length>0}})}(function(a){a.validator.unobtrusive.parseDynamicContent=function(c){a.validator.unobtrusive.parse(c);var b=a(c).first().closest("form");if(b.length==0){b=a("#main_form")}setupFormValidation(b.parent());var d=b.data("unobtrusiveValidation");var e=b.validate();if(d==undefined||d.options==null||d.options==undefined){return}a.each(d.options.rules,function(g,h){if(e.settings.rules[g]==undefined){var f={};a.extend(f,h);f.messages=d.options.messages[g];a("[name='"+g+"']").rules("add",f)}else{a.each(h,function(k,j){if(e.settings.rules[g][k]==undefined){var i={};i[k]=j;i.messages=d.options.messages[g][k];a("[name='"+g+"']").rules("add",i)}})}})}})($);
$(document).ready(function(){$("#advancedSearchB").click(function(){$("#advancedSearch").slideToggle(300)});var a=$("#skipLinks");a.find("a").focus(function(){a.removeClass("readers")}).blur(function(){a.addClass("readers")});$(".skip").focus(function(){$(this).removeClass("readers")});$(".skip").blur(function(){$(this).addClass("readers")});$("ul a").focus(function(){$(this).parents("li").addClass("hover")}).blur(function(){$(this).parents("li").removeClass("hover")});$("a[href^='#']").click(function(){var c=$(this).attr("href");var b=$(c);if((!b.is("a")||!b.attr("href"))&&!b.is("input")){b.attr("tabindex","-1")}b.focus()});$("article.collapsible").each(function(){var b,d,c;b=$(this);d=b.find(".collapsiblePannel");c=d.children();b.find(".collapsibleLink").click(function(){if(b.hasClass("open")){$(this).find("em").text("open");d.animate({height:0,padding:"0 15"},function(){$(this).hide()})}else{$(this).find("em").text("close");var e=d.show().height("auto").height();d.height(0).animate({height:e,padding:15})}b.toggleClass("open close");return false});b.click()})});
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof module!=="undefined"&&module.exports){module.exports=a(require("jquery"))}else{a(jQuery)}}}(function(a,q){
/*
 * jsTree 3.2.1
 * http://jstree.com/
 *
 * Copyright (c) 2014 Ivan Bozhanov (http://vakata.com)
 *
 * Licensed same as jquery - under the terms of the MIT License
 *   http://www.opensource.org/licenses/mit-license.php
 */
/*
 * if using jslint please allow for the jQuery global and use following options:
 * jslint: browser: true, ass: true, bitwise: true, continue: true, nomen: true, plusplus: true, regexp: true, unparam: true, todo: true, white: true
 */
if(a.jstree){return}var l=0,h=false,g=false,f=false,o=[],n=a("script:last").attr("src"),j=window.document,c=j.createElement("LI"),d,e;c.setAttribute("role","treeitem");d=j.createElement("I");d.className="jstree-icon jstree-ocl";d.setAttribute("role","presentation");c.appendChild(d);d=j.createElement("A");d.className="jstree-anchor";d.setAttribute("href","#");d.setAttribute("tabindex","-1");e=j.createElement("I");e.className="jstree-icon jstree-themeicon";e.setAttribute("role","presentation");d.appendChild(e);c.appendChild(d);d=e=null;a.jstree={version:"3.2.1",defaults:{plugins:[]},plugins:{},path:n&&n.indexOf("/")!==-1?n.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%?`]/g,root:"#"};a.jstree.create=function(r,t){var u=new a.jstree.core(++l),s=t;t=a.extend(true,{},a.jstree.defaults,t);if(s&&s.plugins){t.plugins=s.plugins}a.each(t.plugins,function(v,w){if(v!=="core"){u=u.plugin(w,t[w])}});a(r).data("jstree",u);u.init(r,t);return u};a.jstree.destroy=function(){a(".jstree:jstree").jstree("destroy");a(j).off(".jstree")};a.jstree.core=function(r){this._id=r;this._cnt=0;this._wrk=null;this._data={core:{themes:{name:false,dots:false,icons:false},selected:[],last_error:{},working:false,worker_queue:[],focused:null}}};a.jstree.reference=function(s){var u=null,t=null;if(s&&s.id&&(!s.tagName||!s.nodeType)){s=s.id}if(!t||!t.length){try{t=a(s)}catch(r){}}if(!t||!t.length){try{t=a("#"+s.replace(a.jstree.idregex,"\\$&"))}catch(r){}}if(t&&t.length&&(t=t.closest(".jstree")).length&&(t=t.data("jstree"))){u=t}else{a(".jstree").each(function(){var v=a(this).data("jstree");if(v&&v._model.data[s]){u=v;return false}})}return u};a.fn.jstree=function(r){var t=(typeof r==="string"),s=Array.prototype.slice.call(arguments,1),u=null;if(r===true&&!this.length){return false}this.each(function(){var v=a.jstree.reference(this),w=t&&v?v[r]:null;u=t&&w?w.apply(v,s):null;if(!v&&!t&&(r===q||a.isPlainObject(r))){a.jstree.create(this,r)}if((v&&!t)||r===true){u=v||false}if(u!==null&&u!==q){return false}});return u!==null&&u!==q?u:this};a.expr[":"].jstree=a.expr.createPseudo(function(r){return function(s){return a(s).hasClass("jstree")&&a(s).data("jstree")!==q}});a.jstree.defaults.core={data:false,strings:false,check_callback:false,error:a.noop,animation:200,multiple:true,themes:{name:false,url:false,dir:false,dots:true,icons:true,stripes:false,variant:false,responsive:false},expand_selected_onload:true,worker:true,force_text:false,dblclick_toggle:true};a.jstree.core.prototype={plugin:function(s,t){var r=a.jstree.plugins[s];if(r){this._data[s]={};r.prototype=this;return new r(t,this)}return this},init:function(r,s){this._model={data:{},changed:[],force_full_redraw:false,redraw_timeout:false,default_state:{loaded:true,opened:false,selected:false,disabled:false}};this._model.data[a.jstree.root]={id:a.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:false}};this.element=a(r).addClass("jstree jstree-"+this._id);this.settings=s;this._data.core.ready=false;this._data.core.loaded=false;this._data.core.rtl=(this.element.css("direction")==="rtl");this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl");this.element.attr("role","tree");if(this.settings.core.multiple){this.element.attr("aria-multiselectable",true)}if(!this.element.attr("tabindex")){this.element.attr("tabindex","0")}this.bind();this.trigger("init");this._data.core.original_container_html=this.element.find(" > ul > li").clone(true);this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return this.nodeType===3&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove();this.element.html("<ul class='jstree-container-ul jstree-children' role='group'><li id='j"+this._id+"_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='tree-item'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>");this.element.attr("aria-activedescendant","j"+this._id+"_loading");this._data.core.li_height=this.get_container_ul().children("li").first().height()||24;this.trigger("loading");this.load_node(a.jstree.root)},destroy:function(s){if(this._wrk){try{window.URL.revokeObjectURL(this._wrk);this._wrk=null}catch(r){}}if(!s){this.element.empty()}this.teardown()},teardown:function(){this.unbind();this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/ig,"")});this.element=null},bind:function(){var t="",r=null,s=0;this.element.on("dblclick.jstree",function(u){if(u.target.tagName&&u.target.tagName.toLowerCase()==="input"){return true}if(j.selection&&j.selection.empty){j.selection.empty()}else{if(window.getSelection){var w=window.getSelection();try{w.removeAllRanges();w.collapse()}catch(v){}}}}).on("mousedown.jstree",a.proxy(function(u){if(u.target===this.element[0]){u.preventDefault();s=+(new Date())}},this)).on("mousedown.jstree",".jstree-ocl",function(u){u.preventDefault()}).on("click.jstree",".jstree-ocl",a.proxy(function(u){this.toggle_node(u.target)},this)).on("dblclick.jstree",".jstree-anchor",a.proxy(function(u){if(u.target.tagName&&u.target.tagName.toLowerCase()==="input"){return true}if(this.settings.core.dblclick_toggle){this.toggle_node(u.target)}},this)).on("click.jstree",".jstree-anchor",a.proxy(function(u){u.preventDefault();if(u.currentTarget!==j.activeElement){a(u.currentTarget).focus()}this.activate_node(u.currentTarget,u)},this)).on("keydown.jstree",".jstree-anchor",a.proxy(function(u){if(u.target.tagName&&u.target.tagName.toLowerCase()==="input"){return true}if(u.which!==32&&u.which!==13&&(u.shiftKey||u.ctrlKey||u.altKey||u.metaKey)){return true}var v=null;if(this._data.core.rtl){if(u.which===37){u.which=39}else{if(u.which===39){u.which=37}}}switch(u.which){case 32:u.preventDefault();if(this.is_closed(u.currentTarget)){this.open_node(u.currentTarget,function(w){this.get_node(w,true).children(".jstree-anchor").focus()})}else{if(this.is_open(u.currentTarget)){this.close_node(u.currentTarget)}}break;case 13:u.type="click";a(u.currentTarget).trigger(u);break;case 39:u.preventDefault();a(u.currentTarget).next("a").focus();break;case 38:u.preventDefault();v=this.get_prev_dom(u.currentTarget);if(v&&v.length){v.children(".jstree-anchor").focus()}break;case 40:u.preventDefault();v=this.get_next_dom(u.currentTarget);if(v&&v.length){v.children(".jstree-anchor").focus()}break;case 106:this.open_all();break;case 36:u.preventDefault();v=this._firstChild(this.get_container_ul()[0]);if(v){a(v).children(".jstree-anchor").filter(":visible").focus()}break;case 35:u.preventDefault();this.element.find(".jstree-anchor").filter(":visible").last().focus();break;
/*
							// delete
							case 46:
								e.preventDefault();
								o = this.get_node(e.currentTarget);
								if(o && o.id && o.id !== $.jstree.root) {
									o = this.is_selected(o) ? this.get_selected() : o;
									this.delete_node(o);
								}
								break;
							// f2
							case 113:
								e.preventDefault();
								o = this.get_node(e.currentTarget);
								if(o && o.id && o.id !== $.jstree.root) {
									// this.edit(o);
								}
								break;
							default:
								// console.log(e.which);
								break;
							*/
}},this)).on("load_node.jstree",a.proxy(function(v,u){if(u.status){if(u.node.id===a.jstree.root&&!this._data.core.loaded){this._data.core.loaded=true;if(this._firstChild(this.get_container_ul()[0])){this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id)}this.trigger("loaded")}if(!this._data.core.ready){setTimeout(a.proxy(function(){if(this.element&&!this.get_container_ul().find(".jstree-loading").length){this._data.core.ready=true;if(this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var y=[],w,x;for(w=0,x=this._data.core.selected.length;w<x;w++){y=y.concat(this._model.data[this._data.core.selected[w]].parents)}y=a.vakata.array_unique(y);for(w=0,x=y.length;w<x;w++){this.open_node(y[w],false,0)}}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}this.trigger("ready")}},this),0)}}},this)).on("keypress.jstree",a.proxy(function(w){if(w.target.tagName&&w.target.tagName.toLowerCase()==="input"){return true}if(r){clearTimeout(r)}r=setTimeout(function(){t=""},500);var u=String.fromCharCode(w.which).toLowerCase(),v=this.element.find(".jstree-anchor").filter(":visible"),y=v.index(j.activeElement)||0,x=false;t+=u;if(t.length>1){v.slice(y).each(a.proxy(function(z,A){if(a(A).text().toLowerCase().indexOf(t)===0){a(A).focus();x=true;return false}},this));if(x){return}v.slice(0,y).each(a.proxy(function(z,A){if(a(A).text().toLowerCase().indexOf(t)===0){a(A).focus();x=true;return false}},this));if(x){return}}if(new RegExp("^"+u.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+"+$").test(t)){v.slice(y+1).each(a.proxy(function(z,A){if(a(A).text().toLowerCase().charAt(0)===u){a(A).focus();x=true;return false}},this));if(x){return}v.slice(0,y+1).each(a.proxy(function(z,A){if(a(A).text().toLowerCase().charAt(0)===u){a(A).focus();x=true;return false}},this));if(x){return}}},this)).on("init.jstree",a.proxy(function(){var u=this.settings.core.themes;this._data.core.themes.dots=u.dots;this._data.core.themes.stripes=u.stripes;this._data.core.themes.icons=u.icons;this.set_theme(u.name||"default",u.url);this.set_theme_variant(u.variant)},this)).on("loading.jstree",a.proxy(function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"]();this[this._data.core.themes.icons?"show_icons":"hide_icons"]();this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"]()},this)).on("blur.jstree",".jstree-anchor",a.proxy(function(u){this._data.core.focused=null;a(u.currentTarget).filter(".jstree-hovered").mouseleave();this.element.attr("tabindex","0")},this)).on("focus.jstree",".jstree-anchor",a.proxy(function(u){var v=this.get_node(u.currentTarget);if(v&&v.id){this._data.core.focused=v.id}this.element.find(".jstree-hovered").not(u.currentTarget).mouseleave();a(u.currentTarget).mouseenter();this.element.attr("tabindex","-1")},this)).on("focus.jstree",a.proxy(function(){if(+(new Date())-s>500&&!this._data.core.focused){s=0;var u=this.get_node(this.element.attr("aria-activedescendant"),true);if(u){u.find("> .jstree-anchor").focus()}}},this)).on("mouseenter.jstree",".jstree-anchor",a.proxy(function(u){this.hover_node(u.currentTarget)},this)).on("mouseleave.jstree",".jstree-anchor",a.proxy(function(u){this.dehover_node(u.currentTarget)},this))},unbind:function(){this.element.off(".jstree");a(j).off(".jstree-"+this._id)},trigger:function(s,r){if(!r){r={}}r.instance=this;this.element.triggerHandler(s.replace(".jstree","")+".jstree",r)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children").first()},get_string:function(s){var r=this.settings.core.strings;if(a.isFunction(r)){return r.call(this,s)}if(r&&r[s]){return r[s]}return s},_firstChild:function(r){r=r?r.firstChild:null;while(r!==null&&r.nodeType!==1){r=r.nextSibling}return r},_nextSibling:function(r){r=r?r.nextSibling:null;while(r!==null&&r.nodeType!==1){r=r.nextSibling}return r},_previousSibling:function(r){r=r?r.previousSibling:null;while(r!==null&&r.nodeType!==1){r=r.previousSibling}return r},get_node:function(u,r){if(u&&u.id){u=u.id}var s;try{if(this._model.data[u]){u=this._model.data[u]}else{if(typeof u==="string"&&this._model.data[u.replace(/^#/,"")]){u=this._model.data[u.replace(/^#/,"")]}else{if(typeof u==="string"&&(s=a("#"+u.replace(a.jstree.idregex,"\\$&"),this.element)).length&&this._model.data[s.closest(".jstree-node").attr("id")]){u=this._model.data[s.closest(".jstree-node").attr("id")]}else{if((s=a(u,this.element)).length&&this._model.data[s.closest(".jstree-node").attr("id")]){u=this._model.data[s.closest(".jstree-node").attr("id")]}else{if((s=a(u,this.element)).length&&s.hasClass("jstree")){u=this._model.data[a.jstree.root]}else{return false}}}}}if(r){u=u.id===a.jstree.root?this.element:a("#"+u.id.replace(a.jstree.idregex,"\\$&"),this.element)}return u}catch(t){return false}},get_path:function(v,r,t){v=v.parents?v:this.get_node(v);if(!v||v.id===a.jstree.root||!v.parents){return false}var s,u,w=[];w.push(t?v.id:v.text);for(s=0,u=v.parents.length;s<u;s++){w.push(t?v.parents[s]:this.get_text(v.parents[s]))}w=w.reverse().slice(1);return r?w.join(r):w},get_next_dom:function(r,s){var t;r=this.get_node(r,true);if(r[0]===this.element[0]){t=this._firstChild(this.get_container_ul()[0]);while(t&&t.offsetHeight===0){t=this._nextSibling(t)}return t?a(t):false}if(!r||!r.length){return false}if(s){t=r[0];do{t=this._nextSibling(t)}while(t&&t.offsetHeight===0);return t?a(t):false}if(r.hasClass("jstree-open")){t=this._firstChild(r.children(".jstree-children")[0]);while(t&&t.offsetHeight===0){t=this._nextSibling(t)}if(t!==null){return a(t)}}t=r[0];do{t=this._nextSibling(t)}while(t&&t.offsetHeight===0);if(t!==null){return a(t)}return r.parentsUntil(".jstree",".jstree-node").nextAll(".jstree-node:visible").first()},get_prev_dom:function(r,s){var t;r=this.get_node(r,true);if(r[0]===this.element[0]){t=this.get_container_ul()[0].lastChild;while(t&&t.offsetHeight===0){t=this._previousSibling(t)}return t?a(t):false}if(!r||!r.length){return false}if(s){t=r[0];do{t=this._previousSibling(t)}while(t&&t.offsetHeight===0);return t?a(t):false}t=r[0];do{t=this._previousSibling(t)}while(t&&t.offsetHeight===0);if(t!==null){r=a(t);while(r.hasClass("jstree-open")){r=r.children(".jstree-children").first().children(".jstree-node:visible:last")}return r}t=r[0].parentNode.parentNode;return t&&t.className&&t.className.indexOf("jstree-node")!==-1?a(t):false},get_parent:function(r){r=this.get_node(r);if(!r||r.id===a.jstree.root){return false}return r.parent},get_children_dom:function(r){r=this.get_node(r,true);if(r[0]===this.element[0]){return this.get_container_ul().children(".jstree-node")}if(!r||!r.length){return false}return r.children(".jstree-children").children(".jstree-node")},is_parent:function(r){r=this.get_node(r);return r&&(r.state.loaded===false||r.children.length>0)},is_loaded:function(r){r=this.get_node(r);return r&&r.state.loaded},is_loading:function(r){r=this.get_node(r);return r&&r.state&&r.state.loading},is_open:function(r){r=this.get_node(r);return r&&r.state.opened},is_closed:function(r){r=this.get_node(r);return r&&this.is_parent(r)&&!r.state.opened},is_leaf:function(r){return !this.is_parent(r)},load_node:function(x,s){var v,w,t,u,r;if(a.isArray(x)){this._load_nodes(x.slice(),s);return true}x=this.get_node(x);if(!x){if(s){s.call(this,x,false)}return false}if(x.state.loaded){x.state.loaded=false;for(v=0,w=x.children_d.length;v<w;v++){for(t=0,u=x.parents.length;t<u;t++){this._model.data[x.parents[t]].children_d=a.vakata.array_remove_item(this._model.data[x.parents[t]].children_d,x.children_d[v])}if(this._model.data[x.children_d[v]].state.selected){r=true;this._data.core.selected=a.vakata.array_remove_item(this._data.core.selected,x.children_d[v])}delete this._model.data[x.children_d[v]]}x.children=[];x.children_d=[];if(r){this.trigger("changed",{action:"load_node",node:x,selected:this._data.core.selected})}}x.state.failed=false;x.state.loading=true;this.get_node(x,true).addClass("jstree-loading").attr("aria-busy",true);this._load_node(x,a.proxy(function(D){x=this._model.data[x.id];x.state.loading=false;x.state.loaded=D;x.state.failed=!x.state.loaded;var y=this.get_node(x,true),A=0,B=0,C=this._model.data,z=false;for(A=0,B=x.children.length;A<B;A++){if(C[x.children[A]]&&!C[x.children[A]].state.hidden){z=true;break}}if(x.state.loaded&&!z&&y&&y.length&&!y.hasClass("jstree-leaf")){y.removeClass("jstree-closed jstree-open").addClass("jstree-leaf")}y.removeClass("jstree-loading").attr("aria-busy",false);this.trigger("load_node",{node:x,status:D});if(s){s.call(this,x,D)}},this));return true},_load_nodes:function(y,t,v){var z=true,s=function(){this._load_nodes(y,t,true)},x=this._model.data,u,w,A=[];for(u=0,w=y.length;u<w;u++){if(x[y[u]]&&((!x[y[u]].state.loaded&&!x[y[u]].state.failed)||!v)){if(!this.is_loading(y[u])){this.load_node(y[u],s)}z=false}}if(z){for(u=0,w=y.length;u<w;u++){if(x[y[u]]&&x[y[u]].state.loaded){A.push(y[u])}}if(t&&!t.done){t.call(this,A);t.done=true}}},load_all:function(w,s){if(!w){w=a.jstree.root}w=this.get_node(w);if(!w){return false}var x=[],v=this._model.data,r=v[w.id].children_d,t,u;if(w.state&&!w.state.loaded){x.push(w.id)}for(t=0,u=r.length;t<u;t++){if(v[r[t]]&&v[r[t]].state&&!v[r[t]].state.loaded){x.push(r[t])}}if(x.length){this._load_nodes(x,function(){this.load_all(w,s)})}else{if(s){s.call(this,w)}this.trigger("load_all",{node:w})}},_load_node:function(u,r){var v=this.settings.core.data,w;if(!v){if(u.id===a.jstree.root){return this._append_html_data(u,this._data.core.original_container_html.clone(true),function(s){r.call(this,s)})}else{return r.call(this,false)}}if(a.isFunction(v)){return v.call(this,u,a.proxy(function(s){if(s===false){r.call(this,false)}this[typeof s==="string"?"_append_html_data":"_append_json_data"](u,typeof s==="string"?a(a.parseHTML(s)).filter(function(){return this.nodeType!==3}):s,function(t){r.call(this,t)})},this))}if(typeof v==="object"){if(v.url){v=a.extend(true,{},v);if(a.isFunction(v.url)){v.url=v.url.call(this,u)}if(a.isFunction(v.data)){v.data=v.data.call(this,u)}return a.ajax(v).done(a.proxy(function(s,y,A){var z=A.getResponseHeader("Content-Type");if((z&&z.indexOf("json")!==-1)||typeof s==="object"){return this._append_json_data(u,s,function(t){r.call(this,t)})}if((z&&z.indexOf("html")!==-1)||typeof s==="string"){return this._append_html_data(u,a(a.parseHTML(s)).filter(function(){return this.nodeType!==3}),function(t){r.call(this,t)})}this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:u.id,xhr:A})};this.settings.core.error.call(this,this._data.core.last_error);return r.call(this,false)},this)).fail(a.proxy(function(s){r.call(this,false);this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:u.id,xhr:s})};this.settings.core.error.call(this,this._data.core.last_error)},this))}w=(a.isArray(v)||a.isPlainObject(v))?JSON.parse(JSON.stringify(v)):v;if(u.id===a.jstree.root){return this._append_json_data(u,w,function(s){r.call(this,s)})}else{this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:u.id})};this.settings.core.error.call(this,this._data.core.last_error);return r.call(this,false)}}if(typeof v==="string"){if(u.id===a.jstree.root){return this._append_html_data(u,a(a.parseHTML(v)).filter(function(){return this.nodeType!==3}),function(s){r.call(this,s)})}else{this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:u.id})};this.settings.core.error.call(this,this._data.core.last_error);return r.call(this,false)}}return r.call(this,false)},_node_changed:function(r){r=this.get_node(r);if(r){this._model.changed.push(r.id)}},_append_html_data:function(w,v,r){w=this.get_node(w);w.children=[];w.children_d=[];var u=v.is("ul")?v.children():v,C=w.id,t=[],x=[],A=this._model.data,B=A[C],D=this._data.core.selected.length,E,y,z;u.each(a.proxy(function(s,F){E=this._parse_model_from_html(a(F),C,B.parents.concat());if(E){t.push(E);x.push(E);if(A[E].children_d.length){x=x.concat(A[E].children_d)}}},this));B.children=t;B.children_d=x;for(y=0,z=B.parents.length;y<z;y++){A[B.parents[y]].children_d=A[B.parents[y]].children_d.concat(x)}this.trigger("model",{nodes:x,parent:C});if(C!==a.jstree.root){this._node_changed(C);this.redraw()}else{this.get_container_ul().children(".jstree-initial-node").remove();this.redraw(true)}if(this._data.core.selected.length!==D){this.trigger("changed",{action:"model",selected:this._data.core.selected})}r.call(this,true)},_append_json_data:function(u,t,s,x){if(this.element===null){return}u=this.get_node(u);u.children=[];u.children_d=[];if(t.d){t=t.d;if(typeof t==="string"){t=JSON.parse(t)}}if(!a.isArray(t)){t=[t]}var A=null,r={df:this._model.default_state,dat:t,par:u.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},y=function(D,S){if(D.data){D=D.data}var C=D.dat,K=D.par,B=[],F=[],w=[],E=D.df,Q=D.t_id,P=D.t_cnt,I=D.m,J=I[K],O=D.sel,R,G,H,N,L=function(U,Y,Z){if(!Z){Z=[]}else{Z=Z.concat()}if(Y){Z.unshift(Y)}var aa=U.id.toString(),W,X,T,V,ab={id:aa,text:U.text||"",icon:U.icon!==S?U.icon:true,parent:Y,parents:Z,children:U.children||[],children_d:U.children_d||[],data:U.data,state:{},li_attr:{id:false},a_attr:{href:"#"},original:false};for(W in E){if(E.hasOwnProperty(W)){ab.state[W]=E[W]}}if(U&&U.data&&U.data.jstree&&U.data.jstree.icon){ab.icon=U.data.jstree.icon}if(ab.icon===S||ab.icon===null||ab.icon===""){ab.icon=true}if(U&&U.data){ab.data=U.data;if(U.data.jstree){for(W in U.data.jstree){if(U.data.jstree.hasOwnProperty(W)){ab.state[W]=U.data.jstree[W]}}}}if(U&&typeof U.state==="object"){for(W in U.state){if(U.state.hasOwnProperty(W)){ab.state[W]=U.state[W]}}}if(U&&typeof U.li_attr==="object"){for(W in U.li_attr){if(U.li_attr.hasOwnProperty(W)){ab.li_attr[W]=U.li_attr[W]}}}if(!ab.li_attr.id){ab.li_attr.id=aa}if(U&&typeof U.a_attr==="object"){for(W in U.a_attr){if(U.a_attr.hasOwnProperty(W)){ab.a_attr[W]=U.a_attr[W]}}}if(U&&U.children&&U.children===true){ab.state.loaded=false;ab.children=[];ab.children_d=[]}I[ab.id]=ab;for(W=0,X=ab.children.length;W<X;W++){T=L(I[ab.children[W]],ab.id,Z);V=I[T];ab.children_d.push(T);if(V.children_d.length){ab.children_d=ab.children_d.concat(V.children_d)}}delete U.data;delete U.children;I[ab.id].original=U;if(ab.state.selected){w.push(ab.id)}return ab.id},M=function(U,Y,Z){if(!Z){Z=[]}else{Z=Z.concat()}if(Y){Z.unshift(Y)}var aa=false,W,X,T,V,ab;do{aa="j"+Q+"_"+(++P)}while(I[aa]);ab={id:false,text:typeof U==="string"?U:"",icon:typeof U==="object"&&U.icon!==S?U.icon:true,parent:Y,parents:Z,children:[],children_d:[],data:null,state:{},li_attr:{id:false},a_attr:{href:"#"},original:false};for(W in E){if(E.hasOwnProperty(W)){ab.state[W]=E[W]}}if(U&&U.id){ab.id=U.id.toString()}if(U&&U.text){ab.text=U.text}if(U&&U.data&&U.data.jstree&&U.data.jstree.icon){ab.icon=U.data.jstree.icon}if(ab.icon===S||ab.icon===null||ab.icon===""){ab.icon=true}if(U&&U.data){ab.data=U.data;if(U.data.jstree){for(W in U.data.jstree){if(U.data.jstree.hasOwnProperty(W)){ab.state[W]=U.data.jstree[W]}}}}if(U&&typeof U.state==="object"){for(W in U.state){if(U.state.hasOwnProperty(W)){ab.state[W]=U.state[W]}}}if(U&&typeof U.li_attr==="object"){for(W in U.li_attr){if(U.li_attr.hasOwnProperty(W)){ab.li_attr[W]=U.li_attr[W]}}}if(ab.li_attr.id&&!ab.id){ab.id=ab.li_attr.id.toString()}if(!ab.id){ab.id=aa}if(!ab.li_attr.id){ab.li_attr.id=ab.id}if(U&&typeof U.a_attr==="object"){for(W in U.a_attr){if(U.a_attr.hasOwnProperty(W)){ab.a_attr[W]=U.a_attr[W]}}}if(U&&U.children&&U.children.length){for(W=0,X=U.children.length;W<X;W++){T=M(U.children[W],ab.id,Z);V=I[T];ab.children.push(T);if(V.children_d.length){ab.children_d=ab.children_d.concat(V.children_d)}}ab.children_d=ab.children_d.concat(ab.children)}if(U&&U.children&&U.children===true){ab.state.loaded=false;ab.children=[];ab.children_d=[]}delete U.data;delete U.children;ab.original=U;I[ab.id]=ab;if(ab.state.selected){w.push(ab.id)}return ab.id};if(C.length&&C[0].id!==S&&C[0].parent!==S){for(G=0,H=C.length;G<H;G++){if(!C[G].children){C[G].children=[]}I[C[G].id.toString()]=C[G]}for(G=0,H=C.length;G<H;G++){I[C[G].parent.toString()].children.push(C[G].id.toString());J.children_d.push(C[G].id.toString())}for(G=0,H=J.children.length;G<H;G++){R=L(I[J.children[G]],K,J.parents.concat());F.push(R);if(I[R].children_d.length){F=F.concat(I[R].children_d)}}for(G=0,H=J.parents.length;G<H;G++){I[J.parents[G]].children_d=I[J.parents[G]].children_d.concat(F)}N={cnt:P,mod:I,sel:O,par:K,dpc:F,add:w}}else{for(G=0,H=C.length;G<H;G++){R=M(C[G],K,J.parents.concat());if(R){B.push(R);F.push(R);if(I[R].children_d.length){F=F.concat(I[R].children_d)}}}J.children=B;J.children_d=F;for(G=0,H=J.parents.length;G<H;G++){I[J.parents[G]].children_d=I[J.parents[G]].children_d.concat(F)}N={cnt:P,mod:I,sel:O,par:K,dpc:F,add:w}}if(typeof window==="undefined"||typeof window.document==="undefined"){postMessage(N)}else{return N}},z=function(F,H){if(this.element===null){return}this._cnt=F.cnt;this._model.data=F.mod;if(H){var B,C,w=F.add,E=F.sel,G=this._data.core.selected.slice(),D=this._model.data;if(E.length!==G.length||a.vakata.array_unique(E.concat(G)).length!==E.length){for(B=0,C=E.length;B<C;B++){if(a.inArray(E[B],w)===-1&&a.inArray(E[B],G)===-1){D[E[B]].state.selected=false}}for(B=0,C=G.length;B<C;B++){if(a.inArray(G[B],E)===-1){D[G[B]].state.selected=true}}}}if(F.add.length){this._data.core.selected=this._data.core.selected.concat(F.add)}this.trigger("model",{nodes:F.dpc,parent:F.par});if(F.par!==a.jstree.root){this._node_changed(F.par);this.redraw()}else{this.redraw(true)}if(F.add.length){this.trigger("changed",{action:"model",selected:this._data.core.selected})}s.call(this,true)};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker){try{if(this._wrk===null){this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+y.toString()],{type:"text/javascript"}))}if(!this._data.core.working||x){this._data.core.working=true;A=new window.Worker(this._wrk);A.onmessage=a.proxy(function(w){z.call(this,w.data,true);try{A.terminate();A=null}catch(B){}if(this._data.core.worker_queue.length){this._append_json_data.apply(this,this._data.core.worker_queue.shift())}else{this._data.core.working=false}},this);if(!r.par){if(this._data.core.worker_queue.length){this._append_json_data.apply(this,this._data.core.worker_queue.shift())}else{this._data.core.working=false}}else{A.postMessage(r)}}else{this._data.core.worker_queue.push([u,t,s,true])}}catch(v){z.call(this,y(r),false);if(this._data.core.worker_queue.length){this._append_json_data.apply(this,this._data.core.worker_queue.shift())}else{this._data.core.working=false}}}else{z.call(this,y(r),false)}},_parse_model_from_html:function(s,x,y){if(!y){y=[]}else{y=[].concat(y)}if(x){y.unshift(x)}var r,u,w=this._model.data,t={id:false,text:false,icon:true,parent:x,parents:y,children:[],children_d:[],data:null,state:{},li_attr:{id:false},a_attr:{href:"#"},original:false},v,A,z;for(v in this._model.default_state){if(this._model.default_state.hasOwnProperty(v)){t.state[v]=this._model.default_state[v]}}A=a.vakata.attributes(s,true);a.each(A,function(B,C){C=a.trim(C);if(!C.length){return true}t.li_attr[B]=C;if(B==="id"){t.id=C.toString()}});A=s.children("a").first();if(A.length){A=a.vakata.attributes(A,true);a.each(A,function(B,C){C=a.trim(C);if(C.length){t.a_attr[B]=C}})}A=s.children("a").first().length?s.children("a").first().clone():s.clone();A.children("ins, i, ul").remove();A=A.html();A=a("<div />").html(A);t.text=this.settings.core.force_text?A.text():A.html();A=s.data();t.data=A?a.extend(true,{},A):null;t.state.opened=s.hasClass("jstree-open");t.state.selected=s.children("a").hasClass("jstree-clicked");t.state.disabled=s.children("a").hasClass("jstree-disabled");if(t.data&&t.data.jstree){for(v in t.data.jstree){if(t.data.jstree.hasOwnProperty(v)){t.state[v]=t.data.jstree[v]}}}A=s.children("a").children(".jstree-themeicon");if(A.length){t.icon=A.hasClass("jstree-themeicon-hidden")?false:A.attr("rel")}if(t.state.icon!==q){t.icon=t.state.icon}if(t.icon===q||t.icon===null||t.icon===""){t.icon=true}A=s.children("ul").children("li");do{z="j"+this._id+"_"+(++this._cnt)}while(w[z]);t.id=t.li_attr.id?t.li_attr.id.toString():z;if(A.length){A.each(a.proxy(function(B,C){r=this._parse_model_from_html(a(C),t.id,y);u=this._model.data[r];t.children.push(r);if(u.children_d.length){t.children_d=t.children_d.concat(u.children_d)}},this));t.children_d=t.children_d.concat(t.children)}else{if(s.hasClass("jstree-closed")){t.state.loaded=false}}if(t.li_attr["class"]){t.li_attr["class"]=t.li_attr["class"].replace("jstree-closed","").replace("jstree-open","")}if(t.a_attr["class"]){t.a_attr["class"]=t.a_attr["class"].replace("jstree-clicked","").replace("jstree-disabled","")}w[t.id]=t;if(t.state.selected){this._data.core.selected.push(t.id)}return t.id},_parse_model_from_flat_json:function(s,y,z){if(!z){z=[]}else{z=z.concat()}if(y){z.unshift(y)}var A=s.id.toString(),x=this._model.data,t=this._model.default_state,v,w,r,u,B={id:A,text:s.text||"",icon:s.icon!==q?s.icon:true,parent:y,parents:z,children:s.children||[],children_d:s.children_d||[],data:s.data,state:{},li_attr:{id:false},a_attr:{href:"#"},original:false};for(v in t){if(t.hasOwnProperty(v)){B.state[v]=t[v]}}if(s&&s.data&&s.data.jstree&&s.data.jstree.icon){B.icon=s.data.jstree.icon}if(B.icon===q||B.icon===null||B.icon===""){B.icon=true}if(s&&s.data){B.data=s.data;if(s.data.jstree){for(v in s.data.jstree){if(s.data.jstree.hasOwnProperty(v)){B.state[v]=s.data.jstree[v]}}}}if(s&&typeof s.state==="object"){for(v in s.state){if(s.state.hasOwnProperty(v)){B.state[v]=s.state[v]}}}if(s&&typeof s.li_attr==="object"){for(v in s.li_attr){if(s.li_attr.hasOwnProperty(v)){B.li_attr[v]=s.li_attr[v]}}}if(!B.li_attr.id){B.li_attr.id=A}if(s&&typeof s.a_attr==="object"){for(v in s.a_attr){if(s.a_attr.hasOwnProperty(v)){B.a_attr[v]=s.a_attr[v]}}}if(s&&s.children&&s.children===true){B.state.loaded=false;B.children=[];B.children_d=[]}x[B.id]=B;for(v=0,w=B.children.length;v<w;v++){r=this._parse_model_from_flat_json(x[B.children[v]],B.id,z);u=x[r];B.children_d.push(r);if(u.children_d.length){B.children_d=B.children_d.concat(u.children_d)}}delete s.data;delete s.children;x[B.id].original=s;if(B.state.selected){this._data.core.selected.push(B.id)}return B.id},_parse_model_from_json:function(s,y,z){if(!z){z=[]}else{z=z.concat()}if(y){z.unshift(y)}var A=false,v,w,r,u,x=this._model.data,t=this._model.default_state,B;do{A="j"+this._id+"_"+(++this._cnt)}while(x[A]);B={id:false,text:typeof s==="string"?s:"",icon:typeof s==="object"&&s.icon!==q?s.icon:true,parent:y,parents:z,children:[],children_d:[],data:null,state:{},li_attr:{id:false},a_attr:{href:"#"},original:false};for(v in t){if(t.hasOwnProperty(v)){B.state[v]=t[v]}}if(s&&s.id){B.id=s.id.toString()}if(s&&s.text){B.text=s.text}if(s&&s.data&&s.data.jstree&&s.data.jstree.icon){B.icon=s.data.jstree.icon}if(B.icon===q||B.icon===null||B.icon===""){B.icon=true}if(s&&s.data){B.data=s.data;if(s.data.jstree){for(v in s.data.jstree){if(s.data.jstree.hasOwnProperty(v)){B.state[v]=s.data.jstree[v]}}}}if(s&&typeof s.state==="object"){for(v in s.state){if(s.state.hasOwnProperty(v)){B.state[v]=s.state[v]}}}if(s&&typeof s.li_attr==="object"){for(v in s.li_attr){if(s.li_attr.hasOwnProperty(v)){B.li_attr[v]=s.li_attr[v]}}}if(B.li_attr.id&&!B.id){B.id=B.li_attr.id.toString()}if(!B.id){B.id=A}if(!B.li_attr.id){B.li_attr.id=B.id}if(s&&typeof s.a_attr==="object"){for(v in s.a_attr){if(s.a_attr.hasOwnProperty(v)){B.a_attr[v]=s.a_attr[v]}}}if(s&&s.children&&s.children.length){for(v=0,w=s.children.length;v<w;v++){r=this._parse_model_from_json(s.children[v],B.id,z);u=x[r];B.children.push(r);if(u.children_d.length){B.children_d=B.children_d.concat(u.children_d)}}B.children_d=B.children_d.concat(B.children)}if(s&&s.children&&s.children===true){B.state.loaded=false;B.children=[];B.children_d=[]}delete s.data;delete s.children;B.original=s;x[B.id]=B;if(B.state.selected){this._data.core.selected.push(B.id)}return B.id},_redraw:function(){var v=this._model.force_full_redraw?this._model.data[a.jstree.root].children.concat([]):this._model.changed.concat([]),r=j.createElement("UL"),w,t,u,s=this._data.core.focused;for(t=0,u=v.length;t<u;t++){w=this.redraw_node(v[t],true,this._model.force_full_redraw);if(w&&this._model.force_full_redraw){r.appendChild(w)}}if(this._model.force_full_redraw){r.className=this.get_container_ul()[0].className;r.setAttribute("role","group");this.element.empty().append(r)}if(s!==null){w=this.get_node(s,true);if(w&&w.length&&w.children(".jstree-anchor")[0]!==j.activeElement){w.children(".jstree-anchor").focus()}else{this._data.core.focused=null}}this._model.force_full_redraw=false;this._model.changed=[];this.trigger("redraw",{nodes:v})},redraw:function(r){if(r){this._model.force_full_redraw=true}this._redraw()},draw_children:function(v){var w=this.get_node(v),s=false,t=false,u=false,r=j;if(!w){return false}if(w.id===a.jstree.root){return this.redraw(true)}v=this.get_node(v,true);if(!v||!v.length){return false}v.children(".jstree-children").remove();v=v[0];if(w.children.length&&w.state.loaded){u=r.createElement("UL");u.setAttribute("role","group");u.className="jstree-children";for(s=0,t=w.children.length;s<t;s++){u.appendChild(this.redraw_node(w.children[s],true,true))}v.appendChild(u)}},redraw_node:function(H,v,B,x){var I=this.get_node(H),K=false,A=false,J=false,z=false,C=false,D=false,r="",u=j,G=this._model.data,w=false,L=false,N=null,M=0,E=0,y=false,F=false;if(!I){return false}if(I.id===a.jstree.root){return this.redraw(true)}v=v||I.children.length===0;H=!j.querySelector?j.getElementById(I.id):this.element[0].querySelector("#"+("0123456789".indexOf(I.id[0])!==-1?"\\3"+I.id[0]+" "+I.id.substr(1).replace(a.jstree.idregex,"\\$&"):I.id.replace(a.jstree.idregex,"\\$&")));if(!H){v=true;if(!B){K=I.parent!==a.jstree.root?a("#"+I.parent.replace(a.jstree.idregex,"\\$&"),this.element)[0]:null;if(K!==null&&(!K||!G[I.parent].state.opened)){return false}A=a.inArray(I.id,K===null?G[a.jstree.root].children:G[I.parent].children)}}else{H=a(H);if(!B){K=H.parent().parent()[0];if(K===this.element[0]){K=null}A=H.index()}if(!v&&I.children.length&&!H.children(".jstree-children").length){v=true}if(!v){J=H.children(".jstree-children")[0]}w=H.children(".jstree-anchor")[0]===j.activeElement;H.remove()}H=c.cloneNode(true);r="jstree-node ";for(z in I.li_attr){if(I.li_attr.hasOwnProperty(z)){if(z==="id"){continue}if(z!=="class"){H.setAttribute(z,I.li_attr[z])}else{r+=I.li_attr[z]}}}if(!I.a_attr.id){I.a_attr.id=I.id+"_anchor"}H.setAttribute("aria-selected",!!I.state.selected);H.setAttribute("aria-level",I.parents.length);H.setAttribute("aria-labelledby",I.a_attr.id);if(I.state.disabled){H.setAttribute("aria-disabled",true)}for(z=0,C=I.children.length;z<C;z++){if(!G[I.children[z]].state.hidden){y=true;break}}if(I.parent!==null&&G[I.parent]&&!I.state.hidden){z=a.inArray(I.id,G[I.parent].children);F=I.id;if(z!==-1){z++;for(C=G[I.parent].children.length;z<C;z++){if(!G[G[I.parent].children[z]].state.hidden){F=G[I.parent].children[z]}if(F!==I.id){break}}}}if(I.state.hidden){r+=" jstree-hidden"}if(I.state.loaded&&!y){r+=" jstree-leaf"}else{r+=I.state.opened&&I.state.loaded?" jstree-open":" jstree-closed";H.setAttribute("aria-expanded",(I.state.opened&&I.state.loaded))}if(F===I.id){r+=" jstree-last"}H.id=I.id;H.className=r;r=(I.state.selected?" jstree-clicked":"")+(I.state.disabled?" jstree-disabled":"");for(C in I.a_attr){if(I.a_attr.hasOwnProperty(C)){if(C==="href"&&I.a_attr[C]==="#"){continue}if(C!=="class"){H.childNodes[1].setAttribute(C,I.a_attr[C])}else{r+=" "+I.a_attr[C]}}}if(r.length){H.childNodes[1].className="jstree-anchor "+r}if((I.icon&&I.icon!==true)||I.icon===false){if(I.icon===false){H.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden"}else{if(I.icon.indexOf("/")===-1&&I.icon.indexOf(".")===-1){H.childNodes[1].childNodes[0].className+=" "+I.icon+" jstree-themeicon-custom"}else{H.childNodes[1].childNodes[0].style.backgroundImage="url("+I.icon+")";H.childNodes[1].childNodes[0].style.backgroundPosition="center center";H.childNodes[1].childNodes[0].style.backgroundSize="auto";H.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom"}}}if(this.settings.core.force_text){H.childNodes[1].appendChild(u.createTextNode(I.text))}else{H.childNodes[1].innerHTML+=I.text}if(v&&I.children.length&&(I.state.opened||x)&&I.state.loaded){D=u.createElement("UL");D.setAttribute("role","group");D.className="jstree-children";for(z=0,C=I.children.length;z<C;z++){D.appendChild(this.redraw_node(I.children[z],v,true))}H.appendChild(D)}if(J){H.appendChild(J)}if(!B){if(!K){K=this.element[0]}for(z=0,C=K.childNodes.length;z<C;z++){if(K.childNodes[z]&&K.childNodes[z].className&&K.childNodes[z].className.indexOf("jstree-children")!==-1){N=K.childNodes[z];break}}if(!N){N=u.createElement("UL");N.setAttribute("role","group");N.className="jstree-children";K.appendChild(N)}K=N;if(A<K.childNodes.length){K.insertBefore(H,K.childNodes[A])}else{K.appendChild(H)}if(w){M=this.element[0].scrollTop;E=this.element[0].scrollLeft;H.childNodes[1].focus();this.element[0].scrollTop=M;this.element[0].scrollLeft=E}}if(I.state.opened&&!I.state.loaded){I.state.opened=false;setTimeout(a.proxy(function(){this.open_node(I.id,false,0)},this),0)}return H},open_node:function(v,s,r){var x,y,u,w;if(a.isArray(v)){v=v.slice();for(x=0,y=v.length;x<y;x++){this.open_node(v[x],s,r)}return true}v=this.get_node(v);if(!v||v.id===a.jstree.root){return false}r=r===q?this.settings.core.animation:r;if(!this.is_closed(v)){if(s){s.call(this,v,false)}return false}if(!this.is_loaded(v)){if(this.is_loading(v)){return setTimeout(a.proxy(function(){this.open_node(v,s,r)},this),500)}this.load_node(v,function(t,z){return z?this.open_node(t,s,r):(s?s.call(this,t,false):false)})}else{u=this.get_node(v,true);w=this;if(u.length){if(r&&u.children(".jstree-children").length){u.children(".jstree-children").stop(true,true)}if(v.children.length&&!this._firstChild(u.children(".jstree-children")[0])){this.draw_children(v)}if(!r){this.trigger("before_open",{node:v});u[0].className=u[0].className.replace("jstree-closed","jstree-open");u[0].setAttribute("aria-expanded",true)}else{this.trigger("before_open",{node:v});u.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",true).children(".jstree-children").stop(true,true).slideDown(r,function(){this.style.display="";w.trigger("after_open",{node:v})})}}v.state.opened=true;if(s){s.call(this,v,true)}if(!u.length){this.trigger("before_open",{node:v})}this.trigger("open_node",{node:v});if(!r||!u.length){this.trigger("after_open",{node:v})}return true}},_open_to:function(t){t=this.get_node(t);if(!t||t.id===a.jstree.root){return false}var r,s,u=t.parents;for(r=0,s=u.length;r<s;r+=1){if(r!==a.jstree.root){this.open_node(u[r],false,0)}}return a("#"+t.id.replace(a.jstree.idregex,"\\$&"),this.element)},close_node:function(u,r){var w,x,v,s;if(a.isArray(u)){u=u.slice();for(w=0,x=u.length;w<x;w++){this.close_node(u[w],r)}return true}u=this.get_node(u);if(!u||u.id===a.jstree.root){return false}if(this.is_closed(u)){return false}r=r===q?this.settings.core.animation:r;v=this;s=this.get_node(u,true);if(s.length){if(!r){s[0].className=s[0].className.replace("jstree-open","jstree-closed");s.attr("aria-expanded",false).children(".jstree-children").remove()}else{s.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",false).children(".jstree-children").stop(true,true).slideUp(r,function(){this.style.display="";s.children(".jstree-children").remove();v.trigger("after_close",{node:u})})}}u.state.opened=false;this.trigger("close_node",{node:u});if(!r||!s.length){this.trigger("after_close",{node:u})}},toggle_node:function(r){var s,t;if(a.isArray(r)){r=r.slice();for(s=0,t=r.length;s<t;s++){this.toggle_node(r[s])}return true}if(this.is_closed(r)){return this.open_node(r)}if(this.is_open(r)){return this.close_node(r)}},open_all:function(w,s,x){if(!w){w=a.jstree.root}w=this.get_node(w);if(!w){return false}var t=w.id===a.jstree.root?this.get_container_ul():this.get_node(w,true),u,v,r;if(!t.length){for(u=0,v=w.children_d.length;u<v;u++){if(this.is_closed(this._model.data[w.children_d[u]])){this._model.data[w.children_d[u]].state.opened=true}}return this.trigger("open_all",{node:w})}x=x||t;r=this;t=this.is_closed(w)?t.find(".jstree-closed").addBack():t.find(".jstree-closed");t.each(function(){r.open_node(this,function(y,z){if(z&&this.is_parent(y)){this.open_all(y,s,x)}},s||0)});if(x.find(".jstree-closed").length===0){this.trigger("open_all",{node:this.get_node(x)})}},close_all:function(w,s){if(!w){w=a.jstree.root}w=this.get_node(w);if(!w){return false}var t=w.id===a.jstree.root?this.get_container_ul():this.get_node(w,true),r=this,u,v;if(t.length){t=this.is_open(w)?t.find(".jstree-open").addBack():t.find(".jstree-open");a(t.get().reverse()).each(function(){r.close_node(this,s||0)})}for(u=0,v=w.children_d.length;u<v;u++){this._model.data[w.children_d[u]].state.opened=false}this.trigger("close_all",{node:w})},is_disabled:function(r){r=this.get_node(r);return r&&r.state&&r.state.disabled},enable_node:function(r){var s,t;if(a.isArray(r)){r=r.slice();for(s=0,t=r.length;s<t;s++){this.enable_node(r[s])}return true}r=this.get_node(r);if(!r||r.id===a.jstree.root){return false}r.state.disabled=false;this.get_node(r,true).children(".jstree-anchor").removeClass("jstree-disabled").attr("aria-disabled",false);this.trigger("enable_node",{node:r})},disable_node:function(r){var s,t;if(a.isArray(r)){r=r.slice();for(s=0,t=r.length;s<t;s++){this.disable_node(r[s])}return true}r=this.get_node(r);if(!r||r.id===a.jstree.root){return false}r.state.disabled=true;this.get_node(r,true).children(".jstree-anchor").addClass("jstree-disabled").attr("aria-disabled",true);this.trigger("disable_node",{node:r})},hide_node:function(r,s){var t,u;if(a.isArray(r)){r=r.slice();for(t=0,u=r.length;t<u;t++){this.hide_node(r[t],true)}this.redraw();return true}r=this.get_node(r);if(!r||r.id===a.jstree.root){return false}if(!r.state.hidden){r.state.hidden=true;this._node_changed(r.parent);if(!s){this.redraw()}this.trigger("hide_node",{node:r})}},show_node:function(r,s){var t,u;if(a.isArray(r)){r=r.slice();for(t=0,u=r.length;t<u;t++){this.show_node(r[t],true)}this.redraw();return true}r=this.get_node(r);if(!r||r.id===a.jstree.root){return false}if(r.state.hidden){r.state.hidden=false;this._node_changed(r.parent);if(!s){this.redraw()}this.trigger("show_node",{node:r})}},hide_all:function(u){var r,t=this._model.data,s=[];for(r in t){if(t.hasOwnProperty(r)&&r!==a.jstree.root&&!t[r].state.hidden){t[r].state.hidden=true;s.push(r)}}this._model.force_full_redraw=true;if(!u){this.redraw()}this.trigger("hide_all",{nodes:s});return s},show_all:function(u){var r,t=this._model.data,s=[];for(r in t){if(t.hasOwnProperty(r)&&r!==a.jstree.root&&t[r].state.hidden){t[r].state.hidden=false;s.push(r)}}this._model.force_full_redraw=true;if(!u){this.redraw()}this.trigger("show_all",{nodes:s});return s},activate_node:function(x,s){if(this.is_disabled(x)){return false}if(!s||typeof s!=="object"){s={}}this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==q?this.get_node(this._data.core.last_clicked.id):null;if(this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected){this._data.core.last_clicked=null}if(!this._data.core.last_clicked&&this._data.core.selected.length){this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])}if(!this.settings.core.multiple||(!s.metaKey&&!s.ctrlKey&&!s.shiftKey)||(s.shiftKey&&(!this._data.core.last_clicked||!this.get_parent(x)||this.get_parent(x)!==this._data.core.last_clicked.parent))){if(!this.settings.core.multiple&&(s.metaKey||s.ctrlKey||s.shiftKey)&&this.is_selected(x)){this.deselect_node(x,false,s)}else{this.deselect_all(true);this.select_node(x,false,false,s);this._data.core.last_clicked=this.get_node(x)}}else{if(s.shiftKey){var w=this.get_node(x).id,v=this._data.core.last_clicked.id,y=this.get_node(this._data.core.last_clicked.parent).children,r=false,t,u;for(t=0,u=y.length;t<u;t+=1){if(y[t]===w){r=!r}if(y[t]===v){r=!r}if(!this.is_disabled(y[t])&&(r||y[t]===w||y[t]===v)){this.select_node(y[t],true,false,s)}else{this.deselect_node(y[t],true,s)}}this.trigger("changed",{action:"select_node",node:this.get_node(x),selected:this._data.core.selected,event:s})}else{if(!this.is_selected(x)){this.select_node(x,false,false,s)}else{this.deselect_node(x,false,s)}}}this.trigger("activate_node",{node:this.get_node(x),event:s})},hover_node:function(s){s=this.get_node(s,true);if(!s||!s.length||s.children(".jstree-hovered").length){return false}var r=this.element.find(".jstree-hovered"),u=this.element;if(r&&r.length){this.dehover_node(r)}s.children(".jstree-anchor").addClass("jstree-hovered");this.trigger("hover_node",{node:this.get_node(s)});setTimeout(function(){u.attr("aria-activedescendant",s[0].id)},0)},dehover_node:function(r){r=this.get_node(r,true);if(!r||!r.length||!r.children(".jstree-hovered").length){return false}r.children(".jstree-anchor").removeClass("jstree-hovered");this.trigger("dehover_node",{node:this.get_node(r)})},select_node:function(t,v,u,s){var r,w,x,y;if(a.isArray(t)){t=t.slice();for(w=0,x=t.length;w<x;w++){this.select_node(t[w],v,u,s)}return true}t=this.get_node(t);if(!t||t.id===a.jstree.root){return false}r=this.get_node(t,true);if(!t.state.selected){t.state.selected=true;this._data.core.selected.push(t.id);if(!u){r=this._open_to(t)}if(r&&r.length){r.attr("aria-selected",true).children(".jstree-anchor").addClass("jstree-clicked")}this.trigger("select_node",{node:t,selected:this._data.core.selected,event:s});if(!v){this.trigger("changed",{action:"select_node",node:t,selected:this._data.core.selected,event:s})}}},deselect_node:function(t,u,s){var v,w,r;if(a.isArray(t)){t=t.slice();for(v=0,w=t.length;v<w;v++){this.deselect_node(t[v],u,s)}return true}t=this.get_node(t);if(!t||t.id===a.jstree.root){return false}r=this.get_node(t,true);if(t.state.selected){t.state.selected=false;this._data.core.selected=a.vakata.array_remove_item(this._data.core.selected,t.id);if(r.length){r.attr("aria-selected",false).children(".jstree-anchor").removeClass("jstree-clicked")}this.trigger("deselect_node",{node:t,selected:this._data.core.selected,event:s});if(!u){this.trigger("changed",{action:"deselect_node",node:t,selected:this._data.core.selected,event:s})}}},select_all:function(t){var u=this._data.core.selected.concat([]),r,s;this._data.core.selected=this._model.data[a.jstree.root].children_d.concat();for(r=0,s=this._data.core.selected.length;r<s;r++){if(this._model.data[this._data.core.selected[r]]){this._model.data[this._data.core.selected[r]].state.selected=true}}this.redraw(true);this.trigger("select_all",{selected:this._data.core.selected});if(!t){this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:u})}},deselect_all:function(t){var u=this._data.core.selected.concat([]),r,s;for(r=0,s=this._data.core.selected.length;r<s;r++){if(this._model.data[this._data.core.selected[r]]){this._model.data[this._data.core.selected[r]].state.selected=false}}this._data.core.selected=[];this.element.find(".jstree-clicked").removeClass("jstree-clicked").parent().attr("aria-selected",false);this.trigger("deselect_all",{selected:this._data.core.selected,node:u});if(!t){this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:u})}},is_selected:function(r){r=this.get_node(r);if(!r||r.id===a.jstree.root){return false}return r.state.selected},get_selected:function(r){return r?a.map(this._data.core.selected,a.proxy(function(s){return this.get_node(s)},this)):this._data.core.selected.slice()},get_top_selected:function(r){var x=this.get_selected(true),w={},s,t,u,v;for(s=0,t=x.length;s<t;s++){w[x[s].id]=x[s]}for(s=0,t=x.length;s<t;s++){for(u=0,v=x[s].children_d.length;u<v;u++){if(w[x[s].children_d[u]]){delete w[x[s].children_d[u]]}}}x=[];for(s in w){if(w.hasOwnProperty(s)){x.push(s)}}return r?a.map(x,a.proxy(function(y){return this.get_node(y)},this)):x},get_bottom_selected:function(r){var v=this.get_selected(true),u=[],s,t;for(s=0,t=v.length;s<t;s++){if(!v[s].children.length){u.push(v[s].id)}}return r?a.map(u,a.proxy(function(w){return this.get_node(w)},this)):u},get_state:function(){var s={core:{open:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},
/*
					'themes' : {
						'name' : this.get_theme(),
						'icons' : this._data.core.themes.icons,
						'dots' : this._data.core.themes.dots
					},
					*/
selected:[]}},r;for(r in this._model.data){if(this._model.data.hasOwnProperty(r)){if(r!==a.jstree.root){if(this._model.data[r].state.opened){s.core.open.push(r)}if(this._model.data[r].state.selected){s.core.selected.push(r)}}}}return s},set_state:function(x,s){if(x){if(x.core){var w,v,y,r,u;if(x.core.open){if(!a.isArray(x.core.open)||!x.core.open.length){delete x.core.open;this.set_state(x,s)}else{this._load_nodes(x.core.open,function(t){this.open_node(t,false,0);delete x.core.open;this.set_state(x,s)},true)}return false}if(x.core.scroll){if(x.core.scroll&&x.core.scroll.left!==q){this.element.scrollLeft(x.core.scroll.left)}if(x.core.scroll&&x.core.scroll.top!==q){this.element.scrollTop(x.core.scroll.top)}delete x.core.scroll;this.set_state(x,s);return false}if(x.core.selected){r=this;this.deselect_all();a.each(x.core.selected,function(t,z){r.select_node(z,false,true)});delete x.core.selected;this.set_state(x,s);return false}for(u in x){if(x.hasOwnProperty(u)&&u!=="core"&&a.inArray(u,this.settings.plugins)===-1){delete x[u]}}if(a.isEmptyObject(x.core)){delete x.core;this.set_state(x,s);return false}}if(a.isEmptyObject(x)){x=null;if(s){s.call(this)}this.trigger("set_state");return false}return true}return false},refresh:function(t,s){this._data.core.state=s===true?{}:this.get_state();if(s&&a.isFunction(s)){this._data.core.state=s.call(this,this._data.core.state)}this._cnt=0;this._model.data={};this._model.data[a.jstree.root]={id:a.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:false}};this._data.core.selected=[];this._data.core.last_clicked=null;this._data.core.focused=null;var r=this.get_container_ul()[0].className;if(!t){this.element.html("<ul class='"+r+"' role='group'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='treeitem' id='j"+this._id+"_loading'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>");this.element.attr("aria-activedescendant","j"+this._id+"_loading")}this.load_node(a.jstree.root,function(u,v){if(v){this.get_container_ul()[0].className=r;if(this._firstChild(this.get_container_ul()[0])){this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id)}this.set_state(a.extend(true,{},this._data.core.state),function(){this.trigger("refresh")})}this._data.core.state=null})},refresh_node:function(r){r=this.get_node(r);if(!r||r.id===a.jstree.root){return false}var t=[],v=[],u=this._data.core.selected.concat([]);v.push(r.id);if(r.state.opened===true){t.push(r.id)}this.get_node(r,true).find(".jstree-open").each(function(){t.push(this.id)});this._load_nodes(v,a.proxy(function(s){this.open_node(t,false,0);this.select_node(this._data.core.selected);this.trigger("refresh_node",{node:r,nodes:s})},this))},set_id:function(v,s){v=this.get_node(v);if(!v||v.id===a.jstree.root){return false}var r,t,u=this._model.data;s=s.toString();u[v.parent].children[a.inArray(v.id,u[v.parent].children)]=s;for(r=0,t=v.parents.length;r<t;r++){u[v.parents[r]].children_d[a.inArray(v.id,u[v.parents[r]].children_d)]=s}for(r=0,t=v.children.length;r<t;r++){u[v.children[r]].parent=s}for(r=0,t=v.children_d.length;r<t;r++){u[v.children_d[r]].parents[a.inArray(v.id,u[v.children_d[r]].parents)]=s}r=a.inArray(v.id,this._data.core.selected);if(r!==-1){this._data.core.selected[r]=s}r=this.get_node(v.id,true);if(r){r.attr("id",s).children(".jstree-anchor").attr("id",s+"_anchor").end().attr("aria-labelledby",s+"_anchor");if(this.element.attr("aria-activedescendant")===v.id){this.element.attr("aria-activedescendant",s)}}delete u[v.id];v.id=s;v.li_attr.id=s;u[s]=v;return true},get_text:function(r){r=this.get_node(r);return(!r||r.id===a.jstree.root)?false:r.text},set_text:function(r,u){var s,t;if(a.isArray(r)){r=r.slice();for(s=0,t=r.length;s<t;s++){this.set_text(r[s],u)}return true}r=this.get_node(r);if(!r||r.id===a.jstree.root){return false}r.text=u;if(this.get_node(r,true).length){this.redraw_node(r.id)}this.trigger("set_text",{obj:r,text:u});return true},get_json:function(u,v,r){u=this.get_node(u||a.jstree.root);if(!u){return false}if(v&&v.flat&&!r){r=[]}var w={id:u.id,text:u.text,icon:this.get_icon(u),li_attr:a.extend(true,{},u.li_attr),a_attr:a.extend(true,{},u.a_attr),state:{},data:v&&v.no_data?false:a.extend(true,{},u.data)},s,t;if(v&&v.flat){w.parent=u.parent}else{w.children=[]}if(!v||!v.no_state){for(s in u.state){if(u.state.hasOwnProperty(s)){w.state[s]=u.state[s]}}}if(v&&v.no_id){delete w.id;if(w.li_attr&&w.li_attr.id){delete w.li_attr.id}if(w.a_attr&&w.a_attr.id){delete w.a_attr.id}}if(v&&v.flat&&u.id!==a.jstree.root){r.push(w)}if(!v||!v.no_children){for(s=0,t=u.children.length;s<t;s++){if(v&&v.flat){this.get_json(u.children[s],v,r)}else{w.children.push(this.get_json(u.children[s],v))}}}return v&&v.flat?r:(u.id===a.jstree.root?w.children:w)},create_node:function(x,w,y,r,u){if(x===null){x=a.jstree.root}x=this.get_node(x);if(!x){return false}y=y===q?"last":y;if(!y.toString().match(/^(before|after)$/)&&!u&&!this.is_loaded(x)){return this.load_node(x,function(){this.create_node(x,w,y,r,true)})}if(!w){w={text:this.get_string("New node")}}if(typeof w==="string"){w={text:w}}if(w.text===q){w.text=this.get_string("New node")}var z,s,t,v;if(x.id===a.jstree.root){if(y==="before"){y="first"}if(y==="after"){y="last"}}switch(y){case"before":z=this.get_node(x.parent);y=a.inArray(x.id,z.children);x=z;break;case"after":z=this.get_node(x.parent);y=a.inArray(x.id,z.children)+1;x=z;break;case"inside":case"first":y=0;break;case"last":y=x.children.length;break;default:if(!y){y=0}break}if(y>x.children.length){y=x.children.length}if(!w.id){w.id=true}if(!this.check("create_node",w,x,y)){this.settings.core.error.call(this,this._data.core.last_error);return false}if(w.id===true){delete w.id}w=this._parse_model_from_json(w,x.id,x.parents.concat());if(!w){return false}z=this.get_node(w);s=[];s.push(w);s=s.concat(z.children_d);this.trigger("model",{nodes:s,parent:x.id});x.children_d=x.children_d.concat(s);for(t=0,v=x.parents.length;t<v;t++){this._model.data[x.parents[t]].children_d=this._model.data[x.parents[t]].children_d.concat(s)}w=z;z=[];for(t=0,v=x.children.length;t<v;t++){z[t>=y?t+1:t]=x.children[t]}z[y]=w.id;x.children=z;this.redraw_node(x,true);if(r){r.call(this,this.get_node(w))}this.trigger("create_node",{node:this.get_node(w),parent:x.id,position:y});return w.id},rename_node:function(r,v){var t,u,s;if(a.isArray(r)){r=r.slice();for(t=0,u=r.length;t<u;t++){this.rename_node(r[t],v)}return true}r=this.get_node(r);if(!r||r.id===a.jstree.root){return false}s=r.text;if(!this.check("rename_node",r,this.get_parent(r),v)){this.settings.core.error.call(this,this._data.core.last_error);return false}this.set_text(r,v);this.trigger("rename_node",{node:r,text:v,old:s});return true},delete_node:function(x){var A,B,y,z,C,s,t,u,v,r,D,w;if(a.isArray(x)){x=x.slice();for(A=0,B=x.length;A<B;A++){this.delete_node(x[A])}return true}x=this.get_node(x);if(!x||x.id===a.jstree.root){return false}y=this.get_node(x.parent);z=a.inArray(x.id,y.children);r=false;if(!this.check("delete_node",x,y,z)){this.settings.core.error.call(this,this._data.core.last_error);return false}if(z!==-1){y.children=a.vakata.array_remove(y.children,z)}C=x.children_d.concat([]);C.push(x.id);for(u=0,v=C.length;u<v;u++){for(s=0,t=x.parents.length;s<t;s++){z=a.inArray(C[u],this._model.data[x.parents[s]].children_d);if(z!==-1){this._model.data[x.parents[s]].children_d=a.vakata.array_remove(this._model.data[x.parents[s]].children_d,z)}}if(this._model.data[C[u]].state.selected){r=true;z=a.inArray(C[u],this._data.core.selected);if(z!==-1){this._data.core.selected=a.vakata.array_remove(this._data.core.selected,z)}}}this.trigger("delete_node",{node:x,parent:y.id});if(r){this.trigger("changed",{action:"delete_node",node:x,selected:this._data.core.selected,parent:y.id})}for(u=0,v=C.length;u<v;u++){delete this._model.data[C[u]]}if(a.inArray(this._data.core.focused,C)!==-1){this._data.core.focused=null;D=this.element[0].scrollTop;w=this.element[0].scrollLeft;if(y.id===a.jstree.root){this.get_node(this._model.data[a.jstree.root].children[0],true).children(".jstree-anchor").focus()}else{this.get_node(y,true).children(".jstree-anchor").focus()}this.element[0].scrollTop=D;this.element[0].scrollLeft=w}this.redraw_node(y,true);return true},check:function(s,u,v,w,t){u=u&&u.id?u:this.get_node(u);v=v&&v.id?v:this.get_node(v);var x=s.match(/^move_node|copy_node|create_node$/i)?v:u,r=this.settings.core.check_callback;if(s==="move_node"||s==="copy_node"){if((!t||!t.is_multi)&&(u.id===v.id||a.inArray(u.id,v.children)===w||a.inArray(v.id,u.children_d)!==-1)){this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:s,pos:w,obj:u&&u.id?u.id:false,par:v&&v.id?v.id:false})};return false}}if(x&&x.data){x=x.data}if(x&&x.functions&&(x.functions[s]===false||x.functions[s]===true)){if(x.functions[s]===false){this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+s,data:JSON.stringify({chk:s,pos:w,obj:u&&u.id?u.id:false,par:v&&v.id?v.id:false})}}return x.functions[s]}if(r===false||(a.isFunction(r)&&r.call(this,s,u,v,w,t)===false)||(r&&r[s]===false)){this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+s,data:JSON.stringify({chk:s,pos:w,obj:u&&u.id?u.id:false,par:v&&v.id?v.id:false})};return false}return true},last_error:function(){return this._data.core.last_error},move_node:function(A,G,H,r,u,I,E){var J,K,C,D,z,B,v,s,L,t,w,x,y,F;G=this.get_node(G);H=H===q?0:H;if(!G){return false}if(!H.toString().match(/^(before|after)$/)&&!u&&!this.is_loaded(G)){return this.load_node(G,function(){this.move_node(A,G,H,r,true,false,E)})}if(a.isArray(A)){if(A.length===1){A=A[0]}else{for(J=0,K=A.length;J<K;J++){if((L=this.move_node(A[J],G,H,r,u,false,E))){G=L;H="after"}}this.redraw();return true}}A=A&&A.id?A:this.get_node(A);if(!A||A.id===a.jstree.root){return false}C=(A.parent||a.jstree.root).toString();z=(!H.toString().match(/^(before|after)$/)||G.id===a.jstree.root)?G:this.get_node(G.parent);B=E?E:(this._model.data[A.id]?this:a.jstree.reference(A.id));v=!B||!B._id||(this._id!==B._id);D=B&&B._id&&C&&B._model.data[C]&&B._model.data[C].children?a.inArray(A.id,B._model.data[C].children):-1;if(B&&B._id){A=B._model.data[A.id]}if(v){if((L=this.copy_node(A,G,H,r,u,false,E))){if(B){B.delete_node(A)}return L}return false}if(G.id===a.jstree.root){if(H==="before"){H="first"}if(H==="after"){H="last"}}switch(H){case"before":H=a.inArray(G.id,z.children);break;case"after":H=a.inArray(G.id,z.children)+1;break;case"inside":case"first":H=0;break;case"last":H=z.children.length;break;default:if(!H){H=0}break}if(H>z.children.length){H=z.children.length}if(!this.check("move_node",A,z,H,{core:true,origin:E,is_multi:(B&&B._id&&B._id!==this._id),is_foreign:(!B||!B._id)})){this.settings.core.error.call(this,this._data.core.last_error);return false}if(A.parent===z.id){s=z.children.concat();L=a.inArray(A.id,s);if(L!==-1){s=a.vakata.array_remove(s,L);if(H>L){H--}}L=[];for(t=0,w=s.length;t<w;t++){L[t>=H?t+1:t]=s[t]}L[H]=A.id;z.children=L;this._node_changed(z.id);this.redraw(z.id===a.jstree.root)}else{L=A.children_d.concat();L.push(A.id);for(t=0,w=A.parents.length;t<w;t++){s=[];F=B._model.data[A.parents[t]].children_d;for(x=0,y=F.length;x<y;x++){if(a.inArray(F[x],L)===-1){s.push(F[x])}}B._model.data[A.parents[t]].children_d=s}B._model.data[C].children=a.vakata.array_remove_item(B._model.data[C].children,A.id);for(t=0,w=z.parents.length;t<w;t++){this._model.data[z.parents[t]].children_d=this._model.data[z.parents[t]].children_d.concat(L)}s=[];for(t=0,w=z.children.length;t<w;t++){s[t>=H?t+1:t]=z.children[t]}s[H]=A.id;z.children=s;z.children_d.push(A.id);z.children_d=z.children_d.concat(A.children_d);A.parent=z.id;L=z.parents.concat();L.unshift(z.id);F=A.parents.length;A.parents=L;L=L.concat();for(t=0,w=A.children_d.length;t<w;t++){this._model.data[A.children_d[t]].parents=this._model.data[A.children_d[t]].parents.slice(0,F*-1);Array.prototype.push.apply(this._model.data[A.children_d[t]].parents,L)}if(C===a.jstree.root||z.id===a.jstree.root){this._model.force_full_redraw=true}if(!this._model.force_full_redraw){this._node_changed(C);this._node_changed(z.id)}if(!I){this.redraw()}}if(r){r.call(this,A,z,H)}this.trigger("move_node",{node:A,parent:z.id,position:H,old_parent:C,old_position:D,is_multi:(B&&B._id&&B._id!==this._id),is_foreign:(!B||!B._id),old_instance:B,new_instance:this});return A.id},copy_node:function(z,D,E,r,u,F,C){var G,H,s,I,t,w,y,B,x,A,v;D=this.get_node(D);E=E===q?0:E;if(!D){return false}if(!E.toString().match(/^(before|after)$/)&&!u&&!this.is_loaded(D)){return this.load_node(D,function(){this.copy_node(z,D,E,r,true,false,C)})}if(a.isArray(z)){if(z.length===1){z=z[0]}else{for(G=0,H=z.length;G<H;G++){if((I=this.copy_node(z[G],D,E,r,u,true,C))){D=I;E="after"}}this.redraw();return true}}z=z&&z.id?z:this.get_node(z);if(!z||z.id===a.jstree.root){return false}B=(z.parent||a.jstree.root).toString();x=(!E.toString().match(/^(before|after)$/)||D.id===a.jstree.root)?D:this.get_node(D.parent);A=C?C:(this._model.data[z.id]?this:a.jstree.reference(z.id));v=!A||!A._id||(this._id!==A._id);if(A&&A._id){z=A._model.data[z.id]}if(D.id===a.jstree.root){if(E==="before"){E="first"}if(E==="after"){E="last"}}switch(E){case"before":E=a.inArray(D.id,x.children);break;case"after":E=a.inArray(D.id,x.children)+1;break;case"inside":case"first":E=0;break;case"last":E=x.children.length;break;default:if(!E){E=0}break}if(E>x.children.length){E=x.children.length}if(!this.check("copy_node",z,x,E,{core:true,origin:C,is_multi:(A&&A._id&&A._id!==this._id),is_foreign:(!A||!A._id)})){this.settings.core.error.call(this,this._data.core.last_error);return false}y=A?A.get_json(z,{no_id:true,no_data:true,no_state:true}):z;if(!y){return false}if(y.id===true){delete y.id}y=this._parse_model_from_json(y,x.id,x.parents.concat());if(!y){return false}I=this.get_node(y);if(z&&z.state&&z.state.loaded===false){I.state.loaded=false}s=[];s.push(y);s=s.concat(I.children_d);this.trigger("model",{nodes:s,parent:x.id});for(t=0,w=x.parents.length;t<w;t++){this._model.data[x.parents[t]].children_d=this._model.data[x.parents[t]].children_d.concat(s)}s=[];for(t=0,w=x.children.length;t<w;t++){s[t>=E?t+1:t]=x.children[t]}s[E]=I.id;x.children=s;x.children_d.push(I.id);x.children_d=x.children_d.concat(I.children_d);if(x.id===a.jstree.root){this._model.force_full_redraw=true}if(!this._model.force_full_redraw){this._node_changed(x.id)}if(!F){this.redraw(x.id===a.jstree.root)}if(r){r.call(this,I,x,E)}this.trigger("copy_node",{node:I,original:z,parent:x.id,position:E,old_parent:B,old_position:A&&A._id&&B&&A._model.data[B]&&A._model.data[B].children?a.inArray(z.id,A._model.data[B].children):-1,is_multi:(A&&A._id&&A._id!==this._id),is_foreign:(!A||!A._id),old_instance:A,new_instance:this});return I.id},cut:function(s){if(!s){s=this._data.core.selected.concat()}if(!a.isArray(s)){s=[s]}if(!s.length){return false}var v=[],r,t,u;for(t=0,u=s.length;t<u;t++){r=this.get_node(s[t]);if(r&&r.id&&r.id!==a.jstree.root){v.push(r)}}if(!v.length){return false}h=v;f=this;g="move_node";this.trigger("cut",{node:s})},copy:function(s){if(!s){s=this._data.core.selected.concat()}if(!a.isArray(s)){s=[s]}if(!s.length){return false}var v=[],r,t,u;for(t=0,u=s.length;t<u;t++){r=this.get_node(s[t]);if(r&&r.id&&r.id!==a.jstree.root){v.push(r)}}if(!v.length){return false}h=v;f=this;g="copy_node";this.trigger("copy",{node:s})},get_buffer:function(){return{mode:g,node:h,inst:f}},can_paste:function(){return g!==false&&h!==false},paste:function(r,s){r=this.get_node(r);if(!r||!g||!g.match(/^(copy_node|move_node)$/)||!h){return false}if(this[g](h,r,s,false,false,false,f)){this.trigger("paste",{parent:r.id,node:h,mode:g})}h=false;g=false;f=false},clear_buffer:function(){h=false;g=false;f=false;this.trigger("clear_buffer")},edit:function(B,x,u){var C,G,r,D,E,z,A,y,F,v=false;B=this.get_node(B);if(!B){return false}if(this.settings.core.check_callback===false){this._data.core.last_error={error:"check",plugin:"core",id:"core_07",reason:"Could not edit node because of check_callback"};this.settings.core.error.call(this,this._data.core.last_error);return false}F=B;x=typeof x==="string"?x:B.text;this.set_text(B,"");B=this._open_to(B);F.text=x;C=this._data.core.rtl;G=this.element.width();this._data.core.focused=F.id;r=B.children(".jstree-anchor").focus();D=a("<span>");
/*
			oi = obj.children("i:visible"),
			ai = a.children("i:visible"),
			w1 = oi.width() * oi.length,
			w2 = ai.width() * ai.length,
			*/
E=x;z=a("<div />",{css:{position:"absolute",top:"-200px",left:(C?"0px":"-1000px"),visibility:"hidden"}}).appendTo("body");A=a("<input />",{value:E,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:(this._data.core.li_height)+"px",lineHeight:(this._data.core.li_height)+"px",width:"150px"},blur:a.proxy(function(s){s.stopImmediatePropagation();s.preventDefault();var w=D.children(".jstree-rename-input"),I=w.val(),t=this.settings.core.force_text,H;if(I===""){I=E}z.remove();D.replaceWith(r);D.remove();E=t?E:a("<div></div>").append(a.parseHTML(E)).html();this.set_text(B,E);H=!!this.rename_node(B,t?a("<div></div>").text(I).text():a("<div></div>").append(a.parseHTML(I)).html());if(!H){this.set_text(B,E)}this._data.core.focused=F.id;setTimeout(a.proxy(function(){var J=this.get_node(F.id,true);if(J.length){this._data.core.focused=F.id;J.children(".jstree-anchor").focus()}},this),0);if(u){u.call(this,F,H,v)}},this),keydown:function(s){var t=s.which;if(t===27){v=true;this.value=E}if(t===27||t===13||t===37||t===38||t===39||t===40||t===32){s.stopImmediatePropagation()}if(t===27||t===13){s.preventDefault();this.blur()}},click:function(s){s.stopImmediatePropagation()},mousedown:function(s){s.stopImmediatePropagation()},keyup:function(s){A.width(Math.min(z.text("pW"+this.value).width(),G))},keypress:function(s){if(s.which===13){return false}}});y={fontFamily:r.css("fontFamily")||"",fontSize:r.css("fontSize")||"",fontWeight:r.css("fontWeight")||"",fontStyle:r.css("fontStyle")||"",fontStretch:r.css("fontStretch")||"",fontVariant:r.css("fontVariant")||"",letterSpacing:r.css("letterSpacing")||"",wordSpacing:r.css("wordSpacing")||""};D.attr("class",r.attr("class")).append(r.contents().clone()).append(A);r.replaceWith(D);z.css(y);A.css(y).width(Math.min(z.text("pW"+A[0].value).width(),G))[0].select()},set_theme:function(s,t){if(!s){return false}if(t===true){var r=this.settings.core.themes.dir;if(!r){r=a.jstree.path+"/themes"}t=r+"/"+s+"/style.css"}if(t&&a.inArray(t,o)===-1){a("head").append('<link rel="stylesheet" href="'+t+'" type="text/css" />');o.push(t)}if(this._data.core.themes.name){this.element.removeClass("jstree-"+this._data.core.themes.name)}this._data.core.themes.name=s;this.element.addClass("jstree-"+s);this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+s+"-responsive");this.trigger("set_theme",{theme:s})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(r){if(this._data.core.themes.variant){this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)}this._data.core.themes.variant=r;if(r){this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)}},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=true;this.get_container_ul().addClass("jstree-striped")},hide_stripes:function(){this._data.core.themes.stripes=false;this.get_container_ul().removeClass("jstree-striped")},toggle_stripes:function(){if(this._data.core.themes.stripes){this.hide_stripes()}else{this.show_stripes()}},show_dots:function(){this._data.core.themes.dots=true;this.get_container_ul().removeClass("jstree-no-dots")},hide_dots:function(){this._data.core.themes.dots=false;this.get_container_ul().addClass("jstree-no-dots")},toggle_dots:function(){if(this._data.core.themes.dots){this.hide_dots()}else{this.show_dots()}},show_icons:function(){this._data.core.themes.icons=true;this.get_container_ul().removeClass("jstree-no-icons")},hide_icons:function(){this._data.core.themes.icons=false;this.get_container_ul().addClass("jstree-no-icons")},toggle_icons:function(){if(this._data.core.themes.icons){this.hide_icons()}else{this.show_icons()}},set_icon:function(t,s){var v,w,r,u;if(a.isArray(t)){t=t.slice();for(v=0,w=t.length;v<w;v++){this.set_icon(t[v],s)}return true}t=this.get_node(t);if(!t||t.id===a.jstree.root){return false}u=t.icon;t.icon=s===true||s===null||s===q||s===""?true:s;r=this.get_node(t,true).children(".jstree-anchor").children(".jstree-themeicon");if(s===false){this.hide_icon(t)}else{if(s===true||s===null||s===q||s===""){r.removeClass("jstree-themeicon-custom "+u).css("background","").removeAttr("rel");if(u===false){this.show_icon(t)}}else{if(s.indexOf("/")===-1&&s.indexOf(".")===-1){r.removeClass(u).css("background","");r.addClass(s+" jstree-themeicon-custom").attr("rel",s);if(u===false){this.show_icon(t)}}else{r.removeClass(u).css("background","");r.addClass("jstree-themeicon-custom").css("background","url('"+s+"') center center no-repeat").attr("rel",s);if(u===false){this.show_icon(t)}}}}return true},get_icon:function(r){r=this.get_node(r);return(!r||r.id===a.jstree.root)?false:r.icon},hide_icon:function(r){var s,t;if(a.isArray(r)){r=r.slice();for(s=0,t=r.length;s<t;s++){this.hide_icon(r[s])}return true}r=this.get_node(r);if(!r||r===a.jstree.root){return false}r.icon=false;this.get_node(r,true).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden");return true},show_icon:function(s){var t,u,r;if(a.isArray(s)){s=s.slice();for(t=0,u=s.length;t<u;t++){this.show_icon(s[t])}return true}s=this.get_node(s);if(!s||s===a.jstree.root){return false}r=this.get_node(s,true);s.icon=r.length?r.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"):true;if(!s.icon){s.icon=true}r.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden");return true}};a.vakata={};a.vakata.attributes=function(s,t){s=a(s)[0];var r=t?{}:[];if(s&&s.attributes){a.each(s.attributes,function(u,w){if(a.inArray(w.name.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])!==-1){return}if(w.value!==null&&a.trim(w.value)!==""){if(t){r[w.name]=w.value}else{r.push(w.name)}}})}return r};a.vakata.array_unique=function(s){var r=[],t,u,v,w={};for(t=0,v=s.length;t<v;t++){if(w[s[t]]===q){r.push(s[t]);w[s[t]]=true}}return r};a.vakata.array_remove=function(r,s,u){var t=r.slice((u||s)+1||r.length);r.length=s<0?r.length+s:s;r.push.apply(r,t);return r};a.vakata.array_remove_item=function(r,s){var t=a.inArray(s,r);return t!==-1?a.vakata.array_remove(r,t):r};a.jstree.plugins.changed=function(s,t){var r=[];this.trigger=function(v,u){var w,x;if(!u){u={}}if(v.replace(".jstree","")==="changed"){u.changed={selected:[],deselected:[]};var y={};for(w=0,x=r.length;w<x;w++){y[r[w]]=1}for(w=0,x=u.selected.length;w<x;w++){if(!y[u.selected[w]]){u.changed.selected.push(u.selected[w])}else{y[u.selected[w]]=2}}for(w=0,x=r.length;w<x;w++){if(y[r[w]]===1){u.changed.deselected.push(r[w])}}r=u.selected.slice()}t.trigger.call(this,v,u)};this.refresh=function(v,u){r=[];return t.refresh.apply(this,arguments)}};var b=j.createElement("I");b.className="jstree-icon jstree-checkbox";b.setAttribute("role","presentation");a.jstree.defaults.checkbox={visible:true,three_state:true,whole_node:true,keep_selected_style:true,cascade:"",tie_selection:true};a.jstree.plugins.checkbox=function(r,s){this.bind=function(){s.bind.call(this);this._data.checkbox.uto=false;this._data.checkbox.selected=[];if(this.settings.checkbox.three_state){this.settings.checkbox.cascade="up+down+undetermined"}this.element.on("init.jstree",a.proxy(function(){this._data.checkbox.visible=this.settings.checkbox.visible;if(!this.settings.checkbox.keep_selected_style){this.element.addClass("jstree-checkbox-no-clicked")}if(this.settings.checkbox.tie_selection){this.element.addClass("jstree-checkbox-selection")}},this)).on("loading.jstree",a.proxy(function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()},this));if(this.settings.checkbox.cascade.indexOf("undetermined")!==-1){this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",a.proxy(function(){if(this._data.checkbox.uto){clearTimeout(this._data.checkbox.uto)}this._data.checkbox.uto=setTimeout(a.proxy(this._undetermined,this),50)},this))}if(!this.settings.checkbox.tie_selection){this.element.on("model.jstree",a.proxy(function(v,t){var y=this._model.data,z=y[t.parent],u=t.nodes,w,x;for(w=0,x=u.length;w<x;w++){y[u[w]].state.checked=y[u[w]].state.checked||(y[u[w]].original&&y[u[w]].original.state&&y[u[w]].original.state.checked);if(y[u[w]].state.checked){this._data.checkbox.selected.push(u[w])}}},this))}if(this.settings.checkbox.cascade.indexOf("up")!==-1||this.settings.checkbox.cascade.indexOf("down")!==-1){this.element.on("model.jstree",a.proxy(function(y,w){var D=this._model.data,E=D[w.parent],x=w.nodes,v=[],u,z,A,B,C,H,F=this.settings.checkbox.cascade,G=this.settings.checkbox.tie_selection;if(F.indexOf("down")!==-1){if(E.state[G?"selected":"checked"]){for(z=0,A=x.length;z<A;z++){D[x[z]].state[G?"selected":"checked"]=true}this._data[G?"core":"checkbox"].selected=this._data[G?"core":"checkbox"].selected.concat(x)}else{for(z=0,A=x.length;z<A;z++){if(D[x[z]].state[G?"selected":"checked"]){for(B=0,C=D[x[z]].children_d.length;B<C;B++){D[D[x[z]].children_d[B]].state[G?"selected":"checked"]=true}this._data[G?"core":"checkbox"].selected=this._data[G?"core":"checkbox"].selected.concat(D[x[z]].children_d)}}}}if(F.indexOf("up")!==-1){for(z=0,A=E.children_d.length;z<A;z++){if(!D[E.children_d[z]].children.length){v.push(D[E.children_d[z]].parent)}}v=a.vakata.array_unique(v);for(B=0,C=v.length;B<C;B++){E=D[v[B]];while(E&&E.id!==a.jstree.root){u=0;for(z=0,A=E.children.length;z<A;z++){u+=D[E.children[z]].state[G?"selected":"checked"]}if(u===A){E.state[G?"selected":"checked"]=true;this._data[G?"core":"checkbox"].selected.push(E.id);H=this.get_node(E,true);if(H&&H.length){H.attr("aria-selected",true).children(".jstree-anchor").addClass(G?"jstree-clicked":"jstree-checked")}}else{break}E=this.get_node(E.parent)}}}this._data[G?"core":"checkbox"].selected=a.vakata.array_unique(this._data[G?"core":"checkbox"].selected)},this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",a.proxy(function(x,v){var B=v.node,A=this._model.data,C=this.get_node(B.parent),w=this.get_node(B,true),y,z,u,F,D=this.settings.checkbox.cascade,E=this.settings.checkbox.tie_selection;if(D.indexOf("down")!==-1){this._data[E?"core":"checkbox"].selected=a.vakata.array_unique(this._data[E?"core":"checkbox"].selected.concat(B.children_d));for(y=0,z=B.children_d.length;y<z;y++){F=A[B.children_d[y]];F.state[E?"selected":"checked"]=true;if(F&&F.original&&F.original.state&&F.original.state.undetermined){F.original.state.undetermined=false}}}if(D.indexOf("up")!==-1){while(C&&C.id!==a.jstree.root){u=0;for(y=0,z=C.children.length;y<z;y++){u+=A[C.children[y]].state[E?"selected":"checked"]}if(u===z){C.state[E?"selected":"checked"]=true;this._data[E?"core":"checkbox"].selected.push(C.id);F=this.get_node(C,true);if(F&&F.length){F.attr("aria-selected",true).children(".jstree-anchor").addClass(E?"jstree-clicked":"jstree-checked")}}else{break}C=this.get_node(C.parent)}}if(D.indexOf("down")!==-1&&w.length){w.find(".jstree-anchor").addClass(E?"jstree-clicked":"jstree-checked").parent().attr("aria-selected",true)}},this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",a.proxy(function(u,t){var y=this.get_node(a.jstree.root),x=this._model.data,v,w,z;for(v=0,w=y.children_d.length;v<w;v++){z=x[y.children_d[v]];if(z&&z.original&&z.original.state&&z.original.state.undetermined){z.original.state.undetermined=false}}},this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",a.proxy(function(w,u){var z=u.node,v=this.get_node(z,true),x,y,C,A=this.settings.checkbox.cascade,B=this.settings.checkbox.tie_selection;if(z&&z.original&&z.original.state&&z.original.state.undetermined){z.original.state.undetermined=false}if(A.indexOf("down")!==-1){for(x=0,y=z.children_d.length;x<y;x++){C=this._model.data[z.children_d[x]];C.state[B?"selected":"checked"]=false;if(C&&C.original&&C.original.state&&C.original.state.undetermined){C.original.state.undetermined=false}}}if(A.indexOf("up")!==-1){for(x=0,y=z.parents.length;x<y;x++){C=this._model.data[z.parents[x]];C.state[B?"selected":"checked"]=false;if(C&&C.original&&C.original.state&&C.original.state.undetermined){C.original.state.undetermined=false}C=this.get_node(z.parents[x],true);if(C&&C.length){C.attr("aria-selected",false).children(".jstree-anchor").removeClass(B?"jstree-clicked":"jstree-checked")}}}C=[];for(x=0,y=this._data[B?"core":"checkbox"].selected.length;x<y;x++){if((A.indexOf("down")===-1||a.inArray(this._data[B?"core":"checkbox"].selected[x],z.children_d)===-1)&&(A.indexOf("up")===-1||a.inArray(this._data[B?"core":"checkbox"].selected[x],z.parents)===-1)){C.push(this._data[B?"core":"checkbox"].selected[x])}}this._data[B?"core":"checkbox"].selected=a.vakata.array_unique(C);if(A.indexOf("down")!==-1&&v.length){v.find(".jstree-anchor").removeClass(B?"jstree-clicked":"jstree-checked").parent().attr("aria-selected",false)}},this))}if(this.settings.checkbox.cascade.indexOf("up")!==-1){this.element.on("delete_node.jstree",a.proxy(function(w,v){var A=this.get_node(v.parent),z=this._model.data,x,y,u,C,B=this.settings.checkbox.tie_selection;while(A&&A.id!==a.jstree.root&&!A.state[B?"selected":"checked"]){u=0;for(x=0,y=A.children.length;x<y;x++){u+=z[A.children[x]].state[B?"selected":"checked"]}if(y>0&&u===y){A.state[B?"selected":"checked"]=true;this._data[B?"core":"checkbox"].selected.push(A.id);C=this.get_node(A,true);if(C&&C.length){C.attr("aria-selected",true).children(".jstree-anchor").addClass(B?"jstree-clicked":"jstree-checked")}}else{break}A=this.get_node(A.parent)}},this)).on("move_node.jstree",a.proxy(function(w,v){var y=v.is_multi,C=v.old_parent,B=this.get_node(v.parent),A=this._model.data,D,u,x,z,F,E=this.settings.checkbox.tie_selection;if(!y){D=this.get_node(C);while(D&&D.id!==a.jstree.root&&!D.state[E?"selected":"checked"]){u=0;for(x=0,z=D.children.length;x<z;x++){u+=A[D.children[x]].state[E?"selected":"checked"]}if(z>0&&u===z){D.state[E?"selected":"checked"]=true;this._data[E?"core":"checkbox"].selected.push(D.id);F=this.get_node(D,true);if(F&&F.length){F.attr("aria-selected",true).children(".jstree-anchor").addClass(E?"jstree-clicked":"jstree-checked")}}else{break}D=this.get_node(D.parent)}}D=B;while(D&&D.id!==a.jstree.root){u=0;for(x=0,z=D.children.length;x<z;x++){u+=A[D.children[x]].state[E?"selected":"checked"]}if(u===z){if(!D.state[E?"selected":"checked"]){D.state[E?"selected":"checked"]=true;this._data[E?"core":"checkbox"].selected.push(D.id);F=this.get_node(D,true);if(F&&F.length){F.attr("aria-selected",true).children(".jstree-anchor").addClass(E?"jstree-clicked":"jstree-checked")}}}else{if(D.state[E?"selected":"checked"]){D.state[E?"selected":"checked"]=false;this._data[E?"core":"checkbox"].selected=a.vakata.array_remove_item(this._data[E?"core":"checkbox"].selected,D.id);F=this.get_node(D,true);if(F&&F.length){F.attr("aria-selected",false).children(".jstree-anchor").removeClass(E?"jstree-clicked":"jstree-checked")}}else{break}}D=this.get_node(D.parent)}},this))}};this._undetermined=function(){if(this.element===null){return}var u,v,w,x,z={},y=this._model.data,C=this.settings.checkbox.tie_selection,B=this._data[C?"core":"checkbox"].selected,A=[],D=this;for(u=0,v=B.length;u<v;u++){if(y[B[u]]&&y[B[u]].parents){for(w=0,x=y[B[u]].parents.length;w<x;w++){if(z[y[B[u]].parents[w]]===q&&y[B[u]].parents[w]!==a.jstree.root){z[y[B[u]].parents[w]]=true;A.push(y[B[u]].parents[w])}}}}this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var t=D.get_node(this),E;if(!t.state.loaded){if(t.original&&t.original.state&&t.original.state.undetermined&&t.original.state.undetermined===true){if(z[t.id]===q&&t.id!==a.jstree.root){z[t.id]=true;A.push(t.id)}for(w=0,x=t.parents.length;w<x;w++){if(z[t.parents[w]]===q&&t.parents[w]!==a.jstree.root){z[t.parents[w]]=true;A.push(t.parents[w])}}}}else{for(u=0,v=t.children_d.length;u<v;u++){E=y[t.children_d[u]];if(!E.state.loaded&&E.original&&E.original.state&&E.original.state.undetermined&&E.original.state.undetermined===true){if(z[E.id]===q&&E.id!==a.jstree.root){z[E.id]=true;A.push(E.id)}for(w=0,x=E.parents.length;w<x;w++){if(z[E.parents[w]]===q&&E.parents[w]!==a.jstree.root){z[E.parents[w]]=true;A.push(E.parents[w])}}}}}});this.element.find(".jstree-undetermined").removeClass("jstree-undetermined");for(u=0,v=A.length;u<v;u++){if(!y[A[u]].state[C?"selected":"checked"]){B=this.get_node(A[u],true);if(B&&B.length){B.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined")}}}};this.redraw_node=function(z,t,x,u){z=s.redraw_node.apply(this,arguments);if(z){var v,y,A=null,w=null;for(v=0,y=z.childNodes.length;v<y;v++){if(z.childNodes[v]&&z.childNodes[v].className&&z.childNodes[v].className.indexOf("jstree-anchor")!==-1){A=z.childNodes[v];break}}if(A){if(!this.settings.checkbox.tie_selection&&this._model.data[z.id].state.checked){A.className+=" jstree-checked"}w=b.cloneNode(false);if(this._model.data[z.id].state.checkbox_disabled){w.className+=" jstree-checkbox-disabled"}A.insertBefore(w,A.childNodes[0])}}if(!x&&this.settings.checkbox.cascade.indexOf("undetermined")!==-1){if(this._data.checkbox.uto){clearTimeout(this._data.checkbox.uto)}this._data.checkbox.uto=setTimeout(a.proxy(this._undetermined,this),50)}return z};this.show_checkboxes=function(){this._data.core.themes.checkboxes=true;this.get_container_ul().removeClass("jstree-no-checkboxes")};this.hide_checkboxes=function(){this._data.core.themes.checkboxes=false;this.get_container_ul().addClass("jstree-no-checkboxes")};this.toggle_checkboxes=function(){if(this._data.core.themes.checkboxes){this.hide_checkboxes()}else{this.show_checkboxes()}};this.is_undetermined=function(y){y=this.get_node(y);var z=this.settings.checkbox.cascade,v,w,A=this.settings.checkbox.tie_selection,u=this._data[A?"core":"checkbox"].selected,x=this._model.data;if(!y||y.state[A?"selected":"checked"]===true||z.indexOf("undetermined")===-1||(z.indexOf("down")===-1&&z.indexOf("up")===-1)){return false}if(!y.state.loaded&&y.original.state.undetermined===true){return true}for(v=0,w=y.children_d.length;v<w;v++){if(a.inArray(y.children_d[v],u)!==-1||(!x[y.children_d[v]].state.loaded&&x[y.children_d[v]].original.state.undetermined)){return true}}return false};this.disable_checkbox=function(u){var v,w,t;if(a.isArray(u)){u=u.slice();for(v=0,w=u.length;v<w;v++){this.disable_checkbox(u[v])}return true}u=this.get_node(u);if(!u||u.id===a.jstree.root){return false}t=this.get_node(u,true);if(!u.state.checkbox_disabled){u.state.checkbox_disabled=true;if(t&&t.length){t.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-checkbox-disabled")}this.trigger("disable_checkbox",{node:u})}};this.enable_checkbox=function(u){var v,w,t;if(a.isArray(u)){u=u.slice();for(v=0,w=u.length;v<w;v++){this.enable_checkbox(u[v])}return true}u=this.get_node(u);if(!u||u.id===a.jstree.root){return false}t=this.get_node(u,true);if(u.state.checkbox_disabled){u.state.checkbox_disabled=false;if(t&&t.length){t.children(".jstree-anchor").children(".jstree-checkbox").removeClass("jstree-checkbox-disabled")}this.trigger("enable_checkbox",{node:u})}};this.activate_node=function(u,t){if(a(t.target).hasClass("jstree-checkbox-disabled")){return false}if(this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||a(t.target).hasClass("jstree-checkbox"))){t.ctrlKey=true}if(this.settings.checkbox.tie_selection||(!this.settings.checkbox.whole_node&&!a(t.target).hasClass("jstree-checkbox"))){return s.activate_node.call(this,u,t)}if(this.is_disabled(u)){return false}if(this.is_checked(u)){this.uncheck_node(u,t)}else{this.check_node(u,t)}this.trigger("activate_node",{node:this.get_node(u)})};this.check_node=function(v,u){if(this.settings.checkbox.tie_selection){return this.select_node(v,false,true,u)}var t,w,x,y;if(a.isArray(v)){v=v.slice();for(w=0,x=v.length;w<x;w++){this.check_node(v[w],u)}return true}v=this.get_node(v);if(!v||v.id===a.jstree.root){return false}t=this.get_node(v,true);if(!v.state.checked){v.state.checked=true;this._data.checkbox.selected.push(v.id);if(t&&t.length){t.children(".jstree-anchor").addClass("jstree-checked")}this.trigger("check_node",{node:v,selected:this._data.checkbox.selected,event:u})}};this.uncheck_node=function(v,u){if(this.settings.checkbox.tie_selection){return this.deselect_node(v,false,u)}var w,x,t;if(a.isArray(v)){v=v.slice();for(w=0,x=v.length;w<x;w++){this.uncheck_node(v[w],u)}return true}v=this.get_node(v);if(!v||v.id===a.jstree.root){return false}t=this.get_node(v,true);if(v.state.checked){v.state.checked=false;this._data.checkbox.selected=a.vakata.array_remove_item(this._data.checkbox.selected,v.id);if(t.length){t.children(".jstree-anchor").removeClass("jstree-checked")}this.trigger("uncheck_node",{node:v,selected:this._data.checkbox.selected,event:u})}};this.check_all=function(){if(this.settings.checkbox.tie_selection){return this.select_all()}var v=this._data.checkbox.selected.concat([]),t,u;this._data.checkbox.selected=this._model.data[a.jstree.root].children_d.concat();for(t=0,u=this._data.checkbox.selected.length;t<u;t++){if(this._model.data[this._data.checkbox.selected[t]]){this._model.data[this._data.checkbox.selected[t]].state.checked=true}}this.redraw(true);this.trigger("check_all",{selected:this._data.checkbox.selected})};this.uncheck_all=function(){if(this.settings.checkbox.tie_selection){return this.deselect_all()}var v=this._data.checkbox.selected.concat([]),t,u;for(t=0,u=this._data.checkbox.selected.length;t<u;t++){if(this._model.data[this._data.checkbox.selected[t]]){this._model.data[this._data.checkbox.selected[t]].state.checked=false}}this._data.checkbox.selected=[];this.element.find(".jstree-checked").removeClass("jstree-checked");this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:v})};this.is_checked=function(t){if(this.settings.checkbox.tie_selection){return this.is_selected(t)}t=this.get_node(t);if(!t||t.id===a.jstree.root){return false}return t.state.checked};this.get_checked=function(t){if(this.settings.checkbox.tie_selection){return this.get_selected(t)}return t?a.map(this._data.checkbox.selected,a.proxy(function(u){return this.get_node(u)},this)):this._data.checkbox.selected};this.get_top_checked=function(t){if(this.settings.checkbox.tie_selection){return this.get_top_selected(t)}var z=this.get_checked(true),y={},u,v,w,x;for(u=0,v=z.length;u<v;u++){y[z[u].id]=z[u]}for(u=0,v=z.length;u<v;u++){for(w=0,x=z[u].children_d.length;w<x;w++){if(y[z[u].children_d[w]]){delete y[z[u].children_d[w]]}}}z=[];for(u in y){if(y.hasOwnProperty(u)){z.push(u)}}return t?a.map(z,a.proxy(function(A){return this.get_node(A)},this)):z};this.get_bottom_checked=function(t){if(this.settings.checkbox.tie_selection){return this.get_bottom_selected(t)}var x=this.get_checked(true),w=[],u,v;for(u=0,v=x.length;u<v;u++){if(!x[u].children.length){w.push(x[u].id)}}return t?a.map(w,a.proxy(function(y){return this.get_node(y)},this)):w};this.load_node=function(z,u){var x,y,v,w,t,A;if(!a.isArray(z)&&!this.settings.checkbox.tie_selection){A=this.get_node(z);if(A&&A.state.loaded){for(x=0,y=A.children_d.length;x<y;x++){if(this._model.data[A.children_d[x]].state.checked){t=true;this._data.checkbox.selected=a.vakata.array_remove_item(this._data.checkbox.selected,A.children_d[x])}}}}return s.load_node.apply(this,arguments)};this.get_state=function(){var t=s.get_state.apply(this,arguments);if(this.settings.checkbox.tie_selection){return t}t.checkbox=this._data.checkbox.selected.slice();return t};this.set_state=function(w,u){var v=s.set_state.apply(this,arguments);if(v&&w.checkbox){if(!this.settings.checkbox.tie_selection){this.uncheck_all();var t=this;a.each(w.checkbox,function(x,y){t.check_node(y)})}delete w.checkbox;this.set_state(w,u);return false}return v};this.refresh=function(u,t){if(!this.settings.checkbox.tie_selection){this._data.checkbox.selected=[]}return s.refresh.apply(this,arguments)}};a.jstree.defaults.conditionalselect=function(){return true};a.jstree.plugins.conditionalselect=function(r,s){this.activate_node=function(u,t){if(this.settings.conditionalselect.call(this,this.get_node(u),t)){s.activate_node.call(this,u,t)}}};a.jstree.defaults.contextmenu={select_node:true,show_at_node:true,items:function(s,r){return{create:{separator_before:false,separator_after:true,_disabled:false,label:"Create",action:function(t){var u=a.jstree.reference(t.reference),v=u.get_node(t.reference);u.create_node(v,{},"last",function(w){setTimeout(function(){u.edit(w)},0)})}},rename:{separator_before:false,separator_after:false,_disabled:false,label:"Rename",
/*
					"shortcut"			: 113,
					"shortcut_label"	: 'F2',
					"icon"				: "glyphicon glyphicon-leaf",
					*/
action:function(t){var u=a.jstree.reference(t.reference),v=u.get_node(t.reference);u.edit(v)}},remove:{separator_before:false,icon:false,separator_after:false,_disabled:false,label:"Delete",action:function(t){var u=a.jstree.reference(t.reference),v=u.get_node(t.reference);if(u.is_selected(v)){u.delete_node(u.get_selected())}else{u.delete_node(v)}}},ccp:{separator_before:true,icon:false,separator_after:false,label:"Edit",action:false,submenu:{cut:{separator_before:false,separator_after:false,label:"Cut",action:function(t){var u=a.jstree.reference(t.reference),v=u.get_node(t.reference);if(u.is_selected(v)){u.cut(u.get_top_selected())}else{u.cut(v)}}},copy:{separator_before:false,icon:false,separator_after:false,label:"Copy",action:function(t){var u=a.jstree.reference(t.reference),v=u.get_node(t.reference);if(u.is_selected(v)){u.copy(u.get_top_selected())}else{u.copy(v)}}},paste:{separator_before:false,icon:false,_disabled:function(t){return !a.jstree.reference(t.reference).can_paste()},separator_after:false,label:"Paste",action:function(t){var u=a.jstree.reference(t.reference),v=u.get_node(t.reference);u.paste(v)}}}}}}};a.jstree.plugins.contextmenu=function(r,s){this.bind=function(){s.bind.call(this);var w=0,t=null,u,v;this.element.on("contextmenu.jstree",".jstree-anchor",a.proxy(function(y,x){y.preventDefault();w=y.ctrlKey?+new Date():0;if(x||t){w=(+new Date())+10000}if(t){clearTimeout(t)}if(!this.is_loading(y.currentTarget)){this.show_contextmenu(y.currentTarget,y.pageX,y.pageY,y)}},this)).on("click.jstree",".jstree-anchor",a.proxy(function(x){if(this._data.contextmenu.visible&&(!w||(+new Date())-w>250)){a.vakata.context.hide()}w=0},this)).on("touchstart.jstree",".jstree-anchor",function(x){if(!x.originalEvent||!x.originalEvent.changedTouches||!x.originalEvent.changedTouches[0]){return}u=x.pageX;v=x.pageY;t=setTimeout(function(){a(x.currentTarget).trigger("contextmenu",true)},750)}).on("touchmove.vakata.jstree",function(x){if(t&&x.originalEvent&&x.originalEvent.changedTouches&&x.originalEvent.changedTouches[0]&&(Math.abs(u-x.pageX)>50||Math.abs(v-x.pageY)>50)){clearTimeout(t)}}).on("touchend.vakata.jstree",function(x){if(t){clearTimeout(t)}});
/*
			if(!('oncontextmenu' in document.body) && ('ontouchstart' in document.body)) {
				var el = null, tm = null;
				this.element
					.on("touchstart", ".jstree-anchor", function (e) {
						el = e.currentTarget;
						tm = +new Date();
						$(document).one("touchend", function (e) {
							e.target = document.elementFromPoint(e.originalEvent.targetTouches[0].pageX - window.pageXOffset, e.originalEvent.targetTouches[0].pageY - window.pageYOffset);
							e.currentTarget = e.target;
							tm = ((+(new Date())) - tm);
							if(e.target === el && tm > 600 && tm < 1000) {
								e.preventDefault();
								$(el).trigger('contextmenu', e);
							}
							el = null;
							tm = null;
						});
					});
			}
			*/
a(j).on("context_hide.vakata.jstree",a.proxy(function(){this._data.contextmenu.visible=false},this))};this.teardown=function(){if(this._data.contextmenu.visible){a.vakata.context.hide()}s.teardown.call(this)};this.show_contextmenu=function(A,C,D,v){A=this.get_node(A);if(!A||A.id===a.jstree.root){return false}var B=this.settings.contextmenu,u=this.get_node(A,true),t=u.children(".jstree-anchor"),z=false,w=false;if(B.show_at_node||C===q||D===q){z=t.offset();C=z.left;D=z.top+this._data.core.li_height}if(this.settings.contextmenu.select_node&&!this.is_selected(A)){this.activate_node(A,v)}w=B.items;if(a.isFunction(w)){w=w.call(this,A,a.proxy(function(x){this._show_contextmenu(A,C,D,x)},this))}if(a.isPlainObject(w)){this._show_contextmenu(A,C,D,w)}};this._show_contextmenu=function(w,z,A,v){var u=this.get_node(w,true),t=u.children(".jstree-anchor");a(j).one("context_show.vakata.jstree",a.proxy(function(B,y){var x="jstree-contextmenu jstree-"+this.get_theme()+"-contextmenu";a(y.element).addClass(x)},this));this._data.contextmenu.visible=true;a.vakata.context.show(t,{x:z,y:A},v);this.trigger("show_contextmenu",{node:w,x:z,y:A})}};(function(r){var s=false,t={element:false,reference:false,position_x:0,position_y:0,items:[],html:"",is_visible:false};r.vakata.context={settings:{hide_onmouseleave:0,icons:true},_trigger:function(u){r(j).triggerHandler("context_"+u+".vakata",{reference:t.reference,element:t.element,position:{x:t.position_x,y:t.position_y}})},_execute:function(u){u=t.items[u];return u&&(!u._disabled||(r.isFunction(u._disabled)&&!u._disabled({item:u,reference:t.reference,element:t.element})))&&u.action?u.action.call(null,{item:u,reference:t.reference,element:t.element,position:{x:t.position_x,y:t.position_y}}):false},_parse:function(v,u){if(!v){return false}if(!u){t.html="";t.items=[]}var x="",w=false,y;if(u){x+="<ul>"}r.each(v,function(z,A){if(!A){return true}t.items.push(A);if(!w&&A.separator_before){x+="<li class='vakata-context-separator'><a href='#' "+(r.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>"}w=false;x+="<li class='"+(A._class||"")+(A._disabled===true||(r.isFunction(A._disabled)&&A._disabled({item:A,reference:t.reference,element:t.element}))?" vakata-contextmenu-disabled ":"")+"' "+(A.shortcut?" data-shortcut='"+A.shortcut+"' ":"")+">";x+="<a href='#' rel='"+(t.items.length-1)+"'>";if(r.vakata.context.settings.icons){x+="<i ";if(A.icon){if(A.icon.indexOf("/")!==-1||A.icon.indexOf(".")!==-1){x+=" style='background:url(\""+A.icon+"\") center center no-repeat' "}else{x+=" class='"+A.icon+"' "}}x+="></i><span class='vakata-contextmenu-sep'>&#160;</span>"}x+=(r.isFunction(A.label)?A.label({item:z,reference:t.reference,element:t.element}):A.label)+(A.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+A.shortcut+'">'+(A.shortcut_label||"")+"</span>":"")+"</a>";if(A.submenu){y=r.vakata.context._parse(A.submenu,true);if(y){x+=y}}x+="</li>";if(A.separator_after){x+="<li class='vakata-context-separator'><a href='#' "+(r.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>";w=true}});x=x.replace(/<li class\='vakata-context-separator'\><\/li\>$/,"");if(u){x+="</ul>"}if(!u){t.html=x;r.vakata.context._trigger("parse")}return x.length>10?x:false},_show_submenu:function(B){B=r(B);if(!B.length||!B.children("ul").length){return}var z=B.children("ul"),D=B.offset().left+B.outerWidth(),E=B.offset().top,C=z.width(),A=z.height(),v=r(window).width()+r(window).scrollLeft(),u=r(window).height()+r(window).scrollTop();if(s){B[D-(C+10+B.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left")}else{B[D+C+10>v?"addClass":"removeClass"]("vakata-context-right")}if(E+A+10>u){z.css("bottom","-1px")}z.show()},show:function(F,E,v){var D,B,H,I,G,C,A,z,u=true;if(t.element&&t.element.length){t.element.width("")}switch(u){case (!E&&!F):return false;case (!!E&&!!F):t.reference=F;t.position_x=E.x;t.position_y=E.y;break;case (!E&&!!F):t.reference=F;D=F.offset();t.position_x=D.left+F.outerHeight();t.position_y=D.top;break;case (!!E&&!F):t.position_x=E.x;t.position_y=E.y;break}if(!!F&&!v&&r(F).data("vakata_contextmenu")){v=r(F).data("vakata_contextmenu")}if(r.vakata.context._parse(v)){t.element.html(t.html)}if(t.items.length){t.element.appendTo("body");B=t.element;H=t.position_x;I=t.position_y;G=B.width();C=B.height();A=r(window).width()+r(window).scrollLeft();z=r(window).height()+r(window).scrollTop();if(s){H-=(B.outerWidth()-r(F).outerWidth());if(H<r(window).scrollLeft()+20){H=r(window).scrollLeft()+20}}if(H+G+20>A){H=A-(G+20)}if(I+C+20>z){I=z-(C+20)}t.element.css({left:H,top:I}).show().find("a").first().focus().parent().addClass("vakata-context-hover");t.is_visible=true;r.vakata.context._trigger("show")}},hide:function(){if(t.is_visible){t.element.hide().find("ul").hide().end().find(":focus").blur().end().detach();t.is_visible=false;r.vakata.context._trigger("hide")}}};r(function(){s=r("body").css("direction")==="rtl";var u=false;t.element=r("<ul class='vakata-context'></ul>");t.element.on("mouseenter","li",function(v){v.stopImmediatePropagation();if(r.contains(this,v.relatedTarget)){return}if(u){clearTimeout(u)}t.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end();r(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover");r.vakata.context._show_submenu(this)}).on("mouseleave","li",function(v){if(r.contains(this,v.relatedTarget)){return}r(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")}).on("mouseleave",function(v){r(this).find(".vakata-context-hover").removeClass("vakata-context-hover");if(r.vakata.context.settings.hide_onmouseleave){u=setTimeout((function(w){return function(){r.vakata.context.hide()}}(this)),r.vakata.context.settings.hide_onmouseleave)}}).on("click","a",function(v){v.preventDefault();if(!r(this).blur().parent().hasClass("vakata-context-disabled")&&r.vakata.context._execute(r(this).attr("rel"))!==false){r.vakata.context.hide()}}).on("keydown","a",function(v){var w=null;switch(v.which){case 13:case 32:v.type="mouseup";v.preventDefault();r(v.currentTarget).trigger(v);break;case 37:if(t.is_visible){t.element.find(".vakata-context-hover").last().closest("li").first().find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").focus();v.stopImmediatePropagation();v.preventDefault()}break;case 38:if(t.is_visible){w=t.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first();if(!w.length){w=t.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()}w.addClass("vakata-context-hover").children("a").focus();v.stopImmediatePropagation();v.preventDefault()}break;case 39:if(t.is_visible){t.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").focus();v.stopImmediatePropagation();v.preventDefault()}break;case 40:if(t.is_visible){w=t.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first();if(!w.length){w=t.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()}w.addClass("vakata-context-hover").children("a").focus();v.stopImmediatePropagation();v.preventDefault()}break;case 27:r.vakata.context.hide();v.preventDefault();break;default:break}}).on("keydown",function(w){w.preventDefault();var v=t.element.find(".vakata-contextmenu-shortcut-"+w.which).parent();if(v.parent().not(".vakata-context-disabled")){v.click()}});r(j).on("mousedown.vakata.jstree",function(v){if(t.is_visible&&!r.contains(t.element[0],v.target)){r.vakata.context.hide()}}).on("context_show.vakata.jstree",function(w,v){t.element.find("li:has(ul)").children("a").addClass("vakata-context-parent");if(s){t.element.addClass("vakata-context-rtl").css("direction","rtl")}t.element.find("ul").hide().end()})})}(a));a.jstree.defaults.dnd={copy:true,open_timeout:500,is_draggable:true,check_while_dragging:true,always_copy:false,inside_pos:0,drag_selection:true,touch:true,large_drop_target:false,large_drag_target:false};a.jstree.plugins.dnd=function(r,s){this.bind=function(){s.bind.call(this);this.element.on("mousedown.jstree touchstart.jstree",this.settings.dnd.large_drag_target?".jstree-node":".jstree-anchor",a.proxy(function(t){if(this.settings.dnd.large_drag_target&&a(t.target).closest(".jstree-node")[0]!==t.currentTarget){return true}if(t.type==="touchstart"&&(!this.settings.dnd.touch||(this.settings.dnd.touch==="selected"&&!a(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").hasClass("jstree-clicked")))){return true}var v=this.get_node(t.target),u=this.is_selected(v)&&this.settings.dnd.drag_selection?this.get_top_selected().length:1,w=(u>1?u+" "+this.get_string("nodes"):this.get_text(t.currentTarget));if(this.settings.core.force_text){w=a.vakata.html.escape(w)}if(v&&v.id&&v.id!==a.jstree.root&&(t.which===1||t.type==="touchstart")&&(this.settings.dnd.is_draggable===true||(a.isFunction(this.settings.dnd.is_draggable)&&this.settings.dnd.is_draggable.call(this,(u>1?this.get_top_selected(true):[v]),t)))){this.element.trigger("mousedown.jstree");return a.vakata.dnd.start(t,{jstree:true,origin:this,obj:this.get_node(v,true),nodes:u>1?this.get_top_selected():[v.id]},'<div id="jstree-dnd" class="jstree-'+this.get_theme()+" jstree-"+this.get_theme()+"-"+this.get_theme_variant()+" "+(this.settings.core.themes.responsive?" jstree-dnd-responsive":"")+'"><i class="jstree-icon jstree-er"></i>'+w+'<ins class="jstree-copy" style="display:none;">+</ins></div>')}},this))}};a(function(){var t=false,r=false,s=false,v=false,u=a('<div id="jstree-marker">&#160;</div>').hide();a(j).on("dnd_start.vakata.jstree",function(x,w){t=false;s=false;if(!w||!w.data||!w.data.jstree){return}u.appendTo("body")}).on("dnd_move.vakata.jstree",function(x,w){if(v){clearTimeout(v)}if(!w||!w.data||!w.data.jstree){return}if(w.event.target.id&&w.event.target.id==="jstree-marker"){return}s=w.event;var A=a.jstree.reference(w.event.target),K=false,E=false,L=false,Q,C,M,y,H,z,D,F,N,O,G,J,I,B,P;if(A&&A._data&&A._data.dnd){u.attr("class","jstree-"+A.get_theme()+(A.settings.core.themes.responsive?" jstree-dnd-responsive":""));w.helper.children().attr("class","jstree-"+A.get_theme()+" jstree-"+A.get_theme()+"-"+A.get_theme_variant()+" "+(A.settings.core.themes.responsive?" jstree-dnd-responsive":"")).find(".jstree-copy").first()[w.data.origin&&(w.data.origin.settings.dnd.always_copy||(w.data.origin.settings.dnd.copy&&(w.event.metaKey||w.event.ctrlKey)))?"show":"hide"]();if((w.event.target===A.element[0]||w.event.target===A.get_container_ul()[0])&&A.get_container_ul().children().length===0){F=true;for(N=0,O=w.data.nodes.length;N<O;N++){F=F&&A.check((w.data.origin&&(w.data.origin.settings.dnd.always_copy||(w.data.origin.settings.dnd.copy&&(w.event.metaKey||w.event.ctrlKey)))?"copy_node":"move_node"),(w.data.origin&&w.data.origin!==A?w.data.origin.get_node(w.data.nodes[N]):w.data.nodes[N]),a.jstree.root,"last",{dnd:true,ref:A.get_node(a.jstree.root),pos:"i",origin:w.data.origin,is_multi:(w.data.origin&&w.data.origin!==A),is_foreign:(!w.data.origin)});if(!F){break}}if(F){t={ins:A,par:a.jstree.root,pos:"last"};u.hide();w.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok");return}}else{K=A.settings.dnd.large_drop_target?a(w.event.target).closest(".jstree-node").children(".jstree-anchor"):a(w.event.target).closest(".jstree-anchor");if(K&&K.length&&K.parent().is(".jstree-closed, .jstree-open, .jstree-leaf")){E=K.offset();L=w.event.pageY-E.top;y=K.outerHeight();if(L<y/3){D=["b","i","a"]}else{if(L>y-y/3){D=["a","i","b"]}else{D=L>y/2?["i","a","b"]:["i","b","a"]}}a.each(D,function(R,S){switch(S){case"b":C=E.left-6;M=E.top;H=A.get_parent(K);z=K.parent().index();break;case"i":B=A.settings.dnd.inside_pos;P=A.get_node(K.parent());C=E.left-2;M=E.top+y/2+1;H=P.id;z=B==="first"?0:(B==="last"?P.children.length:Math.min(B,P.children.length));break;case"a":C=E.left-6;M=E.top+y;H=A.get_parent(K);z=K.parent().index()+1;break}F=true;for(N=0,O=w.data.nodes.length;N<O;N++){G=w.data.origin&&(w.data.origin.settings.dnd.always_copy||(w.data.origin.settings.dnd.copy&&(w.event.metaKey||w.event.ctrlKey)))?"copy_node":"move_node";J=z;if(G==="move_node"&&S==="a"&&(w.data.origin&&w.data.origin===A)&&H===A.get_parent(w.data.nodes[N])){I=A.get_node(H);if(J>a.inArray(w.data.nodes[N],I.children)){J-=1}}F=F&&((A&&A.settings&&A.settings.dnd&&A.settings.dnd.check_while_dragging===false)||A.check(G,(w.data.origin&&w.data.origin!==A?w.data.origin.get_node(w.data.nodes[N]):w.data.nodes[N]),H,J,{dnd:true,ref:A.get_node(K.parent()),pos:S,origin:w.data.origin,is_multi:(w.data.origin&&w.data.origin!==A),is_foreign:(!w.data.origin)}));if(!F){if(A&&A.last_error){r=A.last_error()}break}}if(S==="i"&&K.parent().is(".jstree-closed")&&A.settings.dnd.open_timeout){v=setTimeout((function(T,U){return function(){T.open_node(U)}}(A,K)),A.settings.dnd.open_timeout)}if(F){t={ins:A,par:H,pos:S==="i"&&B==="last"&&z===0&&!A.is_loaded(P)?"last":z};u.css({left:C+"px",top:M+"px"}).show();w.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok");r={};D=true;return false}});if(D===true){return}}}}t=false;w.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er");u.hide()}).on("dnd_scroll.vakata.jstree",function(x,w){if(!w||!w.data||!w.data.jstree){return}u.hide();t=false;s=false;w.helper.find(".jstree-icon").first().removeClass("jstree-ok").addClass("jstree-er")}).on("dnd_stop.vakata.jstree",function(x,w){if(v){clearTimeout(v)}if(!w||!w.data||!w.data.jstree){return}u.hide().detach();var y,z,A=[];if(t){for(y=0,z=w.data.nodes.length;y<z;y++){A[y]=w.data.origin?w.data.origin.get_node(w.data.nodes[y]):w.data.nodes[y]}t.ins[w.data.origin&&(w.data.origin.settings.dnd.always_copy||(w.data.origin.settings.dnd.copy&&(w.event.metaKey||w.event.ctrlKey)))?"copy_node":"move_node"](A,t.par,t.pos,false,false,false,w.data.origin)}else{y=a(w.event.target).closest(".jstree");if(y.length&&r&&r.error&&r.error==="check"){y=y.jstree(true);if(y){y.settings.core.error.call(this,r)}}}s=false;t=false}).on("keyup.jstree keydown.jstree",function(x,w){w=a.vakata.dnd._get();if(w&&w.data&&w.data.jstree){w.helper.find(".jstree-copy").first()[w.data.origin&&(w.data.origin.settings.dnd.always_copy||(w.data.origin.settings.dnd.copy&&(x.metaKey||x.ctrlKey)))?"show":"hide"]();if(s){s.metaKey=x.metaKey;s.ctrlKey=x.ctrlKey;a.vakata.dnd._trigger("move",s)}}})});(function(r){r.vakata.html={div:r("<div />"),escape:function(t){return r.vakata.html.div.text(t).html()},strip:function(t){return r.vakata.html.div.empty().append(r.parseHTML(t)).text()}};var s={element:false,target:false,is_down:false,is_drag:false,helper:false,helper_w:0,data:false,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:false,scroll_i:false,is_touch:false};r.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5,threshold_touch:50},_trigger:function(v,u){var t=r.vakata.dnd._get();t.event=u;r(j).triggerHandler("dnd_"+v+".vakata",t)},_get:function(){return{data:s.data,element:s.element,helper:s.helper}},_clean:function(){if(s.helper){s.helper.remove()}if(s.scroll_i){clearInterval(s.scroll_i);s.scroll_i=false}s={element:false,target:false,is_down:false,is_drag:false,helper:false,helper_w:0,data:false,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:false,scroll_i:false,is_touch:false};r(j).off("mousemove.vakata.jstree touchmove.vakata.jstree",r.vakata.dnd.drag);r(j).off("mouseup.vakata.jstree touchend.vakata.jstree",r.vakata.dnd.stop)},_scroll:function(u){if(!s.scroll_e||(!s.scroll_l&&!s.scroll_t)){if(s.scroll_i){clearInterval(s.scroll_i);s.scroll_i=false}return false}if(!s.scroll_i){s.scroll_i=setInterval(r.vakata.dnd._scroll,100);return false}if(u===true){return false}var t=s.scroll_e.scrollTop(),v=s.scroll_e.scrollLeft();s.scroll_e.scrollTop(t+s.scroll_t*r.vakata.dnd.settings.scroll_speed);s.scroll_e.scrollLeft(v+s.scroll_l*r.vakata.dnd.settings.scroll_speed);if(t!==s.scroll_e.scrollTop()||v!==s.scroll_e.scrollLeft()){r.vakata.dnd._trigger("scroll",s.scroll_e)}},start:function(u,t,v){if(u.type==="touchstart"&&u.originalEvent&&u.originalEvent.changedTouches&&u.originalEvent.changedTouches[0]){u.pageX=u.originalEvent.changedTouches[0].pageX;u.pageY=u.originalEvent.changedTouches[0].pageY;u.target=j.elementFromPoint(u.originalEvent.changedTouches[0].pageX-window.pageXOffset,u.originalEvent.changedTouches[0].pageY-window.pageYOffset)}if(s.is_drag){r.vakata.dnd.stop({})}try{u.currentTarget.unselectable="on";u.currentTarget.onselectstart=function(){return false};if(u.currentTarget.style){u.currentTarget.style.MozUserSelect="none"}}catch(w){}s.init_x=u.pageX;s.init_y=u.pageY;s.data=t;s.is_down=true;s.element=u.currentTarget;s.target=u.target;s.is_touch=u.type==="touchstart";if(v!==false){s.helper=r("<div id='vakata-dnd'></div>").html(v).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"})}r(j).on("mousemove.vakata.jstree touchmove.vakata.jstree",r.vakata.dnd.drag);r(j).on("mouseup.vakata.jstree touchend.vakata.jstree",r.vakata.dnd.stop);return false},drag:function(z){if(z.type==="touchmove"&&z.originalEvent&&z.originalEvent.changedTouches&&z.originalEvent.changedTouches[0]){z.pageX=z.originalEvent.changedTouches[0].pageX;z.pageY=z.originalEvent.changedTouches[0].pageY;z.target=j.elementFromPoint(z.originalEvent.changedTouches[0].pageX-window.pageXOffset,z.originalEvent.changedTouches[0].pageY-window.pageYOffset)}if(!s.is_down){return}if(!s.is_drag){if(Math.abs(z.pageX-s.init_x)>(s.is_touch?r.vakata.dnd.settings.threshold_touch:r.vakata.dnd.settings.threshold)||Math.abs(z.pageY-s.init_y)>(s.is_touch?r.vakata.dnd.settings.threshold_touch:r.vakata.dnd.settings.threshold)){if(s.helper){s.helper.appendTo("body");s.helper_w=s.helper.outerWidth()}s.is_drag=true;r.vakata.dnd._trigger("start",z)}else{return}}var t=false,C=false,u=false,D=false,y=false,E=false,x=false,v=false,B=false,A=false;s.scroll_t=0;s.scroll_l=0;s.scroll_e=false;r(r(z.target).parentsUntil("body").addBack().get().reverse()).filter(function(){return(/^auto|scroll$/).test(r(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)}).each(function(){var F=r(this),w=F.offset();if(this.scrollHeight>this.offsetHeight){if(w.top+F.height()-z.pageY<r.vakata.dnd.settings.scroll_proximity){s.scroll_t=1}if(z.pageY-w.top<r.vakata.dnd.settings.scroll_proximity){s.scroll_t=-1}}if(this.scrollWidth>this.offsetWidth){if(w.left+F.width()-z.pageX<r.vakata.dnd.settings.scroll_proximity){s.scroll_l=1}if(z.pageX-w.left<r.vakata.dnd.settings.scroll_proximity){s.scroll_l=-1}}if(s.scroll_t||s.scroll_l){s.scroll_e=r(this);return false}});if(!s.scroll_e){t=r(j);C=r(window);u=t.height();D=C.height();y=t.width();E=C.width();x=t.scrollTop();v=t.scrollLeft();if(u>D&&z.pageY-x<r.vakata.dnd.settings.scroll_proximity){s.scroll_t=-1}if(u>D&&D-(z.pageY-x)<r.vakata.dnd.settings.scroll_proximity){s.scroll_t=1}if(y>E&&z.pageX-v<r.vakata.dnd.settings.scroll_proximity){s.scroll_l=-1}if(y>E&&E-(z.pageX-v)<r.vakata.dnd.settings.scroll_proximity){s.scroll_l=1}if(s.scroll_t||s.scroll_l){s.scroll_e=t}}if(s.scroll_e){r.vakata.dnd._scroll(true)}if(s.helper){B=parseInt(z.pageY+r.vakata.dnd.settings.helper_top,10);A=parseInt(z.pageX+r.vakata.dnd.settings.helper_left,10);if(u&&B+25>u){B=u-50}if(y&&A+s.helper_w>y){A=y-(s.helper_w+2)}s.helper.css({left:A+"px",top:B+"px"})}r.vakata.dnd._trigger("move",z);return false},stop:function(t){if(t.type==="touchend"&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]){t.pageX=t.originalEvent.changedTouches[0].pageX;t.pageY=t.originalEvent.changedTouches[0].pageY;t.target=j.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)}if(s.is_drag){r.vakata.dnd._trigger("stop",t)}else{if(t.type==="touchend"&&t.target===s.target){var u=setTimeout(function(){r(t.target).click()},100);r(t.target).one("click",function(){if(u){clearTimeout(u)}})}}r.vakata.dnd._clean();return false}}}(a));a.jstree.defaults.massload=null;a.jstree.plugins.massload=function(r,s){this.init=function(t,u){s.init.call(this,t,u);this._data.massload={}};this._load_nodes=function(v,t,u){var w=this.settings.massload;if(u&&!a.isEmptyObject(this._data.massload)){return s._load_nodes.call(this,v,t,u)}if(a.isFunction(w)){return w.call(this,v,a.proxy(function(x){if(x){for(var y in x){if(x.hasOwnProperty(y)){this._data.massload[y]=x[y]}}}s._load_nodes.call(this,v,t,u)},this))}if(typeof w==="object"&&w&&w.url){w=a.extend(true,{},w);if(a.isFunction(w.url)){w.url=w.url.call(this,v)}if(a.isFunction(w.data)){w.data=w.data.call(this,v)}return a.ajax(w).done(a.proxy(function(y,A,B){if(y){for(var z in y){if(y.hasOwnProperty(z)){this._data.massload[z]=y[z]}}}s._load_nodes.call(this,v,t,u)},this)).fail(a.proxy(function(x){s._load_nodes.call(this,v,t,u)},this))}return s._load_nodes.call(this,v,t,u)};this._load_node=function(v,t){var u=this._data.massload[v.id];if(u){return this[typeof u==="string"?"_append_html_data":"_append_json_data"](v,typeof u==="string"?a(a.parseHTML(u)).filter(function(){return this.nodeType!==3}):u,function(w){t.call(this,w);delete this._data.massload[v.id]})}return s._load_node.call(this,v,t)}};a.jstree.defaults.search={ajax:false,fuzzy:false,case_sensitive:false,show_only_matches:false,show_only_matches_children:false,close_opened_onclear:true,search_leaves_only:false,search_callback:false};a.jstree.plugins.search=function(r,s){this.bind=function(){s.bind.call(this);this._data.search.str="";this._data.search.dom=a();this._data.search.res=[];this._data.search.opn=[];this._data.search.som=false;this._data.search.smc=false;this._data.search.hdn=[];this.element.on("search.jstree",a.proxy(function(u,t){if(this._data.search.som&&t.res.length){var x=this._model.data,v,w,y=[];for(v=0,w=t.res.length;v<w;v++){if(x[t.res[v]]&&!x[t.res[v]].state.hidden){y.push(t.res[v]);y=y.concat(x[t.res[v]].parents);if(this._data.search.smc){y=y.concat(x[t.res[v]].children_d)}}}y=a.vakata.array_remove_item(a.vakata.array_unique(y),a.jstree.root);this._data.search.hdn=this.hide_all(true);this.show_node(y)}},this)).on("clear_search.jstree",a.proxy(function(u,t){if(this._data.search.som&&t.res.length){this.show_node(this._data.search.hdn)}},this))};this.search=function(G,F,D,x,u,E){if(G===false||a.trim(G.toString())===""){return this.clear_search()}x=this.get_node(x);x=x&&x.id?x.id:null;G=G.toString();var C=this.settings.search,t=C.ajax?C.ajax:false,z=this._model.data,v=null,B=[],A=[],w,y;if(this._data.search.res.length&&!u){this.clear_search()}if(D===q){D=C.show_only_matches}if(E===q){E=C.show_only_matches_children}if(!F&&t!==false){if(a.isFunction(t)){return t.call(this,G,a.proxy(function(H){if(H&&H.d){H=H.d}this._load_nodes(!a.isArray(H)?[]:a.vakata.array_unique(H),function(){this.search(G,true,D,x,u)},true)},this),x)}else{t=a.extend({},t);if(!t.data){t.data={}}t.data.str=G;if(x){t.data.inside=x}return a.ajax(t).fail(a.proxy(function(){this._data.core.last_error={error:"ajax",plugin:"search",id:"search_01",reason:"Could not load search parents",data:JSON.stringify(t)};this.settings.core.error.call(this,this._data.core.last_error)},this)).done(a.proxy(function(H){if(H&&H.d){H=H.d}this._load_nodes(!a.isArray(H)?[]:a.vakata.array_unique(H),function(){this.search(G,true,D,x,u)},true)},this))}}if(!u){this._data.search.str=G;this._data.search.dom=a();this._data.search.res=[];this._data.search.opn=[];this._data.search.som=D;this._data.search.smc=E}v=new a.vakata.search(G,true,{caseSensitive:C.case_sensitive,fuzzy:C.fuzzy});a.each(z[x?x:a.jstree.root].children_d,function(I,H){var J=z[H];if(J.text&&(!C.search_leaves_only||(J.state.loaded&&J.children.length===0))&&((C.search_callback&&C.search_callback.call(this,G,J))||(!C.search_callback&&v.search(J.text).isMatch))){B.push(H);A=A.concat(J.parents)}});if(B.length){A=a.vakata.array_unique(A);for(w=0,y=A.length;w<y;w++){if(A[w]!==a.jstree.root&&z[A[w]]&&this.open_node(A[w],null,0)===true){this._data.search.opn.push(A[w])}}if(!u){this._data.search.dom=a(this.element[0].querySelectorAll("#"+a.map(B,function(H){return"0123456789".indexOf(H[0])!==-1?"\\3"+H[0]+" "+H.substr(1).replace(a.jstree.idregex,"\\$&"):H.replace(a.jstree.idregex,"\\$&")}).join(", #")));this._data.search.res=B}else{this._data.search.dom=this._data.search.dom.add(a(this.element[0].querySelectorAll("#"+a.map(B,function(H){return"0123456789".indexOf(H[0])!==-1?"\\3"+H[0]+" "+H.substr(1).replace(a.jstree.idregex,"\\$&"):H.replace(a.jstree.idregex,"\\$&")}).join(", #"))));this._data.search.res=a.vakata.array_unique(this._data.search.res.concat(B))}this._data.search.dom.children(".jstree-anchor").addClass("jstree-search")}this.trigger("search",{nodes:this._data.search.dom,str:G,res:this._data.search.res,show_only_matches:D})};this.clear_search=function(){if(this.settings.search.close_opened_onclear){this.close_node(this._data.search.opn,0)}this.trigger("clear_search",{nodes:this._data.search.dom,str:this._data.search.str,res:this._data.search.res});if(this._data.search.res.length){this._data.search.dom=a(this.element[0].querySelectorAll("#"+a.map(this._data.search.res,function(t){return"0123456789".indexOf(t[0])!==-1?"\\3"+t[0]+" "+t.substr(1).replace(a.jstree.idregex,"\\$&"):t.replace(a.jstree.idregex,"\\$&")}).join(", #")));this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search")}this._data.search.str="";this._data.search.res=[];this._data.search.opn=[];this._data.search.dom=a()};this.redraw_node=function(y,u,t,v){y=s.redraw_node.apply(this,arguments);if(y){if(a.inArray(y.id,this._data.search.res)!==-1){var w,x,z=null;for(w=0,x=y.childNodes.length;w<x;w++){if(y.childNodes[w]&&y.childNodes[w].className&&y.childNodes[w].className.indexOf("jstree-anchor")!==-1){z=y.childNodes[w];break}}if(z){z.className+=" jstree-search"}}}return y}};(function(r){r.vakata.search=function(y,C,x){x=x||{};x=r.extend({},r.vakata.search.defaults,x);if(x.fuzzy!==false){x.fuzzy=true}y=x.caseSensitive?y:y.toLowerCase();var u=x.location,t=x.distance,v=x.threshold,A=y.length,w,z,s,B;if(A>32){x.fuzzy=false}if(x.fuzzy){w=1<<(A-1);z=(function(){var E={},D=0;for(D=0;D<A;D++){E[y.charAt(D)]=0}for(D=0;D<A;D++){E[y.charAt(D)]|=1<<(A-D-1)}return E}());s=function(E,G){var D=E/A,F=Math.abs(u-G);if(!t){return F?1:D}return D+(F/t)}}B=function(R){R=x.caseSensitive?R:R.toLowerCase();if(y===R||R.indexOf(y)!==-1){return{isMatch:true,score:0}}if(!x.fuzzy){return{isMatch:false,score:1}}var J,K,S=R.length,P=v,D=R.indexOf(y,u),G,F,E=A+S,L,Q,I,N,H,O=1,M=[];if(D!==-1){P=Math.min(s(0,D),P);D=R.lastIndexOf(y,u+A);if(D!==-1){P=Math.min(s(0,D),P)}}D=-1;for(J=0;J<A;J++){G=0;F=E;while(G<F){if(s(J,u+F)<=P){G=F}else{E=F}F=Math.floor((E-G)/2+G)}E=F;Q=Math.max(1,u-F+1);I=Math.min(u+F,S)+A;N=new Array(I+2);N[I+1]=(1<<J)-1;for(K=I;K>=Q;K--){H=z[R.charAt(K-1)];if(J===0){N[K]=((N[K+1]<<1)|1)&H}else{N[K]=((N[K+1]<<1)|1)&H|(((L[K+1]|L[K])<<1)|1)|L[K+1]}if(N[K]&w){O=s(J,K-1);if(O<=P){P=O;D=K-1;M.push(D);if(D>u){Q=Math.max(1,2*u-D)}else{break}}}}if(s(J+1,u)>P){break}L=N}return{isMatch:D>=0,score:O}};return C===true?{search:B}:B(C)};r.vakata.search.defaults={location:0,distance:100,threshold:0.6,fuzzy:false,caseSensitive:false}}(a));a.jstree.defaults.sort=function(r,s){return this.get_text(r)>this.get_text(s)?1:-1};a.jstree.plugins.sort=function(r,s){this.bind=function(){s.bind.call(this);this.element.on("model.jstree",a.proxy(function(u,t){this.sort(t.parent,true)},this)).on("rename_node.jstree create_node.jstree",a.proxy(function(u,t){this.sort(t.parent||t.node.parent,false);this.redraw_node(t.parent||t.node.parent,true)},this)).on("move_node.jstree copy_node.jstree",a.proxy(function(u,t){this.sort(t.parent,false);this.redraw_node(t.parent,true)},this))};this.sort=function(w,t){var u,v;w=this.get_node(w);if(w&&w.children&&w.children.length){w.children.sort(a.proxy(this.settings.sort,this));if(t){for(u=0,v=w.children_d.length;u<v;u++){this.sort(w.children_d[u],false)}}}}};var p=false;a.jstree.defaults.state={key:"jstree",events:"changed.jstree open_node.jstree close_node.jstree check_node.jstree uncheck_node.jstree",ttl:false,filter:false};a.jstree.plugins.state=function(r,s){this.bind=function(){s.bind.call(this);var t=a.proxy(function(){this.element.on(this.settings.state.events,a.proxy(function(){if(p){clearTimeout(p)}p=setTimeout(a.proxy(function(){this.save_state()},this),100)},this));this.trigger("state_ready")},this);this.element.on("ready.jstree",a.proxy(function(v,u){this.element.one("restore_state.jstree",t);if(!this.restore_state()){t()}},this))};this.save_state=function(){var t={state:this.get_state(),ttl:this.settings.state.ttl,sec:+(new Date())};a.vakata.storage.set(this.settings.state.key,JSON.stringify(t))};this.restore_state=function(){var u=a.vakata.storage.get(this.settings.state.key);if(!!u){try{u=JSON.parse(u)}catch(t){return false}}if(!!u&&u.ttl&&u.sec&&+(new Date())-u.sec>u.ttl){return false}if(!!u&&u.state){u=u.state}if(!!u&&a.isFunction(this.settings.state.filter)){u=this.settings.state.filter.call(this,u)}if(!!u){this.element.one("set_state.jstree",function(w,v){v.instance.trigger("restore_state",{state:a.extend(true,{},u)})});this.set_state(u);return true}return false};this.clear_state=function(){return a.vakata.storage.del(this.settings.state.key)}};(function(r,s){r.vakata.storage={set:function(t,u){return window.localStorage.setItem(t,u)},get:function(t){return window.localStorage.getItem(t)},del:function(t){return window.localStorage.removeItem(t)}}}(a));a.jstree.defaults.types={"default":{}};a.jstree.defaults.types[a.jstree.root]={};a.jstree.plugins.types=function(r,s){this.init=function(t,w){var u,v;if(w&&w.types&&w.types["default"]){for(u in w.types){if(u!=="default"&&u!==a.jstree.root&&w.types.hasOwnProperty(u)){for(v in w.types["default"]){if(w.types["default"].hasOwnProperty(v)&&w.types[u][v]===q){w.types[u][v]=w.types["default"][v]}}}}}s.init.call(this,t,w);this._model.data[a.jstree.root].type=a.jstree.root};this.refresh=function(u,t){s.refresh.call(this,u,t);this._model.data[a.jstree.root].type=a.jstree.root};this.bind=function(){this.element.on("model.jstree",a.proxy(function(x,v){var A=this._model.data,w=v.nodes,B=this.settings.types,y,z,u="default";for(y=0,z=w.length;y<z;y++){u="default";if(A[w[y]].original&&A[w[y]].original.type&&B[A[w[y]].original.type]){u=A[w[y]].original.type}if(A[w[y]].data&&A[w[y]].data.jstree&&A[w[y]].data.jstree.type&&B[A[w[y]].data.jstree.type]){u=A[w[y]].data.jstree.type}A[w[y]].type=u;if(A[w[y]].icon===true&&B[u].icon!==q){A[w[y]].icon=B[u].icon}}A[a.jstree.root].type=a.jstree.root},this));s.bind.call(this)};this.get_json=function(x,z,t){var u,v,w=this._model.data,y=z?a.extend(true,{},z,{no_id:false}):{},A=s.get_json.call(this,x,y,t);if(A===false){return false}if(a.isArray(A)){for(u=0,v=A.length;u<v;u++){A[u].type=A[u].id&&w[A[u].id]&&w[A[u].id].type?w[A[u].id].type:"default";if(z&&z.no_id){delete A[u].id;if(A[u].li_attr&&A[u].li_attr.id){delete A[u].li_attr.id}if(A[u].a_attr&&A[u].a_attr.id){delete A[u].a_attr.id}}}}else{A.type=A.id&&w[A.id]&&w[A.id].type?w[A.id].type:"default";if(z&&z.no_id){A=this._delete_ids(A)}}return A};this._delete_ids=function(v){if(a.isArray(v)){for(var t=0,u=v.length;t<u;t++){v[t]=this._delete_ids(v[t])}return v}delete v.id;if(v.li_attr&&v.li_attr.id){delete v.li_attr.id}if(v.a_attr&&v.a_attr.id){delete v.a_attr.id}if(v.children&&a.isArray(v.children)){v.children=this._delete_ids(v.children)}return v};this.check=function(t,z,A,B,y){if(s.check.call(this,t,z,A,B,y)===false){return false}z=z&&z.id?z:this.get_node(z);A=A&&A.id?A:this.get_node(A);var x=z&&z.id?(y&&y.origin?y.origin:a.jstree.reference(z.id)):null,C,u,v,w;x=x&&x._model&&x._model.data?x._model.data:null;switch(t){case"create_node":case"move_node":case"copy_node":if(t!=="move_node"||a.inArray(z.id,A.children)===-1){C=this.get_rules(A);if(C.max_children!==q&&C.max_children!==-1&&C.max_children===A.children.length){this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+t,data:JSON.stringify({chk:t,pos:B,obj:z&&z.id?z.id:false,par:A&&A.id?A.id:false})};return false}if(C.valid_children!==q&&C.valid_children!==-1&&a.inArray((z.type||"default"),C.valid_children)===-1){this._data.core.last_error={error:"check",plugin:"types",id:"types_02",reason:"valid_children prevents function: "+t,data:JSON.stringify({chk:t,pos:B,obj:z&&z.id?z.id:false,par:A&&A.id?A.id:false})};return false}if(x&&z.children_d&&z.parents){u=0;for(v=0,w=z.children_d.length;v<w;v++){u=Math.max(u,x[z.children_d[v]].parents.length)}u=u-z.parents.length+1}if(u<=0||u===q){u=1}do{if(C.max_depth!==q&&C.max_depth!==-1&&C.max_depth<u){this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+t,data:JSON.stringify({chk:t,pos:B,obj:z&&z.id?z.id:false,par:A&&A.id?A.id:false})};return false}A=this.get_node(A.parent);C=this.get_rules(A);u++}while(A)}break}return true};this.get_rules=function(t){t=this.get_node(t);if(!t){return false}var u=this.get_type(t,true);if(u.max_depth===q){u.max_depth=-1}if(u.max_children===q){u.max_children=-1}if(u.valid_children===q){u.valid_children=-1}return u};this.get_type=function(t,u){t=this.get_node(t);return(!t)?false:(u?a.extend({type:t.type},this.settings.types[t.type]):t.type)};this.set_type=function(u,A){var x,y,z,w,v;if(a.isArray(u)){u=u.slice();for(y=0,z=u.length;y<z;y++){this.set_type(u[y],A)}return true}x=this.settings.types;u=this.get_node(u);if(!x[A]||!u){return false}w=u.type;v=this.get_icon(u);u.type=A;if(v===true||(x[w]&&x[w].icon!==q&&v===x[w].icon)){this.set_icon(u,x[A].icon!==q?x[A].icon:true)}return true}};a.jstree.defaults.unique={case_sensitive:false,duplicate:function(s,r){return s+" ("+r+")"}};a.jstree.plugins.unique=function(r,s){this.check=function(u,A,B,C,y){if(s.check.call(this,u,A,B,C,y)===false){return false}A=A&&A.id?A:this.get_node(A);B=B&&B.id?B:this.get_node(B);if(!B||!B.children){return true}var z=u==="rename_node"?C:A.text,t=[],D=this.settings.unique.case_sensitive,x=this._model.data,v,w;for(v=0,w=B.children.length;v<w;v++){t.push(D?x[B.children[v]].text:x[B.children[v]].text.toLowerCase())}if(!D){z=z.toLowerCase()}switch(u){case"delete_node":return true;case"rename_node":v=(a.inArray(z,t)===-1||(A.text&&A.text[D?"toString":"toLowerCase"]()===z));if(!v){this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+z+" already exists. Preventing: "+u,data:JSON.stringify({chk:u,pos:C,obj:A&&A.id?A.id:false,par:B&&B.id?B.id:false})}}return v;case"create_node":v=(a.inArray(z,t)===-1);if(!v){this._data.core.last_error={error:"check",plugin:"unique",id:"unique_04",reason:"Child with name "+z+" already exists. Preventing: "+u,data:JSON.stringify({chk:u,pos:C,obj:A&&A.id?A.id:false,par:B&&B.id?B.id:false})}}return v;case"copy_node":v=(a.inArray(z,t)===-1);if(!v){this._data.core.last_error={error:"check",plugin:"unique",id:"unique_02",reason:"Child with name "+z+" already exists. Preventing: "+u,data:JSON.stringify({chk:u,pos:C,obj:A&&A.id?A.id:false,par:B&&B.id?B.id:false})}}return v;case"move_node":v=((A.parent===B.id&&(!y||!y.is_multi))||a.inArray(z,t)===-1);if(!v){this._data.core.last_error={error:"check",plugin:"unique",id:"unique_03",reason:"Child with name "+z+" already exists. Preventing: "+u,data:JSON.stringify({chk:u,pos:C,obj:A&&A.id?A.id:false,par:B&&B.id?B.id:false})}}return v}return true};this.create_node=function(C,B,D,t,x){if(!B||B.text===q){if(C===null){C=a.jstree.root}C=this.get_node(C);if(!C){return s.create_node.call(this,C,B,D,t,x)}D=D===q?"last":D;if(!D.toString().match(/^(before|after)$/)&&!x&&!this.is_loaded(C)){return s.create_node.call(this,C,B,D,t,x)}if(!B){B={}}var F,A,v,w,y,z=this._model.data,E=this.settings.unique.case_sensitive,u=this.settings.unique.duplicate;A=F=this.get_string("New node");v=[];for(w=0,y=C.children.length;w<y;w++){v.push(E?z[C.children[w]].text:z[C.children[w]].text.toLowerCase())}w=1;while(a.inArray(E?A:A.toLowerCase(),v)!==-1){A=u.call(this,F,(++w)).toString()}B.text=A}return s.create_node.call(this,C,B,D,t,x)}};var i=j.createElement("DIV");i.setAttribute("unselectable","on");i.setAttribute("role","presentation");i.className="jstree-wholerow";i.innerHTML="&#160;";a.jstree.plugins.wholerow=function(r,s){this.bind=function(){s.bind.call(this);this.element.on("ready.jstree set_state.jstree",a.proxy(function(){this.hide_dots()},this)).on("init.jstree loading.jstree ready.jstree",a.proxy(function(){this.get_container_ul().addClass("jstree-wholerow-ul")},this)).on("deselect_all.jstree",a.proxy(function(u,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")},this)).on("changed.jstree",a.proxy(function(u,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");var x=false,v,w;for(v=0,w=t.selected.length;v<w;v++){x=this.get_node(t.selected[v],true);if(x&&x.length){x.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")}}},this)).on("open_node.jstree",a.proxy(function(u,t){this.get_node(t.node,true).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("hover_node.jstree dehover_node.jstree",a.proxy(function(u,t){if(u.type==="hover_node"&&this.is_disabled(t.node)){return}this.get_node(t.node,true).children(".jstree-wholerow")[u.type==="hover_node"?"addClass":"removeClass"]("jstree-wholerow-hovered")},this)).on("contextmenu.jstree",".jstree-wholerow",a.proxy(function(t){t.preventDefault();var u=a.Event("contextmenu",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,pageX:t.pageX,pageY:t.pageY});a(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(u)},this))
/*
				.on("mousedown.jstree touchstart.jstree", ".jstree-wholerow", function (e) {
						if(e.target === e.currentTarget) {
							var a = $(e.currentTarget).closest(".jstree-node").children(".jstree-anchor");
							e.target = a[0];
							a.trigger(e);
						}
					})
				*/
.on("click.jstree",".jstree-wholerow",function(t){t.stopImmediatePropagation();var u=a.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});a(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(u).focus()}).on("click.jstree",".jstree-leaf > .jstree-ocl",a.proxy(function(t){t.stopImmediatePropagation();var u=a.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});a(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(u).focus()},this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",a.proxy(function(t){t.stopImmediatePropagation();if(!this.is_disabled(t.currentTarget)){this.hover_node(t.currentTarget)}return false},this)).on("mouseleave.jstree",".jstree-node",a.proxy(function(t){this.dehover_node(t.currentTarget)},this))};this.teardown=function(){if(this.settings.wholerow){this.element.find(".jstree-wholerow").remove()}s.teardown.call(this)};this.redraw_node=function(w,u,t,v){w=s.redraw_node.apply(this,arguments);if(w){var x=i.cloneNode(true);if(a.inArray(w.id,this._data.core.selected)!==-1){x.className+=" jstree-wholerow-clicked"}if(this._data.core.focused&&this._data.core.focused===w.id){x.className+=" jstree-wholerow-hovered"}w.insertBefore(x,w.childNodes[0])}return w}};if(j.registerElement&&Object&&Object.create){var m=Object.create(HTMLElement.prototype);m.createdCallback=function(){var r={core:{},plugins:[]},s;for(s in a.jstree.plugins){if(a.jstree.plugins.hasOwnProperty(s)&&this.attributes[s]){r.plugins.push(s);if(this.getAttribute(s)&&JSON.parse(this.getAttribute(s))){r[s]=JSON.parse(this.getAttribute(s))}}}for(s in a.jstree.defaults.core){if(a.jstree.defaults.core.hasOwnProperty(s)&&this.attributes[s]){r.core[s]=JSON.parse(this.getAttribute(s))||this.getAttribute(s)}}a(this).jstree(r)};try{j.registerElement("vakata-jstree",{prototype:m})}catch(k){}}}));
(function(a,d){var c=/[<>&\r\n"']/gm;var b={"<":"lt;",">":"gt;","&":"amp;","\r":"#13;","\n":"#10;",'"':"quot;","'":"#39;"};a.extend({fileDownload:function(l,v){var y=a.extend({preparingMessageHtml:null,failMessageHtml:null,androidPostUnsupportedMessageHtml:"Unfortunately your Android browser doesn't support this type of file download. Please try again with a different browser.",dialogOptions:{modal:true},prepareCallback:function(A){},successCallback:function(A){},abortCallback:function(A){},failCallback:function(B,C,A){},httpMethod:"GET",data:null,checkInterval:100,cookieName:"fileDownload",cookieValue:"true",cookiePath:"/",cookieDomain:null,popupWindowTitle:"Initiating file download...",encodeHTMLEntities:true},v);var j=new a.Deferred();var z=(navigator.userAgent||navigator.vendor||d.opera).toLowerCase();var t;var s;var u;if(/ip(ad|hone|od)/.test(z)){t=true}else{if(z.indexOf("android")!==-1){s=true}else{u=/avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|playbook|silk|iemobile|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(z)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(z.substr(0,4))}}var q=y.httpMethod.toUpperCase();if(s&&q!=="GET"&&y.androidPostUnsupportedMessageHtml){if(a().dialog){a("<div>").html(y.androidPostUnsupportedMessageHtml).dialog(y.dialogOptions)}else{alert(y.androidPostUnsupportedMessageHtml)}return j.reject()}var g=null;var r={onPrepare:function(A){if(y.preparingMessageHtml){g=a("<div>").html(y.preparingMessageHtml).dialog(y.dialogOptions)}else{if(y.prepareCallback){y.prepareCallback(A)}}},onSuccess:function(A){if(g){g.dialog("close")}y.successCallback(A);j.resolve(A)},onAbort:function(A){if(g){g.dialog("close")}y.abortCallback(A);j.reject(A)},onFail:function(B,C,A){if(g){g.dialog("close")}if(y.failMessageHtml){a("<div>").html(y.failMessageHtml).dialog(y.dialogOptions)}y.failCallback(B,C,A);j.reject(B,C)}};r.onPrepare(l);if(y.data!==null&&typeof y.data!=="string"){y.data=a.param(y.data)}var f,k,m,e;if(q==="GET"){if(y.data!==null){var x=l.indexOf("?");if(x!==-1){if(l.substring(l.length-1)!=="&"){l=l+"&"}}else{l=l+"?"}l=l+y.data}if(t||s){k=d.open(l);k.document.title=y.popupWindowTitle;d.focus()}else{if(u){d.location(l)}else{f=a("<iframe>").hide().prop("src",l).appendTo("body")}}}else{var n="";if(y.data!==null){a.each(y.data.replace(/\+/g," ").split("&"),function(){var C=this.split("=");var A=C[0];C.shift();var D=C.join("=");C=[A,D];var B=y.encodeHTMLEntities?p(decodeURIComponent(C[0])):decodeURIComponent(C[0]);if(B){var E=y.encodeHTMLEntities?p(decodeURIComponent(C[1])):decodeURIComponent(C[1]);n+='<input type="hidden" name="'+B+'" value="'+E+'" />'}})}if(u){e=a("<form>").appendTo("body");e.hide().prop("method",y.httpMethod).prop("action",l).html(n)}else{if(t){k=d.open("about:blank");k.document.title=y.popupWindowTitle;m=k.document;d.focus()}else{f=a("<iframe style='display: none' src='about:blank'></iframe>").appendTo("body");m=o(f)}m.write("<html><head></head><body><form method='"+y.httpMethod+"' action='"+l+"'>"+n+"</form>"+y.popupWindowTitle+"</body></html>");e=a(m).find("form")}e.submit()}setTimeout(h,y.checkInterval);function h(){var C=y.cookieValue;if(typeof C=="string"){C=C.toLowerCase()}var H=y.cookieName.toLowerCase()+"="+C;if(document.cookie.toLowerCase().indexOf(H)>-1){r.onSuccess(l);var B=y.cookieName+"=; path="+y.cookiePath+"; expires="+new Date(0).toUTCString()+";";if(y.cookieDomain){B+=" domain="+y.cookieDomain+";"}document.cookie=B;i(false);return}if(k||f){try{var F=k?k.document:o(f);if(F&&F.body!==null&&F.body.innerHTML.length){var G=true;if(e&&e.length){var A=a(F.body).contents().first();try{if(A.length&&A[0]===e[0]){G=false}}catch(D){if(D&&D.number==-2146828218){G=true}else{throw D}}}if(G){setTimeout(function(){r.onFail(F.body.innerHTML,l);i(true)},100);return}}}catch(E){r.onFail("",l,E);i(true);return}}setTimeout(h,y.checkInterval)}function o(A){var B=A[0].contentWindow||A[0].contentDocument;if(B.document){B=B.document}return B}function i(A){setTimeout(function(){if(k){if(s){k.close()}if(t){if(k.focus){k.focus();if(A){k.close()}}}}},0)}function p(A){return A.replace(c,function(B){return"&"+b[B]})}var w=j.promise();w.abort=function(){i();f.attr("src","").html("");r.onAbort(l)};return w}})})(jQuery,this||window);
(function(a){a.fn.sort_map=function(b,j,g,e,k){var f=[];var d=0;var h;h=b.slice(0).sort(j);if(k===a.fn.sortTable.dir.DESC){h=h.reverse()}for(var c=0;c<b.length;c++){d=a.inArray(b[c],h);while(a.inArray(d,f)!=-1){d++}f.push(d)}return f};a.fn.apply_sort_map=function(b,e){var c=b.slice(0),f=0;for(var d=0;d<e.length;d++){f=e[d];c[f]=b[d]}return c};a.fn.sortTable=function(b){return this.each(function(){var c=a(this);b=b||{};c.find("th[data-sort]").children("a").bind("click ",function(f){var g=false;var d=a(this).parent("th");a.fn.sortsTable(c,d,b,g)})})};a.fn.sortsTable=function(o,e,k,h){var c=e;var b=o;k=a.extend({},a.fn.sortTable.default_sort_functions,k);if(c!==undefined&&b!==undefined){var s=b.children("tbody").children("tr");var t=s.find(".rhea-metadata");s=s.not(".rhea-metadata");var p=0;var f=a.fn.sortTable.dir;var n=b.find("th");var q=b.find("thead tr");if(q[1]!=null){n=a(q[1]).find("th")}n.slice(0,a(c).index()).each(function(){var v=a(this).attr("colspan")||1;p+=parseInt(v,10)});var m=a(c).data("sort-dir")===f.ASC?f.DESC:f.ASC;if(h==true){m=a(c).data("sort-dir")===f.ASC?f.ASC:f.DESC}if(m==f.DESC){var u=a(c).data("sort-desc")||a(c).data("sort")||null}else{var u=a(c).data("sort")||null}if(u===null){return}b.trigger("beforetablesort",{column:p,direction:m});b.css("display");a.blockUI(a.zeusValidate.blockUIoptions);var d=[];var l=k[u];s.each(function(w,z){var v=a(z).children().eq(p);var y=v.data("sort-value");var x=typeof(y)!=="undefined"?y:v.text();d.push(x)});var i=!!a(c).data("sort-dir")&&!a(c).data("sort-desc");if(h==true){i=false}var r=a.fn.sort_map(d,l,i,h,m);b.find("th").data("sort-dir",null).removeClass("sorting-desc sorting-asc");a(c).data("sort-dir",m).addClass("sorting-"+m);var j=a(a.fn.apply_sort_map(s,r));j.append(t);b.children("tbody").append(j);var g=new RegExp(">[ \t\r\n\v\f]*<","g");b.trigger("aftertablesort",{column:p,direction:m});b.css("display");a.unblockUI()}};a.fn.sortTable.dir={ASC:"asc",DESC:"desc"};a.fn.sortTable.default_sort_functions={"int":function(c,e){var d=parseInt(c,10);var f=parseInt(e,10);if(isNaN(d)){d=0}if(isNaN(f)){f=0}return d-f},"float":function(c,e){var d=parseFloat(c);var f=parseFloat(e);if(isNaN(d)){d=0}if(isNaN(f)){f=0}return d-f},string:function(c,d){c=c.toLowerCase().replace(/[^a-z0-9]/gi,"").replace(/[_\s]/g,"-");d=d.toLowerCase().replace(/[^a-z0-9]/gi,"").replace(/[_\s]/g,"-");if(c<d){return -1}if(c>d){return 1}return 0},"string-ins":function(c,d){c=c.toLowerCase();d=d.toLowerCase();if(c<d){return -1}if(c>d){return 1}return 0},date:function(c,e){var d=a.fn.sortTable.getDateDDMMYYYY(c);var f=a.fn.sortTable.getDateDDMMYYYY(e);return d-f}};a.fn.sortTable.dateFromString=function(h){var e=["january","february","march",,"april","may","june","july","august","september","october","november","december"];var f="^([a-zA-Z]{3})\\s*(\\d{1,2}),\\s*(\\d{4})$";var g=RegExp(f);var b=g.exec(h).slice(1);var i=b[2];var d=a.inArray(b[0].toLowerCase(),e);var c=b[1];return new Date(i,d,c)};a.fn.sortTable.getDateDDMMYYYY=function(b){return Date.parse(b)}})(jQuery);